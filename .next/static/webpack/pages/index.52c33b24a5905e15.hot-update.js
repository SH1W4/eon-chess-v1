"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/shared/engine/ChessEngineBase.ts":
/*!**********************************************!*\
  !*** ./src/shared/engine/ChessEngineBase.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChessEngineBase\": function() { return /* binding */ ChessEngineBase; }\n/* harmony export */ });\n/* harmony import */ var chess_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chess.js */ \"./node_modules/chess.js/dist/esm/chess.js\");\n/* harmony import */ var _constants_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants/game */ \"./src/shared/constants/game.ts\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! events */ \"./node_modules/next/dist/compiled/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass ChessEngineBase {\n    // Estado do jogo\n    getBoard() {\n        const board = this.game.board();\n        return board.map((row)=>row.map((square)=>square ? {\n                    type: square.type,\n                    color: square.color === \"w\" ? \"white\" : \"black\"\n                } : null));\n    }\n    getFEN() {\n        return this.game.fen();\n    }\n    setFEN(fen) {\n        try {\n            // Na nova versão do chess.js, load() já valida o FEN\n            this.game.load(fen);\n            this.emitEvent({\n                type: \"POSITION_CHANGED\",\n                fen\n            });\n        } catch (e) {\n            throw new Error(\"Invalid FEN string\");\n        }\n    }\n    // Movimentos\n    getPossibleMoves(position) {\n        const moves = this.game.moves({\n            square: this.positionToSquare(position),\n            verbose: true\n        });\n        return moves.map((move)=>({\n                from: this.squareToPosition(move.from),\n                to: this.squareToPosition(move.to),\n                piece: {\n                    type: move.piece,\n                    color: this.getCurrentPlayer()\n                },\n                captured: move.captured ? {\n                    type: move.captured,\n                    color: this.getCurrentPlayer() === \"white\" ? \"black\" : \"white\"\n                } : undefined,\n                promotion: move.promotion\n            }));\n    }\n    makeMove(from, to) {\n        // Primeiro valida se o movimento é possível\n        if (!this.isValidMove(from, to)) {\n            return false;\n        }\n        const move = this.game.move({\n            from: this.positionToSquare(from),\n            to: this.positionToSquare(to),\n            promotion: \"q\" // Auto-promove para rainha por padrão\n        });\n        if (move) {\n            const chessMove = {\n                from,\n                to,\n                piece: {\n                    type: move.piece,\n                    color: move.color === \"w\" ? \"white\" : \"black\"\n                },\n                captured: move.captured ? {\n                    type: move.captured,\n                    color: move.color === \"w\" ? \"black\" : \"white\"\n                } : undefined,\n                promotion: move.promotion\n            };\n            this.emitEvent({\n                type: \"MOVE_MADE\",\n                move: chessMove\n            });\n            if (this.isCheck()) {\n                this.emitEvent({\n                    type: \"CHECK\",\n                    kingPosition: this.findKing(this.getCurrentPlayer())\n                });\n            }\n            if (this.isGameOver()) {\n                let result = \"draw\";\n                if (this.isCheckmate()) {\n                    result = this.getCurrentPlayer() === \"white\" ? \"black\" : \"white\";\n                }\n                this.emitEvent({\n                    type: \"GAME_OVER\",\n                    result\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    undoLastMove() {\n        const move = this.game.undo();\n        if (move) {\n            this.emitEvent({\n                type: \"POSITION_CHANGED\",\n                fen: this.getFEN()\n            });\n            return true;\n        }\n        return false;\n    }\n    // Estado do jogo\n    isCheck() {\n        return this.game.isCheck();\n    }\n    isCheckmate() {\n        return this.game.isCheckmate();\n    }\n    isDraw() {\n        return this.game.isDraw();\n    }\n    isGameOver() {\n        return this.game.isGameOver();\n    }\n    getCurrentPlayer() {\n        const turn = this.game.turn();\n        return turn === \"w\" ? \"white\" : \"black\";\n    }\n    // Avaliação e análise\n    evaluatePosition() {\n        // Implementação básica de avaliação\n        const weights = this.options.evaluationParameters || {\n            materialWeight: 1,\n            positionWeight: 0.1,\n            mobilityWeight: 0.1,\n            kingSafetyWeight: 0.2,\n            pawnStructureWeight: 0.1\n        };\n        let score = 0;\n        // Material\n        score += this.evaluateMaterial() * weights.materialWeight;\n        // Posição das peças\n        score += this.evaluatePiecePositions() * weights.positionWeight;\n        // Mobilidade\n        score += this.evaluateMobility() * weights.mobilityWeight;\n        // Segurança do rei\n        score += this.evaluateKingSafety() * weights.kingSafetyWeight;\n        // Estrutura de peões\n        score += this.evaluatePawnStructure() * weights.pawnStructureWeight;\n        return score;\n    }\n    evaluatePiecePositions() {\n        // Simple piece-square tables evaluation\n        const pieceSquareValues = {\n            p: [\n                [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ],\n                [\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50\n                ],\n                [\n                    10,\n                    10,\n                    20,\n                    30,\n                    30,\n                    20,\n                    10,\n                    10\n                ],\n                [\n                    5,\n                    5,\n                    10,\n                    25,\n                    25,\n                    10,\n                    5,\n                    5\n                ],\n                [\n                    0,\n                    0,\n                    0,\n                    20,\n                    20,\n                    0,\n                    0,\n                    0\n                ],\n                [\n                    5,\n                    -5,\n                    -10,\n                    0,\n                    0,\n                    -10,\n                    -5,\n                    5\n                ],\n                [\n                    5,\n                    10,\n                    10,\n                    -20,\n                    -20,\n                    10,\n                    10,\n                    5\n                ],\n                [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ]\n            ],\n            n: [\n                [\n                    -50,\n                    -40,\n                    -30,\n                    -30,\n                    -30,\n                    -30,\n                    -40,\n                    -50\n                ],\n                [\n                    -40,\n                    -20,\n                    0,\n                    0,\n                    0,\n                    0,\n                    -20,\n                    -40\n                ],\n                [\n                    -30,\n                    0,\n                    10,\n                    15,\n                    15,\n                    10,\n                    0,\n                    -30\n                ],\n                [\n                    -30,\n                    5,\n                    15,\n                    20,\n                    20,\n                    15,\n                    5,\n                    -30\n                ],\n                [\n                    -30,\n                    0,\n                    15,\n                    20,\n                    20,\n                    15,\n                    0,\n                    -30\n                ],\n                [\n                    -30,\n                    5,\n                    10,\n                    15,\n                    15,\n                    10,\n                    5,\n                    -30\n                ],\n                [\n                    -40,\n                    -20,\n                    0,\n                    5,\n                    5,\n                    0,\n                    -20,\n                    -40\n                ],\n                [\n                    -50,\n                    -40,\n                    -30,\n                    -30,\n                    -30,\n                    -30,\n                    -40,\n                    -50\n                ]\n            ],\n            b: [\n                [\n                    -20,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -20\n                ],\n                [\n                    -10,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    0,\n                    5,\n                    10,\n                    10,\n                    5,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    5,\n                    5,\n                    10,\n                    10,\n                    5,\n                    5,\n                    -10\n                ],\n                [\n                    -10,\n                    0,\n                    10,\n                    10,\n                    10,\n                    10,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    -10\n                ],\n                [\n                    -10,\n                    5,\n                    0,\n                    0,\n                    0,\n                    0,\n                    5,\n                    -10\n                ],\n                [\n                    -20,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -20\n                ]\n            ]\n        };\n        let score = 0;\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece) {\n                    const pieceTable = pieceSquareValues[piece.type];\n                    if (pieceTable) {\n                        const positionValue = pieceTable[piece.color === \"w\" ? row : 7 - row][col];\n                        score += piece.color === \"w\" ? positionValue : -positionValue;\n                    }\n                }\n            }\n        }\n        return score;\n    }\n    getBestMove(depth) {\n        // TODO: Implementar busca minimax com poda alpha-beta\n        return null;\n    }\n    getGameHistory() {\n        return this.game.history({\n            verbose: true\n        }).map((move)=>({\n                from: this.squareToPosition(move.from),\n                to: this.squareToPosition(move.to),\n                piece: {\n                    type: move.piece,\n                    color: move.color === \"w\" ? \"white\" : \"black\"\n                },\n                captured: move.captured ? {\n                    type: move.captured,\n                    color: move.color === \"w\" ? \"black\" : \"white\"\n                } : undefined,\n                promotion: move.promotion\n            }));\n    }\n    // Validação\n    isValidMove(from, to) {\n        const moves = this.getPossibleMoves(from);\n        return moves.some((move)=>move.to.row === to.row && move.to.col === to.col);\n    }\n    isValidPosition(position) {\n        return position.row >= 0 && position.row < 8 && position.col >= 0 && position.col < 8;\n    }\n    // Utilidades\n    reset() {\n        this.game.reset();\n        this.positionCache.clear();\n        this.emitEvent({\n            type: \"POSITION_CHANGED\",\n            fen: this.getFEN()\n        });\n    }\n    clone() {\n        const clonedEngine = new ChessEngineBase(this.options);\n        clonedEngine.setFEN(this.getFEN());\n        return clonedEngine;\n    }\n    // Métodos protegidos auxiliares\n    positionToSquare(position) {\n        const file = String.fromCharCode(\"a\".charCodeAt(0) + position.col);\n        const rank = 8 - position.row;\n        return \"\".concat(file).concat(rank);\n    }\n    squareToPosition(square) {\n        const col = square.charCodeAt(0) - \"a\".charCodeAt(0);\n        const row = 8 - parseInt(square[1]);\n        return {\n            row,\n            col\n        };\n    }\n    findKing(color) {\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece && piece.type === \"k\" && piece.color === (color === \"white\" ? \"w\" : \"b\")) {\n                    return {\n                        row,\n                        col\n                    };\n                }\n            }\n        }\n        throw new Error(\"King not found\");\n    }\n    emitEvent(event) {\n        this.eventEmitter.emit(\"engine-event\", event);\n    }\n    // Métodos de avaliação\n    evaluateMaterial() {\n        const pieceValues = {\n            p: 1,\n            n: 3,\n            b: 3,\n            r: 5,\n            q: 9,\n            k: 0\n        };\n        let score = 0;\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece) {\n                    const value = pieceValues[piece.type];\n                    score += piece.color === \"w\" ? value : -value;\n                }\n            }\n        }\n        return score;\n    }\n    evaluateMobility() {\n        const whiteMoves = this.game.moves().length;\n        // Clona o jogo para ver os movimentos do oponente\n        const tempGame = new chess_js__WEBPACK_IMPORTED_MODULE_0__.Chess(this.game.fen());\n        tempGame.load(this.game.fen().replace(\" w \", \" b \"));\n        const blackMoves = tempGame.moves().length;\n        return whiteMoves - blackMoves;\n    }\n    evaluateKingSafety() {\n        // TODO: Implementar avaliação de segurança do rei\n        return 0;\n    }\n    evaluatePawnStructure() {\n        // TODO: Implementar avaliação de estrutura de peões\n        return 0;\n    }\n    // Event handlers\n    on(eventName, handler) {\n        this.eventEmitter.on(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.eventEmitter.off(eventName, handler);\n    }\n    constructor(options = {}){\n        this.game = new chess_js__WEBPACK_IMPORTED_MODULE_0__.Chess(options.startPosition || _constants_game__WEBPACK_IMPORTED_MODULE_1__.INITIAL_FEN);\n        this.options = options;\n        this.eventEmitter = new (events__WEBPACK_IMPORTED_MODULE_2___default())();\n        this.positionCache = new Map();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0EsQ0FBQyxJQUFJLENBQUNNLElBQUksQ0FBQ08sR0FBRztRQUN4Q2tGLFNBQVNoRixJQUFJLENBQUMsSUFBSSxDQUFDVCxJQUFJLENBQUNPLEdBQUcsR0FBR21GLE9BQU8sQ0FBQyxPQUFPO1FBQzdDLE1BQU1DLGFBQWFGLFNBQVMxRSxLQUFLLEdBQUd5RSxNQUFNO1FBRTFDLE9BQU9ELGFBQWFJO0lBQ3RCO0lBRVF0QyxxQkFBNkI7UUFDbkMsa0RBQWtEO1FBQ2xELE9BQU87SUFDVDtJQUVRQyx3QkFBZ0M7UUFDdEMsb0RBQW9EO1FBQ3BELE9BQU87SUFDVDtJQUVBLGlCQUFpQjtJQUNqQnNDLEdBQUdDLFNBQWlCLEVBQUVDLE9BQXFDLEVBQVE7UUFDakUsSUFBSSxDQUFDZCxZQUFZLENBQUNZLEVBQUUsQ0FBQ0MsV0FBV0M7SUFDbEM7SUFFQUMsSUFBSUYsU0FBaUIsRUFBRUMsT0FBcUMsRUFBUTtRQUNsRSxJQUFJLENBQUNkLFlBQVksQ0FBQ2UsR0FBRyxDQUFDRixXQUFXQztJQUNuQztJQTVXQUUsWUFBWXRELFVBQXlCLENBQUMsQ0FBQyxDQUFFO1FBQ3ZDLElBQUksQ0FBQzFDLElBQUksR0FBRyxJQUFJTiwyQ0FBS0EsQ0FBQ2dELFFBQVF1RCxhQUFhLElBQUl0Ryx3REFBV0E7UUFDMUQsSUFBSSxDQUFDK0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ3NDLFlBQVksR0FBRyxJQUFJcEYsK0NBQVlBO1FBQ3BDLElBQUksQ0FBQ3lFLGFBQWEsR0FBRyxJQUFJNkI7SUFDM0I7QUF3V0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvc2hhcmVkL2VuZ2luZS9DaGVzc0VuZ2luZUJhc2UudHM/ZjI0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGVzcyB9IGZyb20gJ2NoZXNzLmpzJztcbmltcG9ydCB7IFxuICBDaGVzc0VuZ2luZSwgXG4gIEVuZ2luZU9wdGlvbnMsIFxuICBFbmdpbmVBbmFseXNpcyxcbiAgRW5naW5lRXZlbnQgXG59IGZyb20gJy4uL3R5cGVzL2VuZ2luZSc7XG5pbXBvcnQgeyBcbiAgQ2hlc3NQb3NpdGlvbiwgXG4gIENoZXNzUGllY2UsIFxuICBDaGVzc01vdmUgXG59IGZyb20gJy4uL3R5cGVzL2NoZXNzJztcbmltcG9ydCB7IElOSVRJQUxfRkVOIH0gZnJvbSAnLi4vY29uc3RhbnRzL2dhbWUnO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xuXG5leHBvcnQgY2xhc3MgQ2hlc3NFbmdpbmVCYXNlIGltcGxlbWVudHMgQ2hlc3NFbmdpbmUge1xuICBwcm90ZWN0ZWQgZ2FtZTogQ2hlc3M7XG4gIHByb3RlY3RlZCBvcHRpb25zOiBFbmdpbmVPcHRpb25zO1xuICBwcm90ZWN0ZWQgZXZlbnRFbWl0dGVyOiBFdmVudEVtaXR0ZXI7XG4gIHByb3RlY3RlZCBwb3NpdGlvbkNhY2hlOiBNYXA8c3RyaW5nLCBFbmdpbmVBbmFseXNpcz47XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogRW5naW5lT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5nYW1lID0gbmV3IENoZXNzKG9wdGlvbnMuc3RhcnRQb3NpdGlvbiB8fCBJTklUSUFMX0ZFTik7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLnBvc2l0aW9uQ2FjaGUgPSBuZXcgTWFwKCk7XG4gIH1cblxuICAvLyBFc3RhZG8gZG8gam9nb1xuICBnZXRCb2FyZCgpOiBDaGVzc1BpZWNlW11bXSB7XG4gICAgY29uc3QgYm9hcmQgPSB0aGlzLmdhbWUuYm9hcmQoKTtcbiAgICByZXR1cm4gYm9hcmQubWFwKHJvdyA9PiBcbiAgICAgIHJvdy5tYXAoc3F1YXJlID0+IFxuICAgICAgICBzcXVhcmUgPyB7XG4gICAgICAgICAgdHlwZTogc3F1YXJlLnR5cGUgYXMgUGllY2VUeXBlLFxuICAgICAgICAgIGNvbG9yOiBzcXVhcmUuY29sb3IgPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICAgIH0gOiBudWxsXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGdldEZFTigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdhbWUuZmVuKCk7XG4gIH1cblxuICBzZXRGRU4oZmVuOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8gTmEgbm92YSB2ZXJzw6NvIGRvIGNoZXNzLmpzLCBsb2FkKCkgasOhIHZhbGlkYSBvIEZFTlxuICAgICAgdGhpcy5nYW1lLmxvYWQoZmVuKTtcbiAgICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICAgIHR5cGU6ICdQT1NJVElPTl9DSEFOR0VEJywgXG4gICAgICAgIGZlbiBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBGRU4gc3RyaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gTW92aW1lbnRvc1xuICBnZXRQb3NzaWJsZU1vdmVzKHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKTogQ2hlc3NNb3ZlW10ge1xuICAgIGNvbnN0IG1vdmVzID0gdGhpcy5nYW1lLm1vdmVzKHsgXG4gICAgICBzcXVhcmU6IHRoaXMucG9zaXRpb25Ub1NxdWFyZShwb3NpdGlvbiksXG4gICAgICB2ZXJib3NlOiB0cnVlIFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1vdmVzLm1hcChtb3ZlID0+ICh7XG4gICAgICBmcm9tOiB0aGlzLnNxdWFyZVRvUG9zaXRpb24obW92ZS5mcm9tKSxcbiAgICAgIHRvOiB0aGlzLnNxdWFyZVRvUG9zaXRpb24obW92ZS50byksXG4gICAgICBwaWVjZToge1xuICAgICAgICB0eXBlOiBtb3ZlLnBpZWNlLFxuICAgICAgICBjb2xvcjogdGhpcy5nZXRDdXJyZW50UGxheWVyKClcbiAgICAgIH0sXG4gICAgICBjYXB0dXJlZDogbW92ZS5jYXB0dXJlZCA/IHtcbiAgICAgICAgdHlwZTogbW92ZS5jYXB0dXJlZCxcbiAgICAgICAgY29sb3I6IHRoaXMuZ2V0Q3VycmVudFBsYXllcigpID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZSdcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICBwcm9tb3Rpb246IG1vdmUucHJvbW90aW9uLFxuICAgIH0pKTtcbiAgfVxuXG4gIG1ha2VNb3ZlKGZyb206IENoZXNzUG9zaXRpb24sIHRvOiBDaGVzc1Bvc2l0aW9uKTogYm9vbGVhbiB7XG4gICAgLy8gUHJpbWVpcm8gdmFsaWRhIHNlIG8gbW92aW1lbnRvIMOpIHBvc3PDrXZlbFxuICAgIGlmICghdGhpcy5pc1ZhbGlkTW92ZShmcm9tLCB0bykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBtb3ZlID0gdGhpcy5nYW1lLm1vdmUoe1xuICAgICAgZnJvbTogdGhpcy5wb3NpdGlvblRvU3F1YXJlKGZyb20pLFxuICAgICAgdG86IHRoaXMucG9zaXRpb25Ub1NxdWFyZSh0byksXG4gICAgICBwcm9tb3Rpb246ICdxJyAvLyBBdXRvLXByb21vdmUgcGFyYSByYWluaGEgcG9yIHBhZHLDo29cbiAgICB9KTtcblxuICAgIGlmIChtb3ZlKSB7XG4gICAgICBjb25zdCBjaGVzc01vdmU6IENoZXNzTW92ZSA9IHtcbiAgICAgICAgZnJvbSxcbiAgICAgICAgdG8sXG4gICAgICAgIHBpZWNlOiB7XG4gICAgICAgICAgdHlwZTogbW92ZS5waWVjZSxcbiAgICAgICAgICBjb2xvcjogbW92ZS5jb2xvciA9PT0gJ3cnID8gJ3doaXRlJyA6ICdibGFjaydcbiAgICAgICAgfSxcbiAgICAgICAgY2FwdHVyZWQ6IG1vdmUuY2FwdHVyZWQgPyB7XG4gICAgICAgICAgdHlwZTogbW92ZS5jYXB0dXJlZCxcbiAgICAgICAgICBjb2xvcjogbW92ZS5jb2xvciA9PT0gJ3cnID8gJ2JsYWNrJyA6ICd3aGl0ZSdcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvbW90aW9uOiBtb3ZlLnByb21vdGlvbixcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZW1pdEV2ZW50KHsgdHlwZTogJ01PVkVfTUFERScsIG1vdmU6IGNoZXNzTW92ZSB9KTtcblxuICAgICAgaWYgKHRoaXMuaXNDaGVjaygpKSB7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICAgICAgdHlwZTogJ0NIRUNLJyxcbiAgICAgICAgICBraW5nUG9zaXRpb246IHRoaXMuZmluZEtpbmcodGhpcy5nZXRDdXJyZW50UGxheWVyKCkpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9ICdkcmF3JztcbiAgICAgICAgaWYgKHRoaXMuaXNDaGVja21hdGUoKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0Q3VycmVudFBsYXllcigpID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0RXZlbnQoeyB0eXBlOiAnR0FNRV9PVkVSJywgcmVzdWx0IH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB1bmRvTGFzdE1vdmUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbW92ZSA9IHRoaXMuZ2FtZS51bmRvKCk7XG4gICAgaWYgKG1vdmUpIHtcbiAgICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICAgIHR5cGU6ICdQT1NJVElPTl9DSEFOR0VEJyxcbiAgICAgICAgZmVuOiB0aGlzLmdldEZFTigpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBFc3RhZG8gZG8gam9nb1xuICBpc0NoZWNrKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdhbWUuaXNDaGVjaygpO1xuICB9XG5cbiAgaXNDaGVja21hdGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5pc0NoZWNrbWF0ZSgpO1xuICB9XG5cbiAgaXNEcmF3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdhbWUuaXNEcmF3KCk7XG4gIH1cblxuICBpc0dhbWVPdmVyKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdhbWUuaXNHYW1lT3ZlcigpO1xuICB9XG5cbiAgZ2V0Q3VycmVudFBsYXllcigpOiAnd2hpdGUnIHwgJ2JsYWNrJyB7XG4gICAgY29uc3QgdHVybiA9IHRoaXMuZ2FtZS50dXJuKCk7XG4gICAgcmV0dXJuIHR1cm4gPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snO1xuICB9XG5cbiAgLy8gQXZhbGlhw6fDo28gZSBhbsOhbGlzZVxuICBldmFsdWF0ZVBvc2l0aW9uKCk6IG51bWJlciB7XG4gICAgLy8gSW1wbGVtZW50YcOnw6NvIGLDoXNpY2EgZGUgYXZhbGlhw6fDo29cbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5vcHRpb25zLmV2YWx1YXRpb25QYXJhbWV0ZXJzIHx8IHtcbiAgICAgIG1hdGVyaWFsV2VpZ2h0OiAxLFxuICAgICAgcG9zaXRpb25XZWlnaHQ6IDAuMSxcbiAgICAgIG1vYmlsaXR5V2VpZ2h0OiAwLjEsXG4gICAgICBraW5nU2FmZXR5V2VpZ2h0OiAwLjIsXG4gICAgICBwYXduU3RydWN0dXJlV2VpZ2h0OiAwLjFcbiAgICB9O1xuXG4gICAgbGV0IHNjb3JlID0gMDtcblxuICAgIC8vIE1hdGVyaWFsXG4gICAgc2NvcmUgKz0gdGhpcy5ldmFsdWF0ZU1hdGVyaWFsKCkgKiB3ZWlnaHRzLm1hdGVyaWFsV2VpZ2h0O1xuXG4gICAgLy8gUG9zacOnw6NvIGRhcyBwZcOnYXNcbiAgICBzY29yZSArPSB0aGlzLmV2YWx1YXRlUGllY2VQb3NpdGlvbnMoKSAqIHdlaWdodHMucG9zaXRpb25XZWlnaHQ7XG5cbiAgICAvLyBNb2JpbGlkYWRlXG4gICAgc2NvcmUgKz0gdGhpcy5ldmFsdWF0ZU1vYmlsaXR5KCkgKiB3ZWlnaHRzLm1vYmlsaXR5V2VpZ2h0O1xuXG4gICAgLy8gU2VndXJhbsOnYSBkbyByZWlcbiAgICBzY29yZSArPSB0aGlzLmV2YWx1YXRlS2luZ1NhZmV0eSgpICogd2VpZ2h0cy5raW5nU2FmZXR5V2VpZ2h0O1xuXG4gICAgLy8gRXN0cnV0dXJhIGRlIHBlw7Vlc1xuICAgIHNjb3JlICs9IHRoaXMuZXZhbHVhdGVQYXduU3RydWN0dXJlKCkgKiB3ZWlnaHRzLnBhd25TdHJ1Y3R1cmVXZWlnaHQ7XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUGllY2VQb3NpdGlvbnMoKTogbnVtYmVyIHtcbiAgICAvLyBTaW1wbGUgcGllY2Utc3F1YXJlIHRhYmxlcyBldmFsdWF0aW9uXG4gICAgY29uc3QgcGllY2VTcXVhcmVWYWx1ZXMgPSB7XG4gICAgICBwOiBbIC8vIFBhd25zXG4gICAgICAgIFswLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAgMF0sXG4gICAgICAgIFs1MCwgNTAsIDUwLCA1MCwgNTAsIDUwLCA1MCwgNTBdLFxuICAgICAgICBbMTAsIDEwLCAyMCwgMzAsIDMwLCAyMCwgMTAsIDEwXSxcbiAgICAgICAgWzUsICA1LCAxMCwgMjUsIDI1LCAxMCwgIDUsICA1XSxcbiAgICAgICAgWzAsICAwLCAgMCwgMjAsIDIwLCAgMCwgIDAsICAwXSxcbiAgICAgICAgWzUsIC01LC0xMCwgIDAsICAwLC0xMCwgLTUsICA1XSxcbiAgICAgICAgWzUsIDEwLCAxMCwtMjAsLTIwLCAxMCwgMTAsICA1XSxcbiAgICAgICAgWzAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwXVxuICAgICAgXSxcbiAgICAgIG46IFsgLy8gS25pZ2h0c1xuICAgICAgICBbLTUwLC00MCwtMzAsLTMwLC0zMCwtMzAsLTQwLC01MF0sXG4gICAgICAgIFstNDAsLTIwLCAgMCwgIDAsICAwLCAgMCwtMjAsLTQwXSxcbiAgICAgICAgWy0zMCwgIDAsIDEwLCAxNSwgMTUsIDEwLCAgMCwtMzBdLFxuICAgICAgICBbLTMwLCAgNSwgMTUsIDIwLCAyMCwgMTUsICA1LC0zMF0sXG4gICAgICAgIFstMzAsICAwLCAxNSwgMjAsIDIwLCAxNSwgIDAsLTMwXSxcbiAgICAgICAgWy0zMCwgIDUsIDEwLCAxNSwgMTUsIDEwLCAgNSwtMzBdLFxuICAgICAgICBbLTQwLC0yMCwgIDAsICA1LCAgNSwgIDAsLTIwLC00MF0sXG4gICAgICAgIFstNTAsLTQwLC0zMCwtMzAsLTMwLC0zMCwtNDAsLTUwXVxuICAgICAgXSxcbiAgICAgIGI6IFsgLy8gQmlzaG9wc1xuICAgICAgICBbLTIwLC0xMCwtMTAsLTEwLC0xMCwtMTAsLTEwLC0yMF0sXG4gICAgICAgIFstMTAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsLTEwXSxcbiAgICAgICAgWy0xMCwgIDAsICA1LCAxMCwgMTAsICA1LCAgMCwtMTBdLFxuICAgICAgICBbLTEwLCAgNSwgIDUsIDEwLCAxMCwgIDUsICA1LC0xMF0sXG4gICAgICAgIFstMTAsICAwLCAxMCwgMTAsIDEwLCAxMCwgIDAsLTEwXSxcbiAgICAgICAgWy0xMCwgMTAsIDEwLCAxMCwgMTAsIDEwLCAxMCwtMTBdLFxuICAgICAgICBbLTEwLCAgNSwgIDAsICAwLCAgMCwgIDAsICA1LC0xMF0sXG4gICAgICAgIFstMjAsLTEwLC0xMCwtMTAsLTEwLC0xMCwtMTAsLTIwXVxuICAgICAgXVxuICAgIH07XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nYW1lLmJvYXJkKCk7XG5cbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgODsgY29sKyspIHtcbiAgICAgICAgY29uc3QgcGllY2UgPSBib2FyZFtyb3ddW2NvbF07XG4gICAgICAgIGlmIChwaWVjZSkge1xuICAgICAgICAgIGNvbnN0IHBpZWNlVGFibGUgPSBwaWVjZVNxdWFyZVZhbHVlc1twaWVjZS50eXBlIGFzIGtleW9mIHR5cGVvZiBwaWVjZVNxdWFyZVZhbHVlc107XG4gICAgICAgICAgaWYgKHBpZWNlVGFibGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uVmFsdWUgPSBwaWVjZVRhYmxlW3BpZWNlLmNvbG9yID09PSAndycgPyByb3cgOiA3IC0gcm93XVtjb2xdO1xuICAgICAgICAgICAgc2NvcmUgKz0gcGllY2UuY29sb3IgPT09ICd3JyA/IHBvc2l0aW9uVmFsdWUgOiAtcG9zaXRpb25WYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBnZXRCZXN0TW92ZShkZXB0aDogbnVtYmVyKTogQ2hlc3NNb3ZlIHwgbnVsbCB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50YXIgYnVzY2EgbWluaW1heCBjb20gcG9kYSBhbHBoYS1iZXRhXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRHYW1lSGlzdG9yeSgpOiBDaGVzc01vdmVbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5oaXN0b3J5KHsgdmVyYm9zZTogdHJ1ZSB9KS5tYXAobW92ZSA9PiAoe1xuICAgICAgZnJvbTogdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUuZnJvbSksXG4gICAgICB0bzogdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUudG8pLFxuICAgICAgcGllY2U6IHtcbiAgICAgICAgdHlwZTogbW92ZS5waWVjZSxcbiAgICAgICAgY29sb3I6IG1vdmUuY29sb3IgPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICB9LFxuICAgICAgY2FwdHVyZWQ6IG1vdmUuY2FwdHVyZWQgPyB7XG4gICAgICAgIHR5cGU6IG1vdmUuY2FwdHVyZWQsXG4gICAgICAgIGNvbG9yOiBtb3ZlLmNvbG9yID09PSAndycgPyAnYmxhY2snIDogJ3doaXRlJ1xuICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgIHByb21vdGlvbjogbW92ZS5wcm9tb3Rpb24sXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gVmFsaWRhw6fDo29cbiAgaXNWYWxpZE1vdmUoZnJvbTogQ2hlc3NQb3NpdGlvbiwgdG86IENoZXNzUG9zaXRpb24pOiBib29sZWFuIHtcbiAgICBjb25zdCBtb3ZlcyA9IHRoaXMuZ2V0UG9zc2libGVNb3Zlcyhmcm9tKTtcbiAgICByZXR1cm4gbW92ZXMuc29tZShtb3ZlID0+IFxuICAgICAgbW92ZS50by5yb3cgPT09IHRvLnJvdyAmJiBtb3ZlLnRvLmNvbCA9PT0gdG8uY29sXG4gICAgKTtcbiAgfVxuXG4gIGlzVmFsaWRQb3NpdGlvbihwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwb3NpdGlvbi5yb3cgPj0gMCAmJiBwb3NpdGlvbi5yb3cgPCA4ICYmXG4gICAgICAgICAgIHBvc2l0aW9uLmNvbCA+PSAwICYmIHBvc2l0aW9uLmNvbCA8IDg7XG4gIH1cblxuICAvLyBVdGlsaWRhZGVzXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuZ2FtZS5yZXNldCgpO1xuICAgIHRoaXMucG9zaXRpb25DYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICB0eXBlOiAnUE9TSVRJT05fQ0hBTkdFRCcsXG4gICAgICBmZW46IHRoaXMuZ2V0RkVOKClcbiAgICB9KTtcbiAgfVxuXG4gIGNsb25lKCk6IENoZXNzRW5naW5lIHtcbiAgICBjb25zdCBjbG9uZWRFbmdpbmUgPSBuZXcgQ2hlc3NFbmdpbmVCYXNlKHRoaXMub3B0aW9ucyk7XG4gICAgY2xvbmVkRW5naW5lLnNldEZFTih0aGlzLmdldEZFTigpKTtcbiAgICByZXR1cm4gY2xvbmVkRW5naW5lO1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgcHJvdGVnaWRvcyBhdXhpbGlhcmVzXG4gIHByb3RlY3RlZCBwb3NpdGlvblRvU3F1YXJlKHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKTogc3RyaW5nIHtcbiAgICBjb25zdCBmaWxlID0gU3RyaW5nLmZyb21DaGFyQ29kZSgnYScuY2hhckNvZGVBdCgwKSArIHBvc2l0aW9uLmNvbCk7XG4gICAgY29uc3QgcmFuayA9IDggLSBwb3NpdGlvbi5yb3c7XG4gICAgcmV0dXJuIGAke2ZpbGV9JHtyYW5rfWA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3F1YXJlVG9Qb3NpdGlvbihzcXVhcmU6IHN0cmluZyk6IENoZXNzUG9zaXRpb24ge1xuICAgIGNvbnN0IGNvbCA9IHNxdWFyZS5jaGFyQ29kZUF0KDApIC0gJ2EnLmNoYXJDb2RlQXQoMCk7XG4gICAgY29uc3Qgcm93ID0gOCAtIHBhcnNlSW50KHNxdWFyZVsxXSk7XG4gICAgcmV0dXJuIHsgcm93LCBjb2wgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaW5kS2luZyhjb2xvcjogJ3doaXRlJyB8ICdibGFjaycpOiBDaGVzc1Bvc2l0aW9uIHtcbiAgICBjb25zdCBib2FyZCA9IHRoaXMuZ2FtZS5ib2FyZCgpO1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDg7IHJvdysrKSB7XG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA4OyBjb2wrKykge1xuICAgICAgICBjb25zdCBwaWVjZSA9IGJvYXJkW3Jvd11bY29sXTtcbiAgICAgICAgaWYgKHBpZWNlICYmIFxuICAgICAgICAgICAgcGllY2UudHlwZSA9PT0gJ2snICYmIFxuICAgICAgICAgICAgcGllY2UuY29sb3IgPT09IChjb2xvciA9PT0gJ3doaXRlJyA/ICd3JyA6ICdiJykpIHtcbiAgICAgICAgICByZXR1cm4geyByb3csIGNvbCB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignS2luZyBub3QgZm91bmQnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBlbWl0RXZlbnQoZXZlbnQ6IEVuZ2luZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnZW5naW5lLWV2ZW50JywgZXZlbnQpO1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgZGUgYXZhbGlhw6fDo29cbiAgcHJpdmF0ZSBldmFsdWF0ZU1hdGVyaWFsKCk6IG51bWJlciB7XG4gICAgY29uc3QgcGllY2VWYWx1ZXMgPSB7XG4gICAgICBwOiAxLFxuICAgICAgbjogMyxcbiAgICAgIGI6IDMsXG4gICAgICByOiA1LFxuICAgICAgcTogOSxcbiAgICAgIGs6IDBcbiAgICB9O1xuXG4gICAgbGV0IHNjb3JlID0gMDtcbiAgICBjb25zdCBib2FyZCA9IHRoaXMuZ2FtZS5ib2FyZCgpO1xuXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgODsgcm93KyspIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gYm9hcmRbcm93XVtjb2xdO1xuICAgICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBpZWNlVmFsdWVzW3BpZWNlLnR5cGUgYXMga2V5b2YgdHlwZW9mIHBpZWNlVmFsdWVzXTtcbiAgICAgICAgICBzY29yZSArPSBwaWVjZS5jb2xvciA9PT0gJ3cnID8gdmFsdWUgOiAtdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlTW9iaWxpdHkoKTogbnVtYmVyIHtcbiAgICBjb25zdCB3aGl0ZU1vdmVzID0gdGhpcy5nYW1lLm1vdmVzKCkubGVuZ3RoO1xuICAgIC8vIENsb25hIG8gam9nbyBwYXJhIHZlciBvcyBtb3ZpbWVudG9zIGRvIG9wb25lbnRlXG4gICAgY29uc3QgdGVtcEdhbWUgPSBuZXcgQ2hlc3ModGhpcy5nYW1lLmZlbigpKTtcbiAgICB0ZW1wR2FtZS5sb2FkKHRoaXMuZ2FtZS5mZW4oKS5yZXBsYWNlKCcgdyAnLCAnIGIgJykpO1xuICAgIGNvbnN0IGJsYWNrTW92ZXMgPSB0ZW1wR2FtZS5tb3ZlcygpLmxlbmd0aDtcbiAgICBcbiAgICByZXR1cm4gd2hpdGVNb3ZlcyAtIGJsYWNrTW92ZXM7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlS2luZ1NhZmV0eSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGF2YWxpYcOnw6NvIGRlIHNlZ3VyYW7Dp2EgZG8gcmVpXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUGF3blN0cnVjdHVyZSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGF2YWxpYcOnw6NvIGRlIGVzdHJ1dHVyYSBkZSBwZcO1ZXNcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vIEV2ZW50IGhhbmRsZXJzXG4gIG9uKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiAoZXZlbnQ6IEVuZ2luZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudEVtaXR0ZXIub24oZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgfVxuXG4gIG9mZihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBFbmdpbmVFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZihldmVudE5hbWUsIGhhbmRsZXIpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2hlc3MiLCJJTklUSUFMX0ZFTiIsIkV2ZW50RW1pdHRlciIsIkNoZXNzRW5naW5lQmFzZSIsImdldEJvYXJkIiwiYm9hcmQiLCJnYW1lIiwibWFwIiwicm93Iiwic3F1YXJlIiwidHlwZSIsImNvbG9yIiwiZ2V0RkVOIiwiZmVuIiwic2V0RkVOIiwibG9hZCIsImVtaXRFdmVudCIsImUiLCJFcnJvciIsImdldFBvc3NpYmxlTW92ZXMiLCJwb3NpdGlvbiIsIm1vdmVzIiwicG9zaXRpb25Ub1NxdWFyZSIsInZlcmJvc2UiLCJtb3ZlIiwiZnJvbSIsInNxdWFyZVRvUG9zaXRpb24iLCJ0byIsInBpZWNlIiwiZ2V0Q3VycmVudFBsYXllciIsImNhcHR1cmVkIiwidW5kZWZpbmVkIiwicHJvbW90aW9uIiwibWFrZU1vdmUiLCJpc1ZhbGlkTW92ZSIsImNoZXNzTW92ZSIsImlzQ2hlY2siLCJraW5nUG9zaXRpb24iLCJmaW5kS2luZyIsImlzR2FtZU92ZXIiLCJyZXN1bHQiLCJpc0NoZWNrbWF0ZSIsInVuZG9MYXN0TW92ZSIsInVuZG8iLCJpc0RyYXciLCJ0dXJuIiwiZXZhbHVhdGVQb3NpdGlvbiIsIndlaWdodHMiLCJvcHRpb25zIiwiZXZhbHVhdGlvblBhcmFtZXRlcnMiLCJtYXRlcmlhbFdlaWdodCIsInBvc2l0aW9uV2VpZ2h0IiwibW9iaWxpdHlXZWlnaHQiLCJraW5nU2FmZXR5V2VpZ2h0IiwicGF3blN0cnVjdHVyZVdlaWdodCIsInNjb3JlIiwiZXZhbHVhdGVNYXRlcmlhbCIsImV2YWx1YXRlUGllY2VQb3NpdGlvbnMiLCJldmFsdWF0ZU1vYmlsaXR5IiwiZXZhbHVhdGVLaW5nU2FmZXR5IiwiZXZhbHVhdGVQYXduU3RydWN0dXJlIiwicGllY2VTcXVhcmVWYWx1ZXMiLCJwIiwibiIsImIiLCJjb2wiLCJwaWVjZVRhYmxlIiwicG9zaXRpb25WYWx1ZSIsImdldEJlc3RNb3ZlIiwiZGVwdGgiLCJnZXRHYW1lSGlzdG9yeSIsImhpc3RvcnkiLCJzb21lIiwiaXNWYWxpZFBvc2l0aW9uIiwicmVzZXQiLCJwb3NpdGlvbkNhY2hlIiwiY2xlYXIiLCJjbG9uZSIsImNsb25lZEVuZ2luZSIsImZpbGUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwicmFuayIsInBhcnNlSW50IiwiZXZlbnQiLCJldmVudEVtaXR0ZXIiLCJlbWl0IiwicGllY2VWYWx1ZXMiLCJyIiwicSIsImsiLCJ2YWx1ZSIsIndoaXRlTW92ZXMiLCJsZW5ndGgiLCJ0ZW1wR2FtZSIsInJlcGxhY2UiLCJibGFja01vdmVzIiwib24iLCJldmVudE5hbWUiLCJoYW5kbGVyIiwib2ZmIiwiY29uc3RydWN0b3IiLCJzdGFydFBvc2l0aW9uIiwiTWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/shared/engine/ChessEngineBase.ts\n"));

/***/ })

});