/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/index"],{

/***/ "./node_modules/chess.js/dist/esm/chess.js":
/*!*************************************************!*\
  !*** ./node_modules/chess.js/dist/esm/chess.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BISHOP\": function() { return /* binding */ BISHOP; },\n/* harmony export */   \"BLACK\": function() { return /* binding */ BLACK; },\n/* harmony export */   \"Chess\": function() { return /* binding */ Chess; },\n/* harmony export */   \"DEFAULT_POSITION\": function() { return /* binding */ DEFAULT_POSITION; },\n/* harmony export */   \"KING\": function() { return /* binding */ KING; },\n/* harmony export */   \"KNIGHT\": function() { return /* binding */ KNIGHT; },\n/* harmony export */   \"PAWN\": function() { return /* binding */ PAWN; },\n/* harmony export */   \"QUEEN\": function() { return /* binding */ QUEEN; },\n/* harmony export */   \"ROOK\": function() { return /* binding */ ROOK; },\n/* harmony export */   \"SQUARES\": function() { return /* binding */ SQUARES; },\n/* harmony export */   \"WHITE\": function() { return /* binding */ WHITE; },\n/* harmony export */   \"validateFen\": function() { return /* binding */ validateFen; }\n/* harmony export */ });\n/**\n * @license\n * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\nconst WHITE = 'w';\nconst BLACK = 'b';\nconst PAWN = 'p';\nconst KNIGHT = 'n';\nconst BISHOP = 'b';\nconst ROOK = 'r';\nconst QUEEN = 'q';\nconst KING = 'k';\nconst DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\nconst EMPTY = -1;\nconst FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q',\n};\n// prettier-ignore\nconst SQUARES = [\n    'a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8',\n    'a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7',\n    'a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6',\n    'a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5',\n    'a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4',\n    'a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3',\n    'a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2',\n    'a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1'\n];\nconst BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64,\n};\n/*\n * NOTES ABOUT 0x88 MOVE GENERATION ALGORITHM\n * ----------------------------------------------------------------------------\n * From https://github.com/jhlywa/chess.js/issues/230\n *\n * A lot of people are confused when they first see the internal representation\n * of chess.js. It uses the 0x88 Move Generation Algorithm which internally\n * stores the board as an 8x16 array. This is purely for efficiency but has a\n * couple of interesting benefits:\n *\n * 1. 0x88 offers a very inexpensive \"off the board\" check. Bitwise AND (&) any\n *    square with 0x88, if the result is non-zero then the square is off the\n *    board. For example, assuming a knight square A8 (0 in 0x88 notation),\n *    there are 8 possible directions in which the knight can move. These\n *    directions are relative to the 8x16 board and are stored in the\n *    PIECE_OFFSETS map. One possible move is A8 - 18 (up one square, and two\n *    squares to the left - which is off the board). 0 - 18 = -18 & 0x88 = 0x88\n *    (because of two-complement representation of -18). The non-zero result\n *    means the square is off the board and the move is illegal. Take the\n *    opposite move (from A8 to C7), 0 + 18 = 18 & 0x88 = 0. A result of zero\n *    means the square is on the board.\n *\n * 2. The relative distance (or difference) between two squares on a 8x16 board\n *    is unique and can be used to inexpensively determine if a piece on a\n *    square can attack any other arbitrary square. For example, let's see if a\n *    pawn on E7 can attack E2. The difference between E7 (20) - E2 (100) is\n *    -80. We add 119 to make the ATTACKS array index non-negative (because the\n *    worst case difference is A8 - H1 = -119). The ATTACKS array contains a\n *    bitmask of pieces that can attack from that distance and direction.\n *    ATTACKS[-80 + 119=39] gives us 24 or 0b11000 in binary. Look at the\n *    PIECE_MASKS map to determine the mask for a given piece type. In our pawn\n *    example, we would check to see if 24 & 0x1 is non-zero, which it is\n *    not. So, naturally, a pawn on E7 can't attack a piece on E2. However, a\n *    rook can since 24 & 0x8 is non-zero. The only thing left to check is that\n *    there are no blocking pieces between E7 and E2. That's where the RAYS\n *    array comes in. It provides an offset (in this case 16) to add to E7 (20)\n *    to check for blocking pieces. E7 (20) + 16 = E6 (36) + 16 = E5 (52) etc.\n */\n// prettier-ignore\n// eslint-disable-next-line\nconst Ox88 = {\n    a8: 0, b8: 1, c8: 2, d8: 3, e8: 4, f8: 5, g8: 6, h8: 7,\n    a7: 16, b7: 17, c7: 18, d7: 19, e7: 20, f7: 21, g7: 22, h7: 23,\n    a6: 32, b6: 33, c6: 34, d6: 35, e6: 36, f6: 37, g6: 38, h6: 39,\n    a5: 48, b5: 49, c5: 50, d5: 51, e5: 52, f5: 53, g5: 54, h5: 55,\n    a4: 64, b4: 65, c4: 66, d4: 67, e4: 68, f4: 69, g4: 70, h4: 71,\n    a3: 80, b3: 81, c3: 82, d3: 83, e3: 84, f3: 85, g3: 86, h3: 87,\n    a2: 96, b2: 97, c2: 98, d2: 99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n};\nconst PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15],\n};\nconst PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14, 18, 33, 31, 14],\n    b: [-17, -15, 17, 15],\n    r: [-16, 1, 16, -1],\n    q: [-17, -16, -15, 1, 17, 16, 15, -1],\n    k: [-17, -16, -15, 1, 17, 16, 15, -1],\n};\n// prettier-ignore\nconst ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24, 24, 24, 24, 24, 24, 56, 0, 56, 24, 24, 24, 24, 24, 24, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20\n];\n// prettier-ignore\nconst RAYS = [\n    17, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 15, 0,\n    0, 17, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 15, 0, 0,\n    0, 0, 17, 0, 0, 0, 0, 16, 0, 0, 0, 0, 15, 0, 0, 0,\n    0, 0, 0, 17, 0, 0, 0, 16, 0, 0, 0, 15, 0, 0, 0, 0,\n    0, 0, 0, 0, 17, 0, 0, 16, 0, 0, 15, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 17, 0, 16, 0, 15, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 17, 16, 15, 0, 0, 0, 0, 0, 0, 0,\n    1, 1, 1, 1, 1, 1, 1, 0, -1, -1, -1, -1, -1, -1, -1, 0,\n    0, 0, 0, 0, 0, 0, -15, -16, -17, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, -15, 0, -16, 0, -17, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, -15, 0, 0, -16, 0, 0, -17, 0, 0, 0, 0, 0,\n    0, 0, 0, -15, 0, 0, 0, -16, 0, 0, 0, -17, 0, 0, 0, 0,\n    0, 0, -15, 0, 0, 0, 0, -16, 0, 0, 0, 0, -17, 0, 0, 0,\n    0, -15, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, -17, 0, 0,\n    -15, 0, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, 0, -17\n];\nconst PIECE_MASKS = { p: 0x1, n: 0x2, b: 0x4, r: 0x8, q: 0x10, k: 0x20 };\nconst SYMBOLS = 'pnbrqkPNBRQK';\nconst PROMOTIONS = [KNIGHT, BISHOP, ROOK, QUEEN];\nconst RANK_1 = 7;\nconst RANK_2 = 6;\n/*\n * const RANK_3 = 5\n * const RANK_4 = 4\n * const RANK_5 = 3\n * const RANK_6 = 2\n */\nconst RANK_7 = 1;\nconst RANK_8 = 0;\nconst SIDES = {\n    [KING]: BITS.KSIDE_CASTLE,\n    [QUEEN]: BITS.QSIDE_CASTLE\n};\nconst ROOKS = {\n    w: [\n        { square: Ox88.a1, flag: BITS.QSIDE_CASTLE },\n        { square: Ox88.h1, flag: BITS.KSIDE_CASTLE },\n    ],\n    b: [\n        { square: Ox88.a8, flag: BITS.QSIDE_CASTLE },\n        { square: Ox88.h8, flag: BITS.KSIDE_CASTLE },\n    ],\n};\nconst SECOND_RANK = { b: RANK_7, w: RANK_2 };\nconst TERMINATION_MARKERS = ['1-0', '0-1', '1/2-1/2', '*'];\n// Extracts the zero-based rank of an 0x88 square.\nfunction rank(square) {\n    return square >> 4;\n}\n// Extracts the zero-based file of an 0x88 square.\nfunction file(square) {\n    return square & 0xf;\n}\nfunction isDigit(c) {\n    return '0123456789'.indexOf(c) !== -1;\n}\n// Converts a 0x88 square to algebraic notation.\nfunction algebraic(square) {\n    const f = file(square);\n    const r = rank(square);\n    return ('abcdefgh'.substring(f, f + 1) +\n        '87654321'.substring(r, r + 1));\n}\nfunction swapColor(color) {\n    return color === WHITE ? BLACK : WHITE;\n}\nfunction validateFen(fen) {\n    // 1st criterion: 6 space-seperated fields?\n    const tokens = fen.split(/\\s+/);\n    if (tokens.length !== 6) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: must contain six space-delimited fields',\n        };\n    }\n    // 2nd criterion: move number field is a integer value > 0?\n    const moveNumber = parseInt(tokens[5], 10);\n    if (isNaN(moveNumber) || moveNumber <= 0) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: move number must be a positive integer',\n        };\n    }\n    // 3rd criterion: half move counter is an integer >= 0?\n    const halfMoves = parseInt(tokens[4], 10);\n    if (isNaN(halfMoves) || halfMoves < 0) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: half move counter number must be a non-negative integer',\n        };\n    }\n    // 4th criterion: 4th field is a valid e.p.-string?\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n        return { ok: false, error: 'Invalid FEN: en-passant square is invalid' };\n    }\n    // 5th criterion: 3th field is a valid castle-string?\n    if (/[^kKqQ-]/.test(tokens[2])) {\n        return { ok: false, error: 'Invalid FEN: castling availability is invalid' };\n    }\n    // 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)?\n    if (!/^(w|b)$/.test(tokens[1])) {\n        return { ok: false, error: 'Invalid FEN: side-to-move is invalid' };\n    }\n    // 7th criterion: 1st field contains 8 rows?\n    const rows = tokens[0].split('/');\n    if (rows.length !== 8) {\n        return {\n            ok: false,\n            error: \"Invalid FEN: piece data does not contain 8 '/'-delimited rows\",\n        };\n    }\n    // 8th criterion: every row is valid?\n    for (let i = 0; i < rows.length; i++) {\n        // check for right sum of fields AND not two numbers in succession\n        let sumFields = 0;\n        let previousWasNumber = false;\n        for (let k = 0; k < rows[i].length; k++) {\n            if (isDigit(rows[i][k])) {\n                if (previousWasNumber) {\n                    return {\n                        ok: false,\n                        error: 'Invalid FEN: piece data is invalid (consecutive number)',\n                    };\n                }\n                sumFields += parseInt(rows[i][k], 10);\n                previousWasNumber = true;\n            }\n            else {\n                if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n                    return {\n                        ok: false,\n                        error: 'Invalid FEN: piece data is invalid (invalid piece)',\n                    };\n                }\n                sumFields += 1;\n                previousWasNumber = false;\n            }\n        }\n        if (sumFields !== 8) {\n            return {\n                ok: false,\n                error: 'Invalid FEN: piece data is invalid (too many squares in rank)',\n            };\n        }\n    }\n    if ((tokens[3][1] == '3' && tokens[1] == 'w') ||\n        (tokens[3][1] == '6' && tokens[1] == 'b')) {\n        return { ok: false, error: 'Invalid FEN: illegal en-passant square' };\n    }\n    const kings = [\n        { color: 'white', regex: /K/g },\n        { color: 'black', regex: /k/g },\n    ];\n    for (const { color, regex } of kings) {\n        if (!regex.test(tokens[0])) {\n            return { ok: false, error: `Invalid FEN: missing ${color} king` };\n        }\n        if ((tokens[0].match(regex) || []).length > 1) {\n            return { ok: false, error: `Invalid FEN: too many ${color} kings` };\n        }\n    }\n    return { ok: true };\n}\n// this function is used to uniquely identify ambiguous moves\nfunction getDisambiguator(move, moves) {\n    const from = move.from;\n    const to = move.to;\n    const piece = move.piece;\n    let ambiguities = 0;\n    let sameRank = 0;\n    let sameFile = 0;\n    for (let i = 0, len = moves.length; i < len; i++) {\n        const ambigFrom = moves[i].from;\n        const ambigTo = moves[i].to;\n        const ambigPiece = moves[i].piece;\n        /*\n         * if a move of the same piece type ends on the same to square, we'll need\n         * to add a disambiguator to the algebraic notation\n         */\n        if (piece === ambigPiece && from !== ambigFrom && to === ambigTo) {\n            ambiguities++;\n            if (rank(from) === rank(ambigFrom)) {\n                sameRank++;\n            }\n            if (file(from) === file(ambigFrom)) {\n                sameFile++;\n            }\n        }\n    }\n    if (ambiguities > 0) {\n        if (sameRank > 0 && sameFile > 0) {\n            /*\n             * if there exists a similar moving piece on the same rank and file as\n             * the move in question, use the square as the disambiguator\n             */\n            return algebraic(from);\n        }\n        else if (sameFile > 0) {\n            /*\n             * if the moving piece rests on the same file, use the rank symbol as the\n             * disambiguator\n             */\n            return algebraic(from).charAt(1);\n        }\n        else {\n            // else use the file symbol\n            return algebraic(from).charAt(0);\n        }\n    }\n    return '';\n}\nfunction addMove(moves, color, from, to, piece, captured = undefined, flags = BITS.NORMAL) {\n    const r = rank(to);\n    if (piece === PAWN && (r === RANK_1 || r === RANK_8)) {\n        for (let i = 0; i < PROMOTIONS.length; i++) {\n            const promotion = PROMOTIONS[i];\n            moves.push({\n                color,\n                from,\n                to,\n                piece,\n                captured,\n                promotion,\n                flags: flags | BITS.PROMOTION,\n            });\n        }\n    }\n    else {\n        moves.push({\n            color,\n            from,\n            to,\n            piece,\n            captured,\n            flags,\n        });\n    }\n}\nfunction inferPieceType(san) {\n    let pieceType = san.charAt(0);\n    if (pieceType >= 'a' && pieceType <= 'h') {\n        const matches = san.match(/[a-h]\\d.*[a-h]\\d/);\n        if (matches) {\n            return undefined;\n        }\n        return PAWN;\n    }\n    pieceType = pieceType.toLowerCase();\n    if (pieceType === 'o') {\n        return KING;\n    }\n    return pieceType;\n}\n// parses all of the decorators out of a SAN string\nfunction strippedSan(move) {\n    return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '');\n}\nclass Chess {\n    _board = new Array(128);\n    _turn = WHITE;\n    _header = {};\n    _kings = { w: EMPTY, b: EMPTY };\n    _epSquare = -1;\n    _halfMoves = 0;\n    _moveNumber = 0;\n    _history = [];\n    _comments = {};\n    _castling = { w: 0, b: 0 };\n    constructor(fen = DEFAULT_POSITION) {\n        this.load(fen);\n    }\n    clear(keepHeaders = false) {\n        this._board = new Array(128);\n        this._kings = { w: EMPTY, b: EMPTY };\n        this._turn = WHITE;\n        this._castling = { w: 0, b: 0 };\n        this._epSquare = EMPTY;\n        this._halfMoves = 0;\n        this._moveNumber = 1;\n        this._history = [];\n        this._comments = {};\n        this._header = keepHeaders ? this._header : {};\n        this._updateSetup(this.fen());\n    }\n    removeHeader(key) {\n        if (key in this._header) {\n            delete this._header[key];\n        }\n    }\n    load(fen, keepHeaders = false) {\n        let tokens = fen.split(/\\s+/);\n        // append commonly omitted fen tokens\n        if (tokens.length >= 2 && tokens.length < 6) {\n            const adjustments = ['-', '-', '0', '1'];\n            fen = tokens.concat(adjustments.slice(-(6 - tokens.length))).join(' ');\n        }\n        tokens = fen.split(/\\s+/);\n        const { ok, error } = validateFen(fen);\n        if (!ok) {\n            throw new Error(error);\n        }\n        const position = tokens[0];\n        let square = 0;\n        this.clear(keepHeaders);\n        for (let i = 0; i < position.length; i++) {\n            const piece = position.charAt(i);\n            if (piece === '/') {\n                square += 8;\n            }\n            else if (isDigit(piece)) {\n                square += parseInt(piece, 10);\n            }\n            else {\n                const color = piece < 'a' ? WHITE : BLACK;\n                this.put({ type: piece.toLowerCase(), color }, algebraic(square));\n                square++;\n            }\n        }\n        this._turn = tokens[1];\n        if (tokens[2].indexOf('K') > -1) {\n            this._castling.w |= BITS.KSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('Q') > -1) {\n            this._castling.w |= BITS.QSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('k') > -1) {\n            this._castling.b |= BITS.KSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('q') > -1) {\n            this._castling.b |= BITS.QSIDE_CASTLE;\n        }\n        this._epSquare = tokens[3] === '-' ? EMPTY : Ox88[tokens[3]];\n        this._halfMoves = parseInt(tokens[4], 10);\n        this._moveNumber = parseInt(tokens[5], 10);\n        this._updateSetup(this.fen());\n    }\n    fen() {\n        let empty = 0;\n        let fen = '';\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            if (this._board[i]) {\n                if (empty > 0) {\n                    fen += empty;\n                    empty = 0;\n                }\n                const { color, type: piece } = this._board[i];\n                fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n            }\n            else {\n                empty++;\n            }\n            if ((i + 1) & 0x88) {\n                if (empty > 0) {\n                    fen += empty;\n                }\n                if (i !== Ox88.h1) {\n                    fen += '/';\n                }\n                empty = 0;\n                i += 8;\n            }\n        }\n        let castling = '';\n        if (this._castling[WHITE] & BITS.KSIDE_CASTLE) {\n            castling += 'K';\n        }\n        if (this._castling[WHITE] & BITS.QSIDE_CASTLE) {\n            castling += 'Q';\n        }\n        if (this._castling[BLACK] & BITS.KSIDE_CASTLE) {\n            castling += 'k';\n        }\n        if (this._castling[BLACK] & BITS.QSIDE_CASTLE) {\n            castling += 'q';\n        }\n        // do we have an empty castling flag?\n        castling = castling || '-';\n        let epSquare = '-';\n        /*\n         * only print the ep square if en passant is a valid move (pawn is present\n         * and ep capture is not pinned)\n         */\n        if (this._epSquare !== EMPTY) {\n            const bigPawnSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n            const squares = [bigPawnSquare + 1, bigPawnSquare - 1];\n            for (const square of squares) {\n                // is the square off the board?\n                if (square & 0x88) {\n                    continue;\n                }\n                const color = this._turn;\n                // is there a pawn that can capture the epSquare?\n                if (this._board[square]?.color === color &&\n                    this._board[square]?.type === PAWN) {\n                    // if the pawn makes an ep capture, does it leave it's king in check?\n                    this._makeMove({\n                        color,\n                        from: square,\n                        to: this._epSquare,\n                        piece: PAWN,\n                        captured: PAWN,\n                        flags: BITS.EP_CAPTURE,\n                    });\n                    const isLegal = !this._isKingAttacked(color);\n                    this._undoMove();\n                    // if ep is legal, break and set the ep square in the FEN output\n                    if (isLegal) {\n                        epSquare = algebraic(this._epSquare);\n                        break;\n                    }\n                }\n            }\n        }\n        return [\n            fen,\n            this._turn,\n            castling,\n            epSquare,\n            this._halfMoves,\n            this._moveNumber,\n        ].join(' ');\n    }\n    /*\n     * Called when the initial board setup is changed with put() or remove().\n     * modifies the SetUp and FEN properties of the header object. If the FEN\n     * is equal to the default position, the SetUp and FEN are deleted the setup\n     * is only updated if history.length is zero, ie moves haven't been made.\n     */\n    _updateSetup(fen) {\n        if (this._history.length > 0)\n            return;\n        if (fen !== DEFAULT_POSITION) {\n            this._header['SetUp'] = '1';\n            this._header['FEN'] = fen;\n        }\n        else {\n            delete this._header['SetUp'];\n            delete this._header['FEN'];\n        }\n    }\n    reset() {\n        this.load(DEFAULT_POSITION);\n    }\n    get(square) {\n        return this._board[Ox88[square]] || false;\n    }\n    put({ type, color }, square) {\n        // check for piece\n        if (SYMBOLS.indexOf(type.toLowerCase()) === -1) {\n            return false;\n        }\n        // check for valid square\n        if (!(square in Ox88)) {\n            return false;\n        }\n        const sq = Ox88[square];\n        // don't let the user place more than one king\n        if (type == KING &&\n            !(this._kings[color] == EMPTY || this._kings[color] == sq)) {\n            return false;\n        }\n        this._board[sq] = { type: type, color: color };\n        if (type === KING) {\n            this._kings[color] = sq;\n        }\n        this._updateCastlingRights();\n        this._updateEnPassantSquare();\n        this._updateSetup(this.fen());\n        return true;\n    }\n    remove(square) {\n        const piece = this.get(square);\n        delete this._board[Ox88[square]];\n        if (piece && piece.type === KING) {\n            this._kings[piece.color] = EMPTY;\n        }\n        this._updateCastlingRights();\n        this._updateEnPassantSquare();\n        this._updateSetup(this.fen());\n        return piece;\n    }\n    _updateCastlingRights() {\n        const whiteKingInPlace = (this._board[Ox88.e1]?.type === KING && this._board[Ox88.e1]?.color === WHITE);\n        const blackKingInPlace = (this._board[Ox88.e8]?.type === KING && this._board[Ox88.e8]?.color === BLACK);\n        if (!whiteKingInPlace || this._board[Ox88.a1]?.type !== ROOK || this._board[Ox88.a1]?.color !== WHITE) {\n            this._castling.w &= ~BITS.QSIDE_CASTLE;\n        }\n        if (!whiteKingInPlace || this._board[Ox88.h1]?.type !== ROOK || this._board[Ox88.h1]?.color !== WHITE) {\n            this._castling.w &= ~BITS.KSIDE_CASTLE;\n        }\n        if (!blackKingInPlace || this._board[Ox88.a8]?.type !== ROOK || this._board[Ox88.a8]?.color !== BLACK) {\n            this._castling.b &= ~BITS.QSIDE_CASTLE;\n        }\n        if (!blackKingInPlace || this._board[Ox88.h8]?.type !== ROOK || this._board[Ox88.h8]?.color !== BLACK) {\n            this._castling.b &= ~BITS.KSIDE_CASTLE;\n        }\n    }\n    _updateEnPassantSquare() {\n        if (this._epSquare === EMPTY) {\n            return;\n        }\n        const startSquare = this._epSquare + (this._turn === WHITE ? -16 : 16);\n        const currentSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n        const attackers = [currentSquare + 1, currentSquare - 1];\n        if (this._board[startSquare] !== null ||\n            this._board[this._epSquare] !== null ||\n            this._board[currentSquare]?.color !== swapColor(this._turn) ||\n            this._board[currentSquare]?.type !== PAWN) {\n            this._epSquare = EMPTY;\n            return;\n        }\n        const canCapture = (square) => !(square & 0x88) &&\n            this._board[square]?.color === this._turn &&\n            this._board[square]?.type === PAWN;\n        if (!attackers.some(canCapture)) {\n            this._epSquare = EMPTY;\n        }\n    }\n    _attacked(color, square) {\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            // did we run off the end of the board\n            if (i & 0x88) {\n                i += 7;\n                continue;\n            }\n            // if empty square or wrong color\n            if (this._board[i] === undefined || this._board[i].color !== color) {\n                continue;\n            }\n            const piece = this._board[i];\n            const difference = i - square;\n            // skip - to/from square are the same\n            if (difference === 0) {\n                continue;\n            }\n            const index = difference + 119;\n            if (ATTACKS[index] & PIECE_MASKS[piece.type]) {\n                if (piece.type === PAWN) {\n                    if (difference > 0) {\n                        if (piece.color === WHITE)\n                            return true;\n                    }\n                    else {\n                        if (piece.color === BLACK)\n                            return true;\n                    }\n                    continue;\n                }\n                // if the piece is a knight or a king\n                if (piece.type === 'n' || piece.type === 'k')\n                    return true;\n                const offset = RAYS[index];\n                let j = i + offset;\n                let blocked = false;\n                while (j !== square) {\n                    if (this._board[j] != null) {\n                        blocked = true;\n                        break;\n                    }\n                    j += offset;\n                }\n                if (!blocked)\n                    return true;\n            }\n        }\n        return false;\n    }\n    _isKingAttacked(color) {\n        const square = this._kings[color];\n        return square === -1 ? false : this._attacked(swapColor(color), square);\n    }\n    isAttacked(square, attackedBy) {\n        return this._attacked(attackedBy, Ox88[square]);\n    }\n    isCheck() {\n        return this._isKingAttacked(this._turn);\n    }\n    inCheck() {\n        return this.isCheck();\n    }\n    isCheckmate() {\n        return this.isCheck() && this._moves().length === 0;\n    }\n    isStalemate() {\n        return !this.isCheck() && this._moves().length === 0;\n    }\n    isInsufficientMaterial() {\n        /*\n         * k.b. vs k.b. (of opposite colors) with mate in 1:\n         * 8/8/8/8/1b6/8/B1k5/K7 b - - 0 1\n         *\n         * k.b. vs k.n. with mate in 1:\n         * 8/8/8/8/1n6/8/B7/K1k5 b - - 2 1\n         */\n        const pieces = {\n            b: 0,\n            n: 0,\n            r: 0,\n            q: 0,\n            k: 0,\n            p: 0,\n        };\n        const bishops = [];\n        let numPieces = 0;\n        let squareColor = 0;\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            squareColor = (squareColor + 1) % 2;\n            if (i & 0x88) {\n                i += 7;\n                continue;\n            }\n            const piece = this._board[i];\n            if (piece) {\n                pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1;\n                if (piece.type === BISHOP) {\n                    bishops.push(squareColor);\n                }\n                numPieces++;\n            }\n        }\n        // k vs. k\n        if (numPieces === 2) {\n            return true;\n        }\n        else if (\n        // k vs. kn .... or .... k vs. kb\n        numPieces === 3 &&\n            (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)) {\n            return true;\n        }\n        else if (numPieces === pieces[BISHOP] + 2) {\n            // kb vs. kb where any number of bishops are all on the same color\n            let sum = 0;\n            const len = bishops.length;\n            for (let i = 0; i < len; i++) {\n                sum += bishops[i];\n            }\n            if (sum === 0 || sum === len) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isThreefoldRepetition() {\n        const moves = [];\n        const positions = {};\n        let repetition = false;\n        while (true) {\n            const move = this._undoMove();\n            if (!move)\n                break;\n            moves.push(move);\n        }\n        while (true) {\n            /*\n             * remove the last two fields in the FEN string, they're not needed when\n             * checking for draw by rep\n             */\n            const fen = this.fen().split(' ').slice(0, 4).join(' ');\n            // has the position occurred three or move times\n            positions[fen] = fen in positions ? positions[fen] + 1 : 1;\n            if (positions[fen] >= 3) {\n                repetition = true;\n            }\n            const move = moves.pop();\n            if (!move) {\n                break;\n            }\n            else {\n                this._makeMove(move);\n            }\n        }\n        return repetition;\n    }\n    isDraw() {\n        return (this._halfMoves >= 100 || // 50 moves per side = 100 half moves\n            this.isStalemate() ||\n            this.isInsufficientMaterial() ||\n            this.isThreefoldRepetition());\n    }\n    isGameOver() {\n        return this.isCheckmate() || this.isStalemate() || this.isDraw();\n    }\n    moves({ verbose = false, square = undefined, piece = undefined, } = {}) {\n        const moves = this._moves({ square, piece });\n        if (verbose) {\n            return moves.map((move) => this._makePretty(move));\n        }\n        else {\n            return moves.map((move) => this._moveToSan(move, moves));\n        }\n    }\n    _moves({ legal = true, piece = undefined, square = undefined, } = {}) {\n        const forSquare = square ? square.toLowerCase() : undefined;\n        const forPiece = piece?.toLowerCase();\n        const moves = [];\n        const us = this._turn;\n        const them = swapColor(us);\n        let firstSquare = Ox88.a8;\n        let lastSquare = Ox88.h1;\n        let singleSquare = false;\n        // are we generating moves for a single square?\n        if (forSquare) {\n            // illegal square, return empty moves\n            if (!(forSquare in Ox88)) {\n                return [];\n            }\n            else {\n                firstSquare = lastSquare = Ox88[forSquare];\n                singleSquare = true;\n            }\n        }\n        for (let from = firstSquare; from <= lastSquare; from++) {\n            // did we run off the end of the board\n            if (from & 0x88) {\n                from += 7;\n                continue;\n            }\n            // empty square or opponent, skip\n            if (!this._board[from] || this._board[from].color === them) {\n                continue;\n            }\n            const { type } = this._board[from];\n            let to;\n            if (type === PAWN) {\n                if (forPiece && forPiece !== type)\n                    continue;\n                // single square, non-capturing\n                to = from + PAWN_OFFSETS[us][0];\n                if (!this._board[to]) {\n                    addMove(moves, us, from, to, PAWN);\n                    // double square\n                    to = from + PAWN_OFFSETS[us][1];\n                    if (SECOND_RANK[us] === rank(from) && !this._board[to]) {\n                        addMove(moves, us, from, to, PAWN, undefined, BITS.BIG_PAWN);\n                    }\n                }\n                // pawn captures\n                for (let j = 2; j < 4; j++) {\n                    to = from + PAWN_OFFSETS[us][j];\n                    if (to & 0x88)\n                        continue;\n                    if (this._board[to]?.color === them) {\n                        addMove(moves, us, from, to, PAWN, this._board[to].type, BITS.CAPTURE);\n                    }\n                    else if (to === this._epSquare) {\n                        addMove(moves, us, from, to, PAWN, PAWN, BITS.EP_CAPTURE);\n                    }\n                }\n            }\n            else {\n                if (forPiece && forPiece !== type)\n                    continue;\n                for (let j = 0, len = PIECE_OFFSETS[type].length; j < len; j++) {\n                    const offset = PIECE_OFFSETS[type][j];\n                    to = from;\n                    while (true) {\n                        to += offset;\n                        if (to & 0x88)\n                            break;\n                        if (!this._board[to]) {\n                            addMove(moves, us, from, to, type);\n                        }\n                        else {\n                            // own color, stop loop\n                            if (this._board[to].color === us)\n                                break;\n                            addMove(moves, us, from, to, type, this._board[to].type, BITS.CAPTURE);\n                            break;\n                        }\n                        /* break, if knight or king */\n                        if (type === KNIGHT || type === KING)\n                            break;\n                    }\n                }\n            }\n        }\n        /*\n         * check for castling if we're:\n         *   a) generating all moves, or\n         *   b) doing single square move generation on the king's square\n         */\n        if (forPiece === undefined || forPiece === KING) {\n            if (!singleSquare || lastSquare === this._kings[us]) {\n                // king-side castling\n                if (this._castling[us] & BITS.KSIDE_CASTLE) {\n                    const castlingFrom = this._kings[us];\n                    const castlingTo = castlingFrom + 2;\n                    if (!this._board[castlingFrom + 1] &&\n                        !this._board[castlingTo] &&\n                        !this._attacked(them, this._kings[us]) &&\n                        !this._attacked(them, castlingFrom + 1) &&\n                        !this._attacked(them, castlingTo)) {\n                        addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.KSIDE_CASTLE);\n                    }\n                }\n                // queen-side castling\n                if (this._castling[us] & BITS.QSIDE_CASTLE) {\n                    const castlingFrom = this._kings[us];\n                    const castlingTo = castlingFrom - 2;\n                    if (!this._board[castlingFrom - 1] &&\n                        !this._board[castlingFrom - 2] &&\n                        !this._board[castlingFrom - 3] &&\n                        !this._attacked(them, this._kings[us]) &&\n                        !this._attacked(them, castlingFrom - 1) &&\n                        !this._attacked(them, castlingTo)) {\n                        addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.QSIDE_CASTLE);\n                    }\n                }\n            }\n        }\n        /*\n         * return all pseudo-legal moves (this includes moves that allow the king\n         * to be captured)\n         */\n        if (!legal || this._kings[us] === -1) {\n            return moves;\n        }\n        // filter out illegal moves\n        const legalMoves = [];\n        for (let i = 0, len = moves.length; i < len; i++) {\n            this._makeMove(moves[i]);\n            if (!this._isKingAttacked(us)) {\n                legalMoves.push(moves[i]);\n            }\n            this._undoMove();\n        }\n        return legalMoves;\n    }\n    move(move, { strict = false } = {}) {\n        /*\n         * The move function can be called with in the following parameters:\n         *\n         * .move('Nxb7')       <- argument is a case-sensitive SAN string\n         *\n         * .move({ from: 'h7', <- argument is a move object\n         *         to :'h8',\n         *         promotion: 'q' })\n         *\n         *\n         * An optional strict argument may be supplied to tell chess.js to\n         * strictly follow the SAN specification.\n         */\n        let moveObj = null;\n        if (typeof move === 'string') {\n            moveObj = this._moveFromSan(move, strict);\n        }\n        else if (typeof move === 'object') {\n            const moves = this._moves();\n            // convert the pretty move object to an ugly move object\n            for (let i = 0, len = moves.length; i < len; i++) {\n                if (move.from === algebraic(moves[i].from) &&\n                    move.to === algebraic(moves[i].to) &&\n                    (!('promotion' in moves[i]) || move.promotion === moves[i].promotion)) {\n                    moveObj = moves[i];\n                    break;\n                }\n            }\n        }\n        // failed to find move\n        if (!moveObj) {\n            if (typeof move === 'string') {\n                throw new Error(`Invalid move: ${move}`);\n            }\n            else {\n                throw new Error(`Invalid move: ${JSON.stringify(move)}`);\n            }\n        }\n        /*\n         * need to make a copy of move because we can't generate SAN after the move\n         * is made\n         */\n        const prettyMove = this._makePretty(moveObj);\n        this._makeMove(moveObj);\n        return prettyMove;\n    }\n    _push(move) {\n        this._history.push({\n            move,\n            kings: { b: this._kings.b, w: this._kings.w },\n            turn: this._turn,\n            castling: { b: this._castling.b, w: this._castling.w },\n            epSquare: this._epSquare,\n            halfMoves: this._halfMoves,\n            moveNumber: this._moveNumber,\n        });\n    }\n    _makeMove(move) {\n        const us = this._turn;\n        const them = swapColor(us);\n        this._push(move);\n        this._board[move.to] = this._board[move.from];\n        delete this._board[move.from];\n        // if ep capture, remove the captured pawn\n        if (move.flags & BITS.EP_CAPTURE) {\n            if (this._turn === BLACK) {\n                delete this._board[move.to - 16];\n            }\n            else {\n                delete this._board[move.to + 16];\n            }\n        }\n        // if pawn promotion, replace with new piece\n        if (move.promotion) {\n            this._board[move.to] = { type: move.promotion, color: us };\n        }\n        // if we moved the king\n        if (this._board[move.to].type === KING) {\n            this._kings[us] = move.to;\n            // if we castled, move the rook next to the king\n            if (move.flags & BITS.KSIDE_CASTLE) {\n                const castlingTo = move.to - 1;\n                const castlingFrom = move.to + 1;\n                this._board[castlingTo] = this._board[castlingFrom];\n                delete this._board[castlingFrom];\n            }\n            else if (move.flags & BITS.QSIDE_CASTLE) {\n                const castlingTo = move.to + 1;\n                const castlingFrom = move.to - 2;\n                this._board[castlingTo] = this._board[castlingFrom];\n                delete this._board[castlingFrom];\n            }\n            // turn off castling\n            this._castling[us] = 0;\n        }\n        // turn off castling if we move a rook\n        if (this._castling[us]) {\n            for (let i = 0, len = ROOKS[us].length; i < len; i++) {\n                if (move.from === ROOKS[us][i].square &&\n                    this._castling[us] & ROOKS[us][i].flag) {\n                    this._castling[us] ^= ROOKS[us][i].flag;\n                    break;\n                }\n            }\n        }\n        // turn off castling if we capture a rook\n        if (this._castling[them]) {\n            for (let i = 0, len = ROOKS[them].length; i < len; i++) {\n                if (move.to === ROOKS[them][i].square &&\n                    this._castling[them] & ROOKS[them][i].flag) {\n                    this._castling[them] ^= ROOKS[them][i].flag;\n                    break;\n                }\n            }\n        }\n        // if big pawn move, update the en passant square\n        if (move.flags & BITS.BIG_PAWN) {\n            if (us === BLACK) {\n                this._epSquare = move.to - 16;\n            }\n            else {\n                this._epSquare = move.to + 16;\n            }\n        }\n        else {\n            this._epSquare = EMPTY;\n        }\n        // reset the 50 move counter if a pawn is moved or a piece is captured\n        if (move.piece === PAWN) {\n            this._halfMoves = 0;\n        }\n        else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n            this._halfMoves = 0;\n        }\n        else {\n            this._halfMoves++;\n        }\n        if (us === BLACK) {\n            this._moveNumber++;\n        }\n        this._turn = them;\n    }\n    undo() {\n        const move = this._undoMove();\n        return move ? this._makePretty(move) : null;\n    }\n    _undoMove() {\n        const old = this._history.pop();\n        if (old === undefined) {\n            return null;\n        }\n        const move = old.move;\n        this._kings = old.kings;\n        this._turn = old.turn;\n        this._castling = old.castling;\n        this._epSquare = old.epSquare;\n        this._halfMoves = old.halfMoves;\n        this._moveNumber = old.moveNumber;\n        const us = this._turn;\n        const them = swapColor(us);\n        this._board[move.from] = this._board[move.to];\n        this._board[move.from].type = move.piece; // to undo any promotions\n        delete this._board[move.to];\n        if (move.captured) {\n            if (move.flags & BITS.EP_CAPTURE) {\n                // en passant capture\n                let index;\n                if (us === BLACK) {\n                    index = move.to - 16;\n                }\n                else {\n                    index = move.to + 16;\n                }\n                this._board[index] = { type: PAWN, color: them };\n            }\n            else {\n                // regular capture\n                this._board[move.to] = { type: move.captured, color: them };\n            }\n        }\n        if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n            let castlingTo, castlingFrom;\n            if (move.flags & BITS.KSIDE_CASTLE) {\n                castlingTo = move.to + 1;\n                castlingFrom = move.to - 1;\n            }\n            else {\n                castlingTo = move.to - 2;\n                castlingFrom = move.to + 1;\n            }\n            this._board[castlingTo] = this._board[castlingFrom];\n            delete this._board[castlingFrom];\n        }\n        return move;\n    }\n    pgn({ newline = '\\n', maxWidth = 0, } = {}) {\n        /*\n         * using the specification from http://www.chessclub.com/help/PGN-spec\n         * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n         */\n        const result = [];\n        let headerExists = false;\n        /* add the PGN header information */\n        for (const i in this._header) {\n            /*\n             * TODO: order of enumerated properties in header object is not\n             * guaranteed, see ECMA-262 spec (section 12.6.4)\n             */\n            result.push('[' + i + ' \"' + this._header[i] + '\"]' + newline);\n            headerExists = true;\n        }\n        if (headerExists && this._history.length) {\n            result.push(newline);\n        }\n        const appendComment = (moveString) => {\n            const comment = this._comments[this.fen()];\n            if (typeof comment !== 'undefined') {\n                const delimiter = moveString.length > 0 ? ' ' : '';\n                moveString = `${moveString}${delimiter}{${comment}}`;\n            }\n            return moveString;\n        };\n        // pop all of history onto reversed_history\n        const reversedHistory = [];\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        const moves = [];\n        let moveString = '';\n        // special case of a commented starting position with no moves\n        if (reversedHistory.length === 0) {\n            moves.push(appendComment(''));\n        }\n        // build the list of moves.  a move_string looks like: \"3. e3 e6\"\n        while (reversedHistory.length > 0) {\n            moveString = appendComment(moveString);\n            const move = reversedHistory.pop();\n            // make TypeScript stop complaining about move being undefined\n            if (!move) {\n                break;\n            }\n            // if the position started with black to move, start PGN with #. ...\n            if (!this._history.length && move.color === 'b') {\n                const prefix = `${this._moveNumber}. ...`;\n                // is there a comment preceding the first move?\n                moveString = moveString ? `${moveString} ${prefix}` : prefix;\n            }\n            else if (move.color === 'w') {\n                // store the previous generated move_string if we have one\n                if (moveString.length) {\n                    moves.push(moveString);\n                }\n                moveString = this._moveNumber + '.';\n            }\n            moveString =\n                moveString + ' ' + this._moveToSan(move, this._moves({ legal: true }));\n            this._makeMove(move);\n        }\n        // are there any other leftover moves?\n        if (moveString.length) {\n            moves.push(appendComment(moveString));\n        }\n        // is there a result?\n        if (typeof this._header.Result !== 'undefined') {\n            moves.push(this._header.Result);\n        }\n        /*\n         * history should be back to what it was before we started generating PGN,\n         * so join together moves\n         */\n        if (maxWidth === 0) {\n            return result.join('') + moves.join(' ');\n        }\n        // TODO (jah): huh?\n        const strip = function () {\n            if (result.length > 0 && result[result.length - 1] === ' ') {\n                result.pop();\n                return true;\n            }\n            return false;\n        };\n        // NB: this does not preserve comment whitespace.\n        const wrapComment = function (width, move) {\n            for (const token of move.split(' ')) {\n                if (!token) {\n                    continue;\n                }\n                if (width + token.length > maxWidth) {\n                    while (strip()) {\n                        width--;\n                    }\n                    result.push(newline);\n                    width = 0;\n                }\n                result.push(token);\n                width += token.length;\n                result.push(' ');\n                width++;\n            }\n            if (strip()) {\n                width--;\n            }\n            return width;\n        };\n        // wrap the PGN output at max_width\n        let currentWidth = 0;\n        for (let i = 0; i < moves.length; i++) {\n            if (currentWidth + moves[i].length > maxWidth) {\n                if (moves[i].includes('{')) {\n                    currentWidth = wrapComment(currentWidth, moves[i]);\n                    continue;\n                }\n            }\n            // if the current move will push past max_width\n            if (currentWidth + moves[i].length > maxWidth && i !== 0) {\n                // don't end the line with whitespace\n                if (result[result.length - 1] === ' ') {\n                    result.pop();\n                }\n                result.push(newline);\n                currentWidth = 0;\n            }\n            else if (i !== 0) {\n                result.push(' ');\n                currentWidth++;\n            }\n            result.push(moves[i]);\n            currentWidth += moves[i].length;\n        }\n        return result.join('');\n    }\n    header(...args) {\n        for (let i = 0; i < args.length; i += 2) {\n            if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {\n                this._header[args[i]] = args[i + 1];\n            }\n        }\n        return this._header;\n    }\n    loadPgn(pgn, { strict = false, newlineChar = '\\r?\\n', } = {}) {\n        function mask(str) {\n            return str.replace(/\\\\/g, '\\\\');\n        }\n        function parsePgnHeader(header) {\n            const headerObj = {};\n            const headers = header.split(new RegExp(mask(newlineChar)));\n            let key = '';\n            let value = '';\n            for (let i = 0; i < headers.length; i++) {\n                const regex = /^\\s*\\[\\s*([A-Za-z]+)\\s*\"(.*)\"\\s*\\]\\s*$/;\n                key = headers[i].replace(regex, '$1');\n                value = headers[i].replace(regex, '$2');\n                if (key.trim().length > 0) {\n                    headerObj[key] = value;\n                }\n            }\n            return headerObj;\n        }\n        // strip whitespace from head/tail of PGN block\n        pgn = pgn.trim();\n        /*\n         * RegExp to split header. Takes advantage of the fact that header and movetext\n         * will always have a blank line between them (ie, two newline_char's). Handles\n         * case where movetext is empty by matching newlineChar until end of string is\n         * matched - effectively trimming from the end extra newlineChar.\n         *\n         * With default newline_char, will equal:\n         * /^(\\[((?:\\r?\\n)|.)*\\])((?:\\s*\\r?\\n){2}|(?:\\s*\\r?\\n)*$)/\n         */\n        const headerRegex = new RegExp('^(\\\\[((?:' +\n            mask(newlineChar) +\n            ')|.)*\\\\])' +\n            '((?:\\\\s*' +\n            mask(newlineChar) +\n            '){2}|(?:\\\\s*' +\n            mask(newlineChar) +\n            ')*$)');\n        // If no header given, begin with moves.\n        const headerRegexResults = headerRegex.exec(pgn);\n        const headerString = headerRegexResults\n            ? headerRegexResults.length >= 2\n                ? headerRegexResults[1]\n                : ''\n            : '';\n        // Put the board in the starting position\n        this.reset();\n        // parse PGN header\n        const headers = parsePgnHeader(headerString);\n        let fen = '';\n        for (const key in headers) {\n            // check to see user is including fen (possibly with wrong tag case)\n            if (key.toLowerCase() === 'fen') {\n                fen = headers[key];\n            }\n            this.header(key, headers[key]);\n        }\n        /*\n         * the permissive parser should attempt to load a fen tag, even if it's the\n         * wrong case and doesn't include a corresponding [SetUp \"1\"] tag\n         */\n        if (!strict) {\n            if (fen) {\n                this.load(fen, true);\n            }\n        }\n        else {\n            /*\n             * strict parser - load the starting position indicated by [Setup '1']\n             * and [FEN position]\n             */\n            if (headers['SetUp'] === '1') {\n                if (!('FEN' in headers)) {\n                    throw new Error('Invalid PGN: FEN tag must be supplied with SetUp tag');\n                }\n                // second argument to load: don't clear the headers\n                this.load(headers['FEN'], true);\n            }\n        }\n        /*\n         * NB: the regexes below that delete move numbers, recursive annotations,\n         * and numeric annotation glyphs may also match text in comments. To\n         * prevent this, we transform comments by hex-encoding them in place and\n         * decoding them again after the other tokens have been deleted.\n         *\n         * While the spec states that PGN files should be ASCII encoded, we use\n         * {en,de}codeURIComponent here to support arbitrary UTF8 as a convenience\n         * for modern users\n         */\n        function toHex(s) {\n            return Array.from(s)\n                .map(function (c) {\n                /*\n                 * encodeURI doesn't transform most ASCII characters, so we handle\n                 * these ourselves\n                 */\n                return c.charCodeAt(0) < 128\n                    ? c.charCodeAt(0).toString(16)\n                    : encodeURIComponent(c).replace(/%/g, '').toLowerCase();\n            })\n                .join('');\n        }\n        function fromHex(s) {\n            return s.length == 0\n                ? ''\n                : decodeURIComponent('%' + (s.match(/.{1,2}/g) || []).join('%'));\n        }\n        const encodeComment = function (s) {\n            s = s.replace(new RegExp(mask(newlineChar), 'g'), ' ');\n            return `{${toHex(s.slice(1, s.length - 1))}}`;\n        };\n        const decodeComment = function (s) {\n            if (s.startsWith('{') && s.endsWith('}')) {\n                return fromHex(s.slice(1, s.length - 1));\n            }\n        };\n        // delete header to get the moves\n        let ms = pgn\n            .replace(headerString, '')\n            .replace(\n        // encode comments so they don't get deleted below\n        new RegExp(`({[^}]*})+?|;([^${mask(newlineChar)}]*)`, 'g'), function (_match, bracket, semicolon) {\n            return bracket !== undefined\n                ? encodeComment(bracket)\n                : ' ' + encodeComment(`{${semicolon.slice(1)}}`);\n        })\n            .replace(new RegExp(mask(newlineChar), 'g'), ' ');\n        // delete recursive annotation variations\n        const ravRegex = /(\\([^()]+\\))+?/g;\n        while (ravRegex.test(ms)) {\n            ms = ms.replace(ravRegex, '');\n        }\n        // delete move numbers\n        ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '');\n        // delete ... indicating black to move\n        ms = ms.replace(/\\.\\.\\./g, '');\n        /* delete numeric annotation glyphs */\n        ms = ms.replace(/\\$\\d+/g, '');\n        // trim and get array of moves\n        let moves = ms.trim().split(new RegExp(/\\s+/));\n        // delete empty entries\n        moves = moves.filter((move) => move !== '');\n        let result = '';\n        for (let halfMove = 0; halfMove < moves.length; halfMove++) {\n            const comment = decodeComment(moves[halfMove]);\n            if (comment !== undefined) {\n                this._comments[this.fen()] = comment;\n                continue;\n            }\n            const move = this._moveFromSan(moves[halfMove], strict);\n            // invalid move\n            if (move == null) {\n                // was the move an end of game marker\n                if (TERMINATION_MARKERS.indexOf(moves[halfMove]) > -1) {\n                    result = moves[halfMove];\n                }\n                else {\n                    throw new Error(`Invalid move in PGN: ${moves[halfMove]}`);\n                }\n            }\n            else {\n                // reset the end of game marker if making a valid move\n                result = '';\n                this._makeMove(move);\n            }\n        }\n        /*\n         * Per section 8.2.6 of the PGN spec, the Result tag pair must match match\n         * the termination marker. Only do this when headers are present, but the\n         * result tag is missing\n         */\n        if (result && Object.keys(this._header).length && !this._header['Result']) {\n            this.header('Result', result);\n        }\n    }\n    /*\n     * Convert a move from 0x88 coordinates to Standard Algebraic Notation\n     * (SAN)\n     *\n     * @param {boolean} strict Use the strict SAN parser. It will throw errors\n     * on overly disambiguated moves (see below):\n     *\n     * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n     * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n     * 4. ... Ne7 is technically the valid SAN\n     */\n    _moveToSan(move, moves) {\n        let output = '';\n        if (move.flags & BITS.KSIDE_CASTLE) {\n            output = 'O-O';\n        }\n        else if (move.flags & BITS.QSIDE_CASTLE) {\n            output = 'O-O-O';\n        }\n        else {\n            if (move.piece !== PAWN) {\n                const disambiguator = getDisambiguator(move, moves);\n                output += move.piece.toUpperCase() + disambiguator;\n            }\n            if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n                if (move.piece === PAWN) {\n                    output += algebraic(move.from)[0];\n                }\n                output += 'x';\n            }\n            output += algebraic(move.to);\n            if (move.promotion) {\n                output += '=' + move.promotion.toUpperCase();\n            }\n        }\n        this._makeMove(move);\n        if (this.isCheck()) {\n            if (this.isCheckmate()) {\n                output += '#';\n            }\n            else {\n                output += '+';\n            }\n        }\n        this._undoMove();\n        return output;\n    }\n    // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n    _moveFromSan(move, strict = false) {\n        // strip off any move decorations: e.g Nf3+?! becomes Nf3\n        const cleanMove = strippedSan(move);\n        let pieceType = inferPieceType(cleanMove);\n        let moves = this._moves({ legal: true, piece: pieceType });\n        // strict parser\n        for (let i = 0, len = moves.length; i < len; i++) {\n            if (cleanMove === strippedSan(this._moveToSan(moves[i], moves))) {\n                return moves[i];\n            }\n        }\n        // the strict parser failed\n        if (strict) {\n            return null;\n        }\n        let piece = undefined;\n        let matches = undefined;\n        let from = undefined;\n        let to = undefined;\n        let promotion = undefined;\n        /*\n         * The default permissive (non-strict) parser allows the user to parse\n         * non-standard chess notations. This parser is only run after the strict\n         * Standard Algebraic Notation (SAN) parser has failed.\n         *\n         * When running the permissive parser, we'll run a regex to grab the piece, the\n         * to/from square, and an optional promotion piece. This regex will\n         * parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,\n         * f7f8q, b1c3\n         *\n         * NOTE: Some positions and moves may be ambiguous when using the permissive\n         * parser. For example, in this position: 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1,\n         * the move b1c3 may be interpreted as Nc3 or B1c3 (a disambiguated bishop\n         * move). In these cases, the permissive parser will default to the most\n         * basic interpretation (which is b1c3 parsing to Nc3).\n         */\n        let overlyDisambiguated = false;\n        matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/\n        //     piece         from              to       promotion\n        );\n        if (matches) {\n            piece = matches[1];\n            from = matches[2];\n            to = matches[3];\n            promotion = matches[4];\n            if (from.length == 1) {\n                overlyDisambiguated = true;\n            }\n        }\n        else {\n            /*\n             * The [a-h]?[1-8]? portion of the regex below handles moves that may be\n             * overly disambiguated (e.g. Nge7 is unnecessary and non-standard when\n             * there is one legal knight move to e7). In this case, the value of\n             * 'from' variable will be a rank or file, not a square.\n             */\n            matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/);\n            if (matches) {\n                piece = matches[1];\n                from = matches[2];\n                to = matches[3];\n                promotion = matches[4];\n                if (from.length == 1) {\n                    overlyDisambiguated = true;\n                }\n            }\n        }\n        pieceType = inferPieceType(cleanMove);\n        moves = this._moves({\n            legal: true,\n            piece: piece ? piece : pieceType,\n        });\n        if (!to) {\n            return null;\n        }\n        for (let i = 0, len = moves.length; i < len; i++) {\n            if (!from) {\n                // if there is no from square, it could be just 'x' missing from a capture\n                if (cleanMove === strippedSan(this._moveToSan(moves[i], moves)).replace('x', '')) {\n                    return moves[i];\n                }\n                // hand-compare move properties with the results from our permissive regex\n            }\n            else if ((!piece || piece.toLowerCase() == moves[i].piece) &&\n                Ox88[from] == moves[i].from &&\n                Ox88[to] == moves[i].to &&\n                (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n                return moves[i];\n            }\n            else if (overlyDisambiguated) {\n                /*\n                 * SPECIAL CASE: we parsed a move string that may have an unneeded\n                 * rank/file disambiguator (e.g. Nge7).  The 'from' variable will\n                 */\n                const square = algebraic(moves[i].from);\n                if ((!piece || piece.toLowerCase() == moves[i].piece) &&\n                    Ox88[to] == moves[i].to &&\n                    (from == square[0] || from == square[1]) &&\n                    (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n                    return moves[i];\n                }\n            }\n        }\n        return null;\n    }\n    ascii() {\n        let s = '   +------------------------+\\n';\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            // display the rank\n            if (file(i) === 0) {\n                s += ' ' + '87654321'[rank(i)] + ' |';\n            }\n            if (this._board[i]) {\n                const piece = this._board[i].type;\n                const color = this._board[i].color;\n                const symbol = color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n                s += ' ' + symbol + ' ';\n            }\n            else {\n                s += ' . ';\n            }\n            if ((i + 1) & 0x88) {\n                s += '|\\n';\n                i += 8;\n            }\n        }\n        s += '   +------------------------+\\n';\n        s += '     a  b  c  d  e  f  g  h';\n        return s;\n    }\n    perft(depth) {\n        const moves = this._moves({ legal: false });\n        let nodes = 0;\n        const color = this._turn;\n        for (let i = 0, len = moves.length; i < len; i++) {\n            this._makeMove(moves[i]);\n            if (!this._isKingAttacked(color)) {\n                if (depth - 1 > 0) {\n                    nodes += this.perft(depth - 1);\n                }\n                else {\n                    nodes++;\n                }\n            }\n            this._undoMove();\n        }\n        return nodes;\n    }\n    // pretty = external move object\n    _makePretty(uglyMove) {\n        const { color, piece, from, to, flags, captured, promotion } = uglyMove;\n        let prettyFlags = '';\n        for (const flag in BITS) {\n            if (BITS[flag] & flags) {\n                prettyFlags += FLAGS[flag];\n            }\n        }\n        const fromAlgebraic = algebraic(from);\n        const toAlgebraic = algebraic(to);\n        const move = {\n            color,\n            piece,\n            from: fromAlgebraic,\n            to: toAlgebraic,\n            san: this._moveToSan(uglyMove, this._moves({ legal: true })),\n            flags: prettyFlags,\n            lan: fromAlgebraic + toAlgebraic,\n            before: this.fen(),\n            after: '',\n        };\n        // generate the FEN for the 'after' key\n        this._makeMove(uglyMove);\n        move.after = this.fen();\n        this._undoMove();\n        if (captured) {\n            move.captured = captured;\n        }\n        if (promotion) {\n            move.promotion = promotion;\n            move.lan += promotion;\n        }\n        return move;\n    }\n    turn() {\n        return this._turn;\n    }\n    board() {\n        const output = [];\n        let row = [];\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            if (this._board[i] == null) {\n                row.push(null);\n            }\n            else {\n                row.push({\n                    square: algebraic(i),\n                    type: this._board[i].type,\n                    color: this._board[i].color,\n                });\n            }\n            if ((i + 1) & 0x88) {\n                output.push(row);\n                row = [];\n                i += 8;\n            }\n        }\n        return output;\n    }\n    squareColor(square) {\n        if (square in Ox88) {\n            const sq = Ox88[square];\n            return (rank(sq) + file(sq)) % 2 === 0 ? 'light' : 'dark';\n        }\n        return null;\n    }\n    history({ verbose = false } = {}) {\n        const reversedHistory = [];\n        const moveHistory = [];\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        while (true) {\n            const move = reversedHistory.pop();\n            if (!move) {\n                break;\n            }\n            if (verbose) {\n                moveHistory.push(this._makePretty(move));\n            }\n            else {\n                moveHistory.push(this._moveToSan(move, this._moves()));\n            }\n            this._makeMove(move);\n        }\n        return moveHistory;\n    }\n    _pruneComments() {\n        const reversedHistory = [];\n        const currentComments = {};\n        const copyComment = (fen) => {\n            if (fen in this._comments) {\n                currentComments[fen] = this._comments[fen];\n            }\n        };\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        copyComment(this.fen());\n        while (true) {\n            const move = reversedHistory.pop();\n            if (!move) {\n                break;\n            }\n            this._makeMove(move);\n            copyComment(this.fen());\n        }\n        this._comments = currentComments;\n    }\n    getComment() {\n        return this._comments[this.fen()];\n    }\n    setComment(comment) {\n        this._comments[this.fen()] = comment.replace('{', '[').replace('}', ']');\n    }\n    deleteComment() {\n        const comment = this._comments[this.fen()];\n        delete this._comments[this.fen()];\n        return comment;\n    }\n    getComments() {\n        this._pruneComments();\n        return Object.keys(this._comments).map((fen) => {\n            return { fen: fen, comment: this._comments[fen] };\n        });\n    }\n    deleteComments() {\n        this._pruneComments();\n        return Object.keys(this._comments).map((fen) => {\n            const comment = this._comments[fen];\n            delete this._comments[fen];\n            return { fen: fen, comment: comment };\n        });\n    }\n    setCastlingRights(color, rights) {\n        for (const side of [KING, QUEEN]) {\n            if (rights[side] !== undefined) {\n                if (rights[side]) {\n                    this._castling[color] |= SIDES[side];\n                }\n                else {\n                    this._castling[color] &= ~SIDES[side];\n                }\n            }\n        }\n        this._updateCastlingRights();\n        const result = this.getCastlingRights(color);\n        return (rights[KING] === undefined || rights[KING] === result[KING]) && (rights[QUEEN] === undefined || rights[QUEEN] === result[QUEEN]);\n    }\n    getCastlingRights(color) {\n        return {\n            [KING]: (this._castling[color] & SIDES[KING]) !== 0,\n            [QUEEN]: (this._castling[color] & SIDES[QUEEN]) !== 0,\n        };\n    }\n    moveNumber() {\n        return this._moveNumber;\n    }\n}\n//# sourceMappingURL=chess.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2hlc3MuanMvZGlzdC9lc20vY2hlc3MuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrQkFBK0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0NBQWtDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixjQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGFBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixjQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFNBQVM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0JBQWtCLElBQUk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsa0JBQWtCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2NoZXNzLmpzL2Rpc3QvZXNtL2NoZXNzLmpzPzMyYmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDIzLCBKZWZmIEhseXdhIChqaGx5d2FAZ21haWwuY29tKVxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gKiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuICogQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuICogSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRVxuICogTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICogQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0ZcbiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuICogSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbiAqIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKi9cbmV4cG9ydCBjb25zdCBXSElURSA9ICd3JztcbmV4cG9ydCBjb25zdCBCTEFDSyA9ICdiJztcbmV4cG9ydCBjb25zdCBQQVdOID0gJ3AnO1xuZXhwb3J0IGNvbnN0IEtOSUdIVCA9ICduJztcbmV4cG9ydCBjb25zdCBCSVNIT1AgPSAnYic7XG5leHBvcnQgY29uc3QgUk9PSyA9ICdyJztcbmV4cG9ydCBjb25zdCBRVUVFTiA9ICdxJztcbmV4cG9ydCBjb25zdCBLSU5HID0gJ2snO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUE9TSVRJT04gPSAncm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSAwIDEnO1xuY29uc3QgRU1QVFkgPSAtMTtcbmNvbnN0IEZMQUdTID0ge1xuICAgIE5PUk1BTDogJ24nLFxuICAgIENBUFRVUkU6ICdjJyxcbiAgICBCSUdfUEFXTjogJ2InLFxuICAgIEVQX0NBUFRVUkU6ICdlJyxcbiAgICBQUk9NT1RJT046ICdwJyxcbiAgICBLU0lERV9DQVNUTEU6ICdrJyxcbiAgICBRU0lERV9DQVNUTEU6ICdxJyxcbn07XG4vLyBwcmV0dGllci1pZ25vcmVcbmV4cG9ydCBjb25zdCBTUVVBUkVTID0gW1xuICAgICdhOCcsICdiOCcsICdjOCcsICdkOCcsICdlOCcsICdmOCcsICdnOCcsICdoOCcsXG4gICAgJ2E3JywgJ2I3JywgJ2M3JywgJ2Q3JywgJ2U3JywgJ2Y3JywgJ2c3JywgJ2g3JyxcbiAgICAnYTYnLCAnYjYnLCAnYzYnLCAnZDYnLCAnZTYnLCAnZjYnLCAnZzYnLCAnaDYnLFxuICAgICdhNScsICdiNScsICdjNScsICdkNScsICdlNScsICdmNScsICdnNScsICdoNScsXG4gICAgJ2E0JywgJ2I0JywgJ2M0JywgJ2Q0JywgJ2U0JywgJ2Y0JywgJ2c0JywgJ2g0JyxcbiAgICAnYTMnLCAnYjMnLCAnYzMnLCAnZDMnLCAnZTMnLCAnZjMnLCAnZzMnLCAnaDMnLFxuICAgICdhMicsICdiMicsICdjMicsICdkMicsICdlMicsICdmMicsICdnMicsICdoMicsXG4gICAgJ2ExJywgJ2IxJywgJ2MxJywgJ2QxJywgJ2UxJywgJ2YxJywgJ2cxJywgJ2gxJ1xuXTtcbmNvbnN0IEJJVFMgPSB7XG4gICAgTk9STUFMOiAxLFxuICAgIENBUFRVUkU6IDIsXG4gICAgQklHX1BBV046IDQsXG4gICAgRVBfQ0FQVFVSRTogOCxcbiAgICBQUk9NT1RJT046IDE2LFxuICAgIEtTSURFX0NBU1RMRTogMzIsXG4gICAgUVNJREVfQ0FTVExFOiA2NCxcbn07XG4vKlxuICogTk9URVMgQUJPVVQgMHg4OCBNT1ZFIEdFTkVSQVRJT04gQUxHT1JJVEhNXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qaGx5d2EvY2hlc3MuanMvaXNzdWVzLzIzMFxuICpcbiAqIEEgbG90IG9mIHBlb3BsZSBhcmUgY29uZnVzZWQgd2hlbiB0aGV5IGZpcnN0IHNlZSB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAqIG9mIGNoZXNzLmpzLiBJdCB1c2VzIHRoZSAweDg4IE1vdmUgR2VuZXJhdGlvbiBBbGdvcml0aG0gd2hpY2ggaW50ZXJuYWxseVxuICogc3RvcmVzIHRoZSBib2FyZCBhcyBhbiA4eDE2IGFycmF5LiBUaGlzIGlzIHB1cmVseSBmb3IgZWZmaWNpZW5jeSBidXQgaGFzIGFcbiAqIGNvdXBsZSBvZiBpbnRlcmVzdGluZyBiZW5lZml0czpcbiAqXG4gKiAxLiAweDg4IG9mZmVycyBhIHZlcnkgaW5leHBlbnNpdmUgXCJvZmYgdGhlIGJvYXJkXCIgY2hlY2suIEJpdHdpc2UgQU5EICgmKSBhbnlcbiAqICAgIHNxdWFyZSB3aXRoIDB4ODgsIGlmIHRoZSByZXN1bHQgaXMgbm9uLXplcm8gdGhlbiB0aGUgc3F1YXJlIGlzIG9mZiB0aGVcbiAqICAgIGJvYXJkLiBGb3IgZXhhbXBsZSwgYXNzdW1pbmcgYSBrbmlnaHQgc3F1YXJlIEE4ICgwIGluIDB4ODggbm90YXRpb24pLFxuICogICAgdGhlcmUgYXJlIDggcG9zc2libGUgZGlyZWN0aW9ucyBpbiB3aGljaCB0aGUga25pZ2h0IGNhbiBtb3ZlLiBUaGVzZVxuICogICAgZGlyZWN0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhlIDh4MTYgYm9hcmQgYW5kIGFyZSBzdG9yZWQgaW4gdGhlXG4gKiAgICBQSUVDRV9PRkZTRVRTIG1hcC4gT25lIHBvc3NpYmxlIG1vdmUgaXMgQTggLSAxOCAodXAgb25lIHNxdWFyZSwgYW5kIHR3b1xuICogICAgc3F1YXJlcyB0byB0aGUgbGVmdCAtIHdoaWNoIGlzIG9mZiB0aGUgYm9hcmQpLiAwIC0gMTggPSAtMTggJiAweDg4ID0gMHg4OFxuICogICAgKGJlY2F1c2Ugb2YgdHdvLWNvbXBsZW1lbnQgcmVwcmVzZW50YXRpb24gb2YgLTE4KS4gVGhlIG5vbi16ZXJvIHJlc3VsdFxuICogICAgbWVhbnMgdGhlIHNxdWFyZSBpcyBvZmYgdGhlIGJvYXJkIGFuZCB0aGUgbW92ZSBpcyBpbGxlZ2FsLiBUYWtlIHRoZVxuICogICAgb3Bwb3NpdGUgbW92ZSAoZnJvbSBBOCB0byBDNyksIDAgKyAxOCA9IDE4ICYgMHg4OCA9IDAuIEEgcmVzdWx0IG9mIHplcm9cbiAqICAgIG1lYW5zIHRoZSBzcXVhcmUgaXMgb24gdGhlIGJvYXJkLlxuICpcbiAqIDIuIFRoZSByZWxhdGl2ZSBkaXN0YW5jZSAob3IgZGlmZmVyZW5jZSkgYmV0d2VlbiB0d28gc3F1YXJlcyBvbiBhIDh4MTYgYm9hcmRcbiAqICAgIGlzIHVuaXF1ZSBhbmQgY2FuIGJlIHVzZWQgdG8gaW5leHBlbnNpdmVseSBkZXRlcm1pbmUgaWYgYSBwaWVjZSBvbiBhXG4gKiAgICBzcXVhcmUgY2FuIGF0dGFjayBhbnkgb3RoZXIgYXJiaXRyYXJ5IHNxdWFyZS4gRm9yIGV4YW1wbGUsIGxldCdzIHNlZSBpZiBhXG4gKiAgICBwYXduIG9uIEU3IGNhbiBhdHRhY2sgRTIuIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gRTcgKDIwKSAtIEUyICgxMDApIGlzXG4gKiAgICAtODAuIFdlIGFkZCAxMTkgdG8gbWFrZSB0aGUgQVRUQUNLUyBhcnJheSBpbmRleCBub24tbmVnYXRpdmUgKGJlY2F1c2UgdGhlXG4gKiAgICB3b3JzdCBjYXNlIGRpZmZlcmVuY2UgaXMgQTggLSBIMSA9IC0xMTkpLiBUaGUgQVRUQUNLUyBhcnJheSBjb250YWlucyBhXG4gKiAgICBiaXRtYXNrIG9mIHBpZWNlcyB0aGF0IGNhbiBhdHRhY2sgZnJvbSB0aGF0IGRpc3RhbmNlIGFuZCBkaXJlY3Rpb24uXG4gKiAgICBBVFRBQ0tTWy04MCArIDExOT0zOV0gZ2l2ZXMgdXMgMjQgb3IgMGIxMTAwMCBpbiBiaW5hcnkuIExvb2sgYXQgdGhlXG4gKiAgICBQSUVDRV9NQVNLUyBtYXAgdG8gZGV0ZXJtaW5lIHRoZSBtYXNrIGZvciBhIGdpdmVuIHBpZWNlIHR5cGUuIEluIG91ciBwYXduXG4gKiAgICBleGFtcGxlLCB3ZSB3b3VsZCBjaGVjayB0byBzZWUgaWYgMjQgJiAweDEgaXMgbm9uLXplcm8sIHdoaWNoIGl0IGlzXG4gKiAgICBub3QuIFNvLCBuYXR1cmFsbHksIGEgcGF3biBvbiBFNyBjYW4ndCBhdHRhY2sgYSBwaWVjZSBvbiBFMi4gSG93ZXZlciwgYVxuICogICAgcm9vayBjYW4gc2luY2UgMjQgJiAweDggaXMgbm9uLXplcm8uIFRoZSBvbmx5IHRoaW5nIGxlZnQgdG8gY2hlY2sgaXMgdGhhdFxuICogICAgdGhlcmUgYXJlIG5vIGJsb2NraW5nIHBpZWNlcyBiZXR3ZWVuIEU3IGFuZCBFMi4gVGhhdCdzIHdoZXJlIHRoZSBSQVlTXG4gKiAgICBhcnJheSBjb21lcyBpbi4gSXQgcHJvdmlkZXMgYW4gb2Zmc2V0IChpbiB0aGlzIGNhc2UgMTYpIHRvIGFkZCB0byBFNyAoMjApXG4gKiAgICB0byBjaGVjayBmb3IgYmxvY2tpbmcgcGllY2VzLiBFNyAoMjApICsgMTYgPSBFNiAoMzYpICsgMTYgPSBFNSAoNTIpIGV0Yy5cbiAqL1xuLy8gcHJldHRpZXItaWdub3JlXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmNvbnN0IE94ODggPSB7XG4gICAgYTg6IDAsIGI4OiAxLCBjODogMiwgZDg6IDMsIGU4OiA0LCBmODogNSwgZzg6IDYsIGg4OiA3LFxuICAgIGE3OiAxNiwgYjc6IDE3LCBjNzogMTgsIGQ3OiAxOSwgZTc6IDIwLCBmNzogMjEsIGc3OiAyMiwgaDc6IDIzLFxuICAgIGE2OiAzMiwgYjY6IDMzLCBjNjogMzQsIGQ2OiAzNSwgZTY6IDM2LCBmNjogMzcsIGc2OiAzOCwgaDY6IDM5LFxuICAgIGE1OiA0OCwgYjU6IDQ5LCBjNTogNTAsIGQ1OiA1MSwgZTU6IDUyLCBmNTogNTMsIGc1OiA1NCwgaDU6IDU1LFxuICAgIGE0OiA2NCwgYjQ6IDY1LCBjNDogNjYsIGQ0OiA2NywgZTQ6IDY4LCBmNDogNjksIGc0OiA3MCwgaDQ6IDcxLFxuICAgIGEzOiA4MCwgYjM6IDgxLCBjMzogODIsIGQzOiA4MywgZTM6IDg0LCBmMzogODUsIGczOiA4NiwgaDM6IDg3LFxuICAgIGEyOiA5NiwgYjI6IDk3LCBjMjogOTgsIGQyOiA5OSwgZTI6IDEwMCwgZjI6IDEwMSwgZzI6IDEwMiwgaDI6IDEwMyxcbiAgICBhMTogMTEyLCBiMTogMTEzLCBjMTogMTE0LCBkMTogMTE1LCBlMTogMTE2LCBmMTogMTE3LCBnMTogMTE4LCBoMTogMTE5XG59O1xuY29uc3QgUEFXTl9PRkZTRVRTID0ge1xuICAgIGI6IFsxNiwgMzIsIDE3LCAxNV0sXG4gICAgdzogWy0xNiwgLTMyLCAtMTcsIC0xNV0sXG59O1xuY29uc3QgUElFQ0VfT0ZGU0VUUyA9IHtcbiAgICBuOiBbLTE4LCAtMzMsIC0zMSwgLTE0LCAxOCwgMzMsIDMxLCAxNF0sXG4gICAgYjogWy0xNywgLTE1LCAxNywgMTVdLFxuICAgIHI6IFstMTYsIDEsIDE2LCAtMV0sXG4gICAgcTogWy0xNywgLTE2LCAtMTUsIDEsIDE3LCAxNiwgMTUsIC0xXSxcbiAgICBrOiBbLTE3LCAtMTYsIC0xNSwgMSwgMTcsIDE2LCAxNSwgLTFdLFxufTtcbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgQVRUQUNLUyA9IFtcbiAgICAyMCwgMCwgMCwgMCwgMCwgMCwgMCwgMjQsIDAsIDAsIDAsIDAsIDAsIDAsIDIwLCAwLFxuICAgIDAsIDIwLCAwLCAwLCAwLCAwLCAwLCAyNCwgMCwgMCwgMCwgMCwgMCwgMjAsIDAsIDAsXG4gICAgMCwgMCwgMjAsIDAsIDAsIDAsIDAsIDI0LCAwLCAwLCAwLCAwLCAyMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAwLCAyMCwgMCwgMCwgMCwgMjQsIDAsIDAsIDAsIDIwLCAwLCAwLCAwLCAwLFxuICAgIDAsIDAsIDAsIDAsIDIwLCAwLCAwLCAyNCwgMCwgMCwgMjAsIDAsIDAsIDAsIDAsIDAsXG4gICAgMCwgMCwgMCwgMCwgMCwgMjAsIDIsIDI0LCAyLCAyMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAwLCAwLCAwLCAyLCA1MywgNTYsIDUzLCAyLCAwLCAwLCAwLCAwLCAwLCAwLFxuICAgIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDU2LCAwLCA1NiwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMCxcbiAgICAwLCAwLCAwLCAwLCAwLCAyLCA1MywgNTYsIDUzLCAyLCAwLCAwLCAwLCAwLCAwLCAwLFxuICAgIDAsIDAsIDAsIDAsIDAsIDIwLCAyLCAyNCwgMiwgMjAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gICAgMCwgMCwgMCwgMCwgMjAsIDAsIDAsIDI0LCAwLCAwLCAyMCwgMCwgMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAwLCAyMCwgMCwgMCwgMCwgMjQsIDAsIDAsIDAsIDIwLCAwLCAwLCAwLCAwLFxuICAgIDAsIDAsIDIwLCAwLCAwLCAwLCAwLCAyNCwgMCwgMCwgMCwgMCwgMjAsIDAsIDAsIDAsXG4gICAgMCwgMjAsIDAsIDAsIDAsIDAsIDAsIDI0LCAwLCAwLCAwLCAwLCAwLCAyMCwgMCwgMCxcbiAgICAyMCwgMCwgMCwgMCwgMCwgMCwgMCwgMjQsIDAsIDAsIDAsIDAsIDAsIDAsIDIwXG5dO1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBSQVlTID0gW1xuICAgIDE3LCAwLCAwLCAwLCAwLCAwLCAwLCAxNiwgMCwgMCwgMCwgMCwgMCwgMCwgMTUsIDAsXG4gICAgMCwgMTcsIDAsIDAsIDAsIDAsIDAsIDE2LCAwLCAwLCAwLCAwLCAwLCAxNSwgMCwgMCxcbiAgICAwLCAwLCAxNywgMCwgMCwgMCwgMCwgMTYsIDAsIDAsIDAsIDAsIDE1LCAwLCAwLCAwLFxuICAgIDAsIDAsIDAsIDE3LCAwLCAwLCAwLCAxNiwgMCwgMCwgMCwgMTUsIDAsIDAsIDAsIDAsXG4gICAgMCwgMCwgMCwgMCwgMTcsIDAsIDAsIDE2LCAwLCAwLCAxNSwgMCwgMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAwLCAwLCAwLCAxNywgMCwgMTYsIDAsIDE1LCAwLCAwLCAwLCAwLCAwLCAwLFxuICAgIDAsIDAsIDAsIDAsIDAsIDAsIDE3LCAxNiwgMTUsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gICAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIDAsXG4gICAgMCwgMCwgMCwgMCwgMCwgMCwgLTE1LCAtMTYsIC0xNywgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAwLCAwLCAwLCAtMTUsIDAsIC0xNiwgMCwgLTE3LCAwLCAwLCAwLCAwLCAwLCAwLFxuICAgIDAsIDAsIDAsIDAsIC0xNSwgMCwgMCwgLTE2LCAwLCAwLCAtMTcsIDAsIDAsIDAsIDAsIDAsXG4gICAgMCwgMCwgMCwgLTE1LCAwLCAwLCAwLCAtMTYsIDAsIDAsIDAsIC0xNywgMCwgMCwgMCwgMCxcbiAgICAwLCAwLCAtMTUsIDAsIDAsIDAsIDAsIC0xNiwgMCwgMCwgMCwgMCwgLTE3LCAwLCAwLCAwLFxuICAgIDAsIC0xNSwgMCwgMCwgMCwgMCwgMCwgLTE2LCAwLCAwLCAwLCAwLCAwLCAtMTcsIDAsIDAsXG4gICAgLTE1LCAwLCAwLCAwLCAwLCAwLCAwLCAtMTYsIDAsIDAsIDAsIDAsIDAsIDAsIC0xN1xuXTtcbmNvbnN0IFBJRUNFX01BU0tTID0geyBwOiAweDEsIG46IDB4MiwgYjogMHg0LCByOiAweDgsIHE6IDB4MTAsIGs6IDB4MjAgfTtcbmNvbnN0IFNZTUJPTFMgPSAncG5icnFrUE5CUlFLJztcbmNvbnN0IFBST01PVElPTlMgPSBbS05JR0hULCBCSVNIT1AsIFJPT0ssIFFVRUVOXTtcbmNvbnN0IFJBTktfMSA9IDc7XG5jb25zdCBSQU5LXzIgPSA2O1xuLypcbiAqIGNvbnN0IFJBTktfMyA9IDVcbiAqIGNvbnN0IFJBTktfNCA9IDRcbiAqIGNvbnN0IFJBTktfNSA9IDNcbiAqIGNvbnN0IFJBTktfNiA9IDJcbiAqL1xuY29uc3QgUkFOS183ID0gMTtcbmNvbnN0IFJBTktfOCA9IDA7XG5jb25zdCBTSURFUyA9IHtcbiAgICBbS0lOR106IEJJVFMuS1NJREVfQ0FTVExFLFxuICAgIFtRVUVFTl06IEJJVFMuUVNJREVfQ0FTVExFXG59O1xuY29uc3QgUk9PS1MgPSB7XG4gICAgdzogW1xuICAgICAgICB7IHNxdWFyZTogT3g4OC5hMSwgZmxhZzogQklUUy5RU0lERV9DQVNUTEUgfSxcbiAgICAgICAgeyBzcXVhcmU6IE94ODguaDEsIGZsYWc6IEJJVFMuS1NJREVfQ0FTVExFIH0sXG4gICAgXSxcbiAgICBiOiBbXG4gICAgICAgIHsgc3F1YXJlOiBPeDg4LmE4LCBmbGFnOiBCSVRTLlFTSURFX0NBU1RMRSB9LFxuICAgICAgICB7IHNxdWFyZTogT3g4OC5oOCwgZmxhZzogQklUUy5LU0lERV9DQVNUTEUgfSxcbiAgICBdLFxufTtcbmNvbnN0IFNFQ09ORF9SQU5LID0geyBiOiBSQU5LXzcsIHc6IFJBTktfMiB9O1xuY29uc3QgVEVSTUlOQVRJT05fTUFSS0VSUyA9IFsnMS0wJywgJzAtMScsICcxLzItMS8yJywgJyonXTtcbi8vIEV4dHJhY3RzIHRoZSB6ZXJvLWJhc2VkIHJhbmsgb2YgYW4gMHg4OCBzcXVhcmUuXG5mdW5jdGlvbiByYW5rKHNxdWFyZSkge1xuICAgIHJldHVybiBzcXVhcmUgPj4gNDtcbn1cbi8vIEV4dHJhY3RzIHRoZSB6ZXJvLWJhc2VkIGZpbGUgb2YgYW4gMHg4OCBzcXVhcmUuXG5mdW5jdGlvbiBmaWxlKHNxdWFyZSkge1xuICAgIHJldHVybiBzcXVhcmUgJiAweGY7XG59XG5mdW5jdGlvbiBpc0RpZ2l0KGMpIHtcbiAgICByZXR1cm4gJzAxMjM0NTY3ODknLmluZGV4T2YoYykgIT09IC0xO1xufVxuLy8gQ29udmVydHMgYSAweDg4IHNxdWFyZSB0byBhbGdlYnJhaWMgbm90YXRpb24uXG5mdW5jdGlvbiBhbGdlYnJhaWMoc3F1YXJlKSB7XG4gICAgY29uc3QgZiA9IGZpbGUoc3F1YXJlKTtcbiAgICBjb25zdCByID0gcmFuayhzcXVhcmUpO1xuICAgIHJldHVybiAoJ2FiY2RlZmdoJy5zdWJzdHJpbmcoZiwgZiArIDEpICtcbiAgICAgICAgJzg3NjU0MzIxJy5zdWJzdHJpbmcociwgciArIDEpKTtcbn1cbmZ1bmN0aW9uIHN3YXBDb2xvcihjb2xvcikge1xuICAgIHJldHVybiBjb2xvciA9PT0gV0hJVEUgPyBCTEFDSyA6IFdISVRFO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRmVuKGZlbikge1xuICAgIC8vIDFzdCBjcml0ZXJpb246IDYgc3BhY2Utc2VwZXJhdGVkIGZpZWxkcz9cbiAgICBjb25zdCB0b2tlbnMgPSBmZW4uc3BsaXQoL1xccysvKTtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCAhPT0gNikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIEZFTjogbXVzdCBjb250YWluIHNpeCBzcGFjZS1kZWxpbWl0ZWQgZmllbGRzJyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gMm5kIGNyaXRlcmlvbjogbW92ZSBudW1iZXIgZmllbGQgaXMgYSBpbnRlZ2VyIHZhbHVlID4gMD9cbiAgICBjb25zdCBtb3ZlTnVtYmVyID0gcGFyc2VJbnQodG9rZW5zWzVdLCAxMCk7XG4gICAgaWYgKGlzTmFOKG1vdmVOdW1iZXIpIHx8IG1vdmVOdW1iZXIgPD0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIEZFTjogbW92ZSBudW1iZXIgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXInLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyAzcmQgY3JpdGVyaW9uOiBoYWxmIG1vdmUgY291bnRlciBpcyBhbiBpbnRlZ2VyID49IDA/XG4gICAgY29uc3QgaGFsZk1vdmVzID0gcGFyc2VJbnQodG9rZW5zWzRdLCAxMCk7XG4gICAgaWYgKGlzTmFOKGhhbGZNb3ZlcykgfHwgaGFsZk1vdmVzIDwgMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIEZFTjogaGFsZiBtb3ZlIGNvdW50ZXIgbnVtYmVyIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlcicsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIDR0aCBjcml0ZXJpb246IDR0aCBmaWVsZCBpcyBhIHZhbGlkIGUucC4tc3RyaW5nP1xuICAgIGlmICghL14oLXxbYWJjZGVmZ2hdWzM2XSkkLy50ZXN0KHRva2Vuc1szXSkpIHtcbiAgICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgRkVOOiBlbi1wYXNzYW50IHNxdWFyZSBpcyBpbnZhbGlkJyB9O1xuICAgIH1cbiAgICAvLyA1dGggY3JpdGVyaW9uOiAzdGggZmllbGQgaXMgYSB2YWxpZCBjYXN0bGUtc3RyaW5nP1xuICAgIGlmICgvW15rS3FRLV0vLnRlc3QodG9rZW5zWzJdKSkge1xuICAgICAgICByZXR1cm4geyBvazogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBGRU46IGNhc3RsaW5nIGF2YWlsYWJpbGl0eSBpcyBpbnZhbGlkJyB9O1xuICAgIH1cbiAgICAvLyA2dGggY3JpdGVyaW9uOiAybmQgZmllbGQgaXMgXCJ3XCIgKHdoaXRlKSBvciBcImJcIiAoYmxhY2spP1xuICAgIGlmICghL14od3xiKSQvLnRlc3QodG9rZW5zWzFdKSkge1xuICAgICAgICByZXR1cm4geyBvazogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBGRU46IHNpZGUtdG8tbW92ZSBpcyBpbnZhbGlkJyB9O1xuICAgIH1cbiAgICAvLyA3dGggY3JpdGVyaW9uOiAxc3QgZmllbGQgY29udGFpbnMgOCByb3dzP1xuICAgIGNvbnN0IHJvd3MgPSB0b2tlbnNbMF0uc3BsaXQoJy8nKTtcbiAgICBpZiAocm93cy5sZW5ndGggIT09IDgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBcIkludmFsaWQgRkVOOiBwaWVjZSBkYXRhIGRvZXMgbm90IGNvbnRhaW4gOCAnLyctZGVsaW1pdGVkIHJvd3NcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gOHRoIGNyaXRlcmlvbjogZXZlcnkgcm93IGlzIHZhbGlkP1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBjaGVjayBmb3IgcmlnaHQgc3VtIG9mIGZpZWxkcyBBTkQgbm90IHR3byBudW1iZXJzIGluIHN1Y2Nlc3Npb25cbiAgICAgICAgbGV0IHN1bUZpZWxkcyA9IDA7XG4gICAgICAgIGxldCBwcmV2aW91c1dhc051bWJlciA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHJvd3NbaV0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGlmIChpc0RpZ2l0KHJvd3NbaV1ba10pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzV2FzTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgRkVOOiBwaWVjZSBkYXRhIGlzIGludmFsaWQgKGNvbnNlY3V0aXZlIG51bWJlciknLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdW1GaWVsZHMgKz0gcGFyc2VJbnQocm93c1tpXVtrXSwgMTApO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzV2FzTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghL15bcHJuYnFrUFJOQlFLXSQvLnRlc3Qocm93c1tpXVtrXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBGRU46IHBpZWNlIGRhdGEgaXMgaW52YWxpZCAoaW52YWxpZCBwaWVjZSknLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdW1GaWVsZHMgKz0gMTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1dhc051bWJlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdW1GaWVsZHMgIT09IDgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBGRU46IHBpZWNlIGRhdGEgaXMgaW52YWxpZCAodG9vIG1hbnkgc3F1YXJlcyBpbiByYW5rKScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgodG9rZW5zWzNdWzFdID09ICczJyAmJiB0b2tlbnNbMV0gPT0gJ3cnKSB8fFxuICAgICAgICAodG9rZW5zWzNdWzFdID09ICc2JyAmJiB0b2tlbnNbMV0gPT0gJ2InKSkge1xuICAgICAgICByZXR1cm4geyBvazogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBGRU46IGlsbGVnYWwgZW4tcGFzc2FudCBzcXVhcmUnIH07XG4gICAgfVxuICAgIGNvbnN0IGtpbmdzID0gW1xuICAgICAgICB7IGNvbG9yOiAnd2hpdGUnLCByZWdleDogL0svZyB9LFxuICAgICAgICB7IGNvbG9yOiAnYmxhY2snLCByZWdleDogL2svZyB9LFxuICAgIF07XG4gICAgZm9yIChjb25zdCB7IGNvbG9yLCByZWdleCB9IG9mIGtpbmdzKSB7XG4gICAgICAgIGlmICghcmVnZXgudGVzdCh0b2tlbnNbMF0pKSB7XG4gICAgICAgICAgICByZXR1cm4geyBvazogZmFsc2UsIGVycm9yOiBgSW52YWxpZCBGRU46IG1pc3NpbmcgJHtjb2xvcn0ga2luZ2AgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHRva2Vuc1swXS5tYXRjaChyZWdleCkgfHwgW10pLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG9rOiBmYWxzZSwgZXJyb3I6IGBJbnZhbGlkIEZFTjogdG9vIG1hbnkgJHtjb2xvcn0ga2luZ3NgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgb2s6IHRydWUgfTtcbn1cbi8vIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBhbWJpZ3VvdXMgbW92ZXNcbmZ1bmN0aW9uIGdldERpc2FtYmlndWF0b3IobW92ZSwgbW92ZXMpIHtcbiAgICBjb25zdCBmcm9tID0gbW92ZS5mcm9tO1xuICAgIGNvbnN0IHRvID0gbW92ZS50bztcbiAgICBjb25zdCBwaWVjZSA9IG1vdmUucGllY2U7XG4gICAgbGV0IGFtYmlndWl0aWVzID0gMDtcbiAgICBsZXQgc2FtZVJhbmsgPSAwO1xuICAgIGxldCBzYW1lRmlsZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFtYmlnRnJvbSA9IG1vdmVzW2ldLmZyb207XG4gICAgICAgIGNvbnN0IGFtYmlnVG8gPSBtb3Zlc1tpXS50bztcbiAgICAgICAgY29uc3QgYW1iaWdQaWVjZSA9IG1vdmVzW2ldLnBpZWNlO1xuICAgICAgICAvKlxuICAgICAgICAgKiBpZiBhIG1vdmUgb2YgdGhlIHNhbWUgcGllY2UgdHlwZSBlbmRzIG9uIHRoZSBzYW1lIHRvIHNxdWFyZSwgd2UnbGwgbmVlZFxuICAgICAgICAgKiB0byBhZGQgYSBkaXNhbWJpZ3VhdG9yIHRvIHRoZSBhbGdlYnJhaWMgbm90YXRpb25cbiAgICAgICAgICovXG4gICAgICAgIGlmIChwaWVjZSA9PT0gYW1iaWdQaWVjZSAmJiBmcm9tICE9PSBhbWJpZ0Zyb20gJiYgdG8gPT09IGFtYmlnVG8pIHtcbiAgICAgICAgICAgIGFtYmlndWl0aWVzKys7XG4gICAgICAgICAgICBpZiAocmFuayhmcm9tKSA9PT0gcmFuayhhbWJpZ0Zyb20pKSB7XG4gICAgICAgICAgICAgICAgc2FtZVJhbmsrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWxlKGZyb20pID09PSBmaWxlKGFtYmlnRnJvbSkpIHtcbiAgICAgICAgICAgICAgICBzYW1lRmlsZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhbWJpZ3VpdGllcyA+IDApIHtcbiAgICAgICAgaWYgKHNhbWVSYW5rID4gMCAmJiBzYW1lRmlsZSA+IDApIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBpZiB0aGVyZSBleGlzdHMgYSBzaW1pbGFyIG1vdmluZyBwaWVjZSBvbiB0aGUgc2FtZSByYW5rIGFuZCBmaWxlIGFzXG4gICAgICAgICAgICAgKiB0aGUgbW92ZSBpbiBxdWVzdGlvbiwgdXNlIHRoZSBzcXVhcmUgYXMgdGhlIGRpc2FtYmlndWF0b3JcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuIGFsZ2VicmFpYyhmcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzYW1lRmlsZSA+IDApIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBpZiB0aGUgbW92aW5nIHBpZWNlIHJlc3RzIG9uIHRoZSBzYW1lIGZpbGUsIHVzZSB0aGUgcmFuayBzeW1ib2wgYXMgdGhlXG4gICAgICAgICAgICAgKiBkaXNhbWJpZ3VhdG9yXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBhbGdlYnJhaWMoZnJvbSkuY2hhckF0KDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZWxzZSB1c2UgdGhlIGZpbGUgc3ltYm9sXG4gICAgICAgICAgICByZXR1cm4gYWxnZWJyYWljKGZyb20pLmNoYXJBdCgwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5mdW5jdGlvbiBhZGRNb3ZlKG1vdmVzLCBjb2xvciwgZnJvbSwgdG8sIHBpZWNlLCBjYXB0dXJlZCA9IHVuZGVmaW5lZCwgZmxhZ3MgPSBCSVRTLk5PUk1BTCkge1xuICAgIGNvbnN0IHIgPSByYW5rKHRvKTtcbiAgICBpZiAocGllY2UgPT09IFBBV04gJiYgKHIgPT09IFJBTktfMSB8fCByID09PSBSQU5LXzgpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgUFJPTU9USU9OUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvbW90aW9uID0gUFJPTU9USU9OU1tpXTtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvbG9yLFxuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgcGllY2UsXG4gICAgICAgICAgICAgICAgY2FwdHVyZWQsXG4gICAgICAgICAgICAgICAgcHJvbW90aW9uLFxuICAgICAgICAgICAgICAgIGZsYWdzOiBmbGFncyB8IEJJVFMuUFJPTU9USU9OLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1vdmVzLnB1c2goe1xuICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICBwaWVjZSxcbiAgICAgICAgICAgIGNhcHR1cmVkLFxuICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluZmVyUGllY2VUeXBlKHNhbikge1xuICAgIGxldCBwaWVjZVR5cGUgPSBzYW4uY2hhckF0KDApO1xuICAgIGlmIChwaWVjZVR5cGUgPj0gJ2EnICYmIHBpZWNlVHlwZSA8PSAnaCcpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHNhbi5tYXRjaCgvW2EtaF1cXGQuKlthLWhdXFxkLyk7XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQQVdOO1xuICAgIH1cbiAgICBwaWVjZVR5cGUgPSBwaWVjZVR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAocGllY2VUeXBlID09PSAnbycpIHtcbiAgICAgICAgcmV0dXJuIEtJTkc7XG4gICAgfVxuICAgIHJldHVybiBwaWVjZVR5cGU7XG59XG4vLyBwYXJzZXMgYWxsIG9mIHRoZSBkZWNvcmF0b3JzIG91dCBvZiBhIFNBTiBzdHJpbmdcbmZ1bmN0aW9uIHN0cmlwcGVkU2FuKG1vdmUpIHtcbiAgICByZXR1cm4gbW92ZS5yZXBsYWNlKC89LywgJycpLnJlcGxhY2UoL1srI10/Wz8hXSokLywgJycpO1xufVxuZXhwb3J0IGNsYXNzIENoZXNzIHtcbiAgICBfYm9hcmQgPSBuZXcgQXJyYXkoMTI4KTtcbiAgICBfdHVybiA9IFdISVRFO1xuICAgIF9oZWFkZXIgPSB7fTtcbiAgICBfa2luZ3MgPSB7IHc6IEVNUFRZLCBiOiBFTVBUWSB9O1xuICAgIF9lcFNxdWFyZSA9IC0xO1xuICAgIF9oYWxmTW92ZXMgPSAwO1xuICAgIF9tb3ZlTnVtYmVyID0gMDtcbiAgICBfaGlzdG9yeSA9IFtdO1xuICAgIF9jb21tZW50cyA9IHt9O1xuICAgIF9jYXN0bGluZyA9IHsgdzogMCwgYjogMCB9O1xuICAgIGNvbnN0cnVjdG9yKGZlbiA9IERFRkFVTFRfUE9TSVRJT04pIHtcbiAgICAgICAgdGhpcy5sb2FkKGZlbik7XG4gICAgfVxuICAgIGNsZWFyKGtlZXBIZWFkZXJzID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5fYm9hcmQgPSBuZXcgQXJyYXkoMTI4KTtcbiAgICAgICAgdGhpcy5fa2luZ3MgPSB7IHc6IEVNUFRZLCBiOiBFTVBUWSB9O1xuICAgICAgICB0aGlzLl90dXJuID0gV0hJVEU7XG4gICAgICAgIHRoaXMuX2Nhc3RsaW5nID0geyB3OiAwLCBiOiAwIH07XG4gICAgICAgIHRoaXMuX2VwU3F1YXJlID0gRU1QVFk7XG4gICAgICAgIHRoaXMuX2hhbGZNb3ZlcyA9IDA7XG4gICAgICAgIHRoaXMuX21vdmVOdW1iZXIgPSAxO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuX2NvbW1lbnRzID0ge307XG4gICAgICAgIHRoaXMuX2hlYWRlciA9IGtlZXBIZWFkZXJzID8gdGhpcy5faGVhZGVyIDoge307XG4gICAgICAgIHRoaXMuX3VwZGF0ZVNldHVwKHRoaXMuZmVuKCkpO1xuICAgIH1cbiAgICByZW1vdmVIZWFkZXIoa2V5KSB7XG4gICAgICAgIGlmIChrZXkgaW4gdGhpcy5faGVhZGVyKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5faGVhZGVyW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9hZChmZW4sIGtlZXBIZWFkZXJzID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHRva2VucyA9IGZlbi5zcGxpdCgvXFxzKy8pO1xuICAgICAgICAvLyBhcHBlbmQgY29tbW9ubHkgb21pdHRlZCBmZW4gdG9rZW5zXG4gICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID49IDIgJiYgdG9rZW5zLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgICAgIGNvbnN0IGFkanVzdG1lbnRzID0gWyctJywgJy0nLCAnMCcsICcxJ107XG4gICAgICAgICAgICBmZW4gPSB0b2tlbnMuY29uY2F0KGFkanVzdG1lbnRzLnNsaWNlKC0oNiAtIHRva2Vucy5sZW5ndGgpKSkuam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIHRva2VucyA9IGZlbi5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBjb25zdCB7IG9rLCBlcnJvciB9ID0gdmFsaWRhdGVGZW4oZmVuKTtcbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRva2Vuc1swXTtcbiAgICAgICAgbGV0IHNxdWFyZSA9IDA7XG4gICAgICAgIHRoaXMuY2xlYXIoa2VlcEhlYWRlcnMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwaWVjZSA9IHBvc2l0aW9uLmNoYXJBdChpKTtcbiAgICAgICAgICAgIGlmIChwaWVjZSA9PT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0RpZ2l0KHBpZWNlKSkge1xuICAgICAgICAgICAgICAgIHNxdWFyZSArPSBwYXJzZUludChwaWVjZSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBwaWVjZSA8ICdhJyA/IFdISVRFIDogQkxBQ0s7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXQoeyB0eXBlOiBwaWVjZS50b0xvd2VyQ2FzZSgpLCBjb2xvciB9LCBhbGdlYnJhaWMoc3F1YXJlKSk7XG4gICAgICAgICAgICAgICAgc3F1YXJlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdHVybiA9IHRva2Vuc1sxXTtcbiAgICAgICAgaWYgKHRva2Vuc1syXS5pbmRleE9mKCdLJykgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5fY2FzdGxpbmcudyB8PSBCSVRTLktTSURFX0NBU1RMRTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW5zWzJdLmluZGV4T2YoJ1EnKSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXN0bGluZy53IHw9IEJJVFMuUVNJREVfQ0FTVExFO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbnNbMl0uaW5kZXhPZignaycpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nLmIgfD0gQklUUy5LU0lERV9DQVNUTEU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2Vuc1syXS5pbmRleE9mKCdxJykgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5fY2FzdGxpbmcuYiB8PSBCSVRTLlFTSURFX0NBU1RMRTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lcFNxdWFyZSA9IHRva2Vuc1szXSA9PT0gJy0nID8gRU1QVFkgOiBPeDg4W3Rva2Vuc1szXV07XG4gICAgICAgIHRoaXMuX2hhbGZNb3ZlcyA9IHBhcnNlSW50KHRva2Vuc1s0XSwgMTApO1xuICAgICAgICB0aGlzLl9tb3ZlTnVtYmVyID0gcGFyc2VJbnQodG9rZW5zWzVdLCAxMCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVNldHVwKHRoaXMuZmVuKCkpO1xuICAgIH1cbiAgICBmZW4oKSB7XG4gICAgICAgIGxldCBlbXB0eSA9IDA7XG4gICAgICAgIGxldCBmZW4gPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IE94ODguYTg7IGkgPD0gT3g4OC5oMTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fYm9hcmRbaV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZW1wdHkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlbiArPSBlbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgZW1wdHkgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbG9yLCB0eXBlOiBwaWVjZSB9ID0gdGhpcy5fYm9hcmRbaV07XG4gICAgICAgICAgICAgICAgZmVuICs9IGNvbG9yID09PSBXSElURSA/IHBpZWNlLnRvVXBwZXJDYXNlKCkgOiBwaWVjZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdHkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoaSArIDEpICYgMHg4OCkge1xuICAgICAgICAgICAgICAgIGlmIChlbXB0eSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmVuICs9IGVtcHR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gT3g4OC5oMSkge1xuICAgICAgICAgICAgICAgICAgICBmZW4gKz0gJy8nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbXB0eSA9IDA7XG4gICAgICAgICAgICAgICAgaSArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBjYXN0bGluZyA9ICcnO1xuICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbV0hJVEVdICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgIGNhc3RsaW5nICs9ICdLJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbV0hJVEVdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgIGNhc3RsaW5nICs9ICdRJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbQkxBQ0tdICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgIGNhc3RsaW5nICs9ICdrJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbQkxBQ0tdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgIGNhc3RsaW5nICs9ICdxJztcbiAgICAgICAgfVxuICAgICAgICAvLyBkbyB3ZSBoYXZlIGFuIGVtcHR5IGNhc3RsaW5nIGZsYWc/XG4gICAgICAgIGNhc3RsaW5nID0gY2FzdGxpbmcgfHwgJy0nO1xuICAgICAgICBsZXQgZXBTcXVhcmUgPSAnLSc7XG4gICAgICAgIC8qXG4gICAgICAgICAqIG9ubHkgcHJpbnQgdGhlIGVwIHNxdWFyZSBpZiBlbiBwYXNzYW50IGlzIGEgdmFsaWQgbW92ZSAocGF3biBpcyBwcmVzZW50XG4gICAgICAgICAqIGFuZCBlcCBjYXB0dXJlIGlzIG5vdCBwaW5uZWQpXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5fZXBTcXVhcmUgIT09IEVNUFRZKSB7XG4gICAgICAgICAgICBjb25zdCBiaWdQYXduU3F1YXJlID0gdGhpcy5fZXBTcXVhcmUgKyAodGhpcy5fdHVybiA9PT0gV0hJVEUgPyAxNiA6IC0xNik7XG4gICAgICAgICAgICBjb25zdCBzcXVhcmVzID0gW2JpZ1Bhd25TcXVhcmUgKyAxLCBiaWdQYXduU3F1YXJlIC0gMV07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNxdWFyZSBvZiBzcXVhcmVzKSB7XG4gICAgICAgICAgICAgICAgLy8gaXMgdGhlIHNxdWFyZSBvZmYgdGhlIGJvYXJkP1xuICAgICAgICAgICAgICAgIGlmIChzcXVhcmUgJiAweDg4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuX3R1cm47XG4gICAgICAgICAgICAgICAgLy8gaXMgdGhlcmUgYSBwYXduIHRoYXQgY2FuIGNhcHR1cmUgdGhlIGVwU3F1YXJlP1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9ib2FyZFtzcXVhcmVdPy5jb2xvciA9PT0gY29sb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYm9hcmRbc3F1YXJlXT8udHlwZSA9PT0gUEFXTikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcGF3biBtYWtlcyBhbiBlcCBjYXB0dXJlLCBkb2VzIGl0IGxlYXZlIGl0J3Mga2luZyBpbiBjaGVjaz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFrZU1vdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBzcXVhcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogdGhpcy5fZXBTcXVhcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwaWVjZTogUEFXTixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkOiBQQVdOLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IEJJVFMuRVBfQ0FQVFVSRSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGVnYWwgPSAhdGhpcy5faXNLaW5nQXR0YWNrZWQoY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl91bmRvTW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBlcCBpcyBsZWdhbCwgYnJlYWsgYW5kIHNldCB0aGUgZXAgc3F1YXJlIGluIHRoZSBGRU4gb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0xlZ2FsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcFNxdWFyZSA9IGFsZ2VicmFpYyh0aGlzLl9lcFNxdWFyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZmVuLFxuICAgICAgICAgICAgdGhpcy5fdHVybixcbiAgICAgICAgICAgIGNhc3RsaW5nLFxuICAgICAgICAgICAgZXBTcXVhcmUsXG4gICAgICAgICAgICB0aGlzLl9oYWxmTW92ZXMsXG4gICAgICAgICAgICB0aGlzLl9tb3ZlTnVtYmVyLFxuICAgICAgICBdLmpvaW4oJyAnKTtcbiAgICB9XG4gICAgLypcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgaW5pdGlhbCBib2FyZCBzZXR1cCBpcyBjaGFuZ2VkIHdpdGggcHV0KCkgb3IgcmVtb3ZlKCkuXG4gICAgICogbW9kaWZpZXMgdGhlIFNldFVwIGFuZCBGRU4gcHJvcGVydGllcyBvZiB0aGUgaGVhZGVyIG9iamVjdC4gSWYgdGhlIEZFTlxuICAgICAqIGlzIGVxdWFsIHRvIHRoZSBkZWZhdWx0IHBvc2l0aW9uLCB0aGUgU2V0VXAgYW5kIEZFTiBhcmUgZGVsZXRlZCB0aGUgc2V0dXBcbiAgICAgKiBpcyBvbmx5IHVwZGF0ZWQgaWYgaGlzdG9yeS5sZW5ndGggaXMgemVybywgaWUgbW92ZXMgaGF2ZW4ndCBiZWVuIG1hZGUuXG4gICAgICovXG4gICAgX3VwZGF0ZVNldHVwKGZlbikge1xuICAgICAgICBpZiAodGhpcy5faGlzdG9yeS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZmVuICE9PSBERUZBVUxUX1BPU0lUSU9OKSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFkZXJbJ1NldFVwJ10gPSAnMSc7XG4gICAgICAgICAgICB0aGlzLl9oZWFkZXJbJ0ZFTiddID0gZmVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2hlYWRlclsnU2V0VXAnXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9oZWFkZXJbJ0ZFTiddO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmxvYWQoREVGQVVMVF9QT1NJVElPTik7XG4gICAgfVxuICAgIGdldChzcXVhcmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvYXJkW094ODhbc3F1YXJlXV0gfHwgZmFsc2U7XG4gICAgfVxuICAgIHB1dCh7IHR5cGUsIGNvbG9yIH0sIHNxdWFyZSkge1xuICAgICAgICAvLyBjaGVjayBmb3IgcGllY2VcbiAgICAgICAgaWYgKFNZTUJPTFMuaW5kZXhPZih0eXBlLnRvTG93ZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGZvciB2YWxpZCBzcXVhcmVcbiAgICAgICAgaWYgKCEoc3F1YXJlIGluIE94ODgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3EgPSBPeDg4W3NxdWFyZV07XG4gICAgICAgIC8vIGRvbid0IGxldCB0aGUgdXNlciBwbGFjZSBtb3JlIHRoYW4gb25lIGtpbmdcbiAgICAgICAgaWYgKHR5cGUgPT0gS0lORyAmJlxuICAgICAgICAgICAgISh0aGlzLl9raW5nc1tjb2xvcl0gPT0gRU1QVFkgfHwgdGhpcy5fa2luZ3NbY29sb3JdID09IHNxKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2JvYXJkW3NxXSA9IHsgdHlwZTogdHlwZSwgY29sb3I6IGNvbG9yIH07XG4gICAgICAgIGlmICh0eXBlID09PSBLSU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9raW5nc1tjb2xvcl0gPSBzcTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91cGRhdGVDYXN0bGluZ1JpZ2h0cygpO1xuICAgICAgICB0aGlzLl91cGRhdGVFblBhc3NhbnRTcXVhcmUoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2V0dXAodGhpcy5mZW4oKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZW1vdmUoc3F1YXJlKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nZXQoc3F1YXJlKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2JvYXJkW094ODhbc3F1YXJlXV07XG4gICAgICAgIGlmIChwaWVjZSAmJiBwaWVjZS50eXBlID09PSBLSU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9raW5nc1twaWVjZS5jb2xvcl0gPSBFTVBUWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91cGRhdGVDYXN0bGluZ1JpZ2h0cygpO1xuICAgICAgICB0aGlzLl91cGRhdGVFblBhc3NhbnRTcXVhcmUoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2V0dXAodGhpcy5mZW4oKSk7XG4gICAgICAgIHJldHVybiBwaWVjZTtcbiAgICB9XG4gICAgX3VwZGF0ZUNhc3RsaW5nUmlnaHRzKCkge1xuICAgICAgICBjb25zdCB3aGl0ZUtpbmdJblBsYWNlID0gKHRoaXMuX2JvYXJkW094ODguZTFdPy50eXBlID09PSBLSU5HICYmIHRoaXMuX2JvYXJkW094ODguZTFdPy5jb2xvciA9PT0gV0hJVEUpO1xuICAgICAgICBjb25zdCBibGFja0tpbmdJblBsYWNlID0gKHRoaXMuX2JvYXJkW094ODguZThdPy50eXBlID09PSBLSU5HICYmIHRoaXMuX2JvYXJkW094ODguZThdPy5jb2xvciA9PT0gQkxBQ0spO1xuICAgICAgICBpZiAoIXdoaXRlS2luZ0luUGxhY2UgfHwgdGhpcy5fYm9hcmRbT3g4OC5hMV0/LnR5cGUgIT09IFJPT0sgfHwgdGhpcy5fYm9hcmRbT3g4OC5hMV0/LmNvbG9yICE9PSBXSElURSkge1xuICAgICAgICAgICAgdGhpcy5fY2FzdGxpbmcudyAmPSB+QklUUy5RU0lERV9DQVNUTEU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3aGl0ZUtpbmdJblBsYWNlIHx8IHRoaXMuX2JvYXJkW094ODguaDFdPy50eXBlICE9PSBST09LIHx8IHRoaXMuX2JvYXJkW094ODguaDFdPy5jb2xvciAhPT0gV0hJVEUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nLncgJj0gfkJJVFMuS1NJREVfQ0FTVExFO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYmxhY2tLaW5nSW5QbGFjZSB8fCB0aGlzLl9ib2FyZFtPeDg4LmE4XT8udHlwZSAhPT0gUk9PSyB8fCB0aGlzLl9ib2FyZFtPeDg4LmE4XT8uY29sb3IgIT09IEJMQUNLKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXN0bGluZy5iICY9IH5CSVRTLlFTSURFX0NBU1RMRTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJsYWNrS2luZ0luUGxhY2UgfHwgdGhpcy5fYm9hcmRbT3g4OC5oOF0/LnR5cGUgIT09IFJPT0sgfHwgdGhpcy5fYm9hcmRbT3g4OC5oOF0/LmNvbG9yICE9PSBCTEFDSykge1xuICAgICAgICAgICAgdGhpcy5fY2FzdGxpbmcuYiAmPSB+QklUUy5LU0lERV9DQVNUTEU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3VwZGF0ZUVuUGFzc2FudFNxdWFyZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VwU3F1YXJlID09PSBFTVBUWSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXJ0U3F1YXJlID0gdGhpcy5fZXBTcXVhcmUgKyAodGhpcy5fdHVybiA9PT0gV0hJVEUgPyAtMTYgOiAxNik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcXVhcmUgPSB0aGlzLl9lcFNxdWFyZSArICh0aGlzLl90dXJuID09PSBXSElURSA/IDE2IDogLTE2KTtcbiAgICAgICAgY29uc3QgYXR0YWNrZXJzID0gW2N1cnJlbnRTcXVhcmUgKyAxLCBjdXJyZW50U3F1YXJlIC0gMV07XG4gICAgICAgIGlmICh0aGlzLl9ib2FyZFtzdGFydFNxdWFyZV0gIT09IG51bGwgfHxcbiAgICAgICAgICAgIHRoaXMuX2JvYXJkW3RoaXMuX2VwU3F1YXJlXSAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5fYm9hcmRbY3VycmVudFNxdWFyZV0/LmNvbG9yICE9PSBzd2FwQ29sb3IodGhpcy5fdHVybikgfHxcbiAgICAgICAgICAgIHRoaXMuX2JvYXJkW2N1cnJlbnRTcXVhcmVdPy50eXBlICE9PSBQQVdOKSB7XG4gICAgICAgICAgICB0aGlzLl9lcFNxdWFyZSA9IEVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbkNhcHR1cmUgPSAoc3F1YXJlKSA9PiAhKHNxdWFyZSAmIDB4ODgpICYmXG4gICAgICAgICAgICB0aGlzLl9ib2FyZFtzcXVhcmVdPy5jb2xvciA9PT0gdGhpcy5fdHVybiAmJlxuICAgICAgICAgICAgdGhpcy5fYm9hcmRbc3F1YXJlXT8udHlwZSA9PT0gUEFXTjtcbiAgICAgICAgaWYgKCFhdHRhY2tlcnMuc29tZShjYW5DYXB0dXJlKSkge1xuICAgICAgICAgICAgdGhpcy5fZXBTcXVhcmUgPSBFTVBUWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYXR0YWNrZWQoY29sb3IsIHNxdWFyZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gT3g4OC5hODsgaSA8PSBPeDg4LmgxOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGRpZCB3ZSBydW4gb2ZmIHRoZSBlbmQgb2YgdGhlIGJvYXJkXG4gICAgICAgICAgICBpZiAoaSAmIDB4ODgpIHtcbiAgICAgICAgICAgICAgICBpICs9IDc7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBlbXB0eSBzcXVhcmUgb3Igd3JvbmcgY29sb3JcbiAgICAgICAgICAgIGlmICh0aGlzLl9ib2FyZFtpXSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2JvYXJkW2ldLmNvbG9yICE9PSBjb2xvcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGllY2UgPSB0aGlzLl9ib2FyZFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBpIC0gc3F1YXJlO1xuICAgICAgICAgICAgLy8gc2tpcCAtIHRvL2Zyb20gc3F1YXJlIGFyZSB0aGUgc2FtZVxuICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZGlmZmVyZW5jZSArIDExOTtcbiAgICAgICAgICAgIGlmIChBVFRBQ0tTW2luZGV4XSAmIFBJRUNFX01BU0tTW3BpZWNlLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09IFBBV04pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGllY2UuY29sb3IgPT09IFdISVRFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSBCTEFDSylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBpZWNlIGlzIGEga25pZ2h0IG9yIGEga2luZ1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZS50eXBlID09PSAnbicgfHwgcGllY2UudHlwZSA9PT0gJ2snKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBSQVlTW2luZGV4XTtcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGkgKyBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgbGV0IGJsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiAhPT0gc3F1YXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9ib2FyZFtqXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGogKz0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWJsb2NrZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgX2lzS2luZ0F0dGFja2VkKGNvbG9yKSB7XG4gICAgICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMuX2tpbmdzW2NvbG9yXTtcbiAgICAgICAgcmV0dXJuIHNxdWFyZSA9PT0gLTEgPyBmYWxzZSA6IHRoaXMuX2F0dGFja2VkKHN3YXBDb2xvcihjb2xvciksIHNxdWFyZSk7XG4gICAgfVxuICAgIGlzQXR0YWNrZWQoc3F1YXJlLCBhdHRhY2tlZEJ5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdHRhY2tlZChhdHRhY2tlZEJ5LCBPeDg4W3NxdWFyZV0pO1xuICAgIH1cbiAgICBpc0NoZWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNLaW5nQXR0YWNrZWQodGhpcy5fdHVybik7XG4gICAgfVxuICAgIGluQ2hlY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQ2hlY2soKTtcbiAgICB9XG4gICAgaXNDaGVja21hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQ2hlY2soKSAmJiB0aGlzLl9tb3ZlcygpLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgaXNTdGFsZW1hdGUoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0NoZWNrKCkgJiYgdGhpcy5fbW92ZXMoKS5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGlzSW5zdWZmaWNpZW50TWF0ZXJpYWwoKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIGsuYi4gdnMgay5iLiAob2Ygb3Bwb3NpdGUgY29sb3JzKSB3aXRoIG1hdGUgaW4gMTpcbiAgICAgICAgICogOC84LzgvOC8xYjYvOC9CMWs1L0s3IGIgLSAtIDAgMVxuICAgICAgICAgKlxuICAgICAgICAgKiBrLmIuIHZzIGsubi4gd2l0aCBtYXRlIGluIDE6XG4gICAgICAgICAqIDgvOC84LzgvMW42LzgvQjcvSzFrNSBiIC0gLSAyIDFcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHBpZWNlcyA9IHtcbiAgICAgICAgICAgIGI6IDAsXG4gICAgICAgICAgICBuOiAwLFxuICAgICAgICAgICAgcjogMCxcbiAgICAgICAgICAgIHE6IDAsXG4gICAgICAgICAgICBrOiAwLFxuICAgICAgICAgICAgcDogMCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYmlzaG9wcyA9IFtdO1xuICAgICAgICBsZXQgbnVtUGllY2VzID0gMDtcbiAgICAgICAgbGV0IHNxdWFyZUNvbG9yID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IE94ODguYTg7IGkgPD0gT3g4OC5oMTsgaSsrKSB7XG4gICAgICAgICAgICBzcXVhcmVDb2xvciA9IChzcXVhcmVDb2xvciArIDEpICUgMjtcbiAgICAgICAgICAgIGlmIChpICYgMHg4OCkge1xuICAgICAgICAgICAgICAgIGkgKz0gNztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5fYm9hcmRbaV07XG4gICAgICAgICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgICAgICAgICBwaWVjZXNbcGllY2UudHlwZV0gPSBwaWVjZS50eXBlIGluIHBpZWNlcyA/IHBpZWNlc1twaWVjZS50eXBlXSArIDEgOiAxO1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZS50eXBlID09PSBCSVNIT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgYmlzaG9wcy5wdXNoKHNxdWFyZUNvbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbnVtUGllY2VzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gayB2cy4ga1xuICAgICAgICBpZiAobnVtUGllY2VzID09PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgLy8gayB2cy4ga24gLi4uLiBvciAuLi4uIGsgdnMuIGtiXG4gICAgICAgIG51bVBpZWNlcyA9PT0gMyAmJlxuICAgICAgICAgICAgKHBpZWNlc1tCSVNIT1BdID09PSAxIHx8IHBpZWNlc1tLTklHSFRdID09PSAxKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobnVtUGllY2VzID09PSBwaWVjZXNbQklTSE9QXSArIDIpIHtcbiAgICAgICAgICAgIC8vIGtiIHZzLiBrYiB3aGVyZSBhbnkgbnVtYmVyIG9mIGJpc2hvcHMgYXJlIGFsbCBvbiB0aGUgc2FtZSBjb2xvclxuICAgICAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBiaXNob3BzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gYmlzaG9wc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdW0gPT09IDAgfHwgc3VtID09PSBsZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlzVGhyZWVmb2xkUmVwZXRpdGlvbigpIHtcbiAgICAgICAgY29uc3QgbW92ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0ge307XG4gICAgICAgIGxldCByZXBldGl0aW9uID0gZmFsc2U7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBtb3ZlID0gdGhpcy5fdW5kb01vdmUoKTtcbiAgICAgICAgICAgIGlmICghbW92ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIG1vdmVzLnB1c2gobW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiByZW1vdmUgdGhlIGxhc3QgdHdvIGZpZWxkcyBpbiB0aGUgRkVOIHN0cmluZywgdGhleSdyZSBub3QgbmVlZGVkIHdoZW5cbiAgICAgICAgICAgICAqIGNoZWNraW5nIGZvciBkcmF3IGJ5IHJlcFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBmZW4gPSB0aGlzLmZlbigpLnNwbGl0KCcgJykuc2xpY2UoMCwgNCkuam9pbignICcpO1xuICAgICAgICAgICAgLy8gaGFzIHRoZSBwb3NpdGlvbiBvY2N1cnJlZCB0aHJlZSBvciBtb3ZlIHRpbWVzXG4gICAgICAgICAgICBwb3NpdGlvbnNbZmVuXSA9IGZlbiBpbiBwb3NpdGlvbnMgPyBwb3NpdGlvbnNbZmVuXSArIDEgOiAxO1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uc1tmZW5dID49IDMpIHtcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vdmUgPSBtb3Zlcy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghbW92ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFrZU1vdmUobW92ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGV0aXRpb247XG4gICAgfVxuICAgIGlzRHJhdygpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9oYWxmTW92ZXMgPj0gMTAwIHx8IC8vIDUwIG1vdmVzIHBlciBzaWRlID0gMTAwIGhhbGYgbW92ZXNcbiAgICAgICAgICAgIHRoaXMuaXNTdGFsZW1hdGUoKSB8fFxuICAgICAgICAgICAgdGhpcy5pc0luc3VmZmljaWVudE1hdGVyaWFsKCkgfHxcbiAgICAgICAgICAgIHRoaXMuaXNUaHJlZWZvbGRSZXBldGl0aW9uKCkpO1xuICAgIH1cbiAgICBpc0dhbWVPdmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0NoZWNrbWF0ZSgpIHx8IHRoaXMuaXNTdGFsZW1hdGUoKSB8fCB0aGlzLmlzRHJhdygpO1xuICAgIH1cbiAgICBtb3Zlcyh7IHZlcmJvc2UgPSBmYWxzZSwgc3F1YXJlID0gdW5kZWZpbmVkLCBwaWVjZSA9IHVuZGVmaW5lZCwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG1vdmVzID0gdGhpcy5fbW92ZXMoeyBzcXVhcmUsIHBpZWNlIH0pO1xuICAgICAgICBpZiAodmVyYm9zZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vdmVzLm1hcCgobW92ZSkgPT4gdGhpcy5fbWFrZVByZXR0eShtb3ZlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbW92ZXMubWFwKChtb3ZlKSA9PiB0aGlzLl9tb3ZlVG9TYW4obW92ZSwgbW92ZXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfbW92ZXMoeyBsZWdhbCA9IHRydWUsIHBpZWNlID0gdW5kZWZpbmVkLCBzcXVhcmUgPSB1bmRlZmluZWQsIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBmb3JTcXVhcmUgPSBzcXVhcmUgPyBzcXVhcmUudG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZm9yUGllY2UgPSBwaWVjZT8udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgbW92ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdXMgPSB0aGlzLl90dXJuO1xuICAgICAgICBjb25zdCB0aGVtID0gc3dhcENvbG9yKHVzKTtcbiAgICAgICAgbGV0IGZpcnN0U3F1YXJlID0gT3g4OC5hODtcbiAgICAgICAgbGV0IGxhc3RTcXVhcmUgPSBPeDg4LmgxO1xuICAgICAgICBsZXQgc2luZ2xlU3F1YXJlID0gZmFsc2U7XG4gICAgICAgIC8vIGFyZSB3ZSBnZW5lcmF0aW5nIG1vdmVzIGZvciBhIHNpbmdsZSBzcXVhcmU/XG4gICAgICAgIGlmIChmb3JTcXVhcmUpIHtcbiAgICAgICAgICAgIC8vIGlsbGVnYWwgc3F1YXJlLCByZXR1cm4gZW1wdHkgbW92ZXNcbiAgICAgICAgICAgIGlmICghKGZvclNxdWFyZSBpbiBPeDg4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpcnN0U3F1YXJlID0gbGFzdFNxdWFyZSA9IE94ODhbZm9yU3F1YXJlXTtcbiAgICAgICAgICAgICAgICBzaW5nbGVTcXVhcmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGZyb20gPSBmaXJzdFNxdWFyZTsgZnJvbSA8PSBsYXN0U3F1YXJlOyBmcm9tKyspIHtcbiAgICAgICAgICAgIC8vIGRpZCB3ZSBydW4gb2ZmIHRoZSBlbmQgb2YgdGhlIGJvYXJkXG4gICAgICAgICAgICBpZiAoZnJvbSAmIDB4ODgpIHtcbiAgICAgICAgICAgICAgICBmcm9tICs9IDc7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbXB0eSBzcXVhcmUgb3Igb3Bwb25lbnQsIHNraXBcbiAgICAgICAgICAgIGlmICghdGhpcy5fYm9hcmRbZnJvbV0gfHwgdGhpcy5fYm9hcmRbZnJvbV0uY29sb3IgPT09IHRoZW0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdGhpcy5fYm9hcmRbZnJvbV07XG4gICAgICAgICAgICBsZXQgdG87XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gUEFXTikge1xuICAgICAgICAgICAgICAgIGlmIChmb3JQaWVjZSAmJiBmb3JQaWVjZSAhPT0gdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgLy8gc2luZ2xlIHNxdWFyZSwgbm9uLWNhcHR1cmluZ1xuICAgICAgICAgICAgICAgIHRvID0gZnJvbSArIFBBV05fT0ZGU0VUU1t1c11bMF07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9ib2FyZFt0b10pIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTW92ZShtb3ZlcywgdXMsIGZyb20sIHRvLCBQQVdOKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZG91YmxlIHNxdWFyZVxuICAgICAgICAgICAgICAgICAgICB0byA9IGZyb20gKyBQQVdOX09GRlNFVFNbdXNdWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoU0VDT05EX1JBTktbdXNdID09PSByYW5rKGZyb20pICYmICF0aGlzLl9ib2FyZFt0b10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE1vdmUobW92ZXMsIHVzLCBmcm9tLCB0bywgUEFXTiwgdW5kZWZpbmVkLCBCSVRTLkJJR19QQVdOKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwYXduIGNhcHR1cmVzXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI7IGogPCA0OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBmcm9tICsgUEFXTl9PRkZTRVRTW3VzXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvICYgMHg4OClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYm9hcmRbdG9dPy5jb2xvciA9PT0gdGhlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTW92ZShtb3ZlcywgdXMsIGZyb20sIHRvLCBQQVdOLCB0aGlzLl9ib2FyZFt0b10udHlwZSwgQklUUy5DQVBUVVJFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0byA9PT0gdGhpcy5fZXBTcXVhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE1vdmUobW92ZXMsIHVzLCBmcm9tLCB0bywgUEFXTiwgUEFXTiwgQklUUy5FUF9DQVBUVVJFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmb3JQaWVjZSAmJiBmb3JQaWVjZSAhPT0gdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxlbiA9IFBJRUNFX09GRlNFVFNbdHlwZV0ubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gUElFQ0VfT0ZGU0VUU1t0eXBlXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBmcm9tO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG8gKz0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvICYgMHg4OClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYm9hcmRbdG9dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTW92ZShtb3ZlcywgdXMsIGZyb20sIHRvLCB0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG93biBjb2xvciwgc3RvcCBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2JvYXJkW3RvXS5jb2xvciA9PT0gdXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE1vdmUobW92ZXMsIHVzLCBmcm9tLCB0bywgdHlwZSwgdGhpcy5fYm9hcmRbdG9dLnR5cGUsIEJJVFMuQ0FQVFVSRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBicmVhaywgaWYga25pZ2h0IG9yIGtpbmcgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBLTklHSFQgfHwgdHlwZSA9PT0gS0lORylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgKiBjaGVjayBmb3IgY2FzdGxpbmcgaWYgd2UncmU6XG4gICAgICAgICAqICAgYSkgZ2VuZXJhdGluZyBhbGwgbW92ZXMsIG9yXG4gICAgICAgICAqICAgYikgZG9pbmcgc2luZ2xlIHNxdWFyZSBtb3ZlIGdlbmVyYXRpb24gb24gdGhlIGtpbmcncyBzcXVhcmVcbiAgICAgICAgICovXG4gICAgICAgIGlmIChmb3JQaWVjZSA9PT0gdW5kZWZpbmVkIHx8IGZvclBpZWNlID09PSBLSU5HKSB7XG4gICAgICAgICAgICBpZiAoIXNpbmdsZVNxdWFyZSB8fCBsYXN0U3F1YXJlID09PSB0aGlzLl9raW5nc1t1c10pIHtcbiAgICAgICAgICAgICAgICAvLyBraW5nLXNpZGUgY2FzdGxpbmdcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbdXNdICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FzdGxpbmdGcm9tID0gdGhpcy5fa2luZ3NbdXNdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXN0bGluZ1RvID0gY2FzdGxpbmdGcm9tICsgMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9ib2FyZFtjYXN0bGluZ0Zyb20gKyAxXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuX2JvYXJkW2Nhc3RsaW5nVG9dICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fYXR0YWNrZWQodGhlbSwgdGhpcy5fa2luZ3NbdXNdKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuX2F0dGFja2VkKHRoZW0sIGNhc3RsaW5nRnJvbSArIDEpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fYXR0YWNrZWQodGhlbSwgY2FzdGxpbmdUbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE1vdmUobW92ZXMsIHVzLCB0aGlzLl9raW5nc1t1c10sIGNhc3RsaW5nVG8sIEtJTkcsIHVuZGVmaW5lZCwgQklUUy5LU0lERV9DQVNUTEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHF1ZWVuLXNpZGUgY2FzdGxpbmdcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2FzdGxpbmdbdXNdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FzdGxpbmdGcm9tID0gdGhpcy5fa2luZ3NbdXNdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXN0bGluZ1RvID0gY2FzdGxpbmdGcm9tIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9ib2FyZFtjYXN0bGluZ0Zyb20gLSAxXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuX2JvYXJkW2Nhc3RsaW5nRnJvbSAtIDJdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fYm9hcmRbY2FzdGxpbmdGcm9tIC0gM10gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLl9hdHRhY2tlZCh0aGVtLCB0aGlzLl9raW5nc1t1c10pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fYXR0YWNrZWQodGhlbSwgY2FzdGxpbmdGcm9tIC0gMSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLl9hdHRhY2tlZCh0aGVtLCBjYXN0bGluZ1RvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTW92ZShtb3ZlcywgdXMsIHRoaXMuX2tpbmdzW3VzXSwgY2FzdGxpbmdUbywgS0lORywgdW5kZWZpbmVkLCBCSVRTLlFTSURFX0NBU1RMRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgICogcmV0dXJuIGFsbCBwc2V1ZG8tbGVnYWwgbW92ZXMgKHRoaXMgaW5jbHVkZXMgbW92ZXMgdGhhdCBhbGxvdyB0aGUga2luZ1xuICAgICAgICAgKiB0byBiZSBjYXB0dXJlZClcbiAgICAgICAgICovXG4gICAgICAgIGlmICghbGVnYWwgfHwgdGhpcy5fa2luZ3NbdXNdID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vdmVzO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbHRlciBvdXQgaWxsZWdhbCBtb3Zlc1xuICAgICAgICBjb25zdCBsZWdhbE1vdmVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBtb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fbWFrZU1vdmUobW92ZXNbaV0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0tpbmdBdHRhY2tlZCh1cykpIHtcbiAgICAgICAgICAgICAgICBsZWdhbE1vdmVzLnB1c2gobW92ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdW5kb01vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGVnYWxNb3ZlcztcbiAgICB9XG4gICAgbW92ZShtb3ZlLCB7IHN0cmljdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICAvKlxuICAgICAgICAgKiBUaGUgbW92ZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHdpdGggaW4gdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICAgICAgICAgKlxuICAgICAgICAgKiAubW92ZSgnTnhiNycpICAgICAgIDwtIGFyZ3VtZW50IGlzIGEgY2FzZS1zZW5zaXRpdmUgU0FOIHN0cmluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiAubW92ZSh7IGZyb206ICdoNycsIDwtIGFyZ3VtZW50IGlzIGEgbW92ZSBvYmplY3RcbiAgICAgICAgICogICAgICAgICB0byA6J2g4JyxcbiAgICAgICAgICogICAgICAgICBwcm9tb3Rpb246ICdxJyB9KVxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBBbiBvcHRpb25hbCBzdHJpY3QgYXJndW1lbnQgbWF5IGJlIHN1cHBsaWVkIHRvIHRlbGwgY2hlc3MuanMgdG9cbiAgICAgICAgICogc3RyaWN0bHkgZm9sbG93IHRoZSBTQU4gc3BlY2lmaWNhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGxldCBtb3ZlT2JqID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBtb3ZlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbW92ZU9iaiA9IHRoaXMuX21vdmVGcm9tU2FuKG1vdmUsIHN0cmljdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1vdmUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBtb3ZlcyA9IHRoaXMuX21vdmVzKCk7XG4gICAgICAgICAgICAvLyBjb252ZXJ0IHRoZSBwcmV0dHkgbW92ZSBvYmplY3QgdG8gYW4gdWdseSBtb3ZlIG9iamVjdFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmUuZnJvbSA9PT0gYWxnZWJyYWljKG1vdmVzW2ldLmZyb20pICYmXG4gICAgICAgICAgICAgICAgICAgIG1vdmUudG8gPT09IGFsZ2VicmFpYyhtb3Zlc1tpXS50bykgJiZcbiAgICAgICAgICAgICAgICAgICAgKCEoJ3Byb21vdGlvbicgaW4gbW92ZXNbaV0pIHx8IG1vdmUucHJvbW90aW9uID09PSBtb3Zlc1tpXS5wcm9tb3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVPYmogPSBtb3Zlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGZhaWxlZCB0byBmaW5kIG1vdmVcbiAgICAgICAgaWYgKCFtb3ZlT2JqKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vdmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vdmU6ICR7bW92ZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtb3ZlOiAke0pTT04uc3RyaW5naWZ5KG1vdmUpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAqIG5lZWQgdG8gbWFrZSBhIGNvcHkgb2YgbW92ZSBiZWNhdXNlIHdlIGNhbid0IGdlbmVyYXRlIFNBTiBhZnRlciB0aGUgbW92ZVxuICAgICAgICAgKiBpcyBtYWRlXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBwcmV0dHlNb3ZlID0gdGhpcy5fbWFrZVByZXR0eShtb3ZlT2JqKTtcbiAgICAgICAgdGhpcy5fbWFrZU1vdmUobW92ZU9iaik7XG4gICAgICAgIHJldHVybiBwcmV0dHlNb3ZlO1xuICAgIH1cbiAgICBfcHVzaChtb3ZlKSB7XG4gICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICBtb3ZlLFxuICAgICAgICAgICAga2luZ3M6IHsgYjogdGhpcy5fa2luZ3MuYiwgdzogdGhpcy5fa2luZ3MudyB9LFxuICAgICAgICAgICAgdHVybjogdGhpcy5fdHVybixcbiAgICAgICAgICAgIGNhc3RsaW5nOiB7IGI6IHRoaXMuX2Nhc3RsaW5nLmIsIHc6IHRoaXMuX2Nhc3RsaW5nLncgfSxcbiAgICAgICAgICAgIGVwU3F1YXJlOiB0aGlzLl9lcFNxdWFyZSxcbiAgICAgICAgICAgIGhhbGZNb3ZlczogdGhpcy5faGFsZk1vdmVzLFxuICAgICAgICAgICAgbW92ZU51bWJlcjogdGhpcy5fbW92ZU51bWJlcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9tYWtlTW92ZShtb3ZlKSB7XG4gICAgICAgIGNvbnN0IHVzID0gdGhpcy5fdHVybjtcbiAgICAgICAgY29uc3QgdGhlbSA9IHN3YXBDb2xvcih1cyk7XG4gICAgICAgIHRoaXMuX3B1c2gobW92ZSk7XG4gICAgICAgIHRoaXMuX2JvYXJkW21vdmUudG9dID0gdGhpcy5fYm9hcmRbbW92ZS5mcm9tXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2JvYXJkW21vdmUuZnJvbV07XG4gICAgICAgIC8vIGlmIGVwIGNhcHR1cmUsIHJlbW92ZSB0aGUgY2FwdHVyZWQgcGF3blxuICAgICAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuRVBfQ0FQVFVSRSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3R1cm4gPT09IEJMQUNLKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2JvYXJkW21vdmUudG8gLSAxNl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYm9hcmRbbW92ZS50byArIDE2XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBwYXduIHByb21vdGlvbiwgcmVwbGFjZSB3aXRoIG5ldyBwaWVjZVxuICAgICAgICBpZiAobW92ZS5wcm9tb3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2JvYXJkW21vdmUudG9dID0geyB0eXBlOiBtb3ZlLnByb21vdGlvbiwgY29sb3I6IHVzIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgd2UgbW92ZWQgdGhlIGtpbmdcbiAgICAgICAgaWYgKHRoaXMuX2JvYXJkW21vdmUudG9dLnR5cGUgPT09IEtJTkcpIHtcbiAgICAgICAgICAgIHRoaXMuX2tpbmdzW3VzXSA9IG1vdmUudG87XG4gICAgICAgICAgICAvLyBpZiB3ZSBjYXN0bGVkLCBtb3ZlIHRoZSByb29rIG5leHQgdG8gdGhlIGtpbmdcbiAgICAgICAgICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXN0bGluZ1RvID0gbW92ZS50byAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FzdGxpbmdGcm9tID0gbW92ZS50byArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5fYm9hcmRbY2FzdGxpbmdUb10gPSB0aGlzLl9ib2FyZFtjYXN0bGluZ0Zyb21dO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ib2FyZFtjYXN0bGluZ0Zyb21dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FzdGxpbmdUbyA9IG1vdmUudG8gKyAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhc3RsaW5nRnJvbSA9IG1vdmUudG8gLSAyO1xuICAgICAgICAgICAgICAgIHRoaXMuX2JvYXJkW2Nhc3RsaW5nVG9dID0gdGhpcy5fYm9hcmRbY2FzdGxpbmdGcm9tXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYm9hcmRbY2FzdGxpbmdGcm9tXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHR1cm4gb2ZmIGNhc3RsaW5nXG4gICAgICAgICAgICB0aGlzLl9jYXN0bGluZ1t1c10gPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIHR1cm4gb2ZmIGNhc3RsaW5nIGlmIHdlIG1vdmUgYSByb29rXG4gICAgICAgIGlmICh0aGlzLl9jYXN0bGluZ1t1c10pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBST09LU1t1c10ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobW92ZS5mcm9tID09PSBST09LU1t1c11baV0uc3F1YXJlICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nW3VzXSAmIFJPT0tTW3VzXVtpXS5mbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nW3VzXSBePSBST09LU1t1c11baV0uZmxhZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHR1cm4gb2ZmIGNhc3RsaW5nIGlmIHdlIGNhcHR1cmUgYSByb29rXG4gICAgICAgIGlmICh0aGlzLl9jYXN0bGluZ1t0aGVtXSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IFJPT0tTW3RoZW1dLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmUudG8gPT09IFJPT0tTW3RoZW1dW2ldLnNxdWFyZSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYXN0bGluZ1t0aGVtXSAmIFJPT0tTW3RoZW1dW2ldLmZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FzdGxpbmdbdGhlbV0gXj0gUk9PS1NbdGhlbV1baV0uZmxhZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGJpZyBwYXduIG1vdmUsIHVwZGF0ZSB0aGUgZW4gcGFzc2FudCBzcXVhcmVcbiAgICAgICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLkJJR19QQVdOKSB7XG4gICAgICAgICAgICBpZiAodXMgPT09IEJMQUNLKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXBTcXVhcmUgPSBtb3ZlLnRvIC0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcFNxdWFyZSA9IG1vdmUudG8gKyAxNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2VwU3F1YXJlID0gRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzZXQgdGhlIDUwIG1vdmUgY291bnRlciBpZiBhIHBhd24gaXMgbW92ZWQgb3IgYSBwaWVjZSBpcyBjYXB0dXJlZFxuICAgICAgICBpZiAobW92ZS5waWVjZSA9PT0gUEFXTikge1xuICAgICAgICAgICAgdGhpcy5faGFsZk1vdmVzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtb3ZlLmZsYWdzICYgKEJJVFMuQ0FQVFVSRSB8IEJJVFMuRVBfQ0FQVFVSRSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbGZNb3ZlcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oYWxmTW92ZXMrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodXMgPT09IEJMQUNLKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3ZlTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdHVybiA9IHRoZW07XG4gICAgfVxuICAgIHVuZG8oKSB7XG4gICAgICAgIGNvbnN0IG1vdmUgPSB0aGlzLl91bmRvTW92ZSgpO1xuICAgICAgICByZXR1cm4gbW92ZSA/IHRoaXMuX21ha2VQcmV0dHkobW92ZSkgOiBudWxsO1xuICAgIH1cbiAgICBfdW5kb01vdmUoKSB7XG4gICAgICAgIGNvbnN0IG9sZCA9IHRoaXMuX2hpc3RvcnkucG9wKCk7XG4gICAgICAgIGlmIChvbGQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW92ZSA9IG9sZC5tb3ZlO1xuICAgICAgICB0aGlzLl9raW5ncyA9IG9sZC5raW5ncztcbiAgICAgICAgdGhpcy5fdHVybiA9IG9sZC50dXJuO1xuICAgICAgICB0aGlzLl9jYXN0bGluZyA9IG9sZC5jYXN0bGluZztcbiAgICAgICAgdGhpcy5fZXBTcXVhcmUgPSBvbGQuZXBTcXVhcmU7XG4gICAgICAgIHRoaXMuX2hhbGZNb3ZlcyA9IG9sZC5oYWxmTW92ZXM7XG4gICAgICAgIHRoaXMuX21vdmVOdW1iZXIgPSBvbGQubW92ZU51bWJlcjtcbiAgICAgICAgY29uc3QgdXMgPSB0aGlzLl90dXJuO1xuICAgICAgICBjb25zdCB0aGVtID0gc3dhcENvbG9yKHVzKTtcbiAgICAgICAgdGhpcy5fYm9hcmRbbW92ZS5mcm9tXSA9IHRoaXMuX2JvYXJkW21vdmUudG9dO1xuICAgICAgICB0aGlzLl9ib2FyZFttb3ZlLmZyb21dLnR5cGUgPSBtb3ZlLnBpZWNlOyAvLyB0byB1bmRvIGFueSBwcm9tb3Rpb25zXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ib2FyZFttb3ZlLnRvXTtcbiAgICAgICAgaWYgKG1vdmUuY2FwdHVyZWQpIHtcbiAgICAgICAgICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5FUF9DQVBUVVJFKSB7XG4gICAgICAgICAgICAgICAgLy8gZW4gcGFzc2FudCBjYXB0dXJlXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICAgICAgICAgIGlmICh1cyA9PT0gQkxBQ0spIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBtb3ZlLnRvIC0gMTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG1vdmUudG8gKyAxNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fYm9hcmRbaW5kZXhdID0geyB0eXBlOiBQQVdOLCBjb2xvcjogdGhlbSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcmVndWxhciBjYXB0dXJlXG4gICAgICAgICAgICAgICAgdGhpcy5fYm9hcmRbbW92ZS50b10gPSB7IHR5cGU6IG1vdmUuY2FwdHVyZWQsIGNvbG9yOiB0aGVtIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdmUuZmxhZ3MgJiAoQklUUy5LU0lERV9DQVNUTEUgfCBCSVRTLlFTSURFX0NBU1RMRSkpIHtcbiAgICAgICAgICAgIGxldCBjYXN0bGluZ1RvLCBjYXN0bGluZ0Zyb207XG4gICAgICAgICAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuS1NJREVfQ0FTVExFKSB7XG4gICAgICAgICAgICAgICAgY2FzdGxpbmdUbyA9IG1vdmUudG8gKyAxO1xuICAgICAgICAgICAgICAgIGNhc3RsaW5nRnJvbSA9IG1vdmUudG8gLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FzdGxpbmdUbyA9IG1vdmUudG8gLSAyO1xuICAgICAgICAgICAgICAgIGNhc3RsaW5nRnJvbSA9IG1vdmUudG8gKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYm9hcmRbY2FzdGxpbmdUb10gPSB0aGlzLl9ib2FyZFtjYXN0bGluZ0Zyb21dO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2JvYXJkW2Nhc3RsaW5nRnJvbV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vdmU7XG4gICAgfVxuICAgIHBnbih7IG5ld2xpbmUgPSAnXFxuJywgbWF4V2lkdGggPSAwLCB9ID0ge30pIHtcbiAgICAgICAgLypcbiAgICAgICAgICogdXNpbmcgdGhlIHNwZWNpZmljYXRpb24gZnJvbSBodHRwOi8vd3d3LmNoZXNzY2x1Yi5jb20vaGVscC9QR04tc3BlY1xuICAgICAgICAgKiBleGFtcGxlIGZvciBodG1sIHVzYWdlOiAucGduKHsgbWF4X3dpZHRoOiA3MiwgbmV3bGluZV9jaGFyOiBcIjxiciAvPlwiIH0pXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGhlYWRlckV4aXN0cyA9IGZhbHNlO1xuICAgICAgICAvKiBhZGQgdGhlIFBHTiBoZWFkZXIgaW5mb3JtYXRpb24gKi9cbiAgICAgICAgZm9yIChjb25zdCBpIGluIHRoaXMuX2hlYWRlcikge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFRPRE86IG9yZGVyIG9mIGVudW1lcmF0ZWQgcHJvcGVydGllcyBpbiBoZWFkZXIgb2JqZWN0IGlzIG5vdFxuICAgICAgICAgICAgICogZ3VhcmFudGVlZCwgc2VlIEVDTUEtMjYyIHNwZWMgKHNlY3Rpb24gMTIuNi40KVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXN1bHQucHVzaCgnWycgKyBpICsgJyBcIicgKyB0aGlzLl9oZWFkZXJbaV0gKyAnXCJdJyArIG5ld2xpbmUpO1xuICAgICAgICAgICAgaGVhZGVyRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGVyRXhpc3RzICYmIHRoaXMuX2hpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChuZXdsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHBlbmRDb21tZW50ID0gKG1vdmVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSB0aGlzLl9jb21tZW50c1t0aGlzLmZlbigpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29tbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxpbWl0ZXIgPSBtb3ZlU3RyaW5nLmxlbmd0aCA+IDAgPyAnICcgOiAnJztcbiAgICAgICAgICAgICAgICBtb3ZlU3RyaW5nID0gYCR7bW92ZVN0cmluZ30ke2RlbGltaXRlcn17JHtjb21tZW50fX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vdmVTdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHBvcCBhbGwgb2YgaGlzdG9yeSBvbnRvIHJldmVyc2VkX2hpc3RvcnlcbiAgICAgICAgY29uc3QgcmV2ZXJzZWRIaXN0b3J5ID0gW107XG4gICAgICAgIHdoaWxlICh0aGlzLl9oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldmVyc2VkSGlzdG9yeS5wdXNoKHRoaXMuX3VuZG9Nb3ZlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vdmVzID0gW107XG4gICAgICAgIGxldCBtb3ZlU3RyaW5nID0gJyc7XG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSBvZiBhIGNvbW1lbnRlZCBzdGFydGluZyBwb3NpdGlvbiB3aXRoIG5vIG1vdmVzXG4gICAgICAgIGlmIChyZXZlcnNlZEhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKGFwcGVuZENvbW1lbnQoJycpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBidWlsZCB0aGUgbGlzdCBvZiBtb3Zlcy4gIGEgbW92ZV9zdHJpbmcgbG9va3MgbGlrZTogXCIzLiBlMyBlNlwiXG4gICAgICAgIHdoaWxlIChyZXZlcnNlZEhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbW92ZVN0cmluZyA9IGFwcGVuZENvbW1lbnQobW92ZVN0cmluZyk7XG4gICAgICAgICAgICBjb25zdCBtb3ZlID0gcmV2ZXJzZWRIaXN0b3J5LnBvcCgpO1xuICAgICAgICAgICAgLy8gbWFrZSBUeXBlU2NyaXB0IHN0b3AgY29tcGxhaW5pbmcgYWJvdXQgbW92ZSBiZWluZyB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmICghbW92ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlIHBvc2l0aW9uIHN0YXJ0ZWQgd2l0aCBibGFjayB0byBtb3ZlLCBzdGFydCBQR04gd2l0aCAjLiAuLi5cbiAgICAgICAgICAgIGlmICghdGhpcy5faGlzdG9yeS5sZW5ndGggJiYgbW92ZS5jb2xvciA9PT0gJ2InKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gYCR7dGhpcy5fbW92ZU51bWJlcn0uIC4uLmA7XG4gICAgICAgICAgICAgICAgLy8gaXMgdGhlcmUgYSBjb21tZW50IHByZWNlZGluZyB0aGUgZmlyc3QgbW92ZT9cbiAgICAgICAgICAgICAgICBtb3ZlU3RyaW5nID0gbW92ZVN0cmluZyA/IGAke21vdmVTdHJpbmd9ICR7cHJlZml4fWAgOiBwcmVmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb3ZlLmNvbG9yID09PSAndycpIHtcbiAgICAgICAgICAgICAgICAvLyBzdG9yZSB0aGUgcHJldmlvdXMgZ2VuZXJhdGVkIG1vdmVfc3RyaW5nIGlmIHdlIGhhdmUgb25lXG4gICAgICAgICAgICAgICAgaWYgKG1vdmVTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVzLnB1c2gobW92ZVN0cmluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vdmVTdHJpbmcgPSB0aGlzLl9tb3ZlTnVtYmVyICsgJy4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW92ZVN0cmluZyA9XG4gICAgICAgICAgICAgICAgbW92ZVN0cmluZyArICcgJyArIHRoaXMuX21vdmVUb1Nhbihtb3ZlLCB0aGlzLl9tb3Zlcyh7IGxlZ2FsOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFyZSB0aGVyZSBhbnkgb3RoZXIgbGVmdG92ZXIgbW92ZXM/XG4gICAgICAgIGlmIChtb3ZlU3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgbW92ZXMucHVzaChhcHBlbmRDb21tZW50KG1vdmVTdHJpbmcpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpcyB0aGVyZSBhIHJlc3VsdD9cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9oZWFkZXIuUmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbW92ZXMucHVzaCh0aGlzLl9oZWFkZXIuUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgKiBoaXN0b3J5IHNob3VsZCBiZSBiYWNrIHRvIHdoYXQgaXQgd2FzIGJlZm9yZSB3ZSBzdGFydGVkIGdlbmVyYXRpbmcgUEdOLFxuICAgICAgICAgKiBzbyBqb2luIHRvZ2V0aGVyIG1vdmVzXG4gICAgICAgICAqL1xuICAgICAgICBpZiAobWF4V2lkdGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuam9pbignJykgKyBtb3Zlcy5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyAoamFoKTogaHVoP1xuICAgICAgICBjb25zdCBzdHJpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIC8vIE5COiB0aGlzIGRvZXMgbm90IHByZXNlcnZlIGNvbW1lbnQgd2hpdGVzcGFjZS5cbiAgICAgICAgY29uc3Qgd3JhcENvbW1lbnQgPSBmdW5jdGlvbiAod2lkdGgsIG1vdmUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgbW92ZS5zcGxpdCgnICcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHdpZHRoICsgdG9rZW4ubGVuZ3RoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0cmlwKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3bGluZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godG9rZW4pO1xuICAgICAgICAgICAgICAgIHdpZHRoICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgnICcpO1xuICAgICAgICAgICAgICAgIHdpZHRoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RyaXAoKSkge1xuICAgICAgICAgICAgICAgIHdpZHRoLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHdyYXAgdGhlIFBHTiBvdXRwdXQgYXQgbWF4X3dpZHRoXG4gICAgICAgIGxldCBjdXJyZW50V2lkdGggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFdpZHRoICsgbW92ZXNbaV0ubGVuZ3RoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobW92ZXNbaV0uaW5jbHVkZXMoJ3snKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggPSB3cmFwQ29tbWVudChjdXJyZW50V2lkdGgsIG1vdmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbW92ZSB3aWxsIHB1c2ggcGFzdCBtYXhfd2lkdGhcbiAgICAgICAgICAgIGlmIChjdXJyZW50V2lkdGggKyBtb3Zlc1tpXS5sZW5ndGggPiBtYXhXaWR0aCAmJiBpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHRoZSBsaW5lIHdpdGggd2hpdGVzcGFjZVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXdsaW5lKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKCcgJyk7XG4gICAgICAgICAgICAgICAgY3VycmVudFdpZHRoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQucHVzaChtb3Zlc1tpXSk7XG4gICAgICAgICAgICBjdXJyZW50V2lkdGggKz0gbW92ZXNbaV0ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gICAgfVxuICAgIGhlYWRlciguLi5hcmdzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYXJnc1tpICsgMV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhZGVyW2FyZ3NbaV1dID0gYXJnc1tpICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWRlcjtcbiAgICB9XG4gICAgbG9hZFBnbihwZ24sIHsgc3RyaWN0ID0gZmFsc2UsIG5ld2xpbmVDaGFyID0gJ1xccj9cXG4nLCB9ID0ge30pIHtcbiAgICAgICAgZnVuY3Rpb24gbWFzayhzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXFxcXC9nLCAnXFxcXCcpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUGduSGVhZGVyKGhlYWRlcikge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyT2JqID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gaGVhZGVyLnNwbGl0KG5ldyBSZWdFeHAobWFzayhuZXdsaW5lQ2hhcikpKTtcbiAgICAgICAgICAgIGxldCBrZXkgPSAnJztcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSAvXlxccypcXFtcXHMqKFtBLVphLXpdKylcXHMqXCIoLiopXCJcXHMqXFxdXFxzKiQvO1xuICAgICAgICAgICAgICAgIGtleSA9IGhlYWRlcnNbaV0ucmVwbGFjZShyZWdleCwgJyQxJyk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBoZWFkZXJzW2ldLnJlcGxhY2UocmVnZXgsICckMicpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyT2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyT2JqO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0cmlwIHdoaXRlc3BhY2UgZnJvbSBoZWFkL3RhaWwgb2YgUEdOIGJsb2NrXG4gICAgICAgIHBnbiA9IHBnbi50cmltKCk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIFJlZ0V4cCB0byBzcGxpdCBoZWFkZXIuIFRha2VzIGFkdmFudGFnZSBvZiB0aGUgZmFjdCB0aGF0IGhlYWRlciBhbmQgbW92ZXRleHRcbiAgICAgICAgICogd2lsbCBhbHdheXMgaGF2ZSBhIGJsYW5rIGxpbmUgYmV0d2VlbiB0aGVtIChpZSwgdHdvIG5ld2xpbmVfY2hhcidzKS4gSGFuZGxlc1xuICAgICAgICAgKiBjYXNlIHdoZXJlIG1vdmV0ZXh0IGlzIGVtcHR5IGJ5IG1hdGNoaW5nIG5ld2xpbmVDaGFyIHVudGlsIGVuZCBvZiBzdHJpbmcgaXNcbiAgICAgICAgICogbWF0Y2hlZCAtIGVmZmVjdGl2ZWx5IHRyaW1taW5nIGZyb20gdGhlIGVuZCBleHRyYSBuZXdsaW5lQ2hhci5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBkZWZhdWx0IG5ld2xpbmVfY2hhciwgd2lsbCBlcXVhbDpcbiAgICAgICAgICogL14oXFxbKCg/Olxccj9cXG4pfC4pKlxcXSkoKD86XFxzKlxccj9cXG4pezJ9fCg/OlxccypcXHI/XFxuKSokKS9cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGhlYWRlclJlZ2V4ID0gbmV3IFJlZ0V4cCgnXihcXFxcWygoPzonICtcbiAgICAgICAgICAgIG1hc2sobmV3bGluZUNoYXIpICtcbiAgICAgICAgICAgICcpfC4pKlxcXFxdKScgK1xuICAgICAgICAgICAgJygoPzpcXFxccyonICtcbiAgICAgICAgICAgIG1hc2sobmV3bGluZUNoYXIpICtcbiAgICAgICAgICAgICcpezJ9fCg/OlxcXFxzKicgK1xuICAgICAgICAgICAgbWFzayhuZXdsaW5lQ2hhcikgK1xuICAgICAgICAgICAgJykqJCknKTtcbiAgICAgICAgLy8gSWYgbm8gaGVhZGVyIGdpdmVuLCBiZWdpbiB3aXRoIG1vdmVzLlxuICAgICAgICBjb25zdCBoZWFkZXJSZWdleFJlc3VsdHMgPSBoZWFkZXJSZWdleC5leGVjKHBnbik7XG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGhlYWRlclJlZ2V4UmVzdWx0c1xuICAgICAgICAgICAgPyBoZWFkZXJSZWdleFJlc3VsdHMubGVuZ3RoID49IDJcbiAgICAgICAgICAgICAgICA/IGhlYWRlclJlZ2V4UmVzdWx0c1sxXVxuICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIDogJyc7XG4gICAgICAgIC8vIFB1dCB0aGUgYm9hcmQgaW4gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uXG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgLy8gcGFyc2UgUEdOIGhlYWRlclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gcGFyc2VQZ25IZWFkZXIoaGVhZGVyU3RyaW5nKTtcbiAgICAgICAgbGV0IGZlbiA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgdXNlciBpcyBpbmNsdWRpbmcgZmVuIChwb3NzaWJseSB3aXRoIHdyb25nIHRhZyBjYXNlKVxuICAgICAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSAnZmVuJykge1xuICAgICAgICAgICAgICAgIGZlbiA9IGhlYWRlcnNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgKiB0aGUgcGVybWlzc2l2ZSBwYXJzZXIgc2hvdWxkIGF0dGVtcHQgdG8gbG9hZCBhIGZlbiB0YWcsIGV2ZW4gaWYgaXQncyB0aGVcbiAgICAgICAgICogd3JvbmcgY2FzZSBhbmQgZG9lc24ndCBpbmNsdWRlIGEgY29ycmVzcG9uZGluZyBbU2V0VXAgXCIxXCJdIHRhZ1xuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCFzdHJpY3QpIHtcbiAgICAgICAgICAgIGlmIChmZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQoZmVuLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBzdHJpY3QgcGFyc2VyIC0gbG9hZCB0aGUgc3RhcnRpbmcgcG9zaXRpb24gaW5kaWNhdGVkIGJ5IFtTZXR1cCAnMSddXG4gICAgICAgICAgICAgKiBhbmQgW0ZFTiBwb3NpdGlvbl1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKGhlYWRlcnNbJ1NldFVwJ10gPT09ICcxJykge1xuICAgICAgICAgICAgICAgIGlmICghKCdGRU4nIGluIGhlYWRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBQR046IEZFTiB0YWcgbXVzdCBiZSBzdXBwbGllZCB3aXRoIFNldFVwIHRhZycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgYXJndW1lbnQgdG8gbG9hZDogZG9uJ3QgY2xlYXIgdGhlIGhlYWRlcnNcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQoaGVhZGVyc1snRkVOJ10sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAqIE5COiB0aGUgcmVnZXhlcyBiZWxvdyB0aGF0IGRlbGV0ZSBtb3ZlIG51bWJlcnMsIHJlY3Vyc2l2ZSBhbm5vdGF0aW9ucyxcbiAgICAgICAgICogYW5kIG51bWVyaWMgYW5ub3RhdGlvbiBnbHlwaHMgbWF5IGFsc28gbWF0Y2ggdGV4dCBpbiBjb21tZW50cy4gVG9cbiAgICAgICAgICogcHJldmVudCB0aGlzLCB3ZSB0cmFuc2Zvcm0gY29tbWVudHMgYnkgaGV4LWVuY29kaW5nIHRoZW0gaW4gcGxhY2UgYW5kXG4gICAgICAgICAqIGRlY29kaW5nIHRoZW0gYWdhaW4gYWZ0ZXIgdGhlIG90aGVyIHRva2VucyBoYXZlIGJlZW4gZGVsZXRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hpbGUgdGhlIHNwZWMgc3RhdGVzIHRoYXQgUEdOIGZpbGVzIHNob3VsZCBiZSBBU0NJSSBlbmNvZGVkLCB3ZSB1c2VcbiAgICAgICAgICoge2VuLGRlfWNvZGVVUklDb21wb25lbnQgaGVyZSB0byBzdXBwb3J0IGFyYml0cmFyeSBVVEY4IGFzIGEgY29udmVuaWVuY2VcbiAgICAgICAgICogZm9yIG1vZGVybiB1c2Vyc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG9IZXgocykge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocylcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBlbmNvZGVVUkkgZG9lc24ndCB0cmFuc2Zvcm0gbW9zdCBBU0NJSSBjaGFyYWN0ZXJzLCBzbyB3ZSBoYW5kbGVcbiAgICAgICAgICAgICAgICAgKiB0aGVzZSBvdXJzZWx2ZXNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gYy5jaGFyQ29kZUF0KDApIDwgMTI4XG4gICAgICAgICAgICAgICAgICAgID8gYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgICAgICA6IGVuY29kZVVSSUNvbXBvbmVudChjKS5yZXBsYWNlKC8lL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZnJvbUhleChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5sZW5ndGggPT0gMFxuICAgICAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgICAgICA6IGRlY29kZVVSSUNvbXBvbmVudCgnJScgKyAocy5tYXRjaCgvLnsxLDJ9L2cpIHx8IFtdKS5qb2luKCclJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZUNvbW1lbnQgPSBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgcyA9IHMucmVwbGFjZShuZXcgUmVnRXhwKG1hc2sobmV3bGluZUNoYXIpLCAnZycpLCAnICcpO1xuICAgICAgICAgICAgcmV0dXJuIGB7JHt0b0hleChzLnNsaWNlKDEsIHMubGVuZ3RoIC0gMSkpfX1gO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkZWNvZGVDb21tZW50ID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXJ0c1dpdGgoJ3snKSAmJiBzLmVuZHNXaXRoKCd9JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbUhleChzLnNsaWNlKDEsIHMubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBkZWxldGUgaGVhZGVyIHRvIGdldCB0aGUgbW92ZXNcbiAgICAgICAgbGV0IG1zID0gcGduXG4gICAgICAgICAgICAucmVwbGFjZShoZWFkZXJTdHJpbmcsICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgIC8vIGVuY29kZSBjb21tZW50cyBzbyB0aGV5IGRvbid0IGdldCBkZWxldGVkIGJlbG93XG4gICAgICAgIG5ldyBSZWdFeHAoYCh7W159XSp9KSs/fDsoW14ke21hc2sobmV3bGluZUNoYXIpfV0qKWAsICdnJyksIGZ1bmN0aW9uIChfbWF0Y2gsIGJyYWNrZXQsIHNlbWljb2xvbikge1xuICAgICAgICAgICAgcmV0dXJuIGJyYWNrZXQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gZW5jb2RlQ29tbWVudChicmFja2V0KVxuICAgICAgICAgICAgICAgIDogJyAnICsgZW5jb2RlQ29tbWVudChgeyR7c2VtaWNvbG9uLnNsaWNlKDEpfX1gKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAobWFzayhuZXdsaW5lQ2hhciksICdnJyksICcgJyk7XG4gICAgICAgIC8vIGRlbGV0ZSByZWN1cnNpdmUgYW5ub3RhdGlvbiB2YXJpYXRpb25zXG4gICAgICAgIGNvbnN0IHJhdlJlZ2V4ID0gLyhcXChbXigpXStcXCkpKz8vZztcbiAgICAgICAgd2hpbGUgKHJhdlJlZ2V4LnRlc3QobXMpKSB7XG4gICAgICAgICAgICBtcyA9IG1zLnJlcGxhY2UocmF2UmVnZXgsICcnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZWxldGUgbW92ZSBudW1iZXJzXG4gICAgICAgIG1zID0gbXMucmVwbGFjZSgvXFxkK1xcLihcXC5cXC4pPy9nLCAnJyk7XG4gICAgICAgIC8vIGRlbGV0ZSAuLi4gaW5kaWNhdGluZyBibGFjayB0byBtb3ZlXG4gICAgICAgIG1zID0gbXMucmVwbGFjZSgvXFwuXFwuXFwuL2csICcnKTtcbiAgICAgICAgLyogZGVsZXRlIG51bWVyaWMgYW5ub3RhdGlvbiBnbHlwaHMgKi9cbiAgICAgICAgbXMgPSBtcy5yZXBsYWNlKC9cXCRcXGQrL2csICcnKTtcbiAgICAgICAgLy8gdHJpbSBhbmQgZ2V0IGFycmF5IG9mIG1vdmVzXG4gICAgICAgIGxldCBtb3ZlcyA9IG1zLnRyaW0oKS5zcGxpdChuZXcgUmVnRXhwKC9cXHMrLykpO1xuICAgICAgICAvLyBkZWxldGUgZW1wdHkgZW50cmllc1xuICAgICAgICBtb3ZlcyA9IG1vdmVzLmZpbHRlcigobW92ZSkgPT4gbW92ZSAhPT0gJycpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgIGZvciAobGV0IGhhbGZNb3ZlID0gMDsgaGFsZk1vdmUgPCBtb3Zlcy5sZW5ndGg7IGhhbGZNb3ZlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBkZWNvZGVDb21tZW50KG1vdmVzW2hhbGZNb3ZlXSk7XG4gICAgICAgICAgICBpZiAoY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29tbWVudHNbdGhpcy5mZW4oKV0gPSBjb21tZW50O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW92ZSA9IHRoaXMuX21vdmVGcm9tU2FuKG1vdmVzW2hhbGZNb3ZlXSwgc3RyaWN0KTtcbiAgICAgICAgICAgIC8vIGludmFsaWQgbW92ZVxuICAgICAgICAgICAgaWYgKG1vdmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIHdhcyB0aGUgbW92ZSBhbiBlbmQgb2YgZ2FtZSBtYXJrZXJcbiAgICAgICAgICAgICAgICBpZiAoVEVSTUlOQVRJT05fTUFSS0VSUy5pbmRleE9mKG1vdmVzW2hhbGZNb3ZlXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBtb3Zlc1toYWxmTW92ZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbW92ZSBpbiBQR046ICR7bW92ZXNbaGFsZk1vdmVdfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBlbmQgb2YgZ2FtZSBtYXJrZXIgaWYgbWFraW5nIGEgdmFsaWQgbW92ZVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAqIFBlciBzZWN0aW9uIDguMi42IG9mIHRoZSBQR04gc3BlYywgdGhlIFJlc3VsdCB0YWcgcGFpciBtdXN0IG1hdGNoIG1hdGNoXG4gICAgICAgICAqIHRoZSB0ZXJtaW5hdGlvbiBtYXJrZXIuIE9ubHkgZG8gdGhpcyB3aGVuIGhlYWRlcnMgYXJlIHByZXNlbnQsIGJ1dCB0aGVcbiAgICAgICAgICogcmVzdWx0IHRhZyBpcyBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBpZiAocmVzdWx0ICYmIE9iamVjdC5rZXlzKHRoaXMuX2hlYWRlcikubGVuZ3RoICYmICF0aGlzLl9oZWFkZXJbJ1Jlc3VsdCddKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcignUmVzdWx0JywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKlxuICAgICAqIENvbnZlcnQgYSBtb3ZlIGZyb20gMHg4OCBjb29yZGluYXRlcyB0byBTdGFuZGFyZCBBbGdlYnJhaWMgTm90YXRpb25cbiAgICAgKiAoU0FOKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3QgVXNlIHRoZSBzdHJpY3QgU0FOIHBhcnNlci4gSXQgd2lsbCB0aHJvdyBlcnJvcnNcbiAgICAgKiBvbiBvdmVybHkgZGlzYW1iaWd1YXRlZCBtb3ZlcyAoc2VlIGJlbG93KTpcbiAgICAgKlxuICAgICAqIHIxYnFrYm5yL3BwcDJwcHAvMm41LzFCMXBQMy80UDMvOC9QUFBQMlBQL1JOQlFLMU5SIGIgS1FrcSAtIDIgNFxuICAgICAqIDQuIC4uLiBOZ2U3IGlzIG92ZXJseSBkaXNhbWJpZ3VhdGVkIGJlY2F1c2UgdGhlIGtuaWdodCBvbiBjNiBpcyBwaW5uZWRcbiAgICAgKiA0LiAuLi4gTmU3IGlzIHRlY2huaWNhbGx5IHRoZSB2YWxpZCBTQU5cbiAgICAgKi9cbiAgICBfbW92ZVRvU2FuKG1vdmUsIG1vdmVzKSB7XG4gICAgICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICAgICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLktTSURFX0NBU1RMRSkge1xuICAgICAgICAgICAgb3V0cHV0ID0gJ08tTyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSAnTy1PLU8nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1vdmUucGllY2UgIT09IFBBV04pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhbWJpZ3VhdG9yID0gZ2V0RGlzYW1iaWd1YXRvcihtb3ZlLCBtb3Zlcyk7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IG1vdmUucGllY2UudG9VcHBlckNhc2UoKSArIGRpc2FtYmlndWF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW92ZS5mbGFncyAmIChCSVRTLkNBUFRVUkUgfCBCSVRTLkVQX0NBUFRVUkUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmUucGllY2UgPT09IFBBV04pIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IGFsZ2VicmFpYyhtb3ZlLmZyb20pWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJ3gnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0ICs9IGFsZ2VicmFpYyhtb3ZlLnRvKTtcbiAgICAgICAgICAgIGlmIChtb3ZlLnByb21vdGlvbikge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSAnPScgKyBtb3ZlLnByb21vdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmUpO1xuICAgICAgICBpZiAodGhpcy5pc0NoZWNrKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hlY2ttYXRlKCkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJyMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9ICcrJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bmRvTW92ZSgpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IGEgbW92ZSBmcm9tIFN0YW5kYXJkIEFsZ2VicmFpYyBOb3RhdGlvbiAoU0FOKSB0byAweDg4IGNvb3JkaW5hdGVzXG4gICAgX21vdmVGcm9tU2FuKG1vdmUsIHN0cmljdCA9IGZhbHNlKSB7XG4gICAgICAgIC8vIHN0cmlwIG9mZiBhbnkgbW92ZSBkZWNvcmF0aW9uczogZS5nIE5mMys/ISBiZWNvbWVzIE5mM1xuICAgICAgICBjb25zdCBjbGVhbk1vdmUgPSBzdHJpcHBlZFNhbihtb3ZlKTtcbiAgICAgICAgbGV0IHBpZWNlVHlwZSA9IGluZmVyUGllY2VUeXBlKGNsZWFuTW92ZSk7XG4gICAgICAgIGxldCBtb3ZlcyA9IHRoaXMuX21vdmVzKHsgbGVnYWw6IHRydWUsIHBpZWNlOiBwaWVjZVR5cGUgfSk7XG4gICAgICAgIC8vIHN0cmljdCBwYXJzZXJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2xlYW5Nb3ZlID09PSBzdHJpcHBlZFNhbih0aGlzLl9tb3ZlVG9TYW4obW92ZXNbaV0sIG1vdmVzKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhlIHN0cmljdCBwYXJzZXIgZmFpbGVkXG4gICAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwaWVjZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBmcm9tID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgdG8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBwcm9tb3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IHBlcm1pc3NpdmUgKG5vbi1zdHJpY3QpIHBhcnNlciBhbGxvd3MgdGhlIHVzZXIgdG8gcGFyc2VcbiAgICAgICAgICogbm9uLXN0YW5kYXJkIGNoZXNzIG5vdGF0aW9ucy4gVGhpcyBwYXJzZXIgaXMgb25seSBydW4gYWZ0ZXIgdGhlIHN0cmljdFxuICAgICAgICAgKiBTdGFuZGFyZCBBbGdlYnJhaWMgTm90YXRpb24gKFNBTikgcGFyc2VyIGhhcyBmYWlsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gcnVubmluZyB0aGUgcGVybWlzc2l2ZSBwYXJzZXIsIHdlJ2xsIHJ1biBhIHJlZ2V4IHRvIGdyYWIgdGhlIHBpZWNlLCB0aGVcbiAgICAgICAgICogdG8vZnJvbSBzcXVhcmUsIGFuZCBhbiBvcHRpb25hbCBwcm9tb3Rpb24gcGllY2UuIFRoaXMgcmVnZXggd2lsbFxuICAgICAgICAgKiBwYXJzZSBjb21tb24gbm9uLXN0YW5kYXJkIG5vdGF0aW9uIGxpa2U6IFBlMi1lNCwgUmMxYzQsIFFmM3hmNyxcbiAgICAgICAgICogZjdmOHEsIGIxYzNcbiAgICAgICAgICpcbiAgICAgICAgICogTk9URTogU29tZSBwb3NpdGlvbnMgYW5kIG1vdmVzIG1heSBiZSBhbWJpZ3VvdXMgd2hlbiB1c2luZyB0aGUgcGVybWlzc2l2ZVxuICAgICAgICAgKiBwYXJzZXIuIEZvciBleGFtcGxlLCBpbiB0aGlzIHBvc2l0aW9uOiA2azEvOC84L0I3LzgvOC84L0JONEsxIHcgLSAtIDAgMSxcbiAgICAgICAgICogdGhlIG1vdmUgYjFjMyBtYXkgYmUgaW50ZXJwcmV0ZWQgYXMgTmMzIG9yIEIxYzMgKGEgZGlzYW1iaWd1YXRlZCBiaXNob3BcbiAgICAgICAgICogbW92ZSkuIEluIHRoZXNlIGNhc2VzLCB0aGUgcGVybWlzc2l2ZSBwYXJzZXIgd2lsbCBkZWZhdWx0IHRvIHRoZSBtb3N0XG4gICAgICAgICAqIGJhc2ljIGludGVycHJldGF0aW9uICh3aGljaCBpcyBiMWMzIHBhcnNpbmcgdG8gTmMzKS5cbiAgICAgICAgICovXG4gICAgICAgIGxldCBvdmVybHlEaXNhbWJpZ3VhdGVkID0gZmFsc2U7XG4gICAgICAgIG1hdGNoZXMgPSBjbGVhbk1vdmUubWF0Y2goLyhbcG5icnFrUE5CUlFLXSk/KFthLWhdWzEtOF0peD8tPyhbYS1oXVsxLThdKShbcXJiblFSQk5dKT8vXG4gICAgICAgIC8vICAgICBwaWVjZSAgICAgICAgIGZyb20gICAgICAgICAgICAgIHRvICAgICAgIHByb21vdGlvblxuICAgICAgICApO1xuICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgcGllY2UgPSBtYXRjaGVzWzFdO1xuICAgICAgICAgICAgZnJvbSA9IG1hdGNoZXNbMl07XG4gICAgICAgICAgICB0byA9IG1hdGNoZXNbM107XG4gICAgICAgICAgICBwcm9tb3Rpb24gPSBtYXRjaGVzWzRdO1xuICAgICAgICAgICAgaWYgKGZyb20ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBvdmVybHlEaXNhbWJpZ3VhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBUaGUgW2EtaF0/WzEtOF0/IHBvcnRpb24gb2YgdGhlIHJlZ2V4IGJlbG93IGhhbmRsZXMgbW92ZXMgdGhhdCBtYXkgYmVcbiAgICAgICAgICAgICAqIG92ZXJseSBkaXNhbWJpZ3VhdGVkIChlLmcuIE5nZTcgaXMgdW5uZWNlc3NhcnkgYW5kIG5vbi1zdGFuZGFyZCB3aGVuXG4gICAgICAgICAgICAgKiB0aGVyZSBpcyBvbmUgbGVnYWwga25pZ2h0IG1vdmUgdG8gZTcpLiBJbiB0aGlzIGNhc2UsIHRoZSB2YWx1ZSBvZlxuICAgICAgICAgICAgICogJ2Zyb20nIHZhcmlhYmxlIHdpbGwgYmUgYSByYW5rIG9yIGZpbGUsIG5vdCBhIHNxdWFyZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbWF0Y2hlcyA9IGNsZWFuTW92ZS5tYXRjaCgvKFtwbmJycWtQTkJSUUtdKT8oW2EtaF0/WzEtOF0/KXg/LT8oW2EtaF1bMS04XSkoW3FyYm5RUkJOXSk/Lyk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIHBpZWNlID0gbWF0Y2hlc1sxXTtcbiAgICAgICAgICAgICAgICBmcm9tID0gbWF0Y2hlc1syXTtcbiAgICAgICAgICAgICAgICB0byA9IG1hdGNoZXNbM107XG4gICAgICAgICAgICAgICAgcHJvbW90aW9uID0gbWF0Y2hlc1s0XTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBvdmVybHlEaXNhbWJpZ3VhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGllY2VUeXBlID0gaW5mZXJQaWVjZVR5cGUoY2xlYW5Nb3ZlKTtcbiAgICAgICAgbW92ZXMgPSB0aGlzLl9tb3Zlcyh7XG4gICAgICAgICAgICBsZWdhbDogdHJ1ZSxcbiAgICAgICAgICAgIHBpZWNlOiBwaWVjZSA/IHBpZWNlIDogcGllY2VUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0bykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIWZyb20pIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBmcm9tIHNxdWFyZSwgaXQgY291bGQgYmUganVzdCAneCcgbWlzc2luZyBmcm9tIGEgY2FwdHVyZVxuICAgICAgICAgICAgICAgIGlmIChjbGVhbk1vdmUgPT09IHN0cmlwcGVkU2FuKHRoaXMuX21vdmVUb1Nhbihtb3Zlc1tpXSwgbW92ZXMpKS5yZXBsYWNlKCd4JywgJycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb3Zlc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaGFuZC1jb21wYXJlIG1vdmUgcHJvcGVydGllcyB3aXRoIHRoZSByZXN1bHRzIGZyb20gb3VyIHBlcm1pc3NpdmUgcmVnZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCghcGllY2UgfHwgcGllY2UudG9Mb3dlckNhc2UoKSA9PSBtb3Zlc1tpXS5waWVjZSkgJiZcbiAgICAgICAgICAgICAgICBPeDg4W2Zyb21dID09IG1vdmVzW2ldLmZyb20gJiZcbiAgICAgICAgICAgICAgICBPeDg4W3RvXSA9PSBtb3Zlc1tpXS50byAmJlxuICAgICAgICAgICAgICAgICghcHJvbW90aW9uIHx8IHByb21vdGlvbi50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnByb21vdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVybHlEaXNhbWJpZ3VhdGVkKSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBTUEVDSUFMIENBU0U6IHdlIHBhcnNlZCBhIG1vdmUgc3RyaW5nIHRoYXQgbWF5IGhhdmUgYW4gdW5uZWVkZWRcbiAgICAgICAgICAgICAgICAgKiByYW5rL2ZpbGUgZGlzYW1iaWd1YXRvciAoZS5nLiBOZ2U3KS4gIFRoZSAnZnJvbScgdmFyaWFibGUgd2lsbFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHNxdWFyZSA9IGFsZ2VicmFpYyhtb3Zlc1tpXS5mcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoKCFwaWVjZSB8fCBwaWVjZS50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnBpZWNlKSAmJlxuICAgICAgICAgICAgICAgICAgICBPeDg4W3RvXSA9PSBtb3Zlc1tpXS50byAmJlxuICAgICAgICAgICAgICAgICAgICAoZnJvbSA9PSBzcXVhcmVbMF0gfHwgZnJvbSA9PSBzcXVhcmVbMV0pICYmXG4gICAgICAgICAgICAgICAgICAgICghcHJvbW90aW9uIHx8IHByb21vdGlvbi50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnByb21vdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vdmVzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXNjaWkoKSB7XG4gICAgICAgIGxldCBzID0gJyAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXFxuJztcbiAgICAgICAgZm9yIChsZXQgaSA9IE94ODguYTg7IGkgPD0gT3g4OC5oMTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSByYW5rXG4gICAgICAgICAgICBpZiAoZmlsZShpKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHMgKz0gJyAnICsgJzg3NjU0MzIxJ1tyYW5rKGkpXSArICcgfCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fYm9hcmRbaV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaWVjZSA9IHRoaXMuX2JvYXJkW2ldLnR5cGU7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLl9ib2FyZFtpXS5jb2xvcjtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW1ib2wgPSBjb2xvciA9PT0gV0hJVEUgPyBwaWVjZS50b1VwcGVyQ2FzZSgpIDogcGllY2UudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBzICs9ICcgJyArIHN5bWJvbCArICcgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMgKz0gJyAuICc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGkgKyAxKSAmIDB4ODgpIHtcbiAgICAgICAgICAgICAgICBzICs9ICd8XFxuJztcbiAgICAgICAgICAgICAgICBpICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcyArPSAnICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcXG4nO1xuICAgICAgICBzICs9ICcgICAgIGEgIGIgIGMgIGQgIGUgIGYgIGcgIGgnO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgcGVyZnQoZGVwdGgpIHtcbiAgICAgICAgY29uc3QgbW92ZXMgPSB0aGlzLl9tb3Zlcyh7IGxlZ2FsOiBmYWxzZSB9KTtcbiAgICAgICAgbGV0IG5vZGVzID0gMDtcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLl90dXJuO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbW92ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmVzW2ldKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNLaW5nQXR0YWNrZWQoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlcHRoIC0gMSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMgKz0gdGhpcy5wZXJmdChkZXB0aCAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl91bmRvTW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gICAgLy8gcHJldHR5ID0gZXh0ZXJuYWwgbW92ZSBvYmplY3RcbiAgICBfbWFrZVByZXR0eSh1Z2x5TW92ZSkge1xuICAgICAgICBjb25zdCB7IGNvbG9yLCBwaWVjZSwgZnJvbSwgdG8sIGZsYWdzLCBjYXB0dXJlZCwgcHJvbW90aW9uIH0gPSB1Z2x5TW92ZTtcbiAgICAgICAgbGV0IHByZXR0eUZsYWdzID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBCSVRTKSB7XG4gICAgICAgICAgICBpZiAoQklUU1tmbGFnXSAmIGZsYWdzKSB7XG4gICAgICAgICAgICAgICAgcHJldHR5RmxhZ3MgKz0gRkxBR1NbZmxhZ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnJvbUFsZ2VicmFpYyA9IGFsZ2VicmFpYyhmcm9tKTtcbiAgICAgICAgY29uc3QgdG9BbGdlYnJhaWMgPSBhbGdlYnJhaWModG8pO1xuICAgICAgICBjb25zdCBtb3ZlID0ge1xuICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICBwaWVjZSxcbiAgICAgICAgICAgIGZyb206IGZyb21BbGdlYnJhaWMsXG4gICAgICAgICAgICB0bzogdG9BbGdlYnJhaWMsXG4gICAgICAgICAgICBzYW46IHRoaXMuX21vdmVUb1Nhbih1Z2x5TW92ZSwgdGhpcy5fbW92ZXMoeyBsZWdhbDogdHJ1ZSB9KSksXG4gICAgICAgICAgICBmbGFnczogcHJldHR5RmxhZ3MsXG4gICAgICAgICAgICBsYW46IGZyb21BbGdlYnJhaWMgKyB0b0FsZ2VicmFpYyxcbiAgICAgICAgICAgIGJlZm9yZTogdGhpcy5mZW4oKSxcbiAgICAgICAgICAgIGFmdGVyOiAnJyxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIEZFTiBmb3IgdGhlICdhZnRlcicga2V5XG4gICAgICAgIHRoaXMuX21ha2VNb3ZlKHVnbHlNb3ZlKTtcbiAgICAgICAgbW92ZS5hZnRlciA9IHRoaXMuZmVuKCk7XG4gICAgICAgIHRoaXMuX3VuZG9Nb3ZlKCk7XG4gICAgICAgIGlmIChjYXB0dXJlZCkge1xuICAgICAgICAgICAgbW92ZS5jYXB0dXJlZCA9IGNhcHR1cmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9tb3Rpb24pIHtcbiAgICAgICAgICAgIG1vdmUucHJvbW90aW9uID0gcHJvbW90aW9uO1xuICAgICAgICAgICAgbW92ZS5sYW4gKz0gcHJvbW90aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3ZlO1xuICAgIH1cbiAgICB0dXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHVybjtcbiAgICB9XG4gICAgYm9hcmQoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xuICAgICAgICBsZXQgcm93ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSBPeDg4LmE4OyBpIDw9IE94ODguaDE7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2JvYXJkW2ldID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByb3cucHVzaChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJvdy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlOiBhbGdlYnJhaWMoaSksXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMuX2JvYXJkW2ldLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLl9ib2FyZFtpXS5jb2xvcixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoaSArIDEpICYgMHg4OCkge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHJvdyk7XG4gICAgICAgICAgICAgICAgcm93ID0gW107XG4gICAgICAgICAgICAgICAgaSArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIHNxdWFyZUNvbG9yKHNxdWFyZSkge1xuICAgICAgICBpZiAoc3F1YXJlIGluIE94ODgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNxID0gT3g4OFtzcXVhcmVdO1xuICAgICAgICAgICAgcmV0dXJuIChyYW5rKHNxKSArIGZpbGUoc3EpKSAlIDIgPT09IDAgPyAnbGlnaHQnIDogJ2RhcmsnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBoaXN0b3J5KHsgdmVyYm9zZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCByZXZlcnNlZEhpc3RvcnkgPSBbXTtcbiAgICAgICAgY29uc3QgbW92ZUhpc3RvcnkgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMuX2hpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV2ZXJzZWRIaXN0b3J5LnB1c2godGhpcy5fdW5kb01vdmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vdmUgPSByZXZlcnNlZEhpc3RvcnkucG9wKCk7XG4gICAgICAgICAgICBpZiAoIW1vdmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJib3NlKSB7XG4gICAgICAgICAgICAgICAgbW92ZUhpc3RvcnkucHVzaCh0aGlzLl9tYWtlUHJldHR5KG1vdmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vdmVIaXN0b3J5LnB1c2godGhpcy5fbW92ZVRvU2FuKG1vdmUsIHRoaXMuX21vdmVzKCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3ZlSGlzdG9yeTtcbiAgICB9XG4gICAgX3BydW5lQ29tbWVudHMoKSB7XG4gICAgICAgIGNvbnN0IHJldmVyc2VkSGlzdG9yeSA9IFtdO1xuICAgICAgICBjb25zdCBjdXJyZW50Q29tbWVudHMgPSB7fTtcbiAgICAgICAgY29uc3QgY29weUNvbW1lbnQgPSAoZmVuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmVuIGluIHRoaXMuX2NvbW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbW1lbnRzW2Zlbl0gPSB0aGlzLl9jb21tZW50c1tmZW5dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB3aGlsZSAodGhpcy5faGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXZlcnNlZEhpc3RvcnkucHVzaCh0aGlzLl91bmRvTW92ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb3B5Q29tbWVudCh0aGlzLmZlbigpKTtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vdmUgPSByZXZlcnNlZEhpc3RvcnkucG9wKCk7XG4gICAgICAgICAgICBpZiAoIW1vdmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX21ha2VNb3ZlKG1vdmUpO1xuICAgICAgICAgICAgY29weUNvbW1lbnQodGhpcy5mZW4oKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29tbWVudHMgPSBjdXJyZW50Q29tbWVudHM7XG4gICAgfVxuICAgIGdldENvbW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21tZW50c1t0aGlzLmZlbigpXTtcbiAgICB9XG4gICAgc2V0Q29tbWVudChjb21tZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbW1lbnRzW3RoaXMuZmVuKCldID0gY29tbWVudC5yZXBsYWNlKCd7JywgJ1snKS5yZXBsYWNlKCd9JywgJ10nKTtcbiAgICB9XG4gICAgZGVsZXRlQ29tbWVudCgpIHtcbiAgICAgICAgY29uc3QgY29tbWVudCA9IHRoaXMuX2NvbW1lbnRzW3RoaXMuZmVuKCldO1xuICAgICAgICBkZWxldGUgdGhpcy5fY29tbWVudHNbdGhpcy5mZW4oKV07XG4gICAgICAgIHJldHVybiBjb21tZW50O1xuICAgIH1cbiAgICBnZXRDb21tZW50cygpIHtcbiAgICAgICAgdGhpcy5fcHJ1bmVDb21tZW50cygpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fY29tbWVudHMpLm1hcCgoZmVuKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyBmZW46IGZlbiwgY29tbWVudDogdGhpcy5fY29tbWVudHNbZmVuXSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVsZXRlQ29tbWVudHMoKSB7XG4gICAgICAgIHRoaXMuX3BydW5lQ29tbWVudHMoKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2NvbW1lbnRzKS5tYXAoKGZlbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHRoaXMuX2NvbW1lbnRzW2Zlbl07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fY29tbWVudHNbZmVuXTtcbiAgICAgICAgICAgIHJldHVybiB7IGZlbjogZmVuLCBjb21tZW50OiBjb21tZW50IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRDYXN0bGluZ1JpZ2h0cyhjb2xvciwgcmlnaHRzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2lkZSBvZiBbS0lORywgUVVFRU5dKSB7XG4gICAgICAgICAgICBpZiAocmlnaHRzW3NpZGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRzW3NpZGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nW2NvbG9yXSB8PSBTSURFU1tzaWRlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nhc3RsaW5nW2NvbG9yXSAmPSB+U0lERVNbc2lkZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNhc3RsaW5nUmlnaHRzKCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZ2V0Q2FzdGxpbmdSaWdodHMoY29sb3IpO1xuICAgICAgICByZXR1cm4gKHJpZ2h0c1tLSU5HXSA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0c1tLSU5HXSA9PT0gcmVzdWx0W0tJTkddKSAmJiAocmlnaHRzW1FVRUVOXSA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0c1tRVUVFTl0gPT09IHJlc3VsdFtRVUVFTl0pO1xuICAgIH1cbiAgICBnZXRDYXN0bGluZ1JpZ2h0cyhjb2xvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW0tJTkddOiAodGhpcy5fY2FzdGxpbmdbY29sb3JdICYgU0lERVNbS0lOR10pICE9PSAwLFxuICAgICAgICAgICAgW1FVRUVOXTogKHRoaXMuX2Nhc3RsaW5nW2NvbG9yXSAmIFNJREVTW1FVRUVOXSkgIT09IDAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIG1vdmVOdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tb3ZlTnVtYmVyO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoZXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/chess.js/dist/esm/chess.js\n"));

/***/ }),

/***/ "./node_modules/client-only/index.js":
/*!*******************************************!*\
  !*** ./node_modules/client-only/index.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {



/***/ }),

/***/ "./node_modules/next/dist/build/polyfills/process.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/build/polyfills/process.js ***!
  \***********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar _global_process, _global_process1;\nmodule.exports = ((_global_process = __webpack_require__.g.process) == null ? void 0 : _global_process.env) && typeof ((_global_process1 = __webpack_require__.g.process) == null ? void 0 : _global_process1.env) === \"object\" ? __webpack_require__.g.process : __webpack_require__(/*! ../../compiled/process */ \"./node_modules/next/dist/compiled/process/browser.js\");\n\n//# sourceMappingURL=process.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3BvbHlmaWxscy9wcm9jZXNzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxxQ0FBcUMscUJBQU0saUZBQWlGLHFCQUFNLGtFQUFrRSxxQkFBTSxXQUFXLG1CQUFPLENBQUMsb0ZBQXdCOztBQUVyUCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3BvbHlmaWxscy9wcm9jZXNzLmpzP2NhNjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX2dsb2JhbF9wcm9jZXNzLCBfZ2xvYmFsX3Byb2Nlc3MxO1xubW9kdWxlLmV4cG9ydHMgPSAoKF9nbG9iYWxfcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2dsb2JhbF9wcm9jZXNzLmVudikgJiYgdHlwZW9mICgoX2dsb2JhbF9wcm9jZXNzMSA9IGdsb2JhbC5wcm9jZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2dsb2JhbF9wcm9jZXNzMS5lbnYpID09PSBcIm9iamVjdFwiID8gZ2xvYmFsLnByb2Nlc3MgOiByZXF1aXJlKFwiLi4vLi4vY29tcGlsZWQvcHJvY2Vzc1wiKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/polyfills/process.js\n"));

/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fjx%2FWORKSPACE%2FPROJECTS%2FCHESS%2Fsrc%2Fpages%2Findex.tsx&page=%2F!":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fjx%2FWORKSPACE%2FPROJECTS%2FCHESS%2Fsrc%2Fpages%2Findex.tsx&page=%2F! ***!
  \************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return __webpack_require__(/*! ./src/pages/index.tsx */ \"./src/pages/index.tsx\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWNsaWVudC1wYWdlcy1sb2FkZXIuanM/YWJzb2x1dGVQYWdlUGF0aD0lMkZVc2VycyUyRmp4JTJGV09SS1NQQUNFJTJGUFJPSkVDVFMlMkZDSEVTUyUyRnNyYyUyRnBhZ2VzJTJGaW5kZXgudHN4JnBhZ2U9JTJGIS5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBTyxDQUFDLG9EQUF1QjtBQUM5QztBQUNBO0FBQ0EsT0FBTyxJQUFVO0FBQ2pCLE1BQU0sVUFBVTtBQUNoQjtBQUNBLE9BQU87QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8/MDU2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAod2luZG93Ll9fTkVYVF9QID0gd2luZG93Ll9fTkVYVF9QIHx8IFtdKS5wdXNoKFtcbiAgICAgIFwiL1wiLFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVxdWlyZShcIi4vc3JjL3BhZ2VzL2luZGV4LnRzeFwiKTtcbiAgICAgIH1cbiAgICBdKTtcbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuX19ORVhUX1AucHVzaChbXCIvXCJdKVxuICAgICAgfSk7XG4gICAgfVxuICAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fjx%2FWORKSPACE%2FPROJECTS%2FCHESS%2Fsrc%2Fpages%2Findex.tsx&page=%2F!\n"));

/***/ }),

/***/ "./node_modules/styled-jsx/dist/index/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/styled-jsx/dist/index/index.js ***!
  \*****************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval(__webpack_require__.ts("/* provided dependency */ var process = __webpack_require__(/*! process */ \"./node_modules/next/dist/build/polyfills/process.js\");\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n__webpack_require__(/*! client-only */ \"./node_modules/client-only/index.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nfunction _interopDefaultLegacy(e) {\n    return e && typeof e === \"object\" && \"default\" in e ? e : {\n        \"default\": e\n    };\n}\nvar React__default = /*#__PURE__*/ _interopDefaultLegacy(React);\n_c = React__default;\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && \"development\" === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node =  true && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if ( true && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (false) {}\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || \"object\" === \"undefined\") {\n            var sheet =  true ? this.getSheet() : 0;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (false) {}\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (true) {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {}\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (false) {}\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (false) {}\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if ( true && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        }) // Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        }) // filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    _s();\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\n_s(StyleRegistry, \"vgRS4YV7PcSMQCYHzGaNuBIBcZQ=\");\n_c1 = StyleRegistry;\nfunction useStyleRegistry() {\n    _s1();\n    return React.useContext(StyleSheetContext);\n}\n_s1(useStyleRegistry, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React__default[\"default\"].useLayoutEffect;\nvar defaultRegistry =  true ? createStyleRegistry() : 0;\nfunction JSXStyle(props) {\n    _s2();\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    // If `registry` does not exist, we do nothing here.\n    if (!registry) {\n        return null;\n    }\n    if (false) {}\n    useInsertionEffect(function() {\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\n_s2(JSXStyle, \"48Sqj1BUqkshsPdz6NEWXDn8pF4=\", false, function() {\n    return [\n        useStyleRegistry,\n        useInsertionEffect\n    ];\n});\n_c2 = JSXStyle;\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"React__default\");\n$RefreshReg$(_c1, \"StyleRegistry\");\n$RefreshReg$(_c2, \"JSXStyle\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGVkLWpzeC9kaXN0L2luZGV4L2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7O0FBQUFBLG1CQUFPQSxDQUFDO0FBQ1IsSUFBSUMsUUFBUUQsbUJBQU9BLENBQUM7QUFFcEIsU0FBU0Usc0JBQXVCQyxDQUFDLEVBQUU7SUFBRSxPQUFPQSxLQUFLLE9BQU9BLE1BQU0sWUFBWSxhQUFhQSxJQUFJQSxJQUFJO1FBQUUsV0FBV0E7SUFBRSxDQUFDO0FBQUU7QUFFakgsSUFBSUMsaUJBQWlCLFdBQVcsR0FBRUYsc0JBQXNCRDs7QUFFeEQ7OztBQUdBLEdBQUcsU0FBU0ksa0JBQWtCQyxNQUFNLEVBQUVDLEtBQUssRUFBRTtJQUN6QyxJQUFJLElBQUlDLElBQUksR0FBR0EsSUFBSUQsTUFBTUUsTUFBTSxFQUFFRCxJQUFJO1FBQ2pDLElBQUlFLGFBQWFILEtBQUssQ0FBQ0MsRUFBRTtRQUN6QkUsV0FBV0MsVUFBVSxHQUFHRCxXQUFXQyxVQUFVLElBQUksS0FBSztRQUN0REQsV0FBV0UsWUFBWSxHQUFHLElBQUk7UUFDOUIsSUFBSSxXQUFXRixZQUFZQSxXQUFXRyxRQUFRLEdBQUcsSUFBSTtRQUNyREMsT0FBT0MsY0FBYyxDQUFDVCxRQUFRSSxXQUFXTSxHQUFHLEVBQUVOO0lBQ2xEO0FBQ0o7QUFDQSxTQUFTTyxhQUFhQyxXQUFXLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFO0lBQ3hELElBQUlELFlBQVlkLGtCQUFrQmEsWUFBWUcsU0FBUyxFQUFFRjtJQUN6RCxJQUFJQyxhQUFhZixrQkFBa0JhLGFBQWFFO0lBQ2hELE9BQU9GO0FBQ1g7QUFDQSxJQUFJSSxTQUFTLE9BQU9DLE9BQU9BLEtBQUssZUFBZUEsT0FBT0EsQ0FBQ0MsR0FBRyxJQUFJRCxrQkFBeUI7QUFDdkYsSUFBSUUsV0FBVyxTQUFTQyxDQUFDLEVBQUU7SUFDdkIsT0FBT1osT0FBT08sU0FBUyxDQUFDTSxRQUFRLENBQUNDLElBQUksQ0FBQ0YsT0FBTztBQUNqRDtB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LFdBQVdTLGtCQUFrQkEsa0JBQWtCSCxrQkFBa0I7SUFDckUsb0RBQW9EO0lBQ3BELElBQUksQ0FBQ04sVUFBVTtRQUNYLE9BQU8sSUFBSTtJQUNmLENBQUM7SUFDRCxJQUFJLEtBQTZCLEVBQUUsRUFHbEM7SUFDRE8sbUJBQW1CLFdBQVc7UUFDMUJQLFNBQVMvQixHQUFHLENBQUN6SDtRQUNiLE9BQU8sV0FBVztZQUNkd0osU0FBU3BCLE1BQU0sQ0FBQ3BJO1FBQ3BCO0lBQ0osd0VBQXdFO0lBQ3hFLEdBQUc7UUFDQ0EsTUFBTXdHLEVBQUU7UUFDUkYsT0FBT3RHLE1BQU02SSxPQUFPO0tBQ3ZCO0lBQ0QsT0FBTyxJQUFJO0FBQ2Y7SUFyQlNxQjs7UUFDOENKO1FBU25EQzs7O01BVktHO0FBc0JUQSxTQUFTckIsT0FBTyxHQUFHLFNBQVNzQixJQUFJLEVBQUU7SUFDOUIsT0FBT0EsS0FBS3ZGLEdBQUcsQ0FBQyxTQUFTd0YsT0FBTyxFQUFFO1FBQzlCLElBQUloRSxTQUFTZ0UsT0FBTyxDQUFDLEVBQUU7UUFDdkIsSUFBSXBLLFFBQVFvSyxPQUFPLENBQUMsRUFBRTtRQUN0QixPQUFPakUsVUFBVUMsUUFBUXBHO0lBQzdCLEdBQUcwSSxJQUFJLENBQUM7QUFDWjtBQUVBMkIscUJBQXFCLEdBQUdmO0FBQ3hCZSwyQkFBMkIsR0FBR2hCO0FBQzlCZ0IsYUFBYSxHQUFHSDtBQUNoQkcsd0JBQXdCLEdBQUdQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9zdHlsZWQtanN4L2Rpc3QvaW5kZXgvaW5kZXguanM/YjAwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdjbGllbnQtb25seScpO1xudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0TGVnYWN5IChlKSB7IHJldHVybiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciBSZWFjdF9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHRMZWdhY3koUmVhY3QpO1xuXG4vKlxuQmFzZWQgb24gR2xhbW9yJ3Mgc2hlZXRcbmh0dHBzOi8vZ2l0aHViLmNvbS90aHJlZXBvaW50b25lL2dsYW1vci9ibG9iLzY2N2I0ODBkMzFiMzcyMWE5MDUwMjFiMjZlMTI5MGNlOTJjYTI4Nzkvc3JjL3NoZWV0LmpzXG4qLyBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cbnZhciBpc1Byb2QgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG52YXIgaXNTdHJpbmcgPSBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gXCJbb2JqZWN0IFN0cmluZ11cIjtcbn07XG52YXIgU3R5bGVTaGVldCA9IC8qI19fUFVSRV9fKi8gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gU3R5bGVTaGVldChwYXJhbSkge1xuICAgICAgICB2YXIgcmVmID0gcGFyYW0gPT09IHZvaWQgMCA/IHt9IDogcGFyYW0sIF9uYW1lID0gcmVmLm5hbWUsIG5hbWUgPSBfbmFtZSA9PT0gdm9pZCAwID8gXCJzdHlsZXNoZWV0XCIgOiBfbmFtZSwgX29wdGltaXplRm9yU3BlZWQgPSByZWYub3B0aW1pemVGb3JTcGVlZCwgb3B0aW1pemVGb3JTcGVlZCA9IF9vcHRpbWl6ZUZvclNwZWVkID09PSB2b2lkIDAgPyBpc1Byb2QgOiBfb3B0aW1pemVGb3JTcGVlZDtcbiAgICAgICAgaW52YXJpYW50JDEoaXNTdHJpbmcobmFtZSksIFwiYG5hbWVgIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl9kZWxldGVkUnVsZVBsYWNlaG9sZGVyID0gXCIjXCIgKyBuYW1lICsgXCItZGVsZXRlZC1ydWxlX19fX3t9XCI7XG4gICAgICAgIGludmFyaWFudCQxKHR5cGVvZiBvcHRpbWl6ZUZvclNwZWVkID09PSBcImJvb2xlYW5cIiwgXCJgb3B0aW1pemVGb3JTcGVlZGAgbXVzdCBiZSBhIGJvb2xlYW5cIik7XG4gICAgICAgIHRoaXMuX29wdGltaXplRm9yU3BlZWQgPSBvcHRpbWl6ZUZvclNwZWVkO1xuICAgICAgICB0aGlzLl9zZXJ2ZXJTaGVldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdGFncyA9IFtdO1xuICAgICAgICB0aGlzLl9pbmplY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9ydWxlc0NvdW50ID0gMDtcbiAgICAgICAgdmFyIG5vZGUgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbcHJvcGVydHk9XCJjc3Atbm9uY2VcIl0nKTtcbiAgICAgICAgdGhpcy5fbm9uY2UgPSBub2RlID8gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpIDogbnVsbDtcbiAgICB9XG4gICAgdmFyIF9wcm90byA9IFN0eWxlU2hlZXQucHJvdG90eXBlO1xuICAgIF9wcm90by5zZXRPcHRpbWl6ZUZvclNwZWVkID0gZnVuY3Rpb24gc2V0T3B0aW1pemVGb3JTcGVlZChib29sKSB7XG4gICAgICAgIGludmFyaWFudCQxKHR5cGVvZiBib29sID09PSBcImJvb2xlYW5cIiwgXCJgc2V0T3B0aW1pemVGb3JTcGVlZGAgYWNjZXB0cyBhIGJvb2xlYW5cIik7XG4gICAgICAgIGludmFyaWFudCQxKHRoaXMuX3J1bGVzQ291bnQgPT09IDAsIFwib3B0aW1pemVGb3JTcGVlZCBjYW5ub3QgYmUgd2hlbiBydWxlcyBoYXZlIGFscmVhZHkgYmVlbiBpbnNlcnRlZFwiKTtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB0aGlzLl9vcHRpbWl6ZUZvclNwZWVkID0gYm9vbDtcbiAgICAgICAgdGhpcy5pbmplY3QoKTtcbiAgICB9O1xuICAgIF9wcm90by5pc09wdGltaXplRm9yU3BlZWQgPSBmdW5jdGlvbiBpc09wdGltaXplRm9yU3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpbWl6ZUZvclNwZWVkO1xuICAgIH07XG4gICAgX3Byb3RvLmluamVjdCA9IGZ1bmN0aW9uIGluamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaW52YXJpYW50JDEoIXRoaXMuX2luamVjdGVkLCBcInNoZWV0IGFscmVhZHkgaW5qZWN0ZWRcIik7XG4gICAgICAgIHRoaXMuX2luamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5fb3B0aW1pemVGb3JTcGVlZCkge1xuICAgICAgICAgICAgdGhpcy5fdGFnc1swXSA9IHRoaXMubWFrZVN0eWxlVGFnKHRoaXMuX25hbWUpO1xuICAgICAgICAgICAgdGhpcy5fb3B0aW1pemVGb3JTcGVlZCA9IFwiaW5zZXJ0UnVsZVwiIGluIHRoaXMuZ2V0U2hlZXQoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fb3B0aW1pemVGb3JTcGVlZCkge1xuICAgICAgICAgICAgICAgIGlmICghaXNQcm9kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlN0eWxlU2hlZXQ6IG9wdGltaXplRm9yU3BlZWQgbW9kZSBub3Qgc3VwcG9ydGVkIGZhbGxpbmcgYmFjayB0byBzdGFuZGFyZCBtb2RlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2luamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXJ2ZXJTaGVldCA9IHtcbiAgICAgICAgICAgIGNzc1J1bGVzOiBbXSxcbiAgICAgICAgICAgIGluc2VydFJ1bGU6IGZ1bmN0aW9uKHJ1bGUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2VydmVyU2hlZXQuY3NzUnVsZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzVGV4dDogcnVsZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9zZXJ2ZXJTaGVldC5jc3NSdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1RleHQ6IHJ1bGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGVSdWxlOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9zZXJ2ZXJTaGVldC5jc3NSdWxlc1tpbmRleF0gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgX3Byb3RvLmdldFNoZWV0Rm9yVGFnID0gZnVuY3Rpb24gZ2V0U2hlZXRGb3JUYWcodGFnKSB7XG4gICAgICAgIGlmICh0YWcuc2hlZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWcuc2hlZXQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyB3ZWlyZG5lc3MgYnJvdWdodCB0byB5b3UgYnkgZmlyZWZveFxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLm93bmVyTm9kZSA9PT0gdGFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBfcHJvdG8uZ2V0U2hlZXQgPSBmdW5jdGlvbiBnZXRTaGVldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hlZXRGb3JUYWcodGhpcy5fdGFnc1t0aGlzLl90YWdzLmxlbmd0aCAtIDFdKTtcbiAgICB9O1xuICAgIF9wcm90by5pbnNlcnRSdWxlID0gZnVuY3Rpb24gaW5zZXJ0UnVsZShydWxlLCBpbmRleCkge1xuICAgICAgICBpbnZhcmlhbnQkMShpc1N0cmluZyhydWxlKSwgXCJgaW5zZXJ0UnVsZWAgYWNjZXB0cyBvbmx5IHN0cmluZ3NcIik7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9zZXJ2ZXJTaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zZXJ2ZXJTaGVldC5pbnNlcnRSdWxlKHJ1bGUsIGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ydWxlc0NvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX29wdGltaXplRm9yU3BlZWQpIHtcbiAgICAgICAgICAgIHZhciBzaGVldCA9IHRoaXMuZ2V0U2hlZXQoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXggIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHNoZWV0LmNzc1J1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMgd2VpcmRuZXNzIGZvciBwZXJmLCBhbmQgY2hyb21lJ3Mgd2VpcmQgYnVnXG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMDAwNzk5Mi9jaHJvbWUtc3VkZGVubHktc3RvcHBlZC1hY2NlcHRpbmctaW5zZXJ0cnVsZVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzaGVldC5pbnNlcnRSdWxlKHJ1bGUsIGluZGV4KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1Byb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiU3R5bGVTaGVldDogaWxsZWdhbCBydWxlOiBcXG5cXG5cIiArIHJ1bGUgKyBcIlxcblxcblNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMjAwMDc5OTIgZm9yIG1vcmUgaW5mb1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGluc2VydGlvblBvaW50ID0gdGhpcy5fdGFnc1tpbmRleF07XG4gICAgICAgICAgICB0aGlzLl90YWdzLnB1c2godGhpcy5tYWtlU3R5bGVUYWcodGhpcy5fbmFtZSwgcnVsZSwgaW5zZXJ0aW9uUG9pbnQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcnVsZXNDb3VudCsrO1xuICAgIH07XG4gICAgX3Byb3RvLnJlcGxhY2VSdWxlID0gZnVuY3Rpb24gcmVwbGFjZVJ1bGUoaW5kZXgsIHJ1bGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX29wdGltaXplRm9yU3BlZWQgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdmFyIHNoZWV0ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMuZ2V0U2hlZXQoKSA6IHRoaXMuX3NlcnZlclNoZWV0O1xuICAgICAgICAgICAgaWYgKCFydWxlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIHJ1bGUgPSB0aGlzLl9kZWxldGVkUnVsZVBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaGVldC5jc3NSdWxlc1tpbmRleF0pIHtcbiAgICAgICAgICAgICAgICAvLyBAVEJEIFNob3VsZCB3ZSB0aHJvdyBhbiBlcnJvcj9cbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldC5kZWxldGVSdWxlKGluZGV4KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2hlZXQuaW5zZXJ0UnVsZShydWxlLCBpbmRleCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghaXNQcm9kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlN0eWxlU2hlZXQ6IGlsbGVnYWwgcnVsZTogXFxuXFxuXCIgKyBydWxlICsgXCJcXG5cXG5TZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzIwMDA3OTkyIGZvciBtb3JlIGluZm9cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHByZXNlcnZlIHRoZSBpbmRpY2VzIHdlIGluc2VydCBhIGRlbGV0ZVJ1bGVQbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIHNoZWV0Lmluc2VydFJ1bGUodGhpcy5fZGVsZXRlZFJ1bGVQbGFjZWhvbGRlciwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhZyA9IHRoaXMuX3RhZ3NbaW5kZXhdO1xuICAgICAgICAgICAgaW52YXJpYW50JDEodGFnLCBcIm9sZCBydWxlIGF0IGluZGV4IGBcIiArIGluZGV4ICsgXCJgIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIHRhZy50ZXh0Q29udGVudCA9IHJ1bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH07XG4gICAgX3Byb3RvLmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbiBkZWxldGVSdWxlKGluZGV4KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXJ2ZXJTaGVldC5kZWxldGVSdWxlKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fb3B0aW1pemVGb3JTcGVlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlUnVsZShpbmRleCwgXCJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gdGhpcy5fdGFnc1tpbmRleF07XG4gICAgICAgICAgICBpbnZhcmlhbnQkMSh0YWcsIFwicnVsZSBhdCBpbmRleCBgXCIgKyBpbmRleCArIFwiYCBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB0YWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWcpO1xuICAgICAgICAgICAgdGhpcy5fdGFnc1tpbmRleF0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfcHJvdG8uZmx1c2ggPSBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgdGhpcy5faW5qZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcnVsZXNDb3VudCA9IDA7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLl90YWdzLmZvckVhY2goZnVuY3Rpb24odGFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZyAmJiB0YWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl90YWdzID0gW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzaW1wbGVyIG9uIHNlcnZlclxuICAgICAgICAgICAgdGhpcy5fc2VydmVyU2hlZXQuY3NzUnVsZXMgPSBbXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX3Byb3RvLmNzc1J1bGVzID0gZnVuY3Rpb24gY3NzUnVsZXMoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVyU2hlZXQuY3NzUnVsZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhZ3MucmVkdWNlKGZ1bmN0aW9uKHJ1bGVzLCB0YWcpIHtcbiAgICAgICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzLmNvbmNhdChBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoX3RoaXMuZ2V0U2hlZXRGb3JUYWcodGFnKS5jc3NSdWxlcywgZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVsZS5jc3NUZXh0ID09PSBfdGhpcy5fZGVsZXRlZFJ1bGVQbGFjZWhvbGRlciA/IG51bGwgOiBydWxlO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcnVsZXMucHVzaChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydWxlcztcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4gICAgX3Byb3RvLm1ha2VTdHlsZVRhZyA9IGZ1bmN0aW9uIG1ha2VTdHlsZVRhZyhuYW1lLCBjc3NTdHJpbmcsIHJlbGF0aXZlVG9UYWcpIHtcbiAgICAgICAgaWYgKGNzc1N0cmluZykge1xuICAgICAgICAgICAgaW52YXJpYW50JDEoaXNTdHJpbmcoY3NzU3RyaW5nKSwgXCJtYWtlU3R5bGVUYWcgYWNjZXB0cyBvbmx5IHN0cmluZ3MgYXMgc2Vjb25kIHBhcmFtZXRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBpZiAodGhpcy5fbm9uY2UpIHRhZy5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCB0aGlzLl9ub25jZSk7XG4gICAgICAgIHRhZy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgICAgICB0YWcuc2V0QXR0cmlidXRlKFwiZGF0YS1cIiArIG5hbWUsIFwiXCIpO1xuICAgICAgICBpZiAoY3NzU3RyaW5nKSB7XG4gICAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzU3RyaW5nKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiAgICAgICAgaWYgKHJlbGF0aXZlVG9UYWcpIHtcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHRhZywgcmVsYXRpdmVUb1RhZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICB9O1xuICAgIF9jcmVhdGVDbGFzcyhTdHlsZVNoZWV0LCBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogXCJsZW5ndGhcIixcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ydWxlc0NvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXSk7XG4gICAgcmV0dXJuIFN0eWxlU2hlZXQ7XG59KCk7XG5mdW5jdGlvbiBpbnZhcmlhbnQkMShjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHlsZVNoZWV0OiBcIiArIG1lc3NhZ2UgKyBcIi5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIHZhciBfJGhhc2ggPSA1MzgxLCBpID0gc3RyLmxlbmd0aDtcbiAgICB3aGlsZShpKXtcbiAgICAgICAgXyRoYXNoID0gXyRoYXNoICogMzMgXiBzdHIuY2hhckNvZGVBdCgtLWkpO1xuICAgIH1cbiAgICAvKiBKYXZhU2NyaXB0IGRvZXMgYml0d2lzZSBvcGVyYXRpb25zIChsaWtlIFhPUiwgYWJvdmUpIG9uIDMyLWJpdCBzaWduZWRcbiAgICogaW50ZWdlcnMuIFNpbmNlIHdlIHdhbnQgdGhlIHJlc3VsdHMgdG8gYmUgYWx3YXlzIHBvc2l0aXZlLCBjb252ZXJ0IHRoZVxuICAgKiBzaWduZWQgaW50IHRvIGFuIHVuc2lnbmVkIGJ5IGRvaW5nIGFuIHVuc2lnbmVkIGJpdHNoaWZ0LiAqLyByZXR1cm4gXyRoYXNoID4+PiAwO1xufVxudmFyIHN0cmluZ0hhc2ggPSBoYXNoO1xuXG52YXIgc2FuaXRpemUgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgcmV0dXJuIHJ1bGUucmVwbGFjZSgvXFwvc3R5bGUvZ2ksIFwiXFxcXC9zdHlsZVwiKTtcbn07XG52YXIgY2FjaGUgPSB7fTtcbi8qKlxuICogY29tcHV0ZUlkXG4gKlxuICogQ29tcHV0ZSBhbmQgbWVtb2l6ZSBhIGpzeCBpZCBmcm9tIGEgYmFzZWRJZCBhbmQgb3B0aW9uYWxseSBwcm9wcy5cbiAqLyBmdW5jdGlvbiBjb21wdXRlSWQoYmFzZUlkLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIFwianN4LVwiICsgYmFzZUlkO1xuICAgIH1cbiAgICB2YXIgcHJvcHNUb1N0cmluZyA9IFN0cmluZyhwcm9wcyk7XG4gICAgdmFyIGtleSA9IGJhc2VJZCArIHByb3BzVG9TdHJpbmc7XG4gICAgaWYgKCFjYWNoZVtrZXldKSB7XG4gICAgICAgIGNhY2hlW2tleV0gPSBcImpzeC1cIiArIHN0cmluZ0hhc2goYmFzZUlkICsgXCItXCIgKyBwcm9wc1RvU3RyaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlW2tleV07XG59XG4vKipcbiAqIGNvbXB1dGVTZWxlY3RvclxuICpcbiAqIENvbXB1dGUgYW5kIG1lbW9pemUgZHluYW1pYyBzZWxlY3RvcnMuXG4gKi8gZnVuY3Rpb24gY29tcHV0ZVNlbGVjdG9yKGlkLCBjc3MpIHtcbiAgICB2YXIgc2VsZWN0b1BsYWNlaG9sZGVyUmVnZXhwID0gL19fanN4LXN0eWxlLWR5bmFtaWMtc2VsZWN0b3IvZztcbiAgICAvLyBTYW5pdGl6ZSBTU1ItZWQgQ1NTLlxuICAgIC8vIENsaWVudCBzaWRlIGNvZGUgZG9lc24ndCBuZWVkIHRvIGJlIHNhbml0aXplZCBzaW5jZSB3ZSB1c2VcbiAgICAvLyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSAoZGV2KSBhbmQgdGhlIENTU09NIGFwaSBzaGVldC5pbnNlcnRSdWxlIChwcm9kKS5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjc3MgPSBzYW5pdGl6ZShjc3MpO1xuICAgIH1cbiAgICB2YXIgaWRjc3MgPSBpZCArIGNzcztcbiAgICBpZiAoIWNhY2hlW2lkY3NzXSkge1xuICAgICAgICBjYWNoZVtpZGNzc10gPSBjc3MucmVwbGFjZShzZWxlY3RvUGxhY2Vob2xkZXJSZWdleHAsIGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlW2lkY3NzXTtcbn1cblxuZnVuY3Rpb24gbWFwUnVsZXNUb1N0eWxlKGNzc1J1bGVzLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHt9O1xuICAgIHJldHVybiBjc3NSdWxlcy5tYXAoZnVuY3Rpb24oYXJncykge1xuICAgICAgICB2YXIgaWQgPSBhcmdzWzBdO1xuICAgICAgICB2YXIgY3NzID0gYXJnc1sxXTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiLCB7XG4gICAgICAgICAgICBpZDogXCJfX1wiICsgaWQsXG4gICAgICAgICAgICAvLyBBdm9pZCB3YXJuaW5ncyB1cG9uIHJlbmRlciB3aXRoIGEga2V5XG4gICAgICAgICAgICBrZXk6IFwiX19cIiArIGlkLFxuICAgICAgICAgICAgbm9uY2U6IG9wdGlvbnMubm9uY2UgPyBvcHRpb25zLm5vbmNlIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICBfX2h0bWw6IGNzc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbnZhciBTdHlsZVNoZWV0UmVnaXN0cnkgPSAvKiNfX1BVUkVfXyovIGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFN0eWxlU2hlZXRSZWdpc3RyeShwYXJhbSkge1xuICAgICAgICB2YXIgcmVmID0gcGFyYW0gPT09IHZvaWQgMCA/IHt9IDogcGFyYW0sIF9zdHlsZVNoZWV0ID0gcmVmLnN0eWxlU2hlZXQsIHN0eWxlU2hlZXQgPSBfc3R5bGVTaGVldCA9PT0gdm9pZCAwID8gbnVsbCA6IF9zdHlsZVNoZWV0LCBfb3B0aW1pemVGb3JTcGVlZCA9IHJlZi5vcHRpbWl6ZUZvclNwZWVkLCBvcHRpbWl6ZUZvclNwZWVkID0gX29wdGltaXplRm9yU3BlZWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGltaXplRm9yU3BlZWQ7XG4gICAgICAgIHRoaXMuX3NoZWV0ID0gc3R5bGVTaGVldCB8fCBuZXcgU3R5bGVTaGVldCh7XG4gICAgICAgICAgICBuYW1lOiBcInN0eWxlZC1qc3hcIixcbiAgICAgICAgICAgIG9wdGltaXplRm9yU3BlZWQ6IG9wdGltaXplRm9yU3BlZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NoZWV0LmluamVjdCgpO1xuICAgICAgICBpZiAoc3R5bGVTaGVldCAmJiB0eXBlb2Ygb3B0aW1pemVGb3JTcGVlZCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NoZWV0LnNldE9wdGltaXplRm9yU3BlZWQob3B0aW1pemVGb3JTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLl9vcHRpbWl6ZUZvclNwZWVkID0gdGhpcy5fc2hlZXQuaXNPcHRpbWl6ZUZvclNwZWVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZnJvbVNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faW5kaWNlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnN0YW5jZXNDb3VudHMgPSB7fTtcbiAgICB9XG4gICAgdmFyIF9wcm90byA9IFN0eWxlU2hlZXRSZWdpc3RyeS5wcm90b3R5cGU7XG4gICAgX3Byb3RvLmFkZCA9IGZ1bmN0aW9uIGFkZChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9vcHRpbWl6ZUZvclNwZWVkKSB7XG4gICAgICAgICAgICB0aGlzLl9vcHRpbWl6ZUZvclNwZWVkID0gQXJyYXkuaXNBcnJheShwcm9wcy5jaGlsZHJlbik7XG4gICAgICAgICAgICB0aGlzLl9zaGVldC5zZXRPcHRpbWl6ZUZvclNwZWVkKHRoaXMuX29wdGltaXplRm9yU3BlZWQpO1xuICAgICAgICAgICAgdGhpcy5fb3B0aW1pemVGb3JTcGVlZCA9IHRoaXMuX3NoZWV0LmlzT3B0aW1pemVGb3JTcGVlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmICF0aGlzLl9mcm9tU2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9mcm9tU2VydmVyID0gdGhpcy5zZWxlY3RGcm9tU2VydmVyKCk7XG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZXNDb3VudHMgPSBPYmplY3Qua2V5cyh0aGlzLl9mcm9tU2VydmVyKS5yZWR1Y2UoZnVuY3Rpb24oYWNjLCB0YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgYWNjW3RhZ05hbWVdID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWYgPSB0aGlzLmdldElkQW5kUnVsZXMocHJvcHMpLCBzdHlsZUlkID0gcmVmLnN0eWxlSWQsIHJ1bGVzID0gcmVmLnJ1bGVzO1xuICAgICAgICAvLyBEZWR1cGluZzoganVzdCBpbmNyZWFzZSB0aGUgaW5zdGFuY2VzIGNvdW50LlxuICAgICAgICBpZiAoc3R5bGVJZCBpbiB0aGlzLl9pbnN0YW5jZXNDb3VudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlc0NvdW50c1tzdHlsZUlkXSArPSAxO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRpY2VzID0gcnVsZXMubWFwKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fc2hlZXQuaW5zZXJ0UnVsZShydWxlKTtcbiAgICAgICAgfSkvLyBGaWx0ZXIgb3V0IGludmFsaWQgcnVsZXNcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ICE9PSAtMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2luZGljZXNbc3R5bGVJZF0gPSBpbmRpY2VzO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZXNDb3VudHNbc3R5bGVJZF0gPSAxO1xuICAgIH07XG4gICAgX3Byb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3R5bGVJZCA9IHRoaXMuZ2V0SWRBbmRSdWxlcyhwcm9wcykuc3R5bGVJZDtcbiAgICAgICAgaW52YXJpYW50KHN0eWxlSWQgaW4gdGhpcy5faW5zdGFuY2VzQ291bnRzLCBcInN0eWxlSWQ6IGBcIiArIHN0eWxlSWQgKyBcImAgbm90IGZvdW5kXCIpO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZXNDb3VudHNbc3R5bGVJZF0gLT0gMTtcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlc0NvdW50c1tzdHlsZUlkXSA8IDEpIHtcbiAgICAgICAgICAgIHZhciB0YWdGcm9tU2VydmVyID0gdGhpcy5fZnJvbVNlcnZlciAmJiB0aGlzLl9mcm9tU2VydmVyW3N0eWxlSWRdO1xuICAgICAgICAgICAgaWYgKHRhZ0Zyb21TZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICB0YWdGcm9tU2VydmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFnRnJvbVNlcnZlcik7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2Zyb21TZXJ2ZXJbc3R5bGVJZF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luZGljZXNbc3R5bGVJZF0uZm9yRWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3NoZWV0LmRlbGV0ZVJ1bGUoaW5kZXgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9pbmRpY2VzW3N0eWxlSWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2luc3RhbmNlc0NvdW50c1tzdHlsZUlkXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShwcm9wcywgbmV4dFByb3BzKSB7XG4gICAgICAgIHRoaXMuYWRkKG5leHRQcm9wcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlKHByb3BzKTtcbiAgICB9O1xuICAgIF9wcm90by5mbHVzaCA9IGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgICAgICB0aGlzLl9zaGVldC5mbHVzaCgpO1xuICAgICAgICB0aGlzLl9zaGVldC5pbmplY3QoKTtcbiAgICAgICAgdGhpcy5fZnJvbVNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faW5kaWNlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnN0YW5jZXNDb3VudHMgPSB7fTtcbiAgICB9O1xuICAgIF9wcm90by5jc3NSdWxlcyA9IGZ1bmN0aW9uIGNzc1J1bGVzKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZnJvbVNlcnZlciA9IHRoaXMuX2Zyb21TZXJ2ZXIgPyBPYmplY3Qua2V5cyh0aGlzLl9mcm9tU2VydmVyKS5tYXAoZnVuY3Rpb24oc3R5bGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgICAgICAgIF90aGlzLl9mcm9tU2VydmVyW3N0eWxlSWRdXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KSA6IFtdO1xuICAgICAgICB2YXIgY3NzUnVsZXMgPSB0aGlzLl9zaGVldC5jc3NSdWxlcygpO1xuICAgICAgICByZXR1cm4gZnJvbVNlcnZlci5jb25jYXQoT2JqZWN0LmtleXModGhpcy5faW5kaWNlcykubWFwKGZ1bmN0aW9uKHN0eWxlSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgc3R5bGVJZCxcbiAgICAgICAgICAgICAgICBfdGhpcy5faW5kaWNlc1tzdHlsZUlkXS5tYXAoZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNzc1J1bGVzW2luZGV4XS5jc3NUZXh0O1xuICAgICAgICAgICAgICAgIH0pLmpvaW4oX3RoaXMuX29wdGltaXplRm9yU3BlZWQgPyBcIlwiIDogXCJcXG5cIilcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pLy8gZmlsdGVyIG91dCBlbXB0eSBydWxlc1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJ1bGVbMV0pO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBfcHJvdG8uc3R5bGVzID0gZnVuY3Rpb24gc3R5bGVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1hcFJ1bGVzVG9TdHlsZSh0aGlzLmNzc1J1bGVzKCksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgX3Byb3RvLmdldElkQW5kUnVsZXMgPSBmdW5jdGlvbiBnZXRJZEFuZFJ1bGVzKHByb3BzKSB7XG4gICAgICAgIHZhciBjc3MgPSBwcm9wcy5jaGlsZHJlbiwgZHluYW1pYyA9IHByb3BzLmR5bmFtaWMsIGlkID0gcHJvcHMuaWQ7XG4gICAgICAgIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGVJZCA9IGNvbXB1dGVJZChpZCwgZHluYW1pYyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0eWxlSWQ6IHN0eWxlSWQsXG4gICAgICAgICAgICAgICAgcnVsZXM6IEFycmF5LmlzQXJyYXkoY3NzKSA/IGNzcy5tYXAoZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcHV0ZVNlbGVjdG9yKHN0eWxlSWQsIHJ1bGUpO1xuICAgICAgICAgICAgICAgIH0pIDogW1xuICAgICAgICAgICAgICAgICAgICBjb21wdXRlU2VsZWN0b3Ioc3R5bGVJZCwgY3NzKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0eWxlSWQ6IGNvbXB1dGVJZChpZCksXG4gICAgICAgICAgICBydWxlczogQXJyYXkuaXNBcnJheShjc3MpID8gY3NzIDogW1xuICAgICAgICAgICAgICAgIGNzc1xuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAqIHNlbGVjdEZyb21TZXJ2ZXJcbiAgICpcbiAgICogQ29sbGVjdHMgc3R5bGUgdGFncyBmcm9tIHRoZSBkb2N1bWVudCB3aXRoIGlkIF9fanN4LVhYWFxuICAgKi8gX3Byb3RvLnNlbGVjdEZyb21TZXJ2ZXIgPSBmdW5jdGlvbiBzZWxlY3RGcm9tU2VydmVyKCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbaWRePVwiX19qc3gtXCJdJykpO1xuICAgICAgICByZXR1cm4gZWxlbWVudHMucmVkdWNlKGZ1bmN0aW9uKGFjYywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZC5zbGljZSgyKTtcbiAgICAgICAgICAgIGFjY1tpZF0gPSBlbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgIH07XG4gICAgcmV0dXJuIFN0eWxlU2hlZXRSZWdpc3RyeTtcbn0oKTtcbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHlsZVNoZWV0UmVnaXN0cnk6IFwiICsgbWVzc2FnZSArIFwiLlwiKTtcbiAgICB9XG59XG52YXIgU3R5bGVTaGVldENvbnRleHQgPSAvKiNfX1BVUkVfXyovIFJlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG5TdHlsZVNoZWV0Q29udGV4dC5kaXNwbGF5TmFtZSA9IFwiU3R5bGVTaGVldENvbnRleHRcIjtcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlUmVnaXN0cnkoKSB7XG4gICAgcmV0dXJuIG5ldyBTdHlsZVNoZWV0UmVnaXN0cnkoKTtcbn1cbmZ1bmN0aW9uIFN0eWxlUmVnaXN0cnkocGFyYW0pIHtcbiAgICB2YXIgY29uZmlndXJlZFJlZ2lzdHJ5ID0gcGFyYW0ucmVnaXN0cnksIGNoaWxkcmVuID0gcGFyYW0uY2hpbGRyZW47XG4gICAgdmFyIHJvb3RSZWdpc3RyeSA9IFJlYWN0LnVzZUNvbnRleHQoU3R5bGVTaGVldENvbnRleHQpO1xuICAgIHZhciByZWYgPSBSZWFjdC51c2VTdGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHJvb3RSZWdpc3RyeSB8fCBjb25maWd1cmVkUmVnaXN0cnkgfHwgY3JlYXRlU3R5bGVSZWdpc3RyeSgpO1xuICAgIH0pLCByZWdpc3RyeSA9IHJlZlswXTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qLyBSZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChTdHlsZVNoZWV0Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogcmVnaXN0cnlcbiAgICB9LCBjaGlsZHJlbik7XG59XG5mdW5jdGlvbiB1c2VTdHlsZVJlZ2lzdHJ5KCkge1xuICAgIHJldHVybiBSZWFjdC51c2VDb250ZXh0KFN0eWxlU2hlZXRDb250ZXh0KTtcbn1cblxuLy8gT3B0LWludG8gdGhlIG5ldyBgdXNlSW5zZXJ0aW9uRWZmZWN0YCBBUEkgaW4gUmVhY3QgMTgsIGZhbGxiYWNrIHRvIGB1c2VMYXlvdXRFZmZlY3RgLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0d2cvcmVhY3QtMTgvZGlzY3Vzc2lvbnMvMTEwXG52YXIgdXNlSW5zZXJ0aW9uRWZmZWN0ID0gUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLnVzZUluc2VydGlvbkVmZmVjdCB8fCBSZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0udXNlTGF5b3V0RWZmZWN0O1xudmFyIGRlZmF1bHRSZWdpc3RyeSA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyBjcmVhdGVTdHlsZVJlZ2lzdHJ5KCkgOiB1bmRlZmluZWQ7XG5mdW5jdGlvbiBKU1hTdHlsZShwcm9wcykge1xuICAgIHZhciByZWdpc3RyeSA9IGRlZmF1bHRSZWdpc3RyeSA/IGRlZmF1bHRSZWdpc3RyeSA6IHVzZVN0eWxlUmVnaXN0cnkoKTtcbiAgICAvLyBJZiBgcmVnaXN0cnlgIGRvZXMgbm90IGV4aXN0LCB3ZSBkbyBub3RoaW5nIGhlcmUuXG4gICAgaWYgKCFyZWdpc3RyeSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmVnaXN0cnkuYWRkKHByb3BzKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHVzZUluc2VydGlvbkVmZmVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVnaXN0cnkuYWRkKHByb3BzKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVnaXN0cnkucmVtb3ZlKHByb3BzKTtcbiAgICAgICAgfTtcbiAgICAvLyBwcm9wcy5jaGlsZHJlbiBjYW4gYmUgc3RyaW5nW10sIHdpbGwgYmUgc3RyaXBlZCBzaW5jZSBpZCBpcyBpZGVudGljYWxcbiAgICB9LCBbXG4gICAgICAgIHByb3BzLmlkLFxuICAgICAgICBTdHJpbmcocHJvcHMuZHluYW1pYylcbiAgICBdKTtcbiAgICByZXR1cm4gbnVsbDtcbn1cbkpTWFN0eWxlLmR5bmFtaWMgPSBmdW5jdGlvbihpbmZvKSB7XG4gICAgcmV0dXJuIGluZm8ubWFwKGZ1bmN0aW9uKHRhZ0luZm8pIHtcbiAgICAgICAgdmFyIGJhc2VJZCA9IHRhZ0luZm9bMF07XG4gICAgICAgIHZhciBwcm9wcyA9IHRhZ0luZm9bMV07XG4gICAgICAgIHJldHVybiBjb21wdXRlSWQoYmFzZUlkLCBwcm9wcyk7XG4gICAgfSkuam9pbihcIiBcIik7XG59O1xuXG5leHBvcnRzLlN0eWxlUmVnaXN0cnkgPSBTdHlsZVJlZ2lzdHJ5O1xuZXhwb3J0cy5jcmVhdGVTdHlsZVJlZ2lzdHJ5ID0gY3JlYXRlU3R5bGVSZWdpc3RyeTtcbmV4cG9ydHMuc3R5bGUgPSBKU1hTdHlsZTtcbmV4cG9ydHMudXNlU3R5bGVSZWdpc3RyeSA9IHVzZVN0eWxlUmVnaXN0cnk7XG4iXSwibmFtZXMiOlsicmVxdWlyZSIsIlJlYWN0IiwiX2ludGVyb3BEZWZhdWx0TGVnYWN5IiwiZSIsIlJlYWN0X19kZWZhdWx0IiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJfY3JlYXRlQ2xhc3MiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsImlzUHJvZCIsInByb2Nlc3MiLCJlbnYiLCJpc1N0cmluZyIsIm8iLCJ0b1N0cmluZyIsImNhbGwiLCJTdHlsZVNoZWV0IiwicGFyYW0iLCJyZWYiLCJfbmFtZSIsIm5hbWUiLCJfb3B0aW1pemVGb3JTcGVlZCIsIm9wdGltaXplRm9yU3BlZWQiLCJpbnZhcmlhbnQkMSIsIl9kZWxldGVkUnVsZVBsYWNlaG9sZGVyIiwiX3NlcnZlclNoZWV0IiwidW5kZWZpbmVkIiwiX3RhZ3MiLCJfaW5qZWN0ZWQiLCJfcnVsZXNDb3VudCIsIm5vZGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfbm9uY2UiLCJnZXRBdHRyaWJ1dGUiLCJfcHJvdG8iLCJzZXRPcHRpbWl6ZUZvclNwZWVkIiwiYm9vbCIsImZsdXNoIiwiaW5qZWN0IiwiaXNPcHRpbWl6ZUZvclNwZWVkIiwiX3RoaXMiLCJtYWtlU3R5bGVUYWciLCJnZXRTaGVldCIsImNvbnNvbGUiLCJ3YXJuIiwiY3NzUnVsZXMiLCJpbnNlcnRSdWxlIiwicnVsZSIsImluZGV4IiwiY3NzVGV4dCIsInB1c2giLCJkZWxldGVSdWxlIiwiZ2V0U2hlZXRGb3JUYWciLCJ0YWciLCJzaGVldCIsInN0eWxlU2hlZXRzIiwib3duZXJOb2RlIiwiZXJyb3IiLCJpbnNlcnRpb25Qb2ludCIsInJlcGxhY2VSdWxlIiwidHJpbSIsInRleHRDb250ZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZm9yRWFjaCIsInJlZHVjZSIsInJ1bGVzIiwiY29uY2F0IiwiQXJyYXkiLCJtYXAiLCJjc3NTdHJpbmciLCJyZWxhdGl2ZVRvVGFnIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInR5cGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0IiwiY29uZGl0aW9uIiwibWVzc2FnZSIsIkVycm9yIiwiaGFzaCIsInN0ciIsIl8kaGFzaCIsImNoYXJDb2RlQXQiLCJzdHJpbmdIYXNoIiwic2FuaXRpemUiLCJyZXBsYWNlIiwiY2FjaGUiLCJjb21wdXRlSWQiLCJiYXNlSWQiLCJwcm9wc1RvU3RyaW5nIiwiU3RyaW5nIiwiY29tcHV0ZVNlbGVjdG9yIiwiaWQiLCJjc3MiLCJzZWxlY3RvUGxhY2Vob2xkZXJSZWdleHAiLCJpZGNzcyIsIm1hcFJ1bGVzVG9TdHlsZSIsIm9wdGlvbnMiLCJhcmdzIiwibm9uY2UiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsIl9faHRtbCIsIlN0eWxlU2hlZXRSZWdpc3RyeSIsIl9zdHlsZVNoZWV0Iiwic3R5bGVTaGVldCIsIl9zaGVldCIsIl9mcm9tU2VydmVyIiwiX2luZGljZXMiLCJfaW5zdGFuY2VzQ291bnRzIiwiYWRkIiwiaXNBcnJheSIsImNoaWxkcmVuIiwic2VsZWN0RnJvbVNlcnZlciIsImtleXMiLCJhY2MiLCJ0YWdOYW1lIiwiZ2V0SWRBbmRSdWxlcyIsInN0eWxlSWQiLCJpbmRpY2VzIiwiZmlsdGVyIiwicmVtb3ZlIiwiaW52YXJpYW50IiwidGFnRnJvbVNlcnZlciIsInVwZGF0ZSIsIm5leHRQcm9wcyIsImZyb21TZXJ2ZXIiLCJqb2luIiwiQm9vbGVhbiIsInN0eWxlcyIsImR5bmFtaWMiLCJlbGVtZW50cyIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJTdHlsZVNoZWV0Q29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJkaXNwbGF5TmFtZSIsImNyZWF0ZVN0eWxlUmVnaXN0cnkiLCJTdHlsZVJlZ2lzdHJ5IiwiY29uZmlndXJlZFJlZ2lzdHJ5IiwicmVnaXN0cnkiLCJyb290UmVnaXN0cnkiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJQcm92aWRlciIsInZhbHVlIiwidXNlU3R5bGVSZWdpc3RyeSIsInVzZUluc2VydGlvbkVmZmVjdCIsInVzZUxheW91dEVmZmVjdCIsImRlZmF1bHRSZWdpc3RyeSIsIkpTWFN0eWxlIiwiaW5mbyIsInRhZ0luZm8iLCJleHBvcnRzIiwic3R5bGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/styled-jsx/dist/index/index.js\n"));

/***/ }),

/***/ "./node_modules/styled-jsx/style.js":
/*!******************************************!*\
  !*** ./node_modules/styled-jsx/style.js ***!
  \******************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nmodule.exports = __webpack_require__(/*! ./dist/index */ \"./node_modules/styled-jsx/dist/index/index.js\").style;\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGVkLWpzeC9zdHlsZS5qcy5qcyIsIm1hcHBpbmdzIjoiO0FBQUFBLCtHQUE4QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc3R5bGVkLWpzeC9zdHlsZS5qcz8zNzBiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L2luZGV4Jykuc3R5bGVcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWlyZSIsInN0eWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/styled-jsx/style.js\n"));

/***/ }),

/***/ "./src/pages/index.tsx":
/*!*****************************!*\
  !*** ./src/pages/index.tsx ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Home; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _web_components_board_ChessBoard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../web/components/board/ChessBoard */ \"./src/web/components/board/ChessBoard.tsx\");\n/* harmony import */ var _web_components_controls_GameControls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../web/components/controls/GameControls */ \"./src/web/components/controls/GameControls.tsx\");\n/* harmony import */ var _web_components_info_GameInfo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../web/components/info/GameInfo */ \"./src/web/components/info/GameInfo.tsx\");\n/* harmony import */ var _shared_engine_CulturalChessEngine__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/engine/CulturalChessEngine */ \"./src/shared/engine/CulturalChessEngine.ts\");\n/* harmony import */ var _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../shared/constants/game */ \"./src/shared/constants/game.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction Home() {\n    _s();\n    const [engine] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new _shared_engine_CulturalChessEngine__WEBPACK_IMPORTED_MODULE_5__.CulturalChessEngine());\n    const [gameHistory, setGameHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [canUndo, setCanUndo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [orientation, setOrientation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"white\");\n    const [culturalStyle, setCulturalStyle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"modern\");\n    const [narratives, setNarratives] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [evaluation, setEvaluation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const handleMove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((from, to)=>{\n        const success = engine.makeMove(from, to);\n        if (success) {\n            const analysis = engine.getStyleBasedEvaluation();\n            const newNarratives = engine.getCulturalNarrative();\n            const newEvents = engine.getCulturalEventHistory();\n            setNarratives(newNarratives);\n            setEvaluation(analysis.evaluation);\n            setEvents(newEvents);\n            setGameHistory((prev)=>[\n                    ...prev,\n                    {\n                        from,\n                        to,\n                        piece: engine.getPieceAt(to)\n                    }\n                ]);\n            setCanUndo(true);\n        }\n    }, []);\n    const handleGameEnd = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((result)=>{\n        alert(\"Jogo finalizado! Resultado: \".concat(result));\n    }, []);\n    const handleStyleChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((style)=>{\n        if (style in _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.CULTURAL_STYLES) {\n            setCulturalStyle(style);\n            engine.setCulturalStyle(style);\n            const analysis = engine.getStyleBasedEvaluation();\n            setEvaluation(analysis.evaluation);\n        }\n    }, []);\n    const handleNewGame = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        engine.reset();\n        setGameHistory([]);\n        setNarratives([]);\n        setEvents([]);\n        setEvaluation(0);\n        setCanUndo(false);\n    }, []);\n    const handleUndo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (canUndo) {\n            engine.undoLastMove();\n            setGameHistory((prev)=>prev.slice(0, -1));\n            setCanUndo(gameHistory.length > 1);\n            const analysis = engine.getStyleBasedEvaluation();\n            const newNarratives = engine.getCulturalNarrative();\n            const newEvents = engine.getCulturalEventHistory();\n            setEvaluation(analysis.evaluation);\n            setNarratives(newNarratives);\n            setEvents(newEvents);\n        }\n    }, [\n        canUndo,\n        gameHistory.length\n    ]);\n    const handleFlipBoard = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setOrientation((prev)=>prev === \"white\" ? \"black\" : \"white\");\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        \"data-testid\": \"app-container\",\n        className: \"flex flex-col gap-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"header\",\n                className: \"mb-8 text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        \"data-testid\": \"title\",\n                        className: \"text-4xl font-bold text-white mb-2\",\n                        children: \"CHESS: Sistema Cultural de Xadrez\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                        lineNumber: 85,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        \"data-testid\": \"subtitle\",\n                        className: \"text-emerald-100\",\n                        children: \"Uma experi\\xeancia \\xfanica de xadrez com elementos culturais adaptativos\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                        lineNumber: 88,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                lineNumber: 84,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"main-content\",\n                className: \"grid lg:grid-cols-3 gap-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        \"data-testid\": \"board-controls\",\n                        className: \"lg:col-span-2 space-y-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_web_components_controls_GameControls__WEBPACK_IMPORTED_MODULE_3__.MemoizedGameControls, {\n                                culturalStyle: culturalStyle,\n                                onStyleChange: handleStyleChange,\n                                onFlipBoard: handleFlipBoard,\n                                onNewGame: handleNewGame,\n                                onUndo: handleUndo,\n                                canUndo: canUndo,\n                                isPlayerTurn: true\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                                lineNumber: 97,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                \"data-testid\": \"board-container\",\n                                className: \"flex justify-center w-full max-w-[800px] h-[calc(100vh-12rem)] min-h-[280px] mx-auto\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_web_components_board_ChessBoard__WEBPACK_IMPORTED_MODULE_2__.MemoizedChessBoard, {\n                                    orientation: orientation,\n                                    culturalStyle: culturalStyle,\n                                    showCoordinates: true,\n                                    onMove: handleMove,\n                                    onGameEnd: handleGameEnd\n                                }, void 0, false, {\n                                    fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                                    lineNumber: 111,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                                lineNumber: 107,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                        lineNumber: 96,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        \"data-testid\": \"info-panel\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_web_components_info_GameInfo__WEBPACK_IMPORTED_MODULE_4__.MemoizedGameInfo, {\n                            culturalStyle: culturalStyle,\n                            moves: gameHistory,\n                            evaluation: evaluation,\n                            narratives: narratives,\n                            events: events\n                        }, void 0, false, {\n                            fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                            lineNumber: 123,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                        lineNumber: 122,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n                lineNumber: 94,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/pages/index.tsx\",\n        lineNumber: 82,\n        columnNumber: 5\n    }, this);\n}\n_s(Home, \"RSyPflo67lDzGFttycrJKfSjq2s=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxVQUFVLFVBQVUsT0FBTztJQUM3RCxHQUFHLEVBQUU7SUFFTCxxQkFDRSw4REFBQ2U7UUFBSUMsZUFBWTtRQUFnQkMsV0FBVTs7MEJBRXZDLDhEQUFDRjtnQkFBSUMsZUFBWTtnQkFBU0MsV0FBVTs7a0NBQ2xDLDhEQUFDQzt3QkFBR0YsZUFBWTt3QkFBUUMsV0FBVTtrQ0FBcUM7Ozs7OztrQ0FHdkUsOERBQUNFO3dCQUFFSCxlQUFZO3dCQUFXQyxXQUFVO2tDQUFtQjs7Ozs7Ozs7Ozs7OzBCQU16RCw4REFBQ0Y7Z0JBQUlDLGVBQVk7Z0JBQWVDLFdBQVU7O2tDQUV4Qyw4REFBQ0Y7d0JBQUlDLGVBQVk7d0JBQWlCQyxXQUFVOzswQ0FDMUMsOERBQUNoRCx1RkFBb0JBO2dDQUNuQlksZUFBZUE7Z0NBQ2Z1QyxlQUFlZDtnQ0FDZmUsYUFBYVA7Z0NBQ2JRLFdBQVdkO2dDQUNYZSxRQUFRYjtnQ0FDUmpDLFNBQVNBO2dDQUNUK0MsY0FBYyxJQUFJOzs7Ozs7MENBR3BCLDhEQUFDVDtnQ0FDQ0MsZUFBWTtnQ0FDWkMsV0FBVTswQ0FFViw0RUFBQ2pELGdGQUFrQkE7b0NBQ2pCVyxhQUFhQTtvQ0FDYkUsZUFBZUE7b0NBQ2Y0QyxpQkFBaUIsSUFBSTtvQ0FDckJDLFFBQVFyQztvQ0FDUnNDLFdBQVd4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBTWpCLDhEQUFDWTt3QkFBSUMsZUFBWTtrQ0FDZiw0RUFBQzlDLDJFQUFnQkE7NEJBQ2ZXLGVBQWVBOzRCQUNmK0MsT0FBT3JEOzRCQUNQVSxZQUFZQTs0QkFDWkYsWUFBWUE7NEJBQ1pJLFFBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU10QixDQUFDO0dBN0h1QmQ7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3BhZ2VzL2luZGV4LnRzeD8xOWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNZW1vaXplZENoZXNzQm9hcmQgfSBmcm9tICcuLi93ZWIvY29tcG9uZW50cy9ib2FyZC9DaGVzc0JvYXJkJztcbmltcG9ydCB7IE1lbW9pemVkR2FtZUNvbnRyb2xzIH0gZnJvbSAnLi4vd2ViL2NvbXBvbmVudHMvY29udHJvbHMvR2FtZUNvbnRyb2xzJztcbmltcG9ydCB7IE1lbW9pemVkR2FtZUluZm8gfSBmcm9tICcuLi93ZWIvY29tcG9uZW50cy9pbmZvL0dhbWVJbmZvJztcbmltcG9ydCB7IENoZXNzUG9zaXRpb24sIENoZXNzTW92ZSB9IGZyb20gJy4uL3NoYXJlZC90eXBlcy9jaGVzcyc7XG5pbXBvcnQgeyBDdWx0dXJhbENoZXNzRW5naW5lIH0gZnJvbSAnLi4vc2hhcmVkL2VuZ2luZS9DdWx0dXJhbENoZXNzRW5naW5lJztcbmltcG9ydCB7IENVTFRVUkFMX1NUWUxFUyB9IGZyb20gJy4uL3NoYXJlZC9jb25zdGFudHMvZ2FtZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhvbWUoKSB7XG4gIGNvbnN0IFtlbmdpbmVdID0gdXNlU3RhdGUoKCkgPT4gbmV3IEN1bHR1cmFsQ2hlc3NFbmdpbmUoKSk7XG4gIGNvbnN0IFtnYW1lSGlzdG9yeSwgc2V0R2FtZUhpc3RvcnldID0gdXNlU3RhdGU8Q2hlc3NNb3ZlW10+KFtdKTtcbiAgY29uc3QgW2NhblVuZG8sIHNldENhblVuZG9dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IFtvcmllbnRhdGlvbiwgc2V0T3JpZW50YXRpb25dID0gdXNlU3RhdGU8J3doaXRlJyB8ICdibGFjayc+KCd3aGl0ZScpO1xuICBjb25zdCBbY3VsdHVyYWxTdHlsZSwgc2V0Q3VsdHVyYWxTdHlsZV0gPSB1c2VTdGF0ZSgnbW9kZXJuJyk7XG4gIGNvbnN0IFtuYXJyYXRpdmVzLCBzZXROYXJyYXRpdmVzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtldmFsdWF0aW9uLCBzZXRFdmFsdWF0aW9uXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZXZlbnRzLCBzZXRFdmVudHNdID0gdXNlU3RhdGU8QXJyYXk8e1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICB9Pj4oW10pO1xuXG4gIGNvbnN0IGhhbmRsZU1vdmUgPSB1c2VDYWxsYmFjaygoZnJvbTogQ2hlc3NQb3NpdGlvbiwgdG86IENoZXNzUG9zaXRpb24pID0+IHtcbiAgICBjb25zdCBzdWNjZXNzID0gZW5naW5lLm1ha2VNb3ZlKGZyb20sIHRvKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgY29uc3QgYW5hbHlzaXMgPSBlbmdpbmUuZ2V0U3R5bGVCYXNlZEV2YWx1YXRpb24oKTtcbiAgICAgIGNvbnN0IG5ld05hcnJhdGl2ZXMgPSBlbmdpbmUuZ2V0Q3VsdHVyYWxOYXJyYXRpdmUoKTtcbiAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IGVuZ2luZS5nZXRDdWx0dXJhbEV2ZW50SGlzdG9yeSgpO1xuICAgICAgXG4gICAgICBzZXROYXJyYXRpdmVzKG5ld05hcnJhdGl2ZXMpO1xuICAgICAgc2V0RXZhbHVhdGlvbihhbmFseXNpcy5ldmFsdWF0aW9uKTtcbiAgICAgIHNldEV2ZW50cyhuZXdFdmVudHMpO1xuICAgICAgc2V0R2FtZUhpc3RvcnkocHJldiA9PiBbLi4ucHJldiwgeyBmcm9tLCB0bywgcGllY2U6IGVuZ2luZS5nZXRQaWVjZUF0KHRvKSEgfV0pO1xuICAgICAgc2V0Q2FuVW5kbyh0cnVlKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVHYW1lRW5kID0gdXNlQ2FsbGJhY2soKHJlc3VsdDogc3RyaW5nKSA9PiB7XG4gICAgYWxlcnQoYEpvZ28gZmluYWxpemFkbyEgUmVzdWx0YWRvOiAke3Jlc3VsdH1gKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZVN0eWxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soKHN0eWxlOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoc3R5bGUgaW4gQ1VMVFVSQUxfU1RZTEVTKSB7XG4gICAgICBzZXRDdWx0dXJhbFN0eWxlKHN0eWxlKTtcbiAgICAgIGVuZ2luZS5zZXRDdWx0dXJhbFN0eWxlKHN0eWxlKTtcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gZW5naW5lLmdldFN0eWxlQmFzZWRFdmFsdWF0aW9uKCk7XG4gICAgICBzZXRFdmFsdWF0aW9uKGFuYWx5c2lzLmV2YWx1YXRpb24pO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZU5ld0dhbWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZW5naW5lLnJlc2V0KCk7XG4gICAgc2V0R2FtZUhpc3RvcnkoW10pO1xuICAgIHNldE5hcnJhdGl2ZXMoW10pO1xuICAgIHNldEV2ZW50cyhbXSk7XG4gICAgc2V0RXZhbHVhdGlvbigwKTtcbiAgICBzZXRDYW5VbmRvKGZhbHNlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZVVuZG8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGNhblVuZG8pIHtcbiAgICAgIGVuZ2luZS51bmRvTGFzdE1vdmUoKTtcbiAgICAgIHNldEdhbWVIaXN0b3J5KHByZXYgPT4gcHJldi5zbGljZSgwLCAtMSkpO1xuICAgICAgc2V0Q2FuVW5kbyhnYW1lSGlzdG9yeS5sZW5ndGggPiAxKTtcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBlbmdpbmUuZ2V0U3R5bGVCYXNlZEV2YWx1YXRpb24oKTtcbiAgICAgIGNvbnN0IG5ld05hcnJhdGl2ZXMgPSBlbmdpbmUuZ2V0Q3VsdHVyYWxOYXJyYXRpdmUoKTtcbiAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IGVuZ2luZS5nZXRDdWx0dXJhbEV2ZW50SGlzdG9yeSgpO1xuICAgICAgXG4gICAgICBzZXRFdmFsdWF0aW9uKGFuYWx5c2lzLmV2YWx1YXRpb24pO1xuICAgICAgc2V0TmFycmF0aXZlcyhuZXdOYXJyYXRpdmVzKTtcbiAgICAgIHNldEV2ZW50cyhuZXdFdmVudHMpO1xuICAgIH1cbiAgfSwgW2NhblVuZG8sIGdhbWVIaXN0b3J5Lmxlbmd0aF0pO1xuXG4gIGNvbnN0IGhhbmRsZUZsaXBCb2FyZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRPcmllbnRhdGlvbihwcmV2ID0+IHByZXYgPT09ICd3aGl0ZScgPyAnYmxhY2snIDogJ3doaXRlJyk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJhcHAtY29udGFpbmVyXCIgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtOFwiPlxuICAgICAgICB7LyogQ2FiZcOnYWxobyAqL31cbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhlYWRlclwiIGNsYXNzTmFtZT1cIm1iLTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8aDEgZGF0YS10ZXN0aWQ9XCJ0aXRsZVwiIGNsYXNzTmFtZT1cInRleHQtNHhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTJcIj5cbiAgICAgICAgICAgIENIRVNTOiBTaXN0ZW1hIEN1bHR1cmFsIGRlIFhhZHJlelxuICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgPHAgZGF0YS10ZXN0aWQ9XCJzdWJ0aXRsZVwiIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC0xMDBcIj5cbiAgICAgICAgICAgIFVtYSBleHBlcmnDqm5jaWEgw7puaWNhIGRlIHhhZHJleiBjb20gZWxlbWVudG9zIGN1bHR1cmFpcyBhZGFwdGF0aXZvc1xuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIMOBcmVhIHByaW5jaXBhbCAqL31cbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cIm1haW4tY29udGVudFwiIGNsYXNzTmFtZT1cImdyaWQgbGc6Z3JpZC1jb2xzLTMgZ2FwLThcIj5cbiAgICAgICAgICB7LyogQ29udHJvbGVzIGUgVGFidWxlaXJvICovfVxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJib2FyZC1jb250cm9sc1wiIGNsYXNzTmFtZT1cImxnOmNvbC1zcGFuLTIgc3BhY2UteS04XCI+XG4gICAgICAgICAgICA8TWVtb2l6ZWRHYW1lQ29udHJvbHNcbiAgICAgICAgICAgICAgY3VsdHVyYWxTdHlsZT17Y3VsdHVyYWxTdHlsZX1cbiAgICAgICAgICAgICAgb25TdHlsZUNoYW5nZT17aGFuZGxlU3R5bGVDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uRmxpcEJvYXJkPXtoYW5kbGVGbGlwQm9hcmR9XG4gICAgICAgICAgICAgIG9uTmV3R2FtZT17aGFuZGxlTmV3R2FtZX1cbiAgICAgICAgICAgICAgb25VbmRvPXtoYW5kbGVVbmRvfVxuICAgICAgICAgICAgICBjYW5VbmRvPXtjYW5VbmRvfVxuICAgICAgICAgICAgICBpc1BsYXllclR1cm49e3RydWV9IC8vIFRPRE86IEltcGxlbWVudGFyIGzDs2dpY2EgZGUgdHVybm9cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYm9hcmQtY29udGFpbmVyXCIgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgdy1mdWxsIG1heC13LVs4MDBweF0gaC1bY2FsYygxMDB2aC0xMnJlbSldIG1pbi1oLVsyODBweF0gbXgtYXV0b1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxNZW1vaXplZENoZXNzQm9hcmRcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj17b3JpZW50YXRpb259XG4gICAgICAgICAgICAgICAgY3VsdHVyYWxTdHlsZT17Y3VsdHVyYWxTdHlsZX1cbiAgICAgICAgICAgICAgICBzaG93Q29vcmRpbmF0ZXM9e3RydWV9XG4gICAgICAgICAgICAgICAgb25Nb3ZlPXtoYW5kbGVNb3ZlfVxuICAgICAgICAgICAgICAgIG9uR2FtZUVuZD17aGFuZGxlR2FtZUVuZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFBhaW5lbCBkZSBJbmZvcm1hw6fDtWVzICovfVxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJpbmZvLXBhbmVsXCI+XG4gICAgICAgICAgICA8TWVtb2l6ZWRHYW1lSW5mb1xuICAgICAgICAgICAgICBjdWx0dXJhbFN0eWxlPXtjdWx0dXJhbFN0eWxlfVxuICAgICAgICAgICAgICBtb3Zlcz17Z2FtZUhpc3Rvcnl9XG4gICAgICAgICAgICAgIGV2YWx1YXRpb249e2V2YWx1YXRpb259XG4gICAgICAgICAgICAgIG5hcnJhdGl2ZXM9e25hcnJhdGl2ZXN9XG4gICAgICAgICAgICAgIGV2ZW50cz17ZXZlbnRzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiTWVtb2l6ZWRDaGVzc0JvYXJkIiwiTWVtb2l6ZWRHYW1lQ29udHJvbHMiLCJNZW1vaXplZEdhbWVJbmZvIiwiQ3VsdHVyYWxDaGVzc0VuZ2luZSIsIkNVTFRVUkFMX1NUWUxFUyIsIkhvbWUiLCJlbmdpbmUiLCJnYW1lSGlzdG9yeSIsInNldEdhbWVIaXN0b3J5IiwiY2FuVW5kbyIsInNldENhblVuZG8iLCJvcmllbnRhdGlvbiIsInNldE9yaWVudGF0aW9uIiwiY3VsdHVyYWxTdHlsZSIsInNldEN1bHR1cmFsU3R5bGUiLCJuYXJyYXRpdmVzIiwic2V0TmFycmF0aXZlcyIsImV2YWx1YXRpb24iLCJzZXRFdmFsdWF0aW9uIiwiZXZlbnRzIiwic2V0RXZlbnRzIiwiaGFuZGxlTW92ZSIsImZyb20iLCJ0byIsInN1Y2Nlc3MiLCJtYWtlTW92ZSIsImFuYWx5c2lzIiwiZ2V0U3R5bGVCYXNlZEV2YWx1YXRpb24iLCJuZXdOYXJyYXRpdmVzIiwiZ2V0Q3VsdHVyYWxOYXJyYXRpdmUiLCJuZXdFdmVudHMiLCJnZXRDdWx0dXJhbEV2ZW50SGlzdG9yeSIsInByZXYiLCJwaWVjZSIsImdldFBpZWNlQXQiLCJoYW5kbGVHYW1lRW5kIiwicmVzdWx0IiwiYWxlcnQiLCJoYW5kbGVTdHlsZUNoYW5nZSIsInN0eWxlIiwiaGFuZGxlTmV3R2FtZSIsInJlc2V0IiwiaGFuZGxlVW5kbyIsInVuZG9MYXN0TW92ZSIsInNsaWNlIiwibGVuZ3RoIiwiaGFuZGxlRmxpcEJvYXJkIiwiZGl2IiwiZGF0YS10ZXN0aWQiLCJjbGFzc05hbWUiLCJoMSIsInAiLCJvblN0eWxlQ2hhbmdlIiwib25GbGlwQm9hcmQiLCJvbk5ld0dhbWUiLCJvblVuZG8iLCJpc1BsYXllclR1cm4iLCJzaG93Q29vcmRpbmF0ZXMiLCJvbk1vdmUiLCJvbkdhbWVFbmQiLCJtb3ZlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/index.tsx\n"));

/***/ }),

/***/ "./src/shared/constants/game.ts":
/*!**************************************!*\
  !*** ./src/shared/constants/game.ts ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AI_LEVELS\": function() { return /* binding */ AI_LEVELS; },\n/* harmony export */   \"ANALYSIS_CONFIG\": function() { return /* binding */ ANALYSIS_CONFIG; },\n/* harmony export */   \"BOARD_SIZE\": function() { return /* binding */ BOARD_SIZE; },\n/* harmony export */   \"CACHE_CONFIG\": function() { return /* binding */ CACHE_CONFIG; },\n/* harmony export */   \"CULTURAL_EVENTS\": function() { return /* binding */ CULTURAL_EVENTS; },\n/* harmony export */   \"CULTURAL_STYLES\": function() { return /* binding */ CULTURAL_STYLES; },\n/* harmony export */   \"GAME_RESULTS\": function() { return /* binding */ GAME_RESULTS; },\n/* harmony export */   \"GAME_STATUS\": function() { return /* binding */ GAME_STATUS; },\n/* harmony export */   \"INITIAL_FEN\": function() { return /* binding */ INITIAL_FEN; },\n/* harmony export */   \"MONITORING_CONFIG\": function() { return /* binding */ MONITORING_CONFIG; },\n/* harmony export */   \"MOVE_QUALITY\": function() { return /* binding */ MOVE_QUALITY; },\n/* harmony export */   \"MOVE_TYPES\": function() { return /* binding */ MOVE_TYPES; },\n/* harmony export */   \"PIECES\": function() { return /* binding */ PIECES; },\n/* harmony export */   \"PIECE_SYMBOLS\": function() { return /* binding */ PIECE_SYMBOLS; },\n/* harmony export */   \"TIME_CONTROLS\": function() { return /* binding */ TIME_CONTROLS; }\n/* harmony export */ });\n// Constantes do jogo de xadrez\n// Configuraes do tabuleiro\nconst BOARD_SIZE = 8;\nconst INITIAL_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\n// Peas do jogo\nconst PIECES = {\n    KING: \"k\",\n    QUEEN: \"q\",\n    ROOK: \"r\",\n    BISHOP: \"b\",\n    KNIGHT: \"n\",\n    PAWN: \"p\"\n};\n// Smbolos Unicode das peas\nconst PIECE_SYMBOLS = {\n    // Peas brancas\n    \"K\": \"\",\n    \"Q\": \"\",\n    \"R\": \"\",\n    \"B\": \"\",\n    \"N\": \"\",\n    \"P\": \"\",\n    // Peas pretas\n    \"k\": \"\",\n    \"q\": \"\",\n    \"r\": \"\",\n    \"b\": \"\",\n    \"n\": \"\",\n    \"p\": \"\"\n};\n// Status do jogo\nconst GAME_STATUS = {\n    WAITING: \"waiting\",\n    ACTIVE: \"active\",\n    PAUSED: \"paused\",\n    COMPLETED: \"completed\",\n    ABORTED: \"aborted\"\n};\n// Tipos de movimento\nconst MOVE_TYPES = {\n    NORMAL: \"normal\",\n    CAPTURE: \"capture\",\n    CASTLE_KINGSIDE: \"castle_kingside\",\n    CASTLE_QUEENSIDE: \"castle_queenside\",\n    EN_PASSANT: \"en_passant\",\n    PROMOTION: \"promotion\"\n};\n// Resultados do jogo\nconst GAME_RESULTS = {\n    WHITE_WIN: \"white_win\",\n    BLACK_WIN: \"black_win\",\n    DRAW: \"draw\",\n    STALEMATE: \"stalemate\",\n    INSUFFICIENT_MATERIAL: \"insufficient_material\",\n    THREEFOLD_REPETITION: \"threefold_repetition\",\n    FIFTY_MOVE_RULE: \"fifty_move_rule\",\n    ABANDONED: \"abandoned\"\n};\n// Controles de tempo\nconst TIME_CONTROLS = {\n    BULLET: {\n        initial: 60 * 1,\n        increment: 0\n    },\n    BLITZ: {\n        initial: 60 * 3,\n        increment: 2\n    },\n    RAPID: {\n        initial: 60 * 10,\n        increment: 5\n    },\n    CLASSICAL: {\n        initial: 60 * 30,\n        increment: 10\n    }\n};\n// Nveis de dificuldade da IA\nconst AI_LEVELS = {\n    BEGINNER: 1,\n    CASUAL: 3,\n    INTERMEDIATE: 5,\n    ADVANCED: 7,\n    EXPERT: 9\n};\n// Estilos culturais\nconst CULTURAL_STYLES = {\n    MEDIEVAL: \"medieval\",\n    RENAISSANCE: \"renaissance\",\n    MODERN: \"modern\",\n    ANCIENT: \"ancient\"\n};\n// Eventos culturais\nconst CULTURAL_EVENTS = {\n    BRILLIANT_MOVE: \"brilliant_move\",\n    CRITICAL_POSITION: \"critical_position\",\n    WINNING_SEQUENCE: \"winning_sequence\",\n    TACTICAL_OPPORTUNITY: \"tactical_opportunity\",\n    STRATEGIC_ADVANTAGE: \"strategic_advantage\"\n};\n// Configuraes de anlise\nconst ANALYSIS_CONFIG = {\n    DEPTH_DEFAULT: 20,\n    DEPTH_DEEP: 30,\n    MIN_TIME: 100,\n    MAX_TIME: 5000,\n    NODES_LIMIT: 1000000\n};\n// Mtricas de qualidade\nconst MOVE_QUALITY = {\n    BRILLIANT: {\n        threshold: 0.95,\n        color: \"#FFD700\"\n    },\n    GREAT: {\n        threshold: 0.85,\n        color: \"#32CD32\"\n    },\n    GOOD: {\n        threshold: 0.70,\n        color: \"#90EE90\"\n    },\n    INACCURACY: {\n        threshold: 0.50,\n        color: \"#FFD700\"\n    },\n    MISTAKE: {\n        threshold: 0.30,\n        color: \"#FFA500\"\n    },\n    BLUNDER: {\n        threshold: 0.15,\n        color: \"#FF0000\"\n    }\n};\n// Configuraes de cache\nconst CACHE_CONFIG = {\n    POSITION_TTL: 60 * 60,\n    ANALYSIS_TTL: 24 * 60 * 60,\n    MAX_CACHE_SIZE: 1000,\n    WARMUP_DEPTH: 2\n};\n// Configuraes de monitoramento\nconst MONITORING_CONFIG = {\n    METRICS_INTERVAL: 5000,\n    HEALTH_CHECK_INTERVAL: 30000,\n    ERROR_THRESHOLD: 0.05,\n    PERFORMANCE_THRESHOLD: 1000\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGtCQUFrQjtJQUNsQkMsdUJBQXVCO0lBQ3ZCQyxpQkFBaUI7SUFDakJDLHVCQUF1QjtBQUN6QixFQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9zaGFyZWQvY29uc3RhbnRzL2dhbWUudHM/NDVhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb25zdGFudGVzIGRvIGpvZ28gZGUgeGFkcmV6XG5cbi8vIENvbmZpZ3VyYcOnw7VlcyBkbyB0YWJ1bGVpcm9cbmV4cG9ydCBjb25zdCBCT0FSRF9TSVpFID0gODtcbmV4cG9ydCBjb25zdCBJTklUSUFMX0ZFTiA9ICdybmJxa2Juci9wcHBwcHBwcC84LzgvOC84L1BQUFBQUFBQL1JOQlFLQk5SIHcgS1FrcSAtIDAgMSc7XG5cbi8vIFBlw6dhcyBkbyBqb2dvXG5leHBvcnQgY29uc3QgUElFQ0VTID0ge1xuICBLSU5HOiAnaycsXG4gIFFVRUVOOiAncScsXG4gIFJPT0s6ICdyJyxcbiAgQklTSE9QOiAnYicsXG4gIEtOSUdIVDogJ24nLFxuICBQQVdOOiAncCcsXG59IGFzIGNvbnN0O1xuXG4vLyBTw61tYm9sb3MgVW5pY29kZSBkYXMgcGXDp2FzXG5leHBvcnQgY29uc3QgUElFQ0VfU1lNQk9MUyA9IHtcbiAgLy8gUGXDp2FzIGJyYW5jYXNcbiAgJ0snOiAn4pmUJyxcbiAgJ1EnOiAn4pmVJyxcbiAgJ1InOiAn4pmWJyxcbiAgJ0InOiAn4pmXJyxcbiAgJ04nOiAn4pmYJyxcbiAgJ1AnOiAn4pmZJyxcbiAgLy8gUGXDp2FzIHByZXRhc1xuICAnayc6ICfimZonLFxuICAncSc6ICfimZsnLFxuICAncic6ICfimZwnLFxuICAnYic6ICfimZ0nLFxuICAnbic6ICfimZ4nLFxuICAncCc6ICfimZ8nLFxufSBhcyBjb25zdDtcblxuLy8gU3RhdHVzIGRvIGpvZ29cbmV4cG9ydCBjb25zdCBHQU1FX1NUQVRVUyA9IHtcbiAgV0FJVElORzogJ3dhaXRpbmcnLFxuICBBQ1RJVkU6ICdhY3RpdmUnLFxuICBQQVVTRUQ6ICdwYXVzZWQnLFxuICBDT01QTEVURUQ6ICdjb21wbGV0ZWQnLFxuICBBQk9SVEVEOiAnYWJvcnRlZCcsXG59IGFzIGNvbnN0O1xuXG4vLyBUaXBvcyBkZSBtb3ZpbWVudG9cbmV4cG9ydCBjb25zdCBNT1ZFX1RZUEVTID0ge1xuICBOT1JNQUw6ICdub3JtYWwnLFxuICBDQVBUVVJFOiAnY2FwdHVyZScsXG4gIENBU1RMRV9LSU5HU0lERTogJ2Nhc3RsZV9raW5nc2lkZScsXG4gIENBU1RMRV9RVUVFTlNJREU6ICdjYXN0bGVfcXVlZW5zaWRlJyxcbiAgRU5fUEFTU0FOVDogJ2VuX3Bhc3NhbnQnLFxuICBQUk9NT1RJT046ICdwcm9tb3Rpb24nLFxufSBhcyBjb25zdDtcblxuLy8gUmVzdWx0YWRvcyBkbyBqb2dvXG5leHBvcnQgY29uc3QgR0FNRV9SRVNVTFRTID0ge1xuICBXSElURV9XSU46ICd3aGl0ZV93aW4nLFxuICBCTEFDS19XSU46ICdibGFja193aW4nLFxuICBEUkFXOiAnZHJhdycsXG4gIFNUQUxFTUFURTogJ3N0YWxlbWF0ZScsXG4gIElOU1VGRklDSUVOVF9NQVRFUklBTDogJ2luc3VmZmljaWVudF9tYXRlcmlhbCcsXG4gIFRIUkVFRk9MRF9SRVBFVElUSU9OOiAndGhyZWVmb2xkX3JlcGV0aXRpb24nLFxuICBGSUZUWV9NT1ZFX1JVTEU6ICdmaWZ0eV9tb3ZlX3J1bGUnLFxuICBBQkFORE9ORUQ6ICdhYmFuZG9uZWQnLFxufSBhcyBjb25zdDtcblxuLy8gQ29udHJvbGVzIGRlIHRlbXBvXG5leHBvcnQgY29uc3QgVElNRV9DT05UUk9MUyA9IHtcbiAgQlVMTEVUOiB7XG4gICAgaW5pdGlhbDogNjAgKiAxLCAgICAgIC8vIDEgbWludXRvXG4gICAgaW5jcmVtZW50OiAwLFxuICB9LFxuICBCTElUWjoge1xuICAgIGluaXRpYWw6IDYwICogMywgICAgICAvLyAzIG1pbnV0b3NcbiAgICBpbmNyZW1lbnQ6IDIsXG4gIH0sXG4gIFJBUElEOiB7XG4gICAgaW5pdGlhbDogNjAgKiAxMCwgICAgIC8vIDEwIG1pbnV0b3NcbiAgICBpbmNyZW1lbnQ6IDUsXG4gIH0sXG4gIENMQVNTSUNBTDoge1xuICAgIGluaXRpYWw6IDYwICogMzAsICAgICAvLyAzMCBtaW51dG9zXG4gICAgaW5jcmVtZW50OiAxMCxcbiAgfSxcbn0gYXMgY29uc3Q7XG5cbi8vIE7DrXZlaXMgZGUgZGlmaWN1bGRhZGUgZGEgSUFcbmV4cG9ydCBjb25zdCBBSV9MRVZFTFMgPSB7XG4gIEJFR0lOTkVSOiAxLFxuICBDQVNVQUw6IDMsXG4gIElOVEVSTUVESUFURTogNSxcbiAgQURWQU5DRUQ6IDcsXG4gIEVYUEVSVDogOSxcbn0gYXMgY29uc3Q7XG5cbi8vIEVzdGlsb3MgY3VsdHVyYWlzXG5leHBvcnQgY29uc3QgQ1VMVFVSQUxfU1RZTEVTID0ge1xuICBNRURJRVZBTDogJ21lZGlldmFsJyxcbiAgUkVOQUlTU0FOQ0U6ICdyZW5haXNzYW5jZScsXG4gIE1PREVSTjogJ21vZGVybicsXG4gIEFOQ0lFTlQ6ICdhbmNpZW50Jyxcbn0gYXMgY29uc3Q7XG5cbi8vIEV2ZW50b3MgY3VsdHVyYWlzXG5leHBvcnQgY29uc3QgQ1VMVFVSQUxfRVZFTlRTID0ge1xuICBCUklMTElBTlRfTU9WRTogJ2JyaWxsaWFudF9tb3ZlJyxcbiAgQ1JJVElDQUxfUE9TSVRJT046ICdjcml0aWNhbF9wb3NpdGlvbicsXG4gIFdJTk5JTkdfU0VRVUVOQ0U6ICd3aW5uaW5nX3NlcXVlbmNlJyxcbiAgVEFDVElDQUxfT1BQT1JUVU5JVFk6ICd0YWN0aWNhbF9vcHBvcnR1bml0eScsXG4gIFNUUkFURUdJQ19BRFZBTlRBR0U6ICdzdHJhdGVnaWNfYWR2YW50YWdlJyxcbn0gYXMgY29uc3Q7XG5cbi8vIENvbmZpZ3VyYcOnw7VlcyBkZSBhbsOhbGlzZVxuZXhwb3J0IGNvbnN0IEFOQUxZU0lTX0NPTkZJRyA9IHtcbiAgREVQVEhfREVGQVVMVDogMjAsXG4gIERFUFRIX0RFRVA6IDMwLFxuICBNSU5fVElNRTogMTAwLCAgICAvLyBtc1xuICBNQVhfVElNRTogNTAwMCwgICAvLyBtc1xuICBOT0RFU19MSU1JVDogMTAwMDAwMCxcbn0gYXMgY29uc3Q7XG5cbi8vIE3DqXRyaWNhcyBkZSBxdWFsaWRhZGVcbmV4cG9ydCBjb25zdCBNT1ZFX1FVQUxJVFkgPSB7XG4gIEJSSUxMSUFOVDoge1xuICAgIHRocmVzaG9sZDogMC45NSxcbiAgICBjb2xvcjogJyNGRkQ3MDAnLFxuICB9LFxuICBHUkVBVDoge1xuICAgIHRocmVzaG9sZDogMC44NSxcbiAgICBjb2xvcjogJyMzMkNEMzInLFxuICB9LFxuICBHT09EOiB7XG4gICAgdGhyZXNob2xkOiAwLjcwLFxuICAgIGNvbG9yOiAnIzkwRUU5MCcsXG4gIH0sXG4gIElOQUNDVVJBQ1k6IHtcbiAgICB0aHJlc2hvbGQ6IDAuNTAsXG4gICAgY29sb3I6ICcjRkZENzAwJyxcbiAgfSxcbiAgTUlTVEFLRToge1xuICAgIHRocmVzaG9sZDogMC4zMCxcbiAgICBjb2xvcjogJyNGRkE1MDAnLFxuICB9LFxuICBCTFVOREVSOiB7XG4gICAgdGhyZXNob2xkOiAwLjE1LFxuICAgIGNvbG9yOiAnI0ZGMDAwMCcsXG4gIH0sXG59IGFzIGNvbnN0O1xuXG4vLyBDb25maWd1cmHDp8O1ZXMgZGUgY2FjaGVcbmV4cG9ydCBjb25zdCBDQUNIRV9DT05GSUcgPSB7XG4gIFBPU0lUSU9OX1RUTDogNjAgKiA2MCwgICAgLy8gMSBob3JhXG4gIEFOQUxZU0lTX1RUTDogMjQgKiA2MCAqIDYwLCAvLyAxIGRpYVxuICBNQVhfQ0FDSEVfU0laRTogMTAwMCwgICAgIC8vIGVudHJhZGFzXG4gIFdBUk1VUF9ERVBUSDogMiwgICAgICAgICAgLy8gbsOtdmVpcyBkZSBwcm9mdW5kaWRhZGUgcGFyYSBwcsOpLWNhcnJlZ2FyXG59IGFzIGNvbnN0O1xuXG4vLyBDb25maWd1cmHDp8O1ZXMgZGUgbW9uaXRvcmFtZW50b1xuZXhwb3J0IGNvbnN0IE1PTklUT1JJTkdfQ09ORklHID0ge1xuICBNRVRSSUNTX0lOVEVSVkFMOiA1MDAwLCAgIC8vIDUgc2VndW5kb3NcbiAgSEVBTFRIX0NIRUNLX0lOVEVSVkFMOiAzMDAwMCwgLy8gMzAgc2VndW5kb3NcbiAgRVJST1JfVEhSRVNIT0xEOiAwLjA1LCAgICAvLyA1JSBkZSBlcnJvIG3DoXhpbW9cbiAgUEVSRk9STUFOQ0VfVEhSRVNIT0xEOiAxMDAwLCAvLyAxIHNlZ3VuZG8gbcOheGltbyBkZSByZXNwb3N0YVxufSBhcyBjb25zdDtcbiJdLCJuYW1lcyI6WyJCT0FSRF9TSVpFIiwiSU5JVElBTF9GRU4iLCJQSUVDRVMiLCJLSU5HIiwiUVVFRU4iLCJST09LIiwiQklTSE9QIiwiS05JR0hUIiwiUEFXTiIsIlBJRUNFX1NZTUJPTFMiLCJHQU1FX1NUQVRVUyIsIldBSVRJTkciLCJBQ1RJVkUiLCJQQVVTRUQiLCJDT01QTEVURUQiLCJBQk9SVEVEIiwiTU9WRV9UWVBFUyIsIk5PUk1BTCIsIkNBUFRVUkUiLCJDQVNUTEVfS0lOR1NJREUiLCJDQVNUTEVfUVVFRU5TSURFIiwiRU5fUEFTU0FOVCIsIlBST01PVElPTiIsIkdBTUVfUkVTVUxUUyIsIldISVRFX1dJTiIsIkJMQUNLX1dJTiIsIkRSQVciLCJTVEFMRU1BVEUiLCJJTlNVRkZJQ0lFTlRfTUFURVJJQUwiLCJUSFJFRUZPTERfUkVQRVRJVElPTiIsIkZJRlRZX01PVkVfUlVMRSIsIkFCQU5ET05FRCIsIlRJTUVfQ09OVFJPTFMiLCJCVUxMRVQiLCJpbml0aWFsIiwiaW5jcmVtZW50IiwiQkxJVFoiLCJSQVBJRCIsIkNMQVNTSUNBTCIsIkFJX0xFVkVMUyIsIkJFR0lOTkVSIiwiQ0FTVUFMIiwiSU5URVJNRURJQVRFIiwiQURWQU5DRUQiLCJFWFBFUlQiLCJDVUxUVVJBTF9TVFlMRVMiLCJNRURJRVZBTCIsIlJFTkFJU1NBTkNFIiwiTU9ERVJOIiwiQU5DSUVOVCIsIkNVTFRVUkFMX0VWRU5UUyIsIkJSSUxMSUFOVF9NT1ZFIiwiQ1JJVElDQUxfUE9TSVRJT04iLCJXSU5OSU5HX1NFUVVFTkNFIiwiVEFDVElDQUxfT1BQT1JUVU5JVFkiLCJTVFJBVEVHSUNfQURWQU5UQUdFIiwiQU5BTFlTSVNfQ09ORklHIiwiREVQVEhfREVGQVVMVCIsIkRFUFRIX0RFRVAiLCJNSU5fVElNRSIsIk1BWF9USU1FIiwiTk9ERVNfTElNSVQiLCJNT1ZFX1FVQUxJVFkiLCJCUklMTElBTlQiLCJ0aHJlc2hvbGQiLCJjb2xvciIsIkdSRUFUIiwiR09PRCIsIklOQUNDVVJBQ1kiLCJNSVNUQUtFIiwiQkxVTkRFUiIsIkNBQ0hFX0NPTkZJRyIsIlBPU0lUSU9OX1RUTCIsIkFOQUxZU0lTX1RUTCIsIk1BWF9DQUNIRV9TSVpFIiwiV0FSTVVQX0RFUFRIIiwiTU9OSVRPUklOR19DT05GSUciLCJNRVRSSUNTX0lOVEVSVkFMIiwiSEVBTFRIX0NIRUNLX0lOVEVSVkFMIiwiRVJST1JfVEhSRVNIT0xEIiwiUEVSRk9STUFOQ0VfVEhSRVNIT0xEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/shared/constants/game.ts\n"));

/***/ }),

/***/ "./src/shared/engine/ChessEngineBase.ts":
/*!**********************************************!*\
  !*** ./src/shared/engine/ChessEngineBase.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChessEngineBase\": function() { return /* binding */ ChessEngineBase; }\n/* harmony export */ });\n/* harmony import */ var chess_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chess.js */ \"./node_modules/chess.js/dist/esm/chess.js\");\n/* harmony import */ var _monitoring_ArquimaxMonitor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./monitoring/ArquimaxMonitor */ \"./src/shared/engine/monitoring/ArquimaxMonitor.ts\");\n/* harmony import */ var _constants_game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants/game */ \"./src/shared/constants/game.ts\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! events */ \"./node_modules/next/dist/compiled/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n/**\n * Implementao base do motor de xadrez.\n * \n * Esta classe fornece a funcionalidade central para um motor de xadrez,\n * incluindo gerenciamento de estado do jogo, validao de movimentos,\n * avaliao de posio e eventos do jogo.\n * \n * @implements {ChessEngine}\n */ class ChessEngineBase {\n    // Estado do jogo\n    /**\n   * Obtm a representao atual do tabuleiro.\n   * \n   * @returns Uma matriz 8x8 representando o tabuleiro, onde cada elemento\n   *  uma pea de xadrez ou null para casas vazias.\n   */ getBoard() {\n        const board = this.game.board();\n        return board.map((row)=>row.map((square)=>square ? {\n                    type: square.type,\n                    color: square.color === \"w\" ? \"white\" : \"black\"\n                } : null));\n    }\n    /**\n   * Obtm a posio atual em notao FEN.\n   * \n   * @returns String FEN representando o estado atual do jogo\n   */ getFEN() {\n        return this.game.fen();\n    }\n    /**\n   * Define uma nova posio para o jogo usando notao FEN.\n   * \n   * @param fen - String FEN representando a nova posio\n   * @throws {Error} Se a string FEN for invlida\n   * @emits {POSITION_CHANGED} Quando a posio  alterada com sucesso\n   */ setFEN(fen) {\n        try {\n            // Na nova verso do chess.js, load() j valida o FEN\n            this.game.load(fen);\n            this.emitEvent({\n                type: \"POSITION_CHANGED\",\n                fen\n            });\n        } catch (e) {\n            throw new Error(\"Invalid FEN string\");\n        }\n    }\n    // Movimentos\n    /**\n   * Obtm todos os movimentos legais possveis para uma pea em uma determinada posio.\n   * \n   * @param position - Posio da pea no tabuleiro\n   * @returns Lista de movimentos legais possveis\n   */ getPossibleMoves(position) {\n        try {\n            const square = this.positionToSquare(position);\n            const fen = this.getFEN();\n            const cacheKey = \"\".concat(fen, \":\").concat(square);\n            const cacheHit = this.positionCache.has(cacheKey);\n            let moves;\n            if (cacheHit) {\n                const cache = this.positionCache.get(cacheKey);\n                moves = cache.bestLine;\n            } else {\n                moves = this.game.moves({\n                    square,\n                    verbose: true\n                });\n                // Cache the result\n                this.positionCache.set(cacheKey, {\n                    evaluation: 0,\n                    depth: 0,\n                    bestLine: moves,\n                    threats: [],\n                    positionalFeatures: {\n                        pawnStructure: 0,\n                        kingSafety: 0,\n                        mobility: 0,\n                        centerControl: 0,\n                        pieceActivity: 0\n                    }\n                });\n            }\n            this.monitor.recordCacheAccess(cacheHit);\n            return moves.map((move)=>({\n                    from: this.squareToPosition(move.from),\n                    to: this.squareToPosition(move.to),\n                    piece: {\n                        type: move.piece,\n                        color: move.color === \"w\" ? \"white\" : \"black\"\n                    },\n                    captured: move.captured ? {\n                        type: move.captured,\n                        color: move.color === \"w\" ? \"black\" : \"white\"\n                    } : undefined,\n                    promotion: move.promotion\n                }));\n        } catch (e) {\n            // Se houver erro na gerao de movimentos, retorna lista vazia\n            return [];\n        }\n    }\n    /**\n   * Executa um movimento no tabuleiro.\n   * \n   * @param from - Posio inicial da pea\n   * @param to - Posio final da pea\n   * @returns true se o movimento foi executado com sucesso, false caso contrrio\n   * @emits {MOVE_MADE} Quando um movimento  realizado com sucesso\n   * @emits {CHECK} Quando o movimento resulta em xeque\n   * @emits {GAME_OVER} Quando o movimento resulta em fim de jogo\n   */ makeMove(from, to) {\n        try {\n            const move = this.game.move({\n                from: this.positionToSquare(from),\n                to: this.positionToSquare(to),\n                promotion: \"q\" // Auto-promove para rainha por padro\n            });\n            if (move) {\n                const chessMove = {\n                    from,\n                    to,\n                    piece: {\n                        type: move.piece,\n                        color: move.color === \"w\" ? \"white\" : \"black\"\n                    },\n                    captured: move.captured ? {\n                        type: move.captured,\n                        color: move.color === \"w\" ? \"black\" : \"white\"\n                    } : undefined,\n                    promotion: move.promotion\n                };\n                this.emitEvent({\n                    type: \"MOVE_MADE\",\n                    move: chessMove\n                });\n                if (this.isCheck()) {\n                    this.emitEvent({\n                        type: \"CHECK\",\n                        kingPosition: this.findKing(this.getCurrentPlayer())\n                    });\n                }\n                if (this.isGameOver()) {\n                    let result = \"draw\";\n                    if (this.isCheckmate()) {\n                        result = this.getCurrentPlayer() === \"white\" ? \"black\" : \"white\";\n                    }\n                    this.emitEvent({\n                        type: \"GAME_OVER\",\n                        result\n                    });\n                }\n                return true;\n            }\n            return false;\n        } catch (e) {\n            return false;\n        }\n    }\n    /**\n   * Desfaz o ltimo movimento realizado.\n   * \n   * @returns true se havia um movimento para desfazer, false caso contrrio\n   * @emits {POSITION_CHANGED} Quando o movimento  desfeito com sucesso\n   */ undoLastMove() {\n        const move = this.game.undo();\n        if (move) {\n            this.emitEvent({\n                type: \"POSITION_CHANGED\",\n                fen: this.getFEN()\n            });\n            return true;\n        }\n        return false;\n    }\n    // Estado do jogo\n    /**\n   * Verifica se o jogador atual est em xeque.\n   * \n   * @returns true se o jogador atual est em xeque, false caso contrrio\n   */ isCheck() {\n        return this.game.isCheck();\n    }\n    /**\n   * Verifica se o jogador atual est em xeque-mate.\n   * \n   * @returns true se o jogador atual est em xeque-mate, false caso contrrio\n   */ isCheckmate() {\n        return this.game.isCheckmate();\n    }\n    /**\n   * Verifica se o jogo est empatado.\n   * \n   * @returns true se o jogo est empatado, false caso contrrio\n   */ isDraw() {\n        return this.game.isDraw();\n    }\n    /**\n   * Verifica se o jogo terminou (xeque-mate ou empate).\n   * \n   * @returns true se o jogo terminou, false caso contrrio\n   */ isGameOver() {\n        return this.game.isGameOver();\n    }\n    /**\n   * Obtm o jogador atual.\n   * \n   * @returns 'white' para as brancas, 'black' para as pretas\n   */ getCurrentPlayer() {\n        const turn = this.game.turn();\n        return turn === \"w\" ? \"white\" : \"black\";\n    }\n    // Avaliao e anlise\n    /**\n   * Avalia a posio atual do jogo.\n   * \n   * Esta funo considera diversos fatores para avaliar a posio:\n   * - Material: Valor das peas presentes no tabuleiro\n   * - Posio: Qualidade do posicionamento das peas\n   * - Mobilidade: Quantidade de movimentos disponveis\n   * - Segurana do Rei: Avaliao da proteo do rei\n   * - Estrutura de Pees: Qualidade da estrutura de pees\n   * \n   * @returns Um nmero que representa a avaliao da posio.\n   * Valores positivos favorecem as brancas, negativos favorecem as pretas.\n   */ evaluatePosition() {\n        // Implementao bsica de avaliao\n        const weights = this.options.evaluationParameters || {\n            materialWeight: 1,\n            positionWeight: 0.1,\n            mobilityWeight: 0.1,\n            kingSafetyWeight: 0.2,\n            pawnStructureWeight: 0.1\n        };\n        let score = 0;\n        // Material\n        score += this.evaluateMaterial() * weights.materialWeight;\n        // Posio das peas\n        score += this.evaluatePiecePositions() * weights.positionWeight;\n        // Mobilidade\n        score += this.evaluateMobility() * weights.mobilityWeight;\n        // Segurana do rei\n        score += this.evaluateKingSafety() * weights.kingSafetyWeight;\n        // Estrutura de pees\n        score += this.evaluatePawnStructure() * weights.pawnStructureWeight;\n        return score;\n    }\n    evaluatePiecePositions() {\n        // Simple piece-square tables evaluation\n        const pieceSquareValues = {\n            p: [\n                [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ],\n                [\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50,\n                    50\n                ],\n                [\n                    10,\n                    10,\n                    20,\n                    30,\n                    30,\n                    20,\n                    10,\n                    10\n                ],\n                [\n                    5,\n                    5,\n                    10,\n                    25,\n                    25,\n                    10,\n                    5,\n                    5\n                ],\n                [\n                    0,\n                    0,\n                    0,\n                    20,\n                    20,\n                    0,\n                    0,\n                    0\n                ],\n                [\n                    5,\n                    -5,\n                    -10,\n                    0,\n                    0,\n                    -10,\n                    -5,\n                    5\n                ],\n                [\n                    5,\n                    10,\n                    10,\n                    -20,\n                    -20,\n                    10,\n                    10,\n                    5\n                ],\n                [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ]\n            ],\n            n: [\n                [\n                    -50,\n                    -40,\n                    -30,\n                    -30,\n                    -30,\n                    -30,\n                    -40,\n                    -50\n                ],\n                [\n                    -40,\n                    -20,\n                    0,\n                    0,\n                    0,\n                    0,\n                    -20,\n                    -40\n                ],\n                [\n                    -30,\n                    0,\n                    10,\n                    15,\n                    15,\n                    10,\n                    0,\n                    -30\n                ],\n                [\n                    -30,\n                    5,\n                    15,\n                    20,\n                    20,\n                    15,\n                    5,\n                    -30\n                ],\n                [\n                    -30,\n                    0,\n                    15,\n                    20,\n                    20,\n                    15,\n                    0,\n                    -30\n                ],\n                [\n                    -30,\n                    5,\n                    10,\n                    15,\n                    15,\n                    10,\n                    5,\n                    -30\n                ],\n                [\n                    -40,\n                    -20,\n                    0,\n                    5,\n                    5,\n                    0,\n                    -20,\n                    -40\n                ],\n                [\n                    -50,\n                    -40,\n                    -30,\n                    -30,\n                    -30,\n                    -30,\n                    -40,\n                    -50\n                ]\n            ],\n            b: [\n                [\n                    -20,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -20\n                ],\n                [\n                    -10,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    0,\n                    5,\n                    10,\n                    10,\n                    5,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    5,\n                    5,\n                    10,\n                    10,\n                    5,\n                    5,\n                    -10\n                ],\n                [\n                    -10,\n                    0,\n                    10,\n                    10,\n                    10,\n                    10,\n                    0,\n                    -10\n                ],\n                [\n                    -10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    10,\n                    -10\n                ],\n                [\n                    -10,\n                    5,\n                    0,\n                    0,\n                    0,\n                    0,\n                    5,\n                    -10\n                ],\n                [\n                    -20,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -10,\n                    -20\n                ]\n            ]\n        };\n        let score = 0;\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece) {\n                    const pieceTable = pieceSquareValues[piece.type];\n                    if (pieceTable) {\n                        const positionValue = pieceTable[piece.color === \"w\" ? row : 7 - row][col];\n                        score += piece.color === \"w\" ? positionValue : -positionValue;\n                    }\n                }\n            }\n        }\n        return score;\n    }\n    /**\n   * Encontra o melhor movimento possvel para o jogador atual.\n   * \n   * @param depth - Profundidade mxima de busca na rvore de movimentos\n   * @returns O melhor movimento encontrado, ou null se nenhum movimento for possvel\n   * @todo Implementar algoritmo minimax com poda alpha-beta\n   */ getBestMove(depth) {\n        // TODO: Implementar busca minimax com poda alpha-beta\n        return null;\n    }\n    /**\n   * Obtm o histrico completo de movimentos do jogo.\n   * \n   * @returns Lista de movimentos realizados desde o incio do jogo\n   */ getGameHistory() {\n        return this.game.history({\n            verbose: true\n        }).map((move)=>({\n                from: this.squareToPosition(move.from),\n                to: this.squareToPosition(move.to),\n                piece: {\n                    type: move.piece,\n                    color: move.color === \"w\" ? \"white\" : \"black\"\n                },\n                captured: move.captured ? {\n                    type: move.captured,\n                    color: move.color === \"w\" ? \"black\" : \"white\"\n                } : undefined,\n                promotion: move.promotion\n            }));\n    }\n    // Validao\n    /**\n   * Verifica se um movimento  vlido sem execut-lo.\n   * \n   * @param from - Posio inicial da pea\n   * @param to - Posio final da pea\n   * @returns true se o movimento  legal, false caso contrrio\n   */ isValidMove(from, to) {\n        // Validao bsica de posio\n        if (!this.isValidPosition(from) || !this.isValidPosition(to)) {\n            return false;\n        }\n        // Verifica se a pea pertence ao jogador atual\n        const piece = this.game.board()[from.row][from.col];\n        if (!piece || piece.color !== (this.getCurrentPlayer() === \"white\" ? \"w\" : \"b\")) {\n            return false;\n        }\n        // Tenta fazer o movimento no chess.js\n        try {\n            const move = this.game.move({\n                from: this.positionToSquare(from),\n                to: this.positionToSquare(to),\n                promotion: \"q\"\n            });\n            if (move) {\n                // Desfaz o movimento para manter o estado original\n                this.game.undo();\n                return true;\n            }\n        } catch (e) {\n        // Ignora erros do chess.js\n        }\n        return false;\n    }\n    /**\n   * Verifica se uma posio est dentro dos limites do tabuleiro.\n   * \n   * @param position - Posio a ser verificada\n   * @returns true se a posio  vlida, false caso contrrio\n   */ isValidPosition(position) {\n        return position.row >= 0 && position.row < 8 && position.col >= 0 && position.col < 8;\n    }\n    // Utilidades\n    /**\n   * Reinicia o jogo para a posio inicial.\n   * \n   * @emits {POSITION_CHANGED} Quando o tabuleiro  reiniciado\n   */ reset() {\n        this.game.reset();\n        this.positionCache.clear();\n        this.emitEvent({\n            type: \"POSITION_CHANGED\",\n            fen: this.getFEN()\n        });\n    }\n    /**\n   * Cria uma cpia independente do motor de xadrez atual.\n   * \n   * @returns Uma nova instncia do motor com o mesmo estado atual\n   */ clone() {\n        const clonedEngine = new ChessEngineBase(this.options);\n        clonedEngine.setFEN(this.getFEN());\n        return clonedEngine;\n    }\n    // Mtodos protegidos auxiliares\n    positionToSquare(position) {\n        const file = String.fromCharCode(\"a\".charCodeAt(0) + position.col);\n        const rank = 8 - position.row;\n        return \"\".concat(file).concat(rank);\n    }\n    squareToPosition(square) {\n        const col = square.charCodeAt(0) - \"a\".charCodeAt(0);\n        const row = 8 - parseInt(square[1]);\n        return {\n            row,\n            col\n        };\n    }\n    findKing(color) {\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece && piece.type === \"k\" && piece.color === (color === \"white\" ? \"w\" : \"b\")) {\n                    return {\n                        row,\n                        col\n                    };\n                }\n            }\n        }\n        throw new Error(\"King not found\");\n    }\n    /**\n   * Verifica o status de sade do motor.\n   * \n   * @returns Status atual do motor incluindo mtricas de desempenho\n   */ checkHealth() {\n        return this.monitor.checkHealth();\n    }\n    /**\n   * Emite um evento do motor.\n   * \n   * @param event - Evento a ser emitido\n   */ emitEvent(event) {\n        this.eventEmitter.emit(\"engine-event\", event);\n        this.monitor.recordEvent(event);\n    }\n    // Mtodos de avaliao\n    evaluateMaterial() {\n        const pieceValues = {\n            p: 1,\n            n: 3,\n            b: 3,\n            r: 5,\n            q: 9,\n            k: 0\n        };\n        let score = 0;\n        const board = this.game.board();\n        for(let row = 0; row < 8; row++){\n            for(let col = 0; col < 8; col++){\n                const piece = board[row][col];\n                if (piece) {\n                    const value = pieceValues[piece.type];\n                    score += piece.color === \"w\" ? value : -value;\n                }\n            }\n        }\n        return score;\n    }\n    evaluateMobility() {\n        const whiteMoves = this.game.moves().length;\n        // Clona o jogo para ver os movimentos do oponente\n        const tempGame = new chess_js__WEBPACK_IMPORTED_MODULE_0__.Chess(this.game.fen());\n        tempGame.load(this.game.fen().replace(\" w \", \" b \"));\n        const blackMoves = tempGame.moves().length;\n        return whiteMoves - blackMoves;\n    }\n    evaluateKingSafety() {\n        // TODO: Implementar avaliao de segurana do rei\n        return 0;\n    }\n    evaluatePawnStructure() {\n        // TODO: Implementar avaliao de estrutura de pees\n        return 0;\n    }\n    // Event handlers\n    on(eventName, handler) {\n        this.eventEmitter.on(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.eventEmitter.off(eventName, handler);\n    }\n    /**\n   * Cria uma nova instncia do motor de xadrez.\n   * \n   * @param options - Opes de configurao do motor\n   * @param options.startPosition - Posio inicial em notao FEN (opcional)\n   * @param options.evaluationParameters - Parmetros para avaliao de posio (opcional)\n   */ constructor(options = {}){\n        this.game = new chess_js__WEBPACK_IMPORTED_MODULE_0__.Chess(options.startPosition || _constants_game__WEBPACK_IMPORTED_MODULE_2__.INITIAL_FEN);\n        this.options = options;\n        this.eventEmitter = new events__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n        this.positionCache = new Map();\n        this.monitor = new _monitoring_ArquimaxMonitor__WEBPACK_IMPORTED_MODULE_1__.ArquimaxMonitor();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2hhcmVkL2VuZ2luZS9DaGVzc0VuZ2luZUJhc2UudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlDO0FBYzhCO0FBQ2Y7QUFDVjtBQUV0Qzs7Ozs7Ozs7Q0FRQyxHQUNNLE1BQU1JO0lBOEJYLGlCQUFpQjtJQUNqQjs7Ozs7R0FLQyxHQUNEQyxXQUEyQjtRQUN6QixNQUFNQyxRQUFRLElBQUksQ0FBQ0MsSUFBSSxDQUFDRCxLQUFLO1FBQzdCLE9BQU9BLE1BQU1FLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFDZkEsSUFBSUQsR0FBRyxDQUFDRSxDQUFBQSxTQUNOQSxTQUFTO29CQUNQQyxNQUFNRCxPQUFPQyxJQUFJO29CQUNqQkMsT0FBT0YsT0FBT0UsS0FBSyxLQUFLLE1BQU0sVUFBVSxPQUFPO2dCQUNqRCxJQUFJLElBQUk7SUFHZDtJQUVBOzs7O0dBSUMsR0FDREMsU0FBaUI7UUFDZixPQUFPLElBQUksQ0FBQ04sSUFBSSxDQUFDTyxHQUFHO0lBQ3RCO0lBRUE7Ozs7OztHQU1DLEdBQ0RDLE9BQU9ELEdBQVcsRUFBUTtRQUN4QixJQUFJO1lBQ0YscURBQXFEO1lBQ3JELElBQUksQ0FBQ1AsSUFBSSxDQUFDUyxJQUFJLENBQUNGO1lBQ2YsSUFBSSxDQUFDRyxTQUFTLENBQUM7Z0JBQ2JOLE1BQU07Z0JBQ05HO1lBQ0Y7UUFDRixFQUFFLE9BQU9JLEdBQUc7WUFDVixNQUFNLElBQUlDLE1BQU0sc0JBQXNCO1FBQ3hDO0lBQ0Y7SUFFQSxhQUFhO0lBQ2I7Ozs7O0dBS0MsR0FDREMsaUJBQWlCQyxRQUF1QixFQUFlO1FBQ3JELElBQUk7WUFDRixNQUFNWCxTQUFTLElBQUksQ0FBQ1ksZ0JBQWdCLENBQUNEO1lBQ3JDLE1BQU1QLE1BQU0sSUFBSSxDQUFDRCxNQUFNO1lBQ3ZCLE1BQU1VLFdBQVcsR0FBVWIsT0FBUEksS0FBSSxLQUFVLE9BQVBKO1lBQzNCLE1BQU1jLFdBQVcsSUFBSSxDQUFDQyxhQUFhLENBQUNDLEdBQUcsQ0FBQ0g7WUFFeEMsSUFB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QUFJO29CQUFJO2lCQUFFO2FBQ2hDO1lBQ0RDLEdBQUc7Z0JBQ0Q7b0JBQUMsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO2lCQUFHO2dCQUNqQztvQkFBQyxDQUFDO29CQUFHLENBQUM7b0JBQUs7b0JBQUk7b0JBQUk7b0JBQUk7b0JBQUUsQ0FBQztvQkFBRyxDQUFDO2lCQUFHO2dCQUNqQztvQkFBQyxDQUFDO29CQUFLO29CQUFHO29CQUFJO29CQUFJO29CQUFJO29CQUFLO29CQUFFLENBQUM7aUJBQUc7Z0JBQ2pDO29CQUFDLENBQUM7b0JBQUs7b0JBQUc7b0JBQUk7b0JBQUk7b0JBQUk7b0JBQUs7b0JBQUUsQ0FBQztpQkFBRztnQkFDakM7b0JBQUMsQ0FBQztvQkFBSztvQkFBRztvQkFBSTtvQkFBSTtvQkFBSTtvQkFBSztvQkFBRSxDQUFDO2lCQUFHO2dCQUNqQztvQkFBQyxDQUFDO29CQUFLO29CQUFHO29CQUFJO29CQUFJO29CQUFJO29CQUFLO29CQUFFLENBQUM7aUJBQUc7Z0JBQ2pDO29CQUFDLENBQUM7b0JBQUcsQ0FBQztvQkFBSztvQkFBSTtvQkFBSTtvQkFBSTtvQkFBRSxDQUFDO29CQUFHLENBQUM7aUJBQUc7Z0JBQ2pDO29CQUFDLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztpQkFBRzthQUNsQztZQUNEQyxHQUFHO2dCQUNEO29CQUFDLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztvQkFBRyxDQUFDO29CQUFHLENBQUM7b0JBQUcsQ0FBQztpQkFBRztnQkFDakM7b0JBQUMsQ0FBQztvQkFBSztvQkFBSTtvQkFBSTtvQkFBSTtvQkFBSTtvQkFBSTtvQkFBRSxDQUFDO2lCQUFHO2dCQUNqQztvQkFBQyxDQUFDO29CQUFLO29CQUFJO29C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ZixZQUFZLENBQUNhLEVBQUUsQ0FBQ0MsV0FBV0M7SUFDbEM7SUFFQUMsSUFBSUYsU0FBaUIsRUFBRUMsT0FBcUMsRUFBUTtRQUNsRSxJQUFJLENBQUNmLFlBQVksQ0FBQ2dCLEdBQUcsQ0FBQ0YsV0FBV0M7SUFDbkM7SUEzaUJBOzs7Ozs7R0FNQyxHQUNERSxZQUFZdEQsVUFBeUIsQ0FBQyxDQUFDLENBQUU7UUFDdkMsSUFBSSxDQUFDNUQsSUFBSSxHQUFHLElBQUlQLDJDQUFLQSxDQUFDbUUsUUFBUXVELGFBQWEsSUFBSXhILHdEQUFXQTtRQUMxRCxJQUFJLENBQUNpRSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDcUMsWUFBWSxHQUFHLElBQUlyRyxnREFBWUE7UUFDcEMsSUFBSSxDQUFDc0IsYUFBYSxHQUFHLElBQUlrRztRQUN6QixJQUFJLENBQUNqRixPQUFPLEdBQUcsSUFBSXpDLHdFQUFlQTtJQUNwQztBQStoQkYsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvc2hhcmVkL2VuZ2luZS9DaGVzc0VuZ2luZUJhc2UudHM/ZjI0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGVzcyB9IGZyb20gJ2NoZXNzLmpzJztcbmltcG9ydCB7IFxuICBDaGVzc0VuZ2luZSwgXG4gIEVuZ2luZU9wdGlvbnMsIFxuICBFbmdpbmVBbmFseXNpcyxcbiAgRW5naW5lRXZlbnQsXG4gIEhlYWx0aFN0YXR1c1xufSBmcm9tICcuLi90eXBlcy9lbmdpbmUnO1xuaW1wb3J0IHsgXG4gIENoZXNzUG9zaXRpb24sIFxuICBDaGVzc1BpZWNlLCBcbiAgQ2hlc3NNb3ZlLFxuICBQaWVjZVR5cGVcbn0gZnJvbSAnLi4vdHlwZXMvY2hlc3MnO1xuaW1wb3J0IHsgQXJxdWltYXhNb25pdG9yIH0gZnJvbSAnLi9tb25pdG9yaW5nL0FycXVpbWF4TW9uaXRvcic7XG5pbXBvcnQgeyBJTklUSUFMX0ZFTiB9IGZyb20gJy4uL2NvbnN0YW50cy9nYW1lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbi8qKlxuICogSW1wbGVtZW50YcOnw6NvIGJhc2UgZG8gbW90b3IgZGUgeGFkcmV6LlxuICogXG4gKiBFc3RhIGNsYXNzZSBmb3JuZWNlIGEgZnVuY2lvbmFsaWRhZGUgY2VudHJhbCBwYXJhIHVtIG1vdG9yIGRlIHhhZHJleixcbiAqIGluY2x1aW5kbyBnZXJlbmNpYW1lbnRvIGRlIGVzdGFkbyBkbyBqb2dvLCB2YWxpZGHDp8OjbyBkZSBtb3ZpbWVudG9zLFxuICogYXZhbGlhw6fDo28gZGUgcG9zacOnw6NvIGUgZXZlbnRvcyBkbyBqb2dvLlxuICogXG4gKiBAaW1wbGVtZW50cyB7Q2hlc3NFbmdpbmV9XG4gKi9cbmV4cG9ydCBjbGFzcyBDaGVzc0VuZ2luZUJhc2UgaW1wbGVtZW50cyBDaGVzc0VuZ2luZSB7XG4gIC8qKiBJbnN0w6JuY2lhIGRvIGNoZXNzLmpzIHF1ZSBnZXJlbmNpYSBhcyByZWdyYXMgZSBlc3RhZG8gZG8gam9nbyAqL1xuICBwcm90ZWN0ZWQgZ2FtZTogQ2hlc3M7XG5cbiAgLyoqIE9ww6fDtWVzIGRlIGNvbmZpZ3VyYcOnw6NvIGRvIG1vdG9yICovXG4gIHByb3RlY3RlZCBvcHRpb25zOiBFbmdpbmVPcHRpb25zO1xuXG4gIC8qKiBFbWlzc29yIGRlIGV2ZW50b3MgcGFyYSBub3RpZmljYXIgbXVkYW7Dp2FzIG5vIGVzdGFkbyBkbyBqb2dvICovXG4gIHByb3RlY3RlZCBldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlcjtcblxuICAvKiogQ2FjaGUgZGUgYW7DoWxpc2VzIGRlIHBvc2nDp8OjbyBwYXJhIG90aW1pemHDp8OjbyAqL1xuICBwcm90ZWN0ZWQgcG9zaXRpb25DYWNoZTogTWFwPHN0cmluZywgRW5naW5lQW5hbHlzaXM+O1xuXG4gIHByaXZhdGUgbW9uaXRvcjogQXJxdWltYXhNb25pdG9yO1xuXG4gIC8qKlxuICAgKiBDcmlhIHVtYSBub3ZhIGluc3TDom5jaWEgZG8gbW90b3IgZGUgeGFkcmV6LlxuICAgKiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcMOnw7VlcyBkZSBjb25maWd1cmHDp8OjbyBkbyBtb3RvclxuICAgKiBAcGFyYW0gb3B0aW9ucy5zdGFydFBvc2l0aW9uIC0gUG9zacOnw6NvIGluaWNpYWwgZW0gbm90YcOnw6NvIEZFTiAob3BjaW9uYWwpXG4gICAqIEBwYXJhbSBvcHRpb25zLmV2YWx1YXRpb25QYXJhbWV0ZXJzIC0gUGFyw6JtZXRyb3MgcGFyYSBhdmFsaWHDp8OjbyBkZSBwb3Npw6fDo28gKG9wY2lvbmFsKVxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9uczogRW5naW5lT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5nYW1lID0gbmV3IENoZXNzKG9wdGlvbnMuc3RhcnRQb3NpdGlvbiB8fCBJTklUSUFMX0ZFTik7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLnBvc2l0aW9uQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5tb25pdG9yID0gbmV3IEFycXVpbWF4TW9uaXRvcigpO1xuICB9XG5cbiAgLy8gRXN0YWRvIGRvIGpvZ29cbiAgLyoqXG4gICAqIE9idMOpbSBhIHJlcHJlc2VudGHDp8OjbyBhdHVhbCBkbyB0YWJ1bGVpcm8uXG4gICAqIFxuICAgKiBAcmV0dXJucyBVbWEgbWF0cml6IDh4OCByZXByZXNlbnRhbmRvIG8gdGFidWxlaXJvLCBvbmRlIGNhZGEgZWxlbWVudG9cbiAgICogw6kgdW1hIHBlw6dhIGRlIHhhZHJleiBvdSBudWxsIHBhcmEgY2FzYXMgdmF6aWFzLlxuICAgKi9cbiAgZ2V0Qm9hcmQoKTogQ2hlc3NQaWVjZVtdW10ge1xuICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nYW1lLmJvYXJkKCk7XG4gICAgcmV0dXJuIGJvYXJkLm1hcChyb3cgPT4gXG4gICAgICByb3cubWFwKHNxdWFyZSA9PiBcbiAgICAgICAgc3F1YXJlID8ge1xuICAgICAgICAgIHR5cGU6IHNxdWFyZS50eXBlIGFzIFBpZWNlVHlwZSxcbiAgICAgICAgICBjb2xvcjogc3F1YXJlLmNvbG9yID09PSAndycgPyAnd2hpdGUnIDogJ2JsYWNrJ1xuICAgICAgICB9IDogbnVsbFxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgcG9zacOnw6NvIGF0dWFsIGVtIG5vdGHDp8OjbyBGRU4uXG4gICAqIFxuICAgKiBAcmV0dXJucyBTdHJpbmcgRkVOIHJlcHJlc2VudGFuZG8gbyBlc3RhZG8gYXR1YWwgZG8gam9nb1xuICAgKi9cbiAgZ2V0RkVOKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5mZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmUgdW1hIG5vdmEgcG9zacOnw6NvIHBhcmEgbyBqb2dvIHVzYW5kbyBub3Rhw6fDo28gRkVOLlxuICAgKiBcbiAgICogQHBhcmFtIGZlbiAtIFN0cmluZyBGRU4gcmVwcmVzZW50YW5kbyBhIG5vdmEgcG9zacOnw6NvXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBTZSBhIHN0cmluZyBGRU4gZm9yIGludsOhbGlkYVxuICAgKiBAZW1pdHMge1BPU0lUSU9OX0NIQU5HRUR9IFF1YW5kbyBhIHBvc2nDp8OjbyDDqSBhbHRlcmFkYSBjb20gc3VjZXNzb1xuICAgKi9cbiAgc2V0RkVOKGZlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIE5hIG5vdmEgdmVyc8OjbyBkbyBjaGVzcy5qcywgbG9hZCgpIGrDoSB2YWxpZGEgbyBGRU5cbiAgICAgIHRoaXMuZ2FtZS5sb2FkKGZlbik7XG4gICAgICB0aGlzLmVtaXRFdmVudCh7IFxuICAgICAgICB0eXBlOiAnUE9TSVRJT05fQ0hBTkdFRCcsIFxuICAgICAgICBmZW4gXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgRkVOIHN0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vdmltZW50b3NcbiAgLyoqXG4gICAqIE9idMOpbSB0b2RvcyBvcyBtb3ZpbWVudG9zIGxlZ2FpcyBwb3Nzw612ZWlzIHBhcmEgdW1hIHBlw6dhIGVtIHVtYSBkZXRlcm1pbmFkYSBwb3Npw6fDo28uXG4gICAqIFxuICAgKiBAcGFyYW0gcG9zaXRpb24gLSBQb3Npw6fDo28gZGEgcGXDp2Egbm8gdGFidWxlaXJvXG4gICAqIEByZXR1cm5zIExpc3RhIGRlIG1vdmltZW50b3MgbGVnYWlzIHBvc3PDrXZlaXNcbiAgICovXG4gIGdldFBvc3NpYmxlTW92ZXMocG9zaXRpb246IENoZXNzUG9zaXRpb24pOiBDaGVzc01vdmVbXSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMucG9zaXRpb25Ub1NxdWFyZShwb3NpdGlvbik7XG4gICAgICBjb25zdCBmZW4gPSB0aGlzLmdldEZFTigpO1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgJHtmZW59OiR7c3F1YXJlfWA7XG4gICAgICBjb25zdCBjYWNoZUhpdCA9IHRoaXMucG9zaXRpb25DYWNoZS5oYXMoY2FjaGVLZXkpO1xuICAgICAgXG4gICAgICBsZXQgbW92ZXM7XG4gICAgICBpZiAoY2FjaGVIaXQpIHtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLnBvc2l0aW9uQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgbW92ZXMgPSBjYWNoZSEuYmVzdExpbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb3ZlcyA9IHRoaXMuZ2FtZS5tb3Zlcyh7IFxuICAgICAgICAgIHNxdWFyZSxcbiAgICAgICAgICB2ZXJib3NlOiB0cnVlIFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ2FjaGUgdGhlIHJlc3VsdFxuICAgICAgICB0aGlzLnBvc2l0aW9uQ2FjaGUuc2V0KGNhY2hlS2V5LCB7XG4gICAgICAgICAgZXZhbHVhdGlvbjogMCxcbiAgICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgICBiZXN0TGluZTogbW92ZXMsXG4gICAgICAgICAgdGhyZWF0czogW10sXG4gICAgICAgICAgcG9zaXRpb25hbEZlYXR1cmVzOiB7XG4gICAgICAgICAgICBwYXduU3RydWN0dXJlOiAwLFxuICAgICAgICAgICAga2luZ1NhZmV0eTogMCxcbiAgICAgICAgICAgIG1vYmlsaXR5OiAwLFxuICAgICAgICAgICAgY2VudGVyQ29udHJvbDogMCxcbiAgICAgICAgICAgIHBpZWNlQWN0aXZpdHk6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLm1vbml0b3IucmVjb3JkQ2FjaGVBY2Nlc3MoY2FjaGVIaXQpO1xuXG4gICAgICByZXR1cm4gbW92ZXMubWFwKG1vdmUgPT4gKHtcbiAgICAgICAgZnJvbTogdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUuZnJvbSksXG4gICAgICAgIHRvOiB0aGlzLnNxdWFyZVRvUG9zaXRpb24obW92ZS50byksXG4gICAgICAgIHBpZWNlOiB7XG4gICAgICAgICAgdHlwZTogbW92ZS5waWVjZSBhcyBQaWVjZVR5cGUsXG4gICAgICAgICAgY29sb3I6IG1vdmUuY29sb3IgPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICAgIH0sXG4gICAgICAgIGNhcHR1cmVkOiBtb3ZlLmNhcHR1cmVkID8ge1xuICAgICAgICAgIHR5cGU6IG1vdmUuY2FwdHVyZWQgYXMgUGllY2VUeXBlLFxuICAgICAgICAgIGNvbG9yOiBtb3ZlLmNvbG9yID09PSAndycgPyAnYmxhY2snIDogJ3doaXRlJ1xuICAgICAgICB9IDogdW5kZWZpbmVkLFxuICAgICAgICBwcm9tb3Rpb246IG1vdmUucHJvbW90aW9uIGFzIFBpZWNlVHlwZSB8IHVuZGVmaW5lZCxcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBTZSBob3V2ZXIgZXJybyBuYSBnZXJhw6fDo28gZGUgbW92aW1lbnRvcywgcmV0b3JuYSBsaXN0YSB2YXppYVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRhIHVtIG1vdmltZW50byBubyB0YWJ1bGVpcm8uXG4gICAqIFxuICAgKiBAcGFyYW0gZnJvbSAtIFBvc2nDp8OjbyBpbmljaWFsIGRhIHBlw6dhXG4gICAqIEBwYXJhbSB0byAtIFBvc2nDp8OjbyBmaW5hbCBkYSBwZcOnYVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIG8gbW92aW1lbnRvIGZvaSBleGVjdXRhZG8gY29tIHN1Y2Vzc28sIGZhbHNlIGNhc28gY29udHLDoXJpb1xuICAgKiBAZW1pdHMge01PVkVfTUFERX0gUXVhbmRvIHVtIG1vdmltZW50byDDqSByZWFsaXphZG8gY29tIHN1Y2Vzc29cbiAgICogQGVtaXRzIHtDSEVDS30gUXVhbmRvIG8gbW92aW1lbnRvIHJlc3VsdGEgZW0geGVxdWVcbiAgICogQGVtaXRzIHtHQU1FX09WRVJ9IFF1YW5kbyBvIG1vdmltZW50byByZXN1bHRhIGVtIGZpbSBkZSBqb2dvXG4gICAqL1xuICBtYWtlTW92ZShmcm9tOiBDaGVzc1Bvc2l0aW9uLCB0bzogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtb3ZlID0gdGhpcy5nYW1lLm1vdmUoe1xuICAgICAgICBmcm9tOiB0aGlzLnBvc2l0aW9uVG9TcXVhcmUoZnJvbSksXG4gICAgICAgIHRvOiB0aGlzLnBvc2l0aW9uVG9TcXVhcmUodG8pLFxuICAgICAgICBwcm9tb3Rpb246ICdxJyAvLyBBdXRvLXByb21vdmUgcGFyYSByYWluaGEgcG9yIHBhZHLDo29cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobW92ZSkge1xuICAgICAgICBjb25zdCBjaGVzc01vdmU6IENoZXNzTW92ZSA9IHtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvLFxuICAgICAgICAgIHBpZWNlOiB7XG4gICAgICAgICAgICB0eXBlOiBtb3ZlLnBpZWNlLFxuICAgICAgICAgICAgY29sb3I6IG1vdmUuY29sb3IgPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYXB0dXJlZDogbW92ZS5jYXB0dXJlZCA/IHtcbiAgICAgICAgICAgIHR5cGU6IG1vdmUuY2FwdHVyZWQsXG4gICAgICAgICAgICBjb2xvcjogbW92ZS5jb2xvciA9PT0gJ3cnID8gJ2JsYWNrJyA6ICd3aGl0ZSdcbiAgICAgICAgICB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgIHByb21vdGlvbjogbW92ZS5wcm9tb3Rpb24sXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5lbWl0RXZlbnQoeyB0eXBlOiAnTU9WRV9NQURFJywgbW92ZTogY2hlc3NNb3ZlIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQ2hlY2soKSkge1xuICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICAgICAgICB0eXBlOiAnQ0hFQ0snLFxuICAgICAgICAgICAga2luZ1Bvc2l0aW9uOiB0aGlzLmZpbmRLaW5nKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgbGV0IHJlc3VsdCA9ICdkcmF3JztcbiAgICAgICAgICBpZiAodGhpcy5pc0NoZWNrbWF0ZSgpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVtaXRFdmVudCh7IHR5cGU6ICdHQU1FX09WRVInLCByZXN1bHQgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc2ZheiBvIMO6bHRpbW8gbW92aW1lbnRvIHJlYWxpemFkby5cbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgc2UgaGF2aWEgdW0gbW92aW1lbnRvIHBhcmEgZGVzZmF6ZXIsIGZhbHNlIGNhc28gY29udHLDoXJpb1xuICAgKiBAZW1pdHMge1BPU0lUSU9OX0NIQU5HRUR9IFF1YW5kbyBvIG1vdmltZW50byDDqSBkZXNmZWl0byBjb20gc3VjZXNzb1xuICAgKi9cbiAgdW5kb0xhc3RNb3ZlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG1vdmUgPSB0aGlzLmdhbWUudW5kbygpO1xuICAgIGlmIChtb3ZlKSB7XG4gICAgICB0aGlzLmVtaXRFdmVudCh7IFxuICAgICAgICB0eXBlOiAnUE9TSVRJT05fQ0hBTkdFRCcsXG4gICAgICAgIGZlbjogdGhpcy5nZXRGRU4oKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gRXN0YWRvIGRvIGpvZ29cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gam9nYWRvciBhdHVhbCBlc3TDoSBlbSB4ZXF1ZS5cbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgc2UgbyBqb2dhZG9yIGF0dWFsIGVzdMOhIGVtIHhlcXVlLCBmYWxzZSBjYXNvIGNvbnRyw6FyaW9cbiAgICovXG4gIGlzQ2hlY2soKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5pc0NoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBqb2dhZG9yIGF0dWFsIGVzdMOhIGVtIHhlcXVlLW1hdGUuXG4gICAqIFxuICAgKiBAcmV0dXJucyB0cnVlIHNlIG8gam9nYWRvciBhdHVhbCBlc3TDoSBlbSB4ZXF1ZS1tYXRlLCBmYWxzZSBjYXNvIGNvbnRyw6FyaW9cbiAgICovXG4gIGlzQ2hlY2ttYXRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdhbWUuaXNDaGVja21hdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGpvZ28gZXN0w6EgZW1wYXRhZG8uXG4gICAqIFxuICAgKiBAcmV0dXJucyB0cnVlIHNlIG8gam9nbyBlc3TDoSBlbXBhdGFkbywgZmFsc2UgY2FzbyBjb250csOhcmlvXG4gICAqL1xuICBpc0RyYXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5pc0RyYXcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGpvZ28gdGVybWlub3UgKHhlcXVlLW1hdGUgb3UgZW1wYXRlKS5cbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgc2UgbyBqb2dvIHRlcm1pbm91LCBmYWxzZSBjYXNvIGNvbnRyw6FyaW9cbiAgICovXG4gIGlzR2FtZU92ZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5pc0dhbWVPdmVyKCk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG8gam9nYWRvciBhdHVhbC5cbiAgICogXG4gICAqIEByZXR1cm5zICd3aGl0ZScgcGFyYSBhcyBicmFuY2FzLCAnYmxhY2snIHBhcmEgYXMgcHJldGFzXG4gICAqL1xuICBnZXRDdXJyZW50UGxheWVyKCk6ICd3aGl0ZScgfCAnYmxhY2snIHtcbiAgICBjb25zdCB0dXJuID0gdGhpcy5nYW1lLnR1cm4oKTtcbiAgICByZXR1cm4gdHVybiA9PT0gJ3cnID8gJ3doaXRlJyA6ICdibGFjayc7XG4gIH1cblxuICAvLyBBdmFsaWHDp8OjbyBlIGFuw6FsaXNlXG4gIC8qKlxuICAgKiBBdmFsaWEgYSBwb3Npw6fDo28gYXR1YWwgZG8gam9nby5cbiAgICogXG4gICAqIEVzdGEgZnVuw6fDo28gY29uc2lkZXJhIGRpdmVyc29zIGZhdG9yZXMgcGFyYSBhdmFsaWFyIGEgcG9zacOnw6NvOlxuICAgKiAtIE1hdGVyaWFsOiBWYWxvciBkYXMgcGXDp2FzIHByZXNlbnRlcyBubyB0YWJ1bGVpcm9cbiAgICogLSBQb3Npw6fDo286IFF1YWxpZGFkZSBkbyBwb3NpY2lvbmFtZW50byBkYXMgcGXDp2FzXG4gICAqIC0gTW9iaWxpZGFkZTogUXVhbnRpZGFkZSBkZSBtb3ZpbWVudG9zIGRpc3BvbsOtdmVpc1xuICAgKiAtIFNlZ3VyYW7Dp2EgZG8gUmVpOiBBdmFsaWHDp8OjbyBkYSBwcm90ZcOnw6NvIGRvIHJlaVxuICAgKiAtIEVzdHJ1dHVyYSBkZSBQZcO1ZXM6IFF1YWxpZGFkZSBkYSBlc3RydXR1cmEgZGUgcGXDtWVzXG4gICAqIFxuICAgKiBAcmV0dXJucyBVbSBuw7ptZXJvIHF1ZSByZXByZXNlbnRhIGEgYXZhbGlhw6fDo28gZGEgcG9zacOnw6NvLlxuICAgKiBWYWxvcmVzIHBvc2l0aXZvcyBmYXZvcmVjZW0gYXMgYnJhbmNhcywgbmVnYXRpdm9zIGZhdm9yZWNlbSBhcyBwcmV0YXMuXG4gICAqL1xuICBldmFsdWF0ZVBvc2l0aW9uKCk6IG51bWJlciB7XG4gICAgLy8gSW1wbGVtZW50YcOnw6NvIGLDoXNpY2EgZGUgYXZhbGlhw6fDo29cbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5vcHRpb25zLmV2YWx1YXRpb25QYXJhbWV0ZXJzIHx8IHtcbiAgICAgIG1hdGVyaWFsV2VpZ2h0OiAxLFxuICAgICAgcG9zaXRpb25XZWlnaHQ6IDAuMSxcbiAgICAgIG1vYmlsaXR5V2VpZ2h0OiAwLjEsXG4gICAgICBraW5nU2FmZXR5V2VpZ2h0OiAwLjIsXG4gICAgICBwYXduU3RydWN0dXJlV2VpZ2h0OiAwLjFcbiAgICB9O1xuXG4gICAgbGV0IHNjb3JlID0gMDtcblxuICAgIC8vIE1hdGVyaWFsXG4gICAgc2NvcmUgKz0gdGhpcy5ldmFsdWF0ZU1hdGVyaWFsKCkgKiB3ZWlnaHRzLm1hdGVyaWFsV2VpZ2h0O1xuXG4gICAgLy8gUG9zacOnw6NvIGRhcyBwZcOnYXNcbiAgICBzY29yZSArPSB0aGlzLmV2YWx1YXRlUGllY2VQb3NpdGlvbnMoKSAqIHdlaWdodHMucG9zaXRpb25XZWlnaHQ7XG5cbiAgICAvLyBNb2JpbGlkYWRlXG4gICAgc2NvcmUgKz0gdGhpcy5ldmFsdWF0ZU1vYmlsaXR5KCkgKiB3ZWlnaHRzLm1vYmlsaXR5V2VpZ2h0O1xuXG4gICAgLy8gU2VndXJhbsOnYSBkbyByZWlcbiAgICBzY29yZSArPSB0aGlzLmV2YWx1YXRlS2luZ1NhZmV0eSgpICogd2VpZ2h0cy5raW5nU2FmZXR5V2VpZ2h0O1xuXG4gICAgLy8gRXN0cnV0dXJhIGRlIHBlw7Vlc1xuICAgIHNjb3JlICs9IHRoaXMuZXZhbHVhdGVQYXduU3RydWN0dXJlKCkgKiB3ZWlnaHRzLnBhd25TdHJ1Y3R1cmVXZWlnaHQ7XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUGllY2VQb3NpdGlvbnMoKTogbnVtYmVyIHtcbiAgICAvLyBTaW1wbGUgcGllY2Utc3F1YXJlIHRhYmxlcyBldmFsdWF0aW9uXG4gICAgY29uc3QgcGllY2VTcXVhcmVWYWx1ZXMgPSB7XG4gICAgICBwOiBbIC8vIFBhd25zXG4gICAgICAgIFswLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAgMF0sXG4gICAgICAgIFs1MCwgNTAsIDUwLCA1MCwgNTAsIDUwLCA1MCwgNTBdLFxuICAgICAgICBbMTAsIDEwLCAyMCwgMzAsIDMwLCAyMCwgMTAsIDEwXSxcbiAgICAgICAgWzUsICA1LCAxMCwgMjUsIDI1LCAxMCwgIDUsICA1XSxcbiAgICAgICAgWzAsICAwLCAgMCwgMjAsIDIwLCAgMCwgIDAsICAwXSxcbiAgICAgICAgWzUsIC01LC0xMCwgIDAsICAwLC0xMCwgLTUsICA1XSxcbiAgICAgICAgWzUsIDEwLCAxMCwtMjAsLTIwLCAxMCwgMTAsICA1XSxcbiAgICAgICAgWzAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwXVxuICAgICAgXSxcbiAgICAgIG46IFsgLy8gS25pZ2h0c1xuICAgICAgICBbLTUwLC00MCwtMzAsLTMwLC0zMCwtMzAsLTQwLC01MF0sXG4gICAgICAgIFstNDAsLTIwLCAgMCwgIDAsICAwLCAgMCwtMjAsLTQwXSxcbiAgICAgICAgWy0zMCwgIDAsIDEwLCAxNSwgMTUsIDEwLCAgMCwtMzBdLFxuICAgICAgICBbLTMwLCAgNSwgMTUsIDIwLCAyMCwgMTUsICA1LC0zMF0sXG4gICAgICAgIFstMzAsICAwLCAxNSwgMjAsIDIwLCAxNSwgIDAsLTMwXSxcbiAgICAgICAgWy0zMCwgIDUsIDEwLCAxNSwgMTUsIDEwLCAgNSwtMzBdLFxuICAgICAgICBbLTQwLC0yMCwgIDAsICA1LCAgNSwgIDAsLTIwLC00MF0sXG4gICAgICAgIFstNTAsLTQwLC0zMCwtMzAsLTMwLC0zMCwtNDAsLTUwXVxuICAgICAgXSxcbiAgICAgIGI6IFsgLy8gQmlzaG9wc1xuICAgICAgICBbLTIwLC0xMCwtMTAsLTEwLC0xMCwtMTAsLTEwLC0yMF0sXG4gICAgICAgIFstMTAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsLTEwXSxcbiAgICAgICAgWy0xMCwgIDAsICA1LCAxMCwgMTAsICA1LCAgMCwtMTBdLFxuICAgICAgICBbLTEwLCAgNSwgIDUsIDEwLCAxMCwgIDUsICA1LC0xMF0sXG4gICAgICAgIFstMTAsICAwLCAxMCwgMTAsIDEwLCAxMCwgIDAsLTEwXSxcbiAgICAgICAgWy0xMCwgMTAsIDEwLCAxMCwgMTAsIDEwLCAxMCwtMTBdLFxuICAgICAgICBbLTEwLCAgNSwgIDAsICAwLCAgMCwgIDAsICA1LC0xMF0sXG4gICAgICAgIFstMjAsLTEwLC0xMCwtMTAsLTEwLC0xMCwtMTAsLTIwXVxuICAgICAgXVxuICAgIH07XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nYW1lLmJvYXJkKCk7XG5cbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgODsgY29sKyspIHtcbiAgICAgICAgY29uc3QgcGllY2UgPSBib2FyZFtyb3ddW2NvbF07XG4gICAgICAgIGlmIChwaWVjZSkge1xuICAgICAgICAgIGNvbnN0IHBpZWNlVGFibGUgPSBwaWVjZVNxdWFyZVZhbHVlc1twaWVjZS50eXBlIGFzIGtleW9mIHR5cGVvZiBwaWVjZVNxdWFyZVZhbHVlc107XG4gICAgICAgICAgaWYgKHBpZWNlVGFibGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uVmFsdWUgPSBwaWVjZVRhYmxlW3BpZWNlLmNvbG9yID09PSAndycgPyByb3cgOiA3IC0gcm93XVtjb2xdO1xuICAgICAgICAgICAgc2NvcmUgKz0gcGllY2UuY29sb3IgPT09ICd3JyA/IHBvc2l0aW9uVmFsdWUgOiAtcG9zaXRpb25WYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICAvKipcbiAgICogRW5jb250cmEgbyBtZWxob3IgbW92aW1lbnRvIHBvc3PDrXZlbCBwYXJhIG8gam9nYWRvciBhdHVhbC5cbiAgICogXG4gICAqIEBwYXJhbSBkZXB0aCAtIFByb2Z1bmRpZGFkZSBtw6F4aW1hIGRlIGJ1c2NhIG5hIMOhcnZvcmUgZGUgbW92aW1lbnRvc1xuICAgKiBAcmV0dXJucyBPIG1lbGhvciBtb3ZpbWVudG8gZW5jb250cmFkbywgb3UgbnVsbCBzZSBuZW5odW0gbW92aW1lbnRvIGZvciBwb3Nzw612ZWxcbiAgICogQHRvZG8gSW1wbGVtZW50YXIgYWxnb3JpdG1vIG1pbmltYXggY29tIHBvZGEgYWxwaGEtYmV0YVxuICAgKi9cbiAgZ2V0QmVzdE1vdmUoZGVwdGg6IG51bWJlcik6IENoZXNzTW92ZSB8IG51bGwge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGJ1c2NhIG1pbmltYXggY29tIHBvZGEgYWxwaGEtYmV0YVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIGhpc3TDs3JpY28gY29tcGxldG8gZGUgbW92aW1lbnRvcyBkbyBqb2dvLlxuICAgKiBcbiAgICogQHJldHVybnMgTGlzdGEgZGUgbW92aW1lbnRvcyByZWFsaXphZG9zIGRlc2RlIG8gaW7DrWNpbyBkbyBqb2dvXG4gICAqL1xuICBnZXRHYW1lSGlzdG9yeSgpOiBDaGVzc01vdmVbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5oaXN0b3J5KHsgdmVyYm9zZTogdHJ1ZSB9KS5tYXAobW92ZSA9PiAoe1xuICAgICAgZnJvbTogdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUuZnJvbSksXG4gICAgICB0bzogdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUudG8pLFxuICAgICAgcGllY2U6IHtcbiAgICAgICAgdHlwZTogbW92ZS5waWVjZSxcbiAgICAgICAgY29sb3I6IG1vdmUuY29sb3IgPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICB9LFxuICAgICAgY2FwdHVyZWQ6IG1vdmUuY2FwdHVyZWQgPyB7XG4gICAgICAgIHR5cGU6IG1vdmUuY2FwdHVyZWQsXG4gICAgICAgIGNvbG9yOiBtb3ZlLmNvbG9yID09PSAndycgPyAnYmxhY2snIDogJ3doaXRlJ1xuICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgIHByb21vdGlvbjogbW92ZS5wcm9tb3Rpb24sXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gVmFsaWRhw6fDo29cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtIG1vdmltZW50byDDqSB2w6FsaWRvIHNlbSBleGVjdXTDoS1sby5cbiAgICogXG4gICAqIEBwYXJhbSBmcm9tIC0gUG9zacOnw6NvIGluaWNpYWwgZGEgcGXDp2FcbiAgICogQHBhcmFtIHRvIC0gUG9zacOnw6NvIGZpbmFsIGRhIHBlw6dhXG4gICAqIEByZXR1cm5zIHRydWUgc2UgbyBtb3ZpbWVudG8gw6kgbGVnYWwsIGZhbHNlIGNhc28gY29udHLDoXJpb1xuICAgKi9cbiAgaXNWYWxpZE1vdmUoZnJvbTogQ2hlc3NQb3NpdGlvbiwgdG86IENoZXNzUG9zaXRpb24pOiBib29sZWFuIHtcbiAgICAvLyBWYWxpZGHDp8OjbyBiw6FzaWNhIGRlIHBvc2nDp8Ojb1xuICAgIGlmICghdGhpcy5pc1ZhbGlkUG9zaXRpb24oZnJvbSkgfHwgIXRoaXMuaXNWYWxpZFBvc2l0aW9uKHRvKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhIHNlIGEgcGXDp2EgcGVydGVuY2UgYW8gam9nYWRvciBhdHVhbFxuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nYW1lLmJvYXJkKClbZnJvbS5yb3ddW2Zyb20uY29sXTtcbiAgICBpZiAoIXBpZWNlIHx8IHBpZWNlLmNvbG9yICE9PSAodGhpcy5nZXRDdXJyZW50UGxheWVyKCkgPT09ICd3aGl0ZScgPyAndycgOiAnYicpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVGVudGEgZmF6ZXIgbyBtb3ZpbWVudG8gbm8gY2hlc3MuanNcbiAgICB0cnkge1xuICAgICAgY29uc3QgbW92ZSA9IHRoaXMuZ2FtZS5tb3ZlKHtcbiAgICAgICAgZnJvbTogdGhpcy5wb3NpdGlvblRvU3F1YXJlKGZyb20pLFxuICAgICAgICB0bzogdGhpcy5wb3NpdGlvblRvU3F1YXJlKHRvKSxcbiAgICAgICAgcHJvbW90aW9uOiAncSdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobW92ZSkge1xuICAgICAgICAvLyBEZXNmYXogbyBtb3ZpbWVudG8gcGFyYSBtYW50ZXIgbyBlc3RhZG8gb3JpZ2luYWxcbiAgICAgICAgdGhpcy5nYW1lLnVuZG8oKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JhIGVycm9zIGRvIGNoZXNzLmpzXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtYSBwb3Npw6fDo28gZXN0w6EgZGVudHJvIGRvcyBsaW1pdGVzIGRvIHRhYnVsZWlyby5cbiAgICogXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFBvc2nDp8OjbyBhIHNlciB2ZXJpZmljYWRhXG4gICAqIEByZXR1cm5zIHRydWUgc2UgYSBwb3Npw6fDo28gw6kgdsOhbGlkYSwgZmFsc2UgY2FzbyBjb250csOhcmlvXG4gICAqL1xuICBpc1ZhbGlkUG9zaXRpb24ocG9zaXRpb246IENoZXNzUG9zaXRpb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcG9zaXRpb24ucm93ID49IDAgJiYgcG9zaXRpb24ucm93IDwgOCAmJlxuICAgICAgICAgICBwb3NpdGlvbi5jb2wgPj0gMCAmJiBwb3NpdGlvbi5jb2wgPCA4O1xuICB9XG5cbiAgLy8gVXRpbGlkYWRlc1xuICAvKipcbiAgICogUmVpbmljaWEgbyBqb2dvIHBhcmEgYSBwb3Npw6fDo28gaW5pY2lhbC5cbiAgICogXG4gICAqIEBlbWl0cyB7UE9TSVRJT05fQ0hBTkdFRH0gUXVhbmRvIG8gdGFidWxlaXJvIMOpIHJlaW5pY2lhZG9cbiAgICovXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuZ2FtZS5yZXNldCgpO1xuICAgIHRoaXMucG9zaXRpb25DYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuZW1pdEV2ZW50KHsgXG4gICAgICB0eXBlOiAnUE9TSVRJT05fQ0hBTkdFRCcsXG4gICAgICBmZW46IHRoaXMuZ2V0RkVOKClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmlhIHVtYSBjw7NwaWEgaW5kZXBlbmRlbnRlIGRvIG1vdG9yIGRlIHhhZHJleiBhdHVhbC5cbiAgICogXG4gICAqIEByZXR1cm5zIFVtYSBub3ZhIGluc3TDom5jaWEgZG8gbW90b3IgY29tIG8gbWVzbW8gZXN0YWRvIGF0dWFsXG4gICAqL1xuICBjbG9uZSgpOiBDaGVzc0VuZ2luZSB7XG4gICAgY29uc3QgY2xvbmVkRW5naW5lID0gbmV3IENoZXNzRW5naW5lQmFzZSh0aGlzLm9wdGlvbnMpO1xuICAgIGNsb25lZEVuZ2luZS5zZXRGRU4odGhpcy5nZXRGRU4oKSk7XG4gICAgcmV0dXJuIGNsb25lZEVuZ2luZTtcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIHByb3RlZ2lkb3MgYXV4aWxpYXJlc1xuICBwcm90ZWN0ZWQgcG9zaXRpb25Ub1NxdWFyZShwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbik6IHN0cmluZyB7XG4gICAgY29uc3QgZmlsZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJ2EnLmNoYXJDb2RlQXQoMCkgKyBwb3NpdGlvbi5jb2wpO1xuICAgIGNvbnN0IHJhbmsgPSA4IC0gcG9zaXRpb24ucm93O1xuICAgIHJldHVybiBgJHtmaWxlfSR7cmFua31gO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNxdWFyZVRvUG9zaXRpb24oc3F1YXJlOiBzdHJpbmcpOiBDaGVzc1Bvc2l0aW9uIHtcbiAgICBjb25zdCBjb2wgPSBzcXVhcmUuY2hhckNvZGVBdCgwKSAtICdhJy5jaGFyQ29kZUF0KDApO1xuICAgIGNvbnN0IHJvdyA9IDggLSBwYXJzZUludChzcXVhcmVbMV0pO1xuICAgIHJldHVybiB7IHJvdywgY29sIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgZmluZEtpbmcoY29sb3I6ICd3aGl0ZScgfCAnYmxhY2snKTogQ2hlc3NQb3NpdGlvbiB7XG4gICAgY29uc3QgYm9hcmQgPSB0aGlzLmdhbWUuYm9hcmQoKTtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgODsgY29sKyspIHtcbiAgICAgICAgY29uc3QgcGllY2UgPSBib2FyZFtyb3ddW2NvbF07XG4gICAgICAgIGlmIChwaWVjZSAmJiBcbiAgICAgICAgICAgIHBpZWNlLnR5cGUgPT09ICdrJyAmJiBcbiAgICAgICAgICAgIHBpZWNlLmNvbG9yID09PSAoY29sb3IgPT09ICd3aGl0ZScgPyAndycgOiAnYicpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgcm93LCBjb2wgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0tpbmcgbm90IGZvdW5kJyk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2EgbyBzdGF0dXMgZGUgc2HDumRlIGRvIG1vdG9yLlxuICAgKiBcbiAgICogQHJldHVybnMgU3RhdHVzIGF0dWFsIGRvIG1vdG9yIGluY2x1aW5kbyBtw6l0cmljYXMgZGUgZGVzZW1wZW5ob1xuICAgKi9cbiAgcHVibGljIGNoZWNrSGVhbHRoKCk6IEhlYWx0aFN0YXR1cyB7XG4gICAgcmV0dXJuIHRoaXMubW9uaXRvci5jaGVja0hlYWx0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXRlIHVtIGV2ZW50byBkbyBtb3Rvci5cbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEV2ZW50byBhIHNlciBlbWl0aWRvXG4gICAqL1xuICBwcm90ZWN0ZWQgZW1pdEV2ZW50KGV2ZW50OiBFbmdpbmVFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2VuZ2luZS1ldmVudCcsIGV2ZW50KTtcbiAgICB0aGlzLm1vbml0b3IucmVjb3JkRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgZGUgYXZhbGlhw6fDo29cbiAgcHJpdmF0ZSBldmFsdWF0ZU1hdGVyaWFsKCk6IG51bWJlciB7XG4gICAgY29uc3QgcGllY2VWYWx1ZXMgPSB7XG4gICAgICBwOiAxLFxuICAgICAgbjogMyxcbiAgICAgIGI6IDMsXG4gICAgICByOiA1LFxuICAgICAgcTogOSxcbiAgICAgIGs6IDBcbiAgICB9O1xuXG4gICAgbGV0IHNjb3JlID0gMDtcbiAgICBjb25zdCBib2FyZCA9IHRoaXMuZ2FtZS5ib2FyZCgpO1xuXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgODsgcm93KyspIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gYm9hcmRbcm93XVtjb2xdO1xuICAgICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBpZWNlVmFsdWVzW3BpZWNlLnR5cGUgYXMga2V5b2YgdHlwZW9mIHBpZWNlVmFsdWVzXTtcbiAgICAgICAgICBzY29yZSArPSBwaWVjZS5jb2xvciA9PT0gJ3cnID8gdmFsdWUgOiAtdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlTW9iaWxpdHkoKTogbnVtYmVyIHtcbiAgICBjb25zdCB3aGl0ZU1vdmVzID0gdGhpcy5nYW1lLm1vdmVzKCkubGVuZ3RoO1xuICAgIC8vIENsb25hIG8gam9nbyBwYXJhIHZlciBvcyBtb3ZpbWVudG9zIGRvIG9wb25lbnRlXG4gICAgY29uc3QgdGVtcEdhbWUgPSBuZXcgQ2hlc3ModGhpcy5nYW1lLmZlbigpKTtcbiAgICB0ZW1wR2FtZS5sb2FkKHRoaXMuZ2FtZS5mZW4oKS5yZXBsYWNlKCcgdyAnLCAnIGIgJykpO1xuICAgIGNvbnN0IGJsYWNrTW92ZXMgPSB0ZW1wR2FtZS5tb3ZlcygpLmxlbmd0aDtcbiAgICBcbiAgICByZXR1cm4gd2hpdGVNb3ZlcyAtIGJsYWNrTW92ZXM7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlS2luZ1NhZmV0eSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGF2YWxpYcOnw6NvIGRlIHNlZ3VyYW7Dp2EgZG8gcmVpXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUGF3blN0cnVjdHVyZSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGF2YWxpYcOnw6NvIGRlIGVzdHJ1dHVyYSBkZSBwZcO1ZXNcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vIEV2ZW50IGhhbmRsZXJzXG4gIG9uKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiAoZXZlbnQ6IEVuZ2luZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudEVtaXR0ZXIub24oZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgfVxuXG4gIG9mZihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBFbmdpbmVFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZihldmVudE5hbWUsIGhhbmRsZXIpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2hlc3MiLCJBcnF1aW1heE1vbml0b3IiLCJJTklUSUFMX0ZFTiIsIkV2ZW50RW1pdHRlciIsIkNoZXNzRW5naW5lQmFzZSIsImdldEJvYXJkIiwiYm9hcmQiLCJnYW1lIiwibWFwIiwicm93Iiwic3F1YXJlIiwidHlwZSIsImNvbG9yIiwiZ2V0RkVOIiwiZmVuIiwic2V0RkVOIiwibG9hZCIsImVtaXRFdmVudCIsImUiLCJFcnJvciIsImdldFBvc3NpYmxlTW92ZXMiLCJwb3NpdGlvbiIsInBvc2l0aW9uVG9TcXVhcmUiLCJjYWNoZUtleSIsImNhY2hlSGl0IiwicG9zaXRpb25DYWNoZSIsImhhcyIsIm1vdmVzIiwiY2FjaGUiLCJnZXQiLCJiZXN0TGluZSIsInZlcmJvc2UiLCJzZXQiLCJldmFsdWF0aW9uIiwiZGVwdGgiLCJ0aHJlYXRzIiwicG9zaXRpb25hbEZlYXR1cmVzIiwicGF3blN0cnVjdHVyZSIsImtpbmdTYWZldHkiLCJtb2JpbGl0eSIsImNlbnRlckNvbnRyb2wiLCJwaWVjZUFjdGl2aXR5IiwibW9uaXRvciIsInJlY29yZENhY2hlQWNjZXNzIiwibW92ZSIsImZyb20iLCJzcXVhcmVUb1Bvc2l0aW9uIiwidG8iLCJwaWVjZSIsImNhcHR1cmVkIiwidW5kZWZpbmVkIiwicHJvbW90aW9uIiwibWFrZU1vdmUiLCJjaGVzc01vdmUiLCJpc0NoZWNrIiwia2luZ1Bvc2l0aW9uIiwiZmluZEtpbmciLCJnZXRDdXJyZW50UGxheWVyIiwiaXNHYW1lT3ZlciIsInJlc3VsdCIsImlzQ2hlY2ttYXRlIiwidW5kb0xhc3RNb3ZlIiwidW5kbyIsImlzRHJhdyIsInR1cm4iLCJldmFsdWF0ZVBvc2l0aW9uIiwid2VpZ2h0cyIsIm9wdGlvbnMiLCJldmFsdWF0aW9uUGFyYW1ldGVycyIsIm1hdGVyaWFsV2VpZ2h0IiwicG9zaXRpb25XZWlnaHQiLCJtb2JpbGl0eVdlaWdodCIsImtpbmdTYWZldHlXZWlnaHQiLCJwYXduU3RydWN0dXJlV2VpZ2h0Iiwic2NvcmUiLCJldmFsdWF0ZU1hdGVyaWFsIiwiZXZhbHVhdGVQaWVjZVBvc2l0aW9ucyIsImV2YWx1YXRlTW9iaWxpdHkiLCJldmFsdWF0ZUtpbmdTYWZldHkiLCJldmFsdWF0ZVBhd25TdHJ1Y3R1cmUiLCJwaWVjZVNxdWFyZVZhbHVlcyIsInAiLCJuIiwiYiIsImNvbCIsInBpZWNlVGFibGUiLCJwb3NpdGlvblZhbHVlIiwiZ2V0QmVzdE1vdmUiLCJnZXRHYW1lSGlzdG9yeSIsImhpc3RvcnkiLCJpc1ZhbGlkTW92ZSIsImlzVmFsaWRQb3NpdGlvbiIsInJlc2V0IiwiY2xlYXIiLCJjbG9uZSIsImNsb25lZEVuZ2luZSIsImZpbGUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwicmFuayIsInBhcnNlSW50IiwiY2hlY2tIZWFsdGgiLCJldmVudCIsImV2ZW50RW1pdHRlciIsImVtaXQiLCJyZWNvcmRFdmVudCIsInBpZWNlVmFsdWVzIiwiciIsInEiLCJrIiwidmFsdWUiLCJ3aGl0ZU1vdmVzIiwibGVuZ3RoIiwidGVtcEdhbWUiLCJyZXBsYWNlIiwiYmxhY2tNb3ZlcyIsIm9uIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsIm9mZiIsImNvbnN0cnVjdG9yIiwic3RhcnRQb3NpdGlvbiIsIk1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/shared/engine/ChessEngineBase.ts\n"));

/***/ }),

/***/ "./src/shared/engine/CulturalChessEngine.ts":
/*!**************************************************!*\
  !*** ./src/shared/engine/CulturalChessEngine.ts ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CulturalChessEngine\": function() { return /* binding */ CulturalChessEngine; }\n/* harmony export */ });\n/* harmony import */ var _ChessEngineBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ChessEngineBase */ \"./src/shared/engine/ChessEngineBase.ts\");\n/* harmony import */ var _constants_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants/game */ \"./src/shared/constants/game.ts\");\n\n\nclass CulturalChessEngine extends _ChessEngineBase__WEBPACK_IMPORTED_MODULE_0__.ChessEngineBase {\n    // Implementao da interface CulturalEngineExtension\n    setCulturalStyle(style) {\n        if (!(style in _constants_game__WEBPACK_IMPORTED_MODULE_1__.CULTURAL_STYLES)) {\n            throw new Error(\"Estilo cultural inv\\xe1lido: \".concat(style));\n        }\n        this.currentStyle = style;\n        this.triggerCulturalEvent(\"STYLE_CHANGED\");\n    }\n    getCulturalNarrative() {\n        const narratives = [];\n        const recentMoves = this.playStyleHistory.slice(-5);\n        const styleAnalysis = this.analyzePlayStyle();\n        // Narrativa baseada no estilo dominante\n        narratives.push(\"Seu jogo reflete o estilo \".concat(styleAnalysis.dominantStyle, \", \") + \"com \\xeanfase em \".concat(this.getStyleCharacteristics(styleAnalysis.dominantStyle), \".\"));\n        // Narrativa baseada nos movimentos recentes\n        if (recentMoves.length > 0) {\n            const recentStyle = this.analyzeMoveSequence(recentMoves);\n            narratives.push(\"Nos \\xfaltimos movimentos, voc\\xea demonstrou uma tend\\xeancia a \" + \"\".concat(this.getStyleTendency(recentStyle), \".\"));\n        }\n        // Narrativa cultural especfica\n        narratives.push(this.getCulturalStyleNarrative());\n        return narratives;\n    }\n    getStyleBasedEvaluation() {\n        const baseEvaluation = super.evaluatePosition();\n        const styleModifier = this.getStyleModifier();\n        const modifiedEvaluation = baseEvaluation * styleModifier;\n        return {\n            style: this.currentStyle,\n            evaluation: modifiedEvaluation,\n            explanation: this.getStyleEvaluation()\n        };\n    }\n    triggerCulturalEvent(type) {\n        if (!(type in _constants_game__WEBPACK_IMPORTED_MODULE_1__.CULTURAL_EVENTS)) {\n            throw new Error(\"Tipo de evento cultural inv\\xe1lido: \".concat(type));\n        }\n        const event = {\n            type,\n            timestamp: Date.now(),\n            description: this.getEventDescription(type)\n        };\n        this.culturalEvents.push(event);\n        this.emitEvent({\n            type: \"CULTURAL_EVENT\",\n            event: {\n                type: event.type,\n                description: event.description\n            }\n        });\n    }\n    getCulturalEventHistory() {\n        return [\n            ...this.culturalEvents\n        ];\n    }\n    analyzePlayStyle() {\n        const metrics = this.calculateStyleMetrics();\n        const dominantStyle = this.findDominantStyle(metrics);\n        const recommendations = this.generateRecommendations(metrics);\n        return {\n            dominantStyle,\n            styleMetrics: metrics,\n            recommendations\n        };\n    }\n    // Mtodos auxiliares privados\n    analyzeMoveStyle(move) {\n        const isAggressive = this.isAggressiveMove(move);\n        const isPositional = this.isPositionalMove(move);\n        const isTactical = this.isTacticalMove(move);\n        if (isAggressive) {\n            this.triggerCulturalEvent(\"AGGRESSIVE_MOVE\");\n        } else if (isPositional) {\n            this.triggerCulturalEvent(\"POSITIONAL_MOVE\");\n        } else if (isTactical) {\n            this.triggerCulturalEvent(\"TACTICAL_MOVE\");\n        }\n    }\n    analyzeMoveSequence(moves) {\n        let aggressiveCount = 0;\n        let positionalCount = 0;\n        let tacticalCount = 0;\n        moves.forEach((move)=>{\n            if (this.isAggressiveMove(move)) aggressiveCount++;\n            if (this.isPositionalMove(move)) positionalCount++;\n            if (this.isTacticalMove(move)) tacticalCount++;\n        });\n        const total = moves.length;\n        const scores = {\n            aggressive: aggressiveCount / total,\n            positional: positionalCount / total,\n            tactical: tacticalCount / total\n        };\n        return Object.entries(scores).reduce((a, b)=>a[1] > b[1] ? a : b)[0];\n    }\n    isAggressiveMove(move) {\n        return Boolean(move.captured || // Captura\n        this.isCheck() || // Xeque\n        this.isAttackingCenterPieces(move) // Ataque ao centro\n        );\n    }\n    isPositionalMove(move) {\n        return Boolean(this.improvesPosition(move) || this.controlsImportantSquares(move) || this.improvesPawnStructure(move));\n    }\n    isTacticalMove(move) {\n        return Boolean(this.createsThreat(move) || this.createsFork(move) || this.createsPin(move));\n    }\n    calculateStyleMetrics() {\n        const metrics = {\n            aggressive: 0,\n            defensive: 0,\n            positional: 0,\n            tactical: 0\n        };\n        this.playStyleHistory.forEach((move)=>{\n            if (this.isAggressiveMove(move)) metrics.aggressive++;\n            if (this.isPositionalMove(move)) metrics.positional++;\n            if (this.isTacticalMove(move)) metrics.tactical++;\n            // Movimento defensivo  calculado de forma diferente\n            if (this.isDefensiveMove(move)) metrics.defensive++;\n        });\n        // Normaliza as mtricas\n        const total = Object.values(metrics).reduce((a, b)=>a + b, 0);\n        if (total > 0) {\n            Object.keys(metrics).forEach((key)=>{\n                metrics[key] = metrics[key] / total;\n            });\n        }\n        return metrics;\n    }\n    findDominantStyle(metrics) {\n        return Object.entries(metrics).reduce((a, b)=>a[1] > b[1] ? a : b)[0];\n    }\n    generateRecommendations(metrics) {\n        const recommendations = [];\n        const dominantStyle = this.findDominantStyle(metrics);\n        // Recomendaes baseadas no estilo dominante\n        recommendations.push(\"Continue explorando seu estilo \".concat(dominantStyle, \", mas considere tamb\\xe9m:\"));\n        // Recomendaes para equilibrar o jogo\n        Object.entries(metrics).filter((param)=>{\n            let [style] = param;\n            return style !== dominantStyle;\n        }).sort((param, param1)=>{\n            let [, a] = param, [, b] = param1;\n            return a - b;\n        }).forEach((param)=>{\n            let [style, value] = param;\n            if (value < 0.2) {\n                recommendations.push(this.getStyleRecommendation(style));\n            }\n        });\n        return recommendations;\n    }\n    getStyleModifier() {\n        // Modifica a avaliao baseada no estilo cultural\n        const modifiers = {\n            medieval: 1.1,\n            renaissance: 1.2,\n            modern: 1.0,\n            ancient: 0.9 // Valoriza sacrifcios e ataques\n        };\n        return modifiers[this.currentStyle] || 1.0;\n    }\n    getStyleEvaluation() {\n        const evaluation = super.evaluatePosition();\n        const style = this.currentStyle;\n        switch(style){\n            case \"medieval\":\n                return evaluation > 0 ? \"Vantagem material e posicional s\\xf3lida\" : \"Necessidade de consolidar posi\\xe7\\xe3o e material\";\n            case \"renaissance\":\n                return evaluation > 0 ? \"Excelente desenvolvimento e mobilidade\" : \"Oportunidade para melhorar desenvolvimento\";\n            case \"modern\":\n                return evaluation > 0 ? \"Posi\\xe7\\xe3o equilibrada com vantagem\" : \"Posi\\xe7\\xe3o requer aten\\xe7\\xe3o estrat\\xe9gica\";\n            case \"ancient\":\n                return evaluation > 0 ? \"Potencial para sacrif\\xedcios decisivos\" : \"Momento para sacrif\\xedcios t\\xe1ticos\";\n            default:\n                return \"Avalia\\xe7\\xe3o padr\\xe3o da posi\\xe7\\xe3o\";\n        }\n    }\n    getStyleCharacteristics(style) {\n        const characteristics = {\n            aggressive: \"ataques diretos e sacrif\\xedcios\",\n            defensive: \"s\\xf3lida estrutura defensiva\",\n            positional: \"controle posicional e estrat\\xe9gico\",\n            tactical: \"combina\\xe7\\xf5es e t\\xe1ticas complexas\"\n        };\n        return characteristics[style] || \"estilo equilibrado\";\n    }\n    getStyleTendency(style) {\n        const tendencies = {\n            aggressive: \"buscar iniciativas de ataque\",\n            defensive: \"fortalecer sua posi\\xe7\\xe3o\",\n            positional: \"controlar pontos estrat\\xe9gicos\",\n            tactical: \"criar amea\\xe7as t\\xe1ticas\"\n        };\n        return tendencies[style] || \"manter um jogo equilibrado\";\n    }\n    getEventDescription(type) {\n        const descriptions = {\n            AGGRESSIVE_MOVE: \"Movimento agressivo detectado\",\n            POSITIONAL_MOVE: \"Melhoria posicional significativa\",\n            TACTICAL_MOVE: \"Combina\\xe7\\xe3o t\\xe1tica identificada\",\n            STYLE_CHANGED: \"Estilo alterado para \".concat(this.currentStyle),\n            BRILLIANT_MOVE: \"Movimento brilhante executado\",\n            CRITICAL_POSITION: \"Posi\\xe7\\xe3o cr\\xedtica alcan\\xe7ada\"\n        };\n        return descriptions[type] || \"Evento cultural ocorrido\";\n    }\n    getCulturalStyleNarrative() {\n        const narratives = {\n            medieval: \"Seu jogo reflete a solidez e tradi\\xe7\\xe3o do xadrez medieval.\",\n            renaissance: \"Voc\\xea demonstra a criatividade e inova\\xe7\\xe3o do per\\xedodo renascentista.\",\n            modern: \"Seu estilo incorpora princ\\xedpios modernos de flexibilidade e pragmatismo.\",\n            ancient: \"Sua abordagem evoca a sabedoria e profundidade do xadrez antigo.\"\n        };\n        return narratives[this.currentStyle] || \"Seu estilo \\xe9 \\xfanico e pessoal.\";\n    }\n    getStyleRecommendation(style) {\n        const recommendations = {\n            aggressive: \"Procure oportunidades de ataque direto ao rei advers\\xe1rio\",\n            defensive: \"Fortale\\xe7a sua estrutura de pe\\xf5es e seguran\\xe7a do rei\",\n            positional: \"Foque no controle do centro e posicionamento de pe\\xe7as\",\n            tactical: \"Busque combina\\xe7\\xf5es e trocas favor\\xe1veis\"\n        };\n        return recommendations[style] || \"Mantenha um jogo equilibrado\";\n    }\n    // Mtodos de avaliao especficos\n    isAttackingCenterPieces(move) {\n        const centerSquares = [\n            {\n                row: 3,\n                col: 3\n            },\n            {\n                row: 3,\n                col: 4\n            },\n            {\n                row: 4,\n                col: 3\n            },\n            {\n                row: 4,\n                col: 4\n            }\n        ];\n        return centerSquares.some((square)=>square.row === move.to.row && square.col === move.to.col);\n    }\n    improvesPosition(move) {\n        // Verifica se o movimento melhora a posio da pea\n        const fromScore = this.getSquareValue(move.from);\n        const toScore = this.getSquareValue(move.to);\n        return toScore > fromScore;\n    }\n    controlsImportantSquares(move) {\n        // Verifica se o movimento controla casas importantes\n        const attacks = this.getPossibleMoves(move.to);\n        return attacks.some((attack)=>this.isImportantSquare(attack.to));\n    }\n    improvesPawnStructure(move) {\n        // TODO: Implementar anlise de estrutura de pees\n        return false;\n    }\n    createsThreat(move) {\n        const clone = this.clone();\n        clone.makeMove(move.from, move.to);\n        return clone.isCheck();\n    }\n    createsFork(move) {\n        // TODO: Implementar deteco de garfo\n        return false;\n    }\n    createsPin(move) {\n        // TODO: Implementar deteco de cravada\n        return false;\n    }\n    isDefensiveMove(move) {\n        // TODO: Implementar deteco de movimento defensivo\n        return false;\n    }\n    getSquareValue(position) {\n        // Valores das casas do tabuleiro (centro vale mais)\n        const squareValues = [\n            [\n                0,\n                0,\n                0,\n                0,\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                1,\n                1,\n                1,\n                1,\n                1,\n                1,\n                0\n            ],\n            [\n                0,\n                1,\n                2,\n                2,\n                2,\n                2,\n                1,\n                0\n            ],\n            [\n                0,\n                1,\n                2,\n                3,\n                3,\n                2,\n                1,\n                0\n            ],\n            [\n                0,\n                1,\n                2,\n                3,\n                3,\n                2,\n                1,\n                0\n            ],\n            [\n                0,\n                1,\n                2,\n                2,\n                2,\n                2,\n                1,\n                0\n            ],\n            [\n                0,\n                1,\n                1,\n                1,\n                1,\n                1,\n                1,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0,\n                0,\n                0,\n                0,\n                0\n            ]\n        ];\n        return squareValues[position.row][position.col];\n    }\n    isImportantSquare(position) {\n        return this.getSquareValue(position) >= 2;\n    }\n    constructor(options = {}){\n        super(options);\n        this.currentStyle = \"modern\";\n        this.culturalEvents = [];\n        this.playStyleHistory = [];\n        // Registra movimentos para anlise de estilo\n        this.on(\"engine-event\", (event)=>{\n            if (event.type === \"MOVE_MADE\") {\n                this.playStyleHistory.push(event.move);\n                this.analyzeMoveStyle(event.move);\n            }\n        });\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2hhcmVkL2VuZ2luZS9DdWx0dXJhbENoZXNzRW5naW5lLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUdpQjtBQUU5RCxNQUFNRyw0QkFBNEJILDZEQUFlQTtJQXdCdEQscURBQXFEO0lBQ3JESSxpQkFBaUJDLEtBQWEsRUFBUTtRQUNwQyxJQUFJLENBQUVBLENBQUFBLFNBQVNKLDREQUFjLEdBQUk7WUFDL0IsTUFBTSxJQUFJSyxNQUFNLGdDQUFtQyxPQUFORCxRQUFTO1FBQ3hELENBQUM7UUFDRCxJQUFJLENBQUNFLFlBQVksR0FBR0Y7UUFDcEIsSUFBSSxDQUFDRyxvQkFBb0IsQ0FBQztJQUM1QjtJQUVBQyx1QkFBaUM7UUFDL0IsTUFBTUMsYUFBdUIsRUFBRTtRQUMvQixNQUFNQyxjQUFjLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNDLEtBQUssQ0FBQyxDQUFDO1FBQ2pELE1BQU1DLGdCQUFnQixJQUFJLENBQUNDLGdCQUFnQjtRQUUzQyx3Q0FBd0M7UUFDeENMLFdBQVdNLElBQUksQ0FDYiw2QkFBeUQsT0FBNUJGLGNBQWNHLGFBQWEsRUFBQyxRQUN6RCxvQkFBMkUsT0FBMUQsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBQ0osY0FBY0csYUFBYSxHQUFFO1FBRzdFLDRDQUE0QztRQUM1QyxJQUFJTixZQUFZUSxNQUFNLEdBQUcsR0FBRztZQUMxQixNQUFNQyxjQUFjLElBQUksQ0FBQ0MsbUJBQW1CLENBQUNWO1lBQzdDRCxXQUFXTSxJQUFJLENBQ2Isc0VBQ0EsR0FBc0MsT0FBbkMsSUFBSSxDQUFDTSxnQkFBZ0IsQ0FBQ0YsY0FBYTtRQUUxQyxDQUFDO1FBRUQsZ0NBQWdDO1FBQ2hDVixXQUFXTSxJQUFJLENBQUMsSUFBSSxDQUFDTyx5QkFBeUI7UUFFOUMsT0FBT2I7SUFDVDtJQUVBYywwQkFJRTtRQUNBLE1BQU1DLGlCQUFpQixLQUFLLENBQUNDLGdCQUFnQjtRQUM3QyxNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDQyxnQkFBZ0I7UUFDM0Ms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SUFBSSxDQUFDNUIsZ0JBQWdCLEdBQUcsRUFBRTtRQUUxQiw2Q0FBNkM7UUFDN0MsSUFBSSxDQUFDaUgsRUFBRSxDQUFDLGdCQUFnQixDQUFDM0YsUUFBVTtZQUNqQyxJQUFJQSxNQUFNRCxJQUFJLEtBQUssYUFBYTtnQkFDOUIsSUFBSSxDQUFDckIsZ0JBQWdCLENBQUNJLElBQUksQ0FBQ2tCLE1BQU1nQixJQUFJO2dCQUNyQyxJQUFJLENBQUNELGdCQUFnQixDQUFDZixNQUFNZ0IsSUFBSTtZQUNsQyxDQUFDO1FBQ0g7SUFDRjtBQTJYRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9zaGFyZWQvZW5naW5lL0N1bHR1cmFsQ2hlc3NFbmdpbmUudHM/NmZlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGVzc0VuZ2luZUJhc2UgfSBmcm9tICcuL0NoZXNzRW5naW5lQmFzZSc7XG5pbXBvcnQgeyBDdWx0dXJhbEVuZ2luZUV4dGVuc2lvbiwgRW5naW5lT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzL2VuZ2luZSc7XG5pbXBvcnQgeyBDaGVzc01vdmUgfSBmcm9tICcuLi90eXBlcy9jaGVzcyc7XG5pbXBvcnQgeyBDVUxUVVJBTF9TVFlMRVMsIENVTFRVUkFMX0VWRU5UUyB9IGZyb20gJy4uL2NvbnN0YW50cy9nYW1lJztcblxuZXhwb3J0IGNsYXNzIEN1bHR1cmFsQ2hlc3NFbmdpbmUgZXh0ZW5kcyBDaGVzc0VuZ2luZUJhc2UgaW1wbGVtZW50cyBDdWx0dXJhbEVuZ2luZUV4dGVuc2lvbiB7XG4gIHByaXZhdGUgY3VycmVudFN0eWxlOiBzdHJpbmc7XG4gIHByaXZhdGUgY3VsdHVyYWxFdmVudHM6IHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgfVtdO1xuICBwcml2YXRlIHBsYXlTdHlsZUhpc3Rvcnk6IENoZXNzTW92ZVtdO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEVuZ2luZU9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMuY3VycmVudFN0eWxlID0gJ21vZGVybic7XG4gICAgdGhpcy5jdWx0dXJhbEV2ZW50cyA9IFtdO1xuICAgIHRoaXMucGxheVN0eWxlSGlzdG9yeSA9IFtdO1xuXG4gICAgLy8gUmVnaXN0cmEgbW92aW1lbnRvcyBwYXJhIGFuw6FsaXNlIGRlIGVzdGlsb1xuICAgIHRoaXMub24oJ2VuZ2luZS1ldmVudCcsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdNT1ZFX01BREUnKSB7XG4gICAgICAgIHRoaXMucGxheVN0eWxlSGlzdG9yeS5wdXNoKGV2ZW50Lm1vdmUpO1xuICAgICAgICB0aGlzLmFuYWx5emVNb3ZlU3R5bGUoZXZlbnQubW92ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBJbXBsZW1lbnRhw6fDo28gZGEgaW50ZXJmYWNlIEN1bHR1cmFsRW5naW5lRXh0ZW5zaW9uXG4gIHNldEN1bHR1cmFsU3R5bGUoc3R5bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghKHN0eWxlIGluIENVTFRVUkFMX1NUWUxFUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXN0aWxvIGN1bHR1cmFsIGludsOhbGlkbzogJHtzdHlsZX1gKTtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50U3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLnRyaWdnZXJDdWx0dXJhbEV2ZW50KCdTVFlMRV9DSEFOR0VEJyk7XG4gIH1cblxuICBnZXRDdWx0dXJhbE5hcnJhdGl2ZSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbmFycmF0aXZlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCByZWNlbnRNb3ZlcyA9IHRoaXMucGxheVN0eWxlSGlzdG9yeS5zbGljZSgtNSk7XG4gICAgY29uc3Qgc3R5bGVBbmFseXNpcyA9IHRoaXMuYW5hbHl6ZVBsYXlTdHlsZSgpO1xuXG4gICAgLy8gTmFycmF0aXZhIGJhc2VhZGEgbm8gZXN0aWxvIGRvbWluYW50ZVxuICAgIG5hcnJhdGl2ZXMucHVzaChcbiAgICAgIGBTZXUgam9nbyByZWZsZXRlIG8gZXN0aWxvICR7c3R5bGVBbmFseXNpcy5kb21pbmFudFN0eWxlfSwgYCArXG4gICAgICBgY29tIMOqbmZhc2UgZW0gJHt0aGlzLmdldFN0eWxlQ2hhcmFjdGVyaXN0aWNzKHN0eWxlQW5hbHlzaXMuZG9taW5hbnRTdHlsZSl9LmBcbiAgICApO1xuXG4gICAgLy8gTmFycmF0aXZhIGJhc2VhZGEgbm9zIG1vdmltZW50b3MgcmVjZW50ZXNcbiAgICBpZiAocmVjZW50TW92ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVjZW50U3R5bGUgPSB0aGlzLmFuYWx5emVNb3ZlU2VxdWVuY2UocmVjZW50TW92ZXMpO1xuICAgICAgbmFycmF0aXZlcy5wdXNoKFxuICAgICAgICBgTm9zIMO6bHRpbW9zIG1vdmltZW50b3MsIHZvY8OqIGRlbW9uc3Ryb3UgdW1hIHRlbmTDqm5jaWEgYSBgICtcbiAgICAgICAgYCR7dGhpcy5nZXRTdHlsZVRlbmRlbmN5KHJlY2VudFN0eWxlKX0uYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBOYXJyYXRpdmEgY3VsdHVyYWwgZXNwZWPDrWZpY2FcbiAgICBuYXJyYXRpdmVzLnB1c2godGhpcy5nZXRDdWx0dXJhbFN0eWxlTmFycmF0aXZlKCkpO1xuXG4gICAgcmV0dXJuIG5hcnJhdGl2ZXM7XG4gIH1cblxuICBnZXRTdHlsZUJhc2VkRXZhbHVhdGlvbigpOiB7XG4gICAgc3R5bGU6IHN0cmluZztcbiAgICBldmFsdWF0aW9uOiBudW1iZXI7XG4gICAgZXhwbGFuYXRpb246IHN0cmluZztcbiAgfSB7XG4gICAgY29uc3QgYmFzZUV2YWx1YXRpb24gPSBzdXBlci5ldmFsdWF0ZVBvc2l0aW9uKCk7XG4gICAgY29uc3Qgc3R5bGVNb2RpZmllciA9IHRoaXMuZ2V0U3R5bGVNb2RpZmllcigpO1xuICAgIGNvbnN0IG1vZGlmaWVkRXZhbHVhdGlvbiA9IGJhc2VFdmFsdWF0aW9uICogc3R5bGVNb2RpZmllcjtcblxuICAgIHJldHVybiB7XG4gICAgICBzdHlsZTogdGhpcy5jdXJyZW50U3R5bGUsXG4gICAgICBldmFsdWF0aW9uOiBtb2RpZmllZEV2YWx1YXRpb24sXG4gICAgICBleHBsYW5hdGlvbjogdGhpcy5nZXRTdHlsZUV2YWx1YXRpb24oKVxuICAgIH07XG4gIH1cblxuICB0cmlnZ2VyQ3VsdHVyYWxFdmVudCh0eXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoISh0eXBlIGluIENVTFRVUkFMX0VWRU5UUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGlwbyBkZSBldmVudG8gY3VsdHVyYWwgaW52w6FsaWRvOiAke3R5cGV9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICB0eXBlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZ2V0RXZlbnREZXNjcmlwdGlvbih0eXBlKVxuICAgIH07XG5cbiAgICB0aGlzLmN1bHR1cmFsRXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIHRoaXMuZW1pdEV2ZW50KHtcbiAgICAgIHR5cGU6ICdDVUxUVVJBTF9FVkVOVCcsXG4gICAgICBldmVudDoge1xuICAgICAgICB0eXBlOiBldmVudC50eXBlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXZlbnQuZGVzY3JpcHRpb25cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldEN1bHR1cmFsRXZlbnRIaXN0b3J5KCk6IHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgfVtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuY3VsdHVyYWxFdmVudHNdO1xuICB9XG5cbiAgYW5hbHl6ZVBsYXlTdHlsZSgpOiB7XG4gICAgZG9taW5hbnRTdHlsZTogc3RyaW5nO1xuICAgIHN0eWxlTWV0cmljczogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5jYWxjdWxhdGVTdHlsZU1ldHJpY3MoKTtcbiAgICBjb25zdCBkb21pbmFudFN0eWxlID0gdGhpcy5maW5kRG9taW5hbnRTdHlsZShtZXRyaWNzKTtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0aGlzLmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKG1ldHJpY3MpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRvbWluYW50U3R5bGUsXG4gICAgICBzdHlsZU1ldHJpY3M6IG1ldHJpY3MsXG4gICAgICByZWNvbW1lbmRhdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgYXV4aWxpYXJlcyBwcml2YWRvc1xuICBwcml2YXRlIGFuYWx5emVNb3ZlU3R5bGUobW92ZTogQ2hlc3NNb3ZlKTogdm9pZCB7XG4gICAgY29uc3QgaXNBZ2dyZXNzaXZlID0gdGhpcy5pc0FnZ3Jlc3NpdmVNb3ZlKG1vdmUpO1xuICAgIGNvbnN0IGlzUG9zaXRpb25hbCA9IHRoaXMuaXNQb3NpdGlvbmFsTW92ZShtb3ZlKTtcbiAgICBjb25zdCBpc1RhY3RpY2FsID0gdGhpcy5pc1RhY3RpY2FsTW92ZShtb3ZlKTtcblxuICAgIGlmIChpc0FnZ3Jlc3NpdmUpIHtcbiAgICAgIHRoaXMudHJpZ2dlckN1bHR1cmFsRXZlbnQoJ0FHR1JFU1NJVkVfTU9WRScpO1xuICAgIH0gZWxzZSBpZiAoaXNQb3NpdGlvbmFsKSB7XG4gICAgICB0aGlzLnRyaWdnZXJDdWx0dXJhbEV2ZW50KCdQT1NJVElPTkFMX01PVkUnKTtcbiAgICB9IGVsc2UgaWYgKGlzVGFjdGljYWwpIHtcbiAgICAgIHRoaXMudHJpZ2dlckN1bHR1cmFsRXZlbnQoJ1RBQ1RJQ0FMX01PVkUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVNb3ZlU2VxdWVuY2UobW92ZXM6IENoZXNzTW92ZVtdKTogc3RyaW5nIHtcbiAgICBsZXQgYWdncmVzc2l2ZUNvdW50ID0gMDtcbiAgICBsZXQgcG9zaXRpb25hbENvdW50ID0gMDtcbiAgICBsZXQgdGFjdGljYWxDb3VudCA9IDA7XG5cbiAgICBtb3Zlcy5mb3JFYWNoKG1vdmUgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNBZ2dyZXNzaXZlTW92ZShtb3ZlKSkgYWdncmVzc2l2ZUNvdW50Kys7XG4gICAgICBpZiAodGhpcy5pc1Bvc2l0aW9uYWxNb3ZlKG1vdmUpKSBwb3NpdGlvbmFsQ291bnQrKztcbiAgICAgIGlmICh0aGlzLmlzVGFjdGljYWxNb3ZlKG1vdmUpKSB0YWN0aWNhbENvdW50Kys7XG4gICAgfSk7XG5cbiAgICBjb25zdCB0b3RhbCA9IG1vdmVzLmxlbmd0aDtcbiAgICBjb25zdCBzY29yZXMgPSB7XG4gICAgICBhZ2dyZXNzaXZlOiBhZ2dyZXNzaXZlQ291bnQgLyB0b3RhbCxcbiAgICAgIHBvc2l0aW9uYWw6IHBvc2l0aW9uYWxDb3VudCAvIHRvdGFsLFxuICAgICAgdGFjdGljYWw6IHRhY3RpY2FsQ291bnQgLyB0b3RhbFxuICAgIH07XG5cbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2NvcmVzKVxuICAgICAgLnJlZHVjZSgoYSwgYikgPT4gYVsxXSA+IGJbMV0gPyBhIDogYilbMF07XG4gIH1cblxuICBwcml2YXRlIGlzQWdncmVzc2l2ZU1vdmUobW92ZTogQ2hlc3NNb3ZlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEJvb2xlYW4oXG4gICAgICBtb3ZlLmNhcHR1cmVkIHx8IC8vIENhcHR1cmFcbiAgICAgIHRoaXMuaXNDaGVjaygpIHx8IC8vIFhlcXVlXG4gICAgICB0aGlzLmlzQXR0YWNraW5nQ2VudGVyUGllY2VzKG1vdmUpIC8vIEF0YXF1ZSBhbyBjZW50cm9cbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1Bvc2l0aW9uYWxNb3ZlKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgdGhpcy5pbXByb3Zlc1Bvc2l0aW9uKG1vdmUpIHx8XG4gICAgICB0aGlzLmNvbnRyb2xzSW1wb3J0YW50U3F1YXJlcyhtb3ZlKSB8fFxuICAgICAgdGhpcy5pbXByb3Zlc1Bhd25TdHJ1Y3R1cmUobW92ZSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1RhY3RpY2FsTW92ZShtb3ZlOiBDaGVzc01vdmUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgIHRoaXMuY3JlYXRlc1RocmVhdChtb3ZlKSB8fFxuICAgICAgdGhpcy5jcmVhdGVzRm9yayhtb3ZlKSB8fFxuICAgICAgdGhpcy5jcmVhdGVzUGluKG1vdmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlU3R5bGVNZXRyaWNzKCk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xuICAgIGNvbnN0IG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICBhZ2dyZXNzaXZlOiAwLFxuICAgICAgZGVmZW5zaXZlOiAwLFxuICAgICAgcG9zaXRpb25hbDogMCxcbiAgICAgIHRhY3RpY2FsOiAwXG4gICAgfTtcblxuICAgIHRoaXMucGxheVN0eWxlSGlzdG9yeS5mb3JFYWNoKG1vdmUgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNBZ2dyZXNzaXZlTW92ZShtb3ZlKSkgbWV0cmljcy5hZ2dyZXNzaXZlKys7XG4gICAgICBpZiAodGhpcy5pc1Bvc2l0aW9uYWxNb3ZlKG1vdmUpKSBtZXRyaWNzLnBvc2l0aW9uYWwrKztcbiAgICAgIGlmICh0aGlzLmlzVGFjdGljYWxNb3ZlKG1vdmUpKSBtZXRyaWNzLnRhY3RpY2FsKys7XG4gICAgICAvLyBNb3ZpbWVudG8gZGVmZW5zaXZvIMOpIGNhbGN1bGFkbyBkZSBmb3JtYSBkaWZlcmVudGVcbiAgICAgIGlmICh0aGlzLmlzRGVmZW5zaXZlTW92ZShtb3ZlKSkgbWV0cmljcy5kZWZlbnNpdmUrKztcbiAgICB9KTtcblxuICAgIC8vIE5vcm1hbGl6YSBhcyBtw6l0cmljYXNcbiAgICBjb25zdCB0b3RhbCA9IE9iamVjdC52YWx1ZXMobWV0cmljcykucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gICAgaWYgKHRvdGFsID4gMCkge1xuICAgICAgT2JqZWN0LmtleXMobWV0cmljcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBtZXRyaWNzW2tleV0gPSBtZXRyaWNzW2tleV0gLyB0b3RhbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRyaWNzO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kRG9taW5hbnRTdHlsZShtZXRyaWNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTogc3RyaW5nIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMobWV0cmljcylcbiAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IGFbMV0gPiBiWzFdID8gYSA6IGIpWzBdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhtZXRyaWNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBkb21pbmFudFN0eWxlID0gdGhpcy5maW5kRG9taW5hbnRTdHlsZShtZXRyaWNzKTtcblxuICAgIC8vIFJlY29tZW5kYcOnw7VlcyBiYXNlYWRhcyBubyBlc3RpbG8gZG9taW5hbnRlXG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICBgQ29udGludWUgZXhwbG9yYW5kbyBzZXUgZXN0aWxvICR7ZG9taW5hbnRTdHlsZX0sIG1hcyBjb25zaWRlcmUgdGFtYsOpbTpgXG4gICAgKTtcblxuICAgIC8vIFJlY29tZW5kYcOnw7VlcyBwYXJhIGVxdWlsaWJyYXIgbyBqb2dvXG4gICAgT2JqZWN0LmVudHJpZXMobWV0cmljcylcbiAgICAgIC5maWx0ZXIoKFtzdHlsZV0pID0+IHN0eWxlICE9PSBkb21pbmFudFN0eWxlKVxuICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGEgLSBiKVxuICAgICAgLmZvckVhY2goKFtzdHlsZSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSA8IDAuMikge1xuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgdGhpcy5nZXRTdHlsZVJlY29tbWVuZGF0aW9uKHN0eWxlIGFzIGtleW9mIHR5cGVvZiBtZXRyaWNzKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3R5bGVNb2RpZmllcigpOiBudW1iZXIge1xuICAgIC8vIE1vZGlmaWNhIGEgYXZhbGlhw6fDo28gYmFzZWFkYSBubyBlc3RpbG8gY3VsdHVyYWxcbiAgICBjb25zdCBtb2RpZmllcnM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICBtZWRpZXZhbDogMS4xLCAvLyBWYWxvcml6YSBtYXRlcmlhbCBlIHBvc2nDp8Ojb1xuICAgICAgcmVuYWlzc2FuY2U6IDEuMiwgLy8gVmFsb3JpemEgbW9iaWxpZGFkZSBlIGRlc2Vudm9sdmltZW50b1xuICAgICAgbW9kZXJuOiAxLjAsIC8vIEJhbGFuY2VhZG9cbiAgICAgIGFuY2llbnQ6IDAuOSAvLyBWYWxvcml6YSBzYWNyaWbDrWNpb3MgZSBhdGFxdWVzXG4gICAgfTtcblxuICAgIHJldHVybiBtb2RpZmllcnNbdGhpcy5jdXJyZW50U3R5bGVdIHx8IDEuMDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3R5bGVFdmFsdWF0aW9uKCk6IHN0cmluZyB7XG4gICAgY29uc3QgZXZhbHVhdGlvbiA9IHN1cGVyLmV2YWx1YXRlUG9zaXRpb24oKTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuY3VycmVudFN0eWxlO1xuXG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbWVkaWV2YWwnOlxuICAgICAgICByZXR1cm4gZXZhbHVhdGlvbiA+IDBcbiAgICAgICAgICA/ICdWYW50YWdlbSBtYXRlcmlhbCBlIHBvc2ljaW9uYWwgc8OzbGlkYSdcbiAgICAgICAgICA6ICdOZWNlc3NpZGFkZSBkZSBjb25zb2xpZGFyIHBvc2nDp8OjbyBlIG1hdGVyaWFsJztcbiAgICAgIGNhc2UgJ3JlbmFpc3NhbmNlJzpcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRpb24gPiAwXG4gICAgICAgICAgPyAnRXhjZWxlbnRlIGRlc2Vudm9sdmltZW50byBlIG1vYmlsaWRhZGUnXG4gICAgICAgICAgOiAnT3BvcnR1bmlkYWRlIHBhcmEgbWVsaG9yYXIgZGVzZW52b2x2aW1lbnRvJztcbiAgICAgIGNhc2UgJ21vZGVybic6XG4gICAgICAgIHJldHVybiBldmFsdWF0aW9uID4gMFxuICAgICAgICAgID8gJ1Bvc2nDp8OjbyBlcXVpbGlicmFkYSBjb20gdmFudGFnZW0nXG4gICAgICAgICAgOiAnUG9zacOnw6NvIHJlcXVlciBhdGVuw6fDo28gZXN0cmF0w6lnaWNhJztcbiAgICAgIGNhc2UgJ2FuY2llbnQnOlxuICAgICAgICByZXR1cm4gZXZhbHVhdGlvbiA+IDBcbiAgICAgICAgICA/ICdQb3RlbmNpYWwgcGFyYSBzYWNyaWbDrWNpb3MgZGVjaXNpdm9zJ1xuICAgICAgICAgIDogJ01vbWVudG8gcGFyYSBzYWNyaWbDrWNpb3MgdMOhdGljb3MnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdBdmFsaWHDp8OjbyBwYWRyw6NvIGRhIHBvc2nDp8Ojbyc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdHlsZUNoYXJhY3RlcmlzdGljcyhzdHlsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBhZ2dyZXNzaXZlOiAnYXRhcXVlcyBkaXJldG9zIGUgc2Fjcmlmw61jaW9zJyxcbiAgICAgIGRlZmVuc2l2ZTogJ3PDs2xpZGEgZXN0cnV0dXJhIGRlZmVuc2l2YScsXG4gICAgICBwb3NpdGlvbmFsOiAnY29udHJvbGUgcG9zaWNpb25hbCBlIGVzdHJhdMOpZ2ljbycsXG4gICAgICB0YWN0aWNhbDogJ2NvbWJpbmHDp8O1ZXMgZSB0w6F0aWNhcyBjb21wbGV4YXMnXG4gICAgfTtcblxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3Nbc3R5bGVdIHx8ICdlc3RpbG8gZXF1aWxpYnJhZG8nO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdHlsZVRlbmRlbmN5KHN0eWxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRlbmRlbmNpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBhZ2dyZXNzaXZlOiAnYnVzY2FyIGluaWNpYXRpdmFzIGRlIGF0YXF1ZScsXG4gICAgICBkZWZlbnNpdmU6ICdmb3J0YWxlY2VyIHN1YSBwb3Npw6fDo28nLFxuICAgICAgcG9zaXRpb25hbDogJ2NvbnRyb2xhciBwb250b3MgZXN0cmF0w6lnaWNvcycsXG4gICAgICB0YWN0aWNhbDogJ2NyaWFyIGFtZWHDp2FzIHTDoXRpY2FzJ1xuICAgIH07XG5cbiAgICByZXR1cm4gdGVuZGVuY2llc1tzdHlsZV0gfHwgJ21hbnRlciB1bSBqb2dvIGVxdWlsaWJyYWRvJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RXZlbnREZXNjcmlwdGlvbih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIEFHR1JFU1NJVkVfTU9WRTogJ01vdmltZW50byBhZ3Jlc3Npdm8gZGV0ZWN0YWRvJyxcbiAgICAgIFBPU0lUSU9OQUxfTU9WRTogJ01lbGhvcmlhIHBvc2ljaW9uYWwgc2lnbmlmaWNhdGl2YScsXG4gICAgICBUQUNUSUNBTF9NT1ZFOiAnQ29tYmluYcOnw6NvIHTDoXRpY2EgaWRlbnRpZmljYWRhJyxcbiAgICAgIFNUWUxFX0NIQU5HRUQ6IGBFc3RpbG8gYWx0ZXJhZG8gcGFyYSAke3RoaXMuY3VycmVudFN0eWxlfWAsXG4gICAgICBCUklMTElBTlRfTU9WRTogJ01vdmltZW50byBicmlsaGFudGUgZXhlY3V0YWRvJyxcbiAgICAgIENSSVRJQ0FMX1BPU0lUSU9OOiAnUG9zacOnw6NvIGNyw610aWNhIGFsY2Fuw6dhZGEnXG4gICAgfTtcblxuICAgIHJldHVybiBkZXNjcmlwdGlvbnNbdHlwZV0gfHwgJ0V2ZW50byBjdWx0dXJhbCBvY29ycmlkbyc7XG4gIH1cblxuICBwcml2YXRlIGdldEN1bHR1cmFsU3R5bGVOYXJyYXRpdmUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBuYXJyYXRpdmVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgbWVkaWV2YWw6ICdTZXUgam9nbyByZWZsZXRlIGEgc29saWRleiBlIHRyYWRpw6fDo28gZG8geGFkcmV6IG1lZGlldmFsLicsXG4gICAgICByZW5haXNzYW5jZTogJ1ZvY8OqIGRlbW9uc3RyYSBhIGNyaWF0aXZpZGFkZSBlIGlub3Zhw6fDo28gZG8gcGVyw61vZG8gcmVuYXNjZW50aXN0YS4nLFxuICAgICAgbW9kZXJuOiAnU2V1IGVzdGlsbyBpbmNvcnBvcmEgcHJpbmPDrXBpb3MgbW9kZXJub3MgZGUgZmxleGliaWxpZGFkZSBlIHByYWdtYXRpc21vLicsXG4gICAgICBhbmNpZW50OiAnU3VhIGFib3JkYWdlbSBldm9jYSBhIHNhYmVkb3JpYSBlIHByb2Z1bmRpZGFkZSBkbyB4YWRyZXogYW50aWdvLidcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5hcnJhdGl2ZXNbdGhpcy5jdXJyZW50U3R5bGVdIHx8ICdTZXUgZXN0aWxvIMOpIMO6bmljbyBlIHBlc3NvYWwuJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3R5bGVSZWNvbW1lbmRhdGlvbihzdHlsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBhZ2dyZXNzaXZlOiAnUHJvY3VyZSBvcG9ydHVuaWRhZGVzIGRlIGF0YXF1ZSBkaXJldG8gYW8gcmVpIGFkdmVyc8OhcmlvJyxcbiAgICAgIGRlZmVuc2l2ZTogJ0ZvcnRhbGXDp2Egc3VhIGVzdHJ1dHVyYSBkZSBwZcO1ZXMgZSBzZWd1cmFuw6dhIGRvIHJlaScsXG4gICAgICBwb3NpdGlvbmFsOiAnRm9xdWUgbm8gY29udHJvbGUgZG8gY2VudHJvIGUgcG9zaWNpb25hbWVudG8gZGUgcGXDp2FzJyxcbiAgICAgIHRhY3RpY2FsOiAnQnVzcXVlIGNvbWJpbmHDp8O1ZXMgZSB0cm9jYXMgZmF2b3LDoXZlaXMnXG4gICAgfTtcblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnNbc3R5bGVdIHx8ICdNYW50ZW5oYSB1bSBqb2dvIGVxdWlsaWJyYWRvJztcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIGRlIGF2YWxpYcOnw6NvIGVzcGVjw61maWNvc1xuICBwcml2YXRlIGlzQXR0YWNraW5nQ2VudGVyUGllY2VzKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNlbnRlclNxdWFyZXMgPSBbXG4gICAgICB7IHJvdzogMywgY29sOiAzIH0sIHsgcm93OiAzLCBjb2w6IDQgfSxcbiAgICAgIHsgcm93OiA0LCBjb2w6IDMgfSwgeyByb3c6IDQsIGNvbDogNCB9XG4gICAgXTtcbiAgICByZXR1cm4gY2VudGVyU3F1YXJlcy5zb21lKHNxdWFyZSA9PlxuICAgICAgc3F1YXJlLnJvdyA9PT0gbW92ZS50by5yb3cgJiYgc3F1YXJlLmNvbCA9PT0gbW92ZS50by5jb2xcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBpbXByb3Zlc1Bvc2l0aW9uKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIC8vIFZlcmlmaWNhIHNlIG8gbW92aW1lbnRvIG1lbGhvcmEgYSBwb3Npw6fDo28gZGEgcGXDp2FcbiAgICBjb25zdCBmcm9tU2NvcmUgPSB0aGlzLmdldFNxdWFyZVZhbHVlKG1vdmUuZnJvbSk7XG4gICAgY29uc3QgdG9TY29yZSA9IHRoaXMuZ2V0U3F1YXJlVmFsdWUobW92ZS50byk7XG4gICAgcmV0dXJuIHRvU2NvcmUgPiBmcm9tU2NvcmU7XG4gIH1cblxuICBwcml2YXRlIGNvbnRyb2xzSW1wb3J0YW50U3F1YXJlcyhtb3ZlOiBDaGVzc01vdmUpOiBib29sZWFuIHtcbiAgICAvLyBWZXJpZmljYSBzZSBvIG1vdmltZW50byBjb250cm9sYSBjYXNhcyBpbXBvcnRhbnRlc1xuICAgIGNvbnN0IGF0dGFja3MgPSB0aGlzLmdldFBvc3NpYmxlTW92ZXMobW92ZS50byk7XG4gICAgcmV0dXJuIGF0dGFja3Muc29tZShhdHRhY2sgPT4gdGhpcy5pc0ltcG9ydGFudFNxdWFyZShhdHRhY2sudG8pKTtcbiAgfVxuXG4gIHByaXZhdGUgaW1wcm92ZXNQYXduU3RydWN0dXJlKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGFuw6FsaXNlIGRlIGVzdHJ1dHVyYSBkZSBwZcO1ZXNcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZXNUaHJlYXQobW92ZTogQ2hlc3NNb3ZlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2xvbmUgPSB0aGlzLmNsb25lKCk7XG4gICAgY2xvbmUubWFrZU1vdmUobW92ZS5mcm9tLCBtb3ZlLnRvKTtcbiAgICByZXR1cm4gY2xvbmUuaXNDaGVjaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVzRm9yayhtb3ZlOiBDaGVzc01vdmUpOiBib29sZWFuIHtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnRhciBkZXRlY8Onw6NvIGRlIGdhcmZvXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVzUGluKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGRldGVjw6fDo28gZGUgY3JhdmFkYVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgaXNEZWZlbnNpdmVNb3ZlKG1vdmU6IENoZXNzTW92ZSk6IGJvb2xlYW4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGRldGVjw6fDo28gZGUgbW92aW1lbnRvIGRlZmVuc2l2b1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3F1YXJlVmFsdWUocG9zaXRpb246IENoZXNzUG9zaXRpb24pOiBudW1iZXIge1xuICAgIC8vIFZhbG9yZXMgZGFzIGNhc2FzIGRvIHRhYnVsZWlybyAoY2VudHJvIHZhbGUgbWFpcylcbiAgICBjb25zdCBzcXVhcmVWYWx1ZXMgPSBbXG4gICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICBbMCwgMSwgMSwgMSwgMSwgMSwgMSwgMF0sXG4gICAgICBbMCwgMSwgMiwgMiwgMiwgMiwgMSwgMF0sXG4gICAgICBbMCwgMSwgMiwgMywgMywgMiwgMSwgMF0sXG4gICAgICBbMCwgMSwgMiwgMywgMywgMiwgMSwgMF0sXG4gICAgICBbMCwgMSwgMiwgMiwgMiwgMiwgMSwgMF0sXG4gICAgICBbMCwgMSwgMSwgMSwgMSwgMSwgMSwgMF0sXG4gICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF1cbiAgICBdO1xuXG4gICAgcmV0dXJuIHNxdWFyZVZhbHVlc1twb3NpdGlvbi5yb3ddW3Bvc2l0aW9uLmNvbF07XG4gIH1cblxuICBwcml2YXRlIGlzSW1wb3J0YW50U3F1YXJlKHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3F1YXJlVmFsdWUocG9zaXRpb24pID49IDI7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDaGVzc0VuZ2luZUJhc2UiLCJDVUxUVVJBTF9TVFlMRVMiLCJDVUxUVVJBTF9FVkVOVFMiLCJDdWx0dXJhbENoZXNzRW5naW5lIiwic2V0Q3VsdHVyYWxTdHlsZSIsInN0eWxlIiwiRXJyb3IiLCJjdXJyZW50U3R5bGUiLCJ0cmlnZ2VyQ3VsdHVyYWxFdmVudCIsImdldEN1bHR1cmFsTmFycmF0aXZlIiwibmFycmF0aXZlcyIsInJlY2VudE1vdmVzIiwicGxheVN0eWxlSGlzdG9yeSIsInNsaWNlIiwic3R5bGVBbmFseXNpcyIsImFuYWx5emVQbGF5U3R5bGUiLCJwdXNoIiwiZG9taW5hbnRTdHlsZSIsImdldFN0eWxlQ2hhcmFjdGVyaXN0aWNzIiwibGVuZ3RoIiwicmVjZW50U3R5bGUiLCJhbmFseXplTW92ZVNlcXVlbmNlIiwiZ2V0U3R5bGVUZW5kZW5jeSIsImdldEN1bHR1cmFsU3R5bGVOYXJyYXRpdmUiLCJnZXRTdHlsZUJhc2VkRXZhbHVhdGlvbiIsImJhc2VFdmFsdWF0aW9uIiwiZXZhbHVhdGVQb3NpdGlvbiIsInN0eWxlTW9kaWZpZXIiLCJnZXRTdHlsZU1vZGlmaWVyIiwibW9kaWZpZWRFdmFsdWF0aW9uIiwiZXZhbHVhdGlvbiIsImV4cGxhbmF0aW9uIiwiZ2V0U3R5bGVFdmFsdWF0aW9uIiwidHlwZSIsImV2ZW50IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImRlc2NyaXB0aW9uIiwiZ2V0RXZlbnREZXNjcmlwdGlvbiIsImN1bHR1cmFsRXZlbnRzIiwiZW1pdEV2ZW50IiwiZ2V0Q3VsdHVyYWxFdmVudEhpc3RvcnkiLCJtZXRyaWNzIiwiY2FsY3VsYXRlU3R5bGVNZXRyaWNzIiwiZmluZERvbWluYW50U3R5bGUiLCJyZWNvbW1lbmRhdGlvbnMiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyIsInN0eWxlTWV0cmljcyIsImFuYWx5emVNb3ZlU3R5bGUiLCJtb3ZlIiwiaXNBZ2dyZXNzaXZlIiwiaXNBZ2dyZXNzaXZlTW92ZSIsImlzUG9zaXRpb25hbCIsImlzUG9zaXRpb25hbE1vdmUiLCJpc1RhY3RpY2FsIiwiaXNUYWN0aWNhbE1vdmUiLCJtb3ZlcyIsImFnZ3Jlc3NpdmVDb3VudCIsInBvc2l0aW9uYWxDb3VudCIsInRhY3RpY2FsQ291bnQiLCJmb3JFYWNoIiwidG90YWwiLCJzY29yZXMiLCJhZ2dyZXNzaXZlIiwicG9zaXRpb25hbCIsInRhY3RpY2FsIiwiT2JqZWN0IiwiZW50cmllcyIsInJlZHVjZSIsImEiLCJiIiwiQm9vbGVhbiIsImNhcHR1cmVkIiwiaXNDaGVjayIsImlzQXR0YWNraW5nQ2VudGVyUGllY2VzIiwiaW1wcm92ZXNQb3NpdGlvbiIsImNvbnRyb2xzSW1wb3J0YW50U3F1YXJlcyIsImltcHJvdmVzUGF3blN0cnVjdHVyZSIsImNyZWF0ZXNUaHJlYXQiLCJjcmVhdGVzRm9yayIsImNyZWF0ZXNQaW4iLCJkZWZlbnNpdmUiLCJpc0RlZmVuc2l2ZU1vdmUiLCJ2YWx1ZXMiLCJrZXlzIiwia2V5IiwiZmlsdGVyIiwic29ydCIsInZhbHVlIiwiZ2V0U3R5bGVSZWNvbW1lbmRhdGlvbiIsIm1vZGlmaWVycyIsIm1lZGlldmFsIiwicmVuYWlzc2FuY2UiLCJtb2Rlcm4iLCJhbmNpZW50IiwiY2hhcmFjdGVyaXN0aWNzIiwidGVuZGVuY2llcyIsImRlc2NyaXB0aW9ucyIsIkFHR1JFU1NJVkVfTU9WRSIsIlBPU0lUSU9OQUxfTU9WRSIsIlRBQ1RJQ0FMX01PVkUiLCJTVFlMRV9DSEFOR0VEIiwiQlJJTExJQU5UX01PVkUiLCJDUklUSUNBTF9QT1NJVElPTiIsImNlbnRlclNxdWFyZXMiLCJyb3ciLCJjb2wiLCJzb21lIiwic3F1YXJlIiwidG8iLCJmcm9tU2NvcmUiLCJnZXRTcXVhcmVWYWx1ZSIsImZyb20iLCJ0b1Njb3JlIiwiYXR0YWNrcyIsImdldFBvc3NpYmxlTW92ZXMiLCJhdHRhY2siLCJpc0ltcG9ydGFudFNxdWFyZSIsImNsb25lIiwibWFrZU1vdmUiLCJwb3NpdGlvbiIsInNxdWFyZVZhbHVlcyIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsIm9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/shared/engine/CulturalChessEngine.ts\n"));

/***/ }),

/***/ "./src/shared/engine/monitoring/ArquimaxMonitor.ts":
/*!*********************************************************!*\
  !*** ./src/shared/engine/monitoring/ArquimaxMonitor.ts ***!
  \*********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArquimaxMonitor\": function() { return /* binding */ ArquimaxMonitor; }\n/* harmony export */ });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"./node_modules/next/dist/compiled/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"./node_modules/next/dist/build/polyfills/process.js\");\n\n/**\n * Sistema de monitoramento ARQUIMAX para o motor de xadrez.\n * \n * Responsvel por:\n * - Coleta de mtricas em tempo real\n * - Verificaes de sade do sistema\n * - Monitoramento de performance\n * - Logs de eventos\n */ class ArquimaxMonitor {\n    /**\n   * Registra um evento do motor de xadrez.\n   * \n   * @param event - Evento a ser registrado\n   */ recordEvent(event) {\n        this.eventEmitter.emit(\"engine-event\", event);\n        if (event.type === \"MOVE_MADE\") {\n            this.moveCount++;\n            this.updateMovesPerSecond();\n        }\n    }\n    /**\n   * Realiza verificao de sade do sistema.\n   * \n   * @returns Status atual de sade do sistema\n   */ checkHealth() {\n        const now = Date.now();\n        // Atualiza mtricas apenas se passou o intervalo definido\n        if (now - this.lastHealthCheck >= this.healthCheckInterval) {\n            this.updateMetrics();\n            this.lastHealthCheck = now;\n        }\n        return {\n            status: this.evaluateHealth(),\n            metrics: this.metrics,\n            timestamp: now\n        };\n    }\n    /**\n   * Obtm mtricas atuais do sistema.\n   * \n   * @returns Mtricas coletadas\n   */ getMetrics() {\n        return {\n            ...this.metrics\n        };\n    }\n    recordCacheAccess(hit) {\n        this.cacheAccesses++;\n        if (hit) this.cacheHits++;\n        this.metrics.cacheHitRate = this.cacheHits / this.cacheAccesses;\n    }\n    /**\n   * Registra tempo de pensamento para um movimento.\n   * \n   * @param thinkingTime - Tempo em millisegundos\n   */ recordThinkingTime(thinkingTime) {\n        const current = this.metrics.averageThinkingTime;\n        this.metrics.averageThinkingTime = (current * this.moveCount + thinkingTime) / (this.moveCount + 1);\n    }\n    updateMovesPerSecond() {\n        const elapsedSeconds = (Date.now() - this.startTime) / 1000;\n        this.metrics.movesPerSecond = this.moveCount / elapsedSeconds;\n    }\n    async updateMetrics() {\n        // Atualiza uso de memria\n        if (process.memoryUsage) {\n            const { heapUsed  } = process.memoryUsage();\n            this.metrics.memoryUsage = heapUsed / 1024 / 1024; // Em MB\n        }\n        // Atualiza uso de CPU (implementao simplificada)\n        this.metrics.cpuUsage = await this.measureCPUUsage();\n    }\n    evaluateHealth() {\n        // Critrios de sade\n        const memoryThreshold = 512; // MB\n        const cpuThreshold = 80; // %\n        const moveRateThreshold = 0.5; // moves/sec\n        if (this.metrics.memoryUsage > memoryThreshold || this.metrics.cpuUsage > cpuThreshold) {\n            return \"unhealthy\";\n        }\n        // Sistema recm iniciado est saudvel por padro\n        if (this.moveCount === 0) {\n            return \"healthy\";\n        }\n        if (this.metrics.movesPerSecond < moveRateThreshold || this.metrics.cacheHitRate < 0.3 && this.moveCount > 10) {\n            return \"degraded\";\n        }\n        return \"healthy\";\n    }\n    async measureCPUUsage() {\n        // Implementao simplificada de medio de CPU\n        // Em uma implementao real, usaramos mtricas do sistema operacional\n        return new Promise((resolve)=>{\n            setTimeout(()=>{\n                // Simula medio de CPU entre 0-100%\n                resolve(Math.random() * 100);\n            }, 100);\n        });\n    }\n    constructor(){\n        /**\n   * Registra uso de cache.\n   * \n   * @param hit - true se houve hit no cache, false se houve miss\n   */ this.cacheHits = 0;\n        this.cacheAccesses = 0;\n        this.metrics = {\n            movesPerSecond: 0,\n            averageThinkingTime: 0,\n            cacheHitRate: 0,\n            memoryUsage: 0,\n            cpuUsage: 0\n        };\n        this.eventEmitter = new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\n        this.startTime = Date.now();\n        this.moveCount = 0;\n        this.lastHealthCheck = Date.now();\n        this.healthCheckInterval = 5000; // 5 segundos\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2hhcmVkL2VuZ2luZS9tb25pdG9yaW5nL0FycXVpbWF4TW9uaXRvci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDO0FBR3RDOzs7Ozs7OztDQVFDLEdBQ00sTUFBTUM7SUF1Qlg7Ozs7R0FJQyxHQUNELFlBQW1CRSxLQUFrQixFQUFRO1FBQzNDLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxJQUFJLENBQUMsZ0JBQWdCRjtRQUV2QyxJQUFJQSxNQUFNRyxJQUFJLEtBQUssYUFBYTtZQUM5QixJQUFJLENBQUNDLFNBQVM7WUFDZCxJQUFJLENBQUNDLG9CQUFvQjtRQUMzQixDQUFDO0lBQ0g7SUFFQTs7OztHQUlDLEdBQ0QsY0FBbUM7UUFDakMsTUFBTUUsTUFBTUMsS0FBS0QsR0FBRztRQUVwQiwwREFBMEQ7UUFDMUQsSUFBSUEsTUFBTSxJQUFJLENBQUNFLGVBQWUsSUFBSSxJQUFJLENBQUNDLG1CQUFtQixFQUFFO1lBQzFELElBQUksQ0FBQ0MsYUFBYTtZQUNsQixJQUFJLENBQUNGLGVBQWUsR0FBR0Y7UUFDekIsQ0FBQztRQUVELE9BQU87WUFDTEssUUFBUSxJQUFJLENBQUNDLGNBQWM7WUFDM0JDLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCQyxXQUFXUjtRQUNiO0lBQ0Y7SUFFQTs7OztHQUlDLEdBQ0QsYUFBbUM7UUFDakMsT0FBTztZQUFFLEdBQUcsSUFBSSxDQUFDTyxPQUFPO1FBQUM7SUFDM0I7SUFVT0csa0JBQWtCQyxHQUFZLEVBQVE7UUFDM0MsSUFBSSxDQUFDQyxhQUFhO1FBQ2xCLElBQUlELEtBQUssSUFBSSxDQUFDRSxTQUFTO1FBQ3ZCLElBQUksQ0FBQ04sT0FBTyxDQUFDTyxZQUFZLEdBQUcsSUFBSSxDQUFDRCxTQUFTLEdBQUcsSUFBSSxDQUFDRCxhQUFhO0lBQ2pFO0lBRUE7Ozs7R0FJQyxHQUNELG1CQUEwQkksWUFBb0IsRUFBUTtRQUNwRCxNQUFNQyxVQUFVLElBQUksQ0FBQ1YsT0FBTyxDQUFDVyxtQkFBbUI7UUFDaEQsSUFBSSxDQUFDWCxPQUFPLENBQUNXLG1CQUFtQixHQUM5QixDQUFDRCxVQUFVLElBQUksQ0FBQ3BCLFNBQVMsR0FBR21CLFlBQVcsSUFBTSxLQUFJLENBQUNuQixTQUFTLEdBQUc7SUFDbEU7SUFFUUMsdUJBQTZCO1FBQ25DLE1BQU1xQixpQkFBaUIsQ0FBQ2xCLEtBQUtELEdBQUcsS0FBSyxJQUFJLENBQUNvQixTQUFTLElBQUk7UUFDdkQsSUFBSSxDQUFDYixPQUFPLENBQUNjLGNBQWMsR0FBRyxJQUFJLENBQUN4QixTQUFTLEdBQUdzQjtJQUNqRDtJQUVBLE1BQWNmLGdCQUErQjtRQUMzQywwQkFBMEI7UUFDMUIsSUFBSWtCLE9BQU9BLENBQUNDLFdBQVcsRUFBRTtZQUN2QixNQUFNLEVBQUVDLFNBQVEsRUFBRSxHQUFHRixPQUFPQSxDQUFDQyxXQUFXO1lBQ3hDLElBQUksQ0FBQ2hCLE9BQU8sQ0FBQ2dCLFdBQVcsR0FBR0MsV0FBVyxPQUFPLE1BQU0sUUFBUTtRQUM3RCxDQUFDO1FBRUQsbURBQW1EO1FBQ25ELElBQUksQ0FBQ2pCLE9BQU8sQ0FBQ2tCLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQ0MsZUFBZTtJQUNwRDtJQUVRcEIsaUJBQXVEO1FBQzdELHFCQUFxQjtRQUNyQixNQUFNcUIsa0JBQWtCLEtBQUssS0FBSztRQUNsQyxNQUFNQyxlQUFlLElBQUksSUFBSTtRQUM3QixNQUFNQyxvQkFBb0IsS0FBSyxZQUFZO1FBRTNDLElBQ0UsSUFBSSxDQUFDdEIsT0FBTyxDQUFDZ0IsV0FBVyxHQUFHSSxtQkFDM0IsSUFBSSxDQUFDcEIsT0FBTyxDQUFDa0IsUUFBUSxHQUFHRyxjQUN4QjtZQUNBLE9BQU87UUFDVCxDQUFDO1FBRUQsa0RBQWtEO1FBQ2xELElBQUksSUFBSSxDQUFDL0IsU0FBUyxLQUFLLEdBQUc7WUFDeEIsT0FBTztRQUNULENBQUM7UUFFRCxJQUNFLElBQUksQ0FBQ1UsT0FBTyxDQUFDYyxjQUFjLEdBQUdRLHFCQUM3QixJQUFJLENBQUN0QixPQUFPLENBQUNPLFlBQVksR0FBRyxPQUFPLElBQUksQ0FBQ2pCLFNBQVMsR0FBRyxJQUNyRDtZQUNBLE9BQU87UUFDVCxDQUFDO1FBRUQsT0FBTztJQUNUO0lBRUEsTUFBYzZCLGtCQUFtQztRQUMvQywrQ0FBK0M7UUFDL0MsdUVBQXVFO1FBQ3ZFLE9BQU8sSUFBSUksUUFBUSxDQUFDQyxVQUFZO1lBQzlCQyxXQUFXLElBQU07Z0JBQ2YscUNBQXFDO2dCQUNyQ0QsUUFBUUUsS0FBS0MsTUFBTSxLQUFLO1lBQzFCLEdBQUc7UUFDTDtJQUNGO0lBeklBQyxhQUFjO1FBMkRkOzs7O0dBSUMsUUFDT3RCLFlBQW9CO2FBQ3BCRCxnQkFBd0I7UUFoRTlCLElBQUksQ0FBQ0wsT0FBTyxHQUFHO1lBQ2JjLGdCQUFnQjtZQUNoQkgscUJBQXFCO1lBQ3JCSixjQUFjO1lBQ2RTLGFBQWE7WUFDYkUsVUFBVTtRQUNaO1FBQ0EsSUFBSSxDQUFDL0IsWUFBWSxHQUFHLElBQUlKLGdEQUFZQTtRQUNwQyxJQUFJLENBQUM4QixTQUFTLEdBQUduQixLQUFLRCxHQUFHO1FBQ3pCLElBQUksQ0FBQ0gsU0FBUyxHQUFHO1FBQ2pCLElBQUksQ0FBQ0ssZUFBZSxHQUFHRCxLQUFLRCxHQUFHO1FBQy9CLElBQUksQ0FBQ0csbUJBQW1CLEdBQUcsTUFBTSxhQUFhO0lBQ2hEO0FBNkhGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3NoYXJlZC9lbmdpbmUvbW9uaXRvcmluZy9BcnF1aW1heE1vbml0b3IudHM/ZDgxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgRW5naW5lRXZlbnQsIEVuZ2luZU1ldHJpY3MsIEhlYWx0aFN0YXR1cyB9IGZyb20gJy4uLy4uL3R5cGVzL2VuZ2luZSc7XG5cbi8qKlxuICogU2lzdGVtYSBkZSBtb25pdG9yYW1lbnRvIEFSUVVJTUFYIHBhcmEgbyBtb3RvciBkZSB4YWRyZXouXG4gKiBcbiAqIFJlc3BvbnPDoXZlbCBwb3I6XG4gKiAtIENvbGV0YSBkZSBtw6l0cmljYXMgZW0gdGVtcG8gcmVhbFxuICogLSBWZXJpZmljYcOnw7VlcyBkZSBzYcO6ZGUgZG8gc2lzdGVtYVxuICogLSBNb25pdG9yYW1lbnRvIGRlIHBlcmZvcm1hbmNlXG4gKiAtIExvZ3MgZGUgZXZlbnRvc1xuICovXG5leHBvcnQgY2xhc3MgQXJxdWltYXhNb25pdG9yIHtcbiAgcHJpdmF0ZSBtZXRyaWNzOiBFbmdpbmVNZXRyaWNzO1xuICBwcml2YXRlIGV2ZW50RW1pdHRlcjogRXZlbnRFbWl0dGVyO1xuICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyO1xuICBwcml2YXRlIG1vdmVDb3VudDogbnVtYmVyO1xuICBwcml2YXRlIGxhc3RIZWFsdGhDaGVjazogbnVtYmVyO1xuICBwcml2YXRlIGhlYWx0aENoZWNrSW50ZXJ2YWw6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICBtb3Zlc1BlclNlY29uZDogMCxcbiAgICAgIGF2ZXJhZ2VUaGlua2luZ1RpbWU6IDAsXG4gICAgICBjYWNoZUhpdFJhdGU6IDAsXG4gICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgIGNwdVVzYWdlOiAwXG4gICAgfTtcbiAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5tb3ZlQ291bnQgPSAwO1xuICAgIHRoaXMubGFzdEhlYWx0aENoZWNrID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmhlYWx0aENoZWNrSW50ZXJ2YWwgPSA1MDAwOyAvLyA1IHNlZ3VuZG9zXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgdW0gZXZlbnRvIGRvIG1vdG9yIGRlIHhhZHJlei5cbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEV2ZW50byBhIHNlciByZWdpc3RyYWRvXG4gICAqL1xuICBwdWJsaWMgcmVjb3JkRXZlbnQoZXZlbnQ6IEVuZ2luZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnZW5naW5lLWV2ZW50JywgZXZlbnQpO1xuICAgIFxuICAgIGlmIChldmVudC50eXBlID09PSAnTU9WRV9NQURFJykge1xuICAgICAgdGhpcy5tb3ZlQ291bnQrKztcbiAgICAgIHRoaXMudXBkYXRlTW92ZXNQZXJTZWNvbmQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVhbGl6YSB2ZXJpZmljYcOnw6NvIGRlIHNhw7pkZSBkbyBzaXN0ZW1hLlxuICAgKiBcbiAgICogQHJldHVybnMgU3RhdHVzIGF0dWFsIGRlIHNhw7pkZSBkbyBzaXN0ZW1hXG4gICAqL1xuICBwdWJsaWMgY2hlY2tIZWFsdGgoKTogSGVhbHRoU3RhdHVzIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIC8vIEF0dWFsaXphIG3DqXRyaWNhcyBhcGVuYXMgc2UgcGFzc291IG8gaW50ZXJ2YWxvIGRlZmluaWRvXG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdEhlYWx0aENoZWNrID49IHRoaXMuaGVhbHRoQ2hlY2tJbnRlcnZhbCkge1xuICAgICAgdGhpcy51cGRhdGVNZXRyaWNzKCk7XG4gICAgICB0aGlzLmxhc3RIZWFsdGhDaGVjayA9IG5vdztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiB0aGlzLmV2YWx1YXRlSGVhbHRoKCksXG4gICAgICBtZXRyaWNzOiB0aGlzLm1ldHJpY3MsXG4gICAgICB0aW1lc3RhbXA6IG5vd1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG3DqXRyaWNhcyBhdHVhaXMgZG8gc2lzdGVtYS5cbiAgICogXG4gICAqIEByZXR1cm5zIE3DqXRyaWNhcyBjb2xldGFkYXNcbiAgICovXG4gIHB1YmxpYyBnZXRNZXRyaWNzKCk6IEVuZ2luZU1ldHJpY3Mge1xuICAgIHJldHVybiB7IC4uLnRoaXMubWV0cmljcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdHJhIHVzbyBkZSBjYWNoZS5cbiAgICogXG4gICAqIEBwYXJhbSBoaXQgLSB0cnVlIHNlIGhvdXZlIGhpdCBubyBjYWNoZSwgZmFsc2Ugc2UgaG91dmUgbWlzc1xuICAgKi9cbiAgcHJpdmF0ZSBjYWNoZUhpdHM6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgY2FjaGVBY2Nlc3NlczogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVjb3JkQ2FjaGVBY2Nlc3MoaGl0OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZUFjY2Vzc2VzKys7XG4gICAgaWYgKGhpdCkgdGhpcy5jYWNoZUhpdHMrKztcbiAgICB0aGlzLm1ldHJpY3MuY2FjaGVIaXRSYXRlID0gdGhpcy5jYWNoZUhpdHMgLyB0aGlzLmNhY2hlQWNjZXNzZXM7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgdGVtcG8gZGUgcGVuc2FtZW50byBwYXJhIHVtIG1vdmltZW50by5cbiAgICogXG4gICAqIEBwYXJhbSB0aGlua2luZ1RpbWUgLSBUZW1wbyBlbSBtaWxsaXNlZ3VuZG9zXG4gICAqL1xuICBwdWJsaWMgcmVjb3JkVGhpbmtpbmdUaW1lKHRoaW5raW5nVGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMubWV0cmljcy5hdmVyYWdlVGhpbmtpbmdUaW1lO1xuICAgIHRoaXMubWV0cmljcy5hdmVyYWdlVGhpbmtpbmdUaW1lID0gXG4gICAgICAoY3VycmVudCAqIHRoaXMubW92ZUNvdW50ICsgdGhpbmtpbmdUaW1lKSAvICh0aGlzLm1vdmVDb3VudCArIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNb3Zlc1BlclNlY29uZCgpOiB2b2lkIHtcbiAgICBjb25zdCBlbGFwc2VkU2Vjb25kcyA9IChEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWUpIC8gMTAwMDtcbiAgICB0aGlzLm1ldHJpY3MubW92ZXNQZXJTZWNvbmQgPSB0aGlzLm1vdmVDb3VudCAvIGVsYXBzZWRTZWNvbmRzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVNZXRyaWNzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEF0dWFsaXphIHVzbyBkZSBtZW3Ds3JpYVxuICAgIGlmIChwcm9jZXNzLm1lbW9yeVVzYWdlKSB7XG4gICAgICBjb25zdCB7IGhlYXBVc2VkIH0gPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCk7XG4gICAgICB0aGlzLm1ldHJpY3MubWVtb3J5VXNhZ2UgPSBoZWFwVXNlZCAvIDEwMjQgLyAxMDI0OyAvLyBFbSBNQlxuICAgIH1cblxuICAgIC8vIEF0dWFsaXphIHVzbyBkZSBDUFUgKGltcGxlbWVudGHDp8OjbyBzaW1wbGlmaWNhZGEpXG4gICAgdGhpcy5tZXRyaWNzLmNwdVVzYWdlID0gYXdhaXQgdGhpcy5tZWFzdXJlQ1BVVXNhZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgZXZhbHVhdGVIZWFsdGgoKTogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICd1bmhlYWx0aHknIHtcbiAgICAvLyBDcml0w6lyaW9zIGRlIHNhw7pkZVxuICAgIGNvbnN0IG1lbW9yeVRocmVzaG9sZCA9IDUxMjsgLy8gTUJcbiAgICBjb25zdCBjcHVUaHJlc2hvbGQgPSA4MDsgLy8gJVxuICAgIGNvbnN0IG1vdmVSYXRlVGhyZXNob2xkID0gMC41OyAvLyBtb3Zlcy9zZWNcblxuICAgIGlmIChcbiAgICAgIHRoaXMubWV0cmljcy5tZW1vcnlVc2FnZSA+IG1lbW9yeVRocmVzaG9sZCB8fFxuICAgICAgdGhpcy5tZXRyaWNzLmNwdVVzYWdlID4gY3B1VGhyZXNob2xkXG4gICAgKSB7XG4gICAgICByZXR1cm4gJ3VuaGVhbHRoeSc7XG4gICAgfVxuXG4gICAgLy8gU2lzdGVtYSByZWPDqW0gaW5pY2lhZG8gZXN0w6Egc2F1ZMOhdmVsIHBvciBwYWRyw6NvXG4gICAgaWYgKHRoaXMubW92ZUNvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm4gJ2hlYWx0aHknO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMubWV0cmljcy5tb3Zlc1BlclNlY29uZCA8IG1vdmVSYXRlVGhyZXNob2xkIHx8XG4gICAgICAodGhpcy5tZXRyaWNzLmNhY2hlSGl0UmF0ZSA8IDAuMyAmJiB0aGlzLm1vdmVDb3VudCA+IDEwKVxuICAgICkge1xuICAgICAgcmV0dXJuICdkZWdyYWRlZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdoZWFsdGh5JztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWVhc3VyZUNQVVVzYWdlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgLy8gSW1wbGVtZW50YcOnw6NvIHNpbXBsaWZpY2FkYSBkZSBtZWRpw6fDo28gZGUgQ1BVXG4gICAgLy8gRW0gdW1hIGltcGxlbWVudGHDp8OjbyByZWFsLCB1c2Fyw61hbW9zIG3DqXRyaWNhcyBkbyBzaXN0ZW1hIG9wZXJhY2lvbmFsXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gU2ltdWxhIG1lZGnDp8OjbyBkZSBDUFUgZW50cmUgMC0xMDAlXG4gICAgICAgIHJlc29sdmUoTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwiQXJxdWltYXhNb25pdG9yIiwicmVjb3JkRXZlbnQiLCJldmVudCIsImV2ZW50RW1pdHRlciIsImVtaXQiLCJ0eXBlIiwibW92ZUNvdW50IiwidXBkYXRlTW92ZXNQZXJTZWNvbmQiLCJjaGVja0hlYWx0aCIsIm5vdyIsIkRhdGUiLCJsYXN0SGVhbHRoQ2hlY2siLCJoZWFsdGhDaGVja0ludGVydmFsIiwidXBkYXRlTWV0cmljcyIsInN0YXR1cyIsImV2YWx1YXRlSGVhbHRoIiwibWV0cmljcyIsInRpbWVzdGFtcCIsImdldE1ldHJpY3MiLCJyZWNvcmRDYWNoZUFjY2VzcyIsImhpdCIsImNhY2hlQWNjZXNzZXMiLCJjYWNoZUhpdHMiLCJjYWNoZUhpdFJhdGUiLCJyZWNvcmRUaGlua2luZ1RpbWUiLCJ0aGlua2luZ1RpbWUiLCJjdXJyZW50IiwiYXZlcmFnZVRoaW5raW5nVGltZSIsImVsYXBzZWRTZWNvbmRzIiwic3RhcnRUaW1lIiwibW92ZXNQZXJTZWNvbmQiLCJwcm9jZXNzIiwibWVtb3J5VXNhZ2UiLCJoZWFwVXNlZCIsImNwdVVzYWdlIiwibWVhc3VyZUNQVVVzYWdlIiwibWVtb3J5VGhyZXNob2xkIiwiY3B1VGhyZXNob2xkIiwibW92ZVJhdGVUaHJlc2hvbGQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJNYXRoIiwicmFuZG9tIiwiY29uc3RydWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/shared/engine/monitoring/ArquimaxMonitor.ts\n"));

/***/ }),

/***/ "./src/shared/utils/chess.ts":
/*!***********************************!*\
  !*** ./src/shared/utils/chess.ts ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"algebraicToCoords\": function() { return /* binding */ algebraicToCoords; },\n/* harmony export */   \"coordsToAlgebraic\": function() { return /* binding */ coordsToAlgebraic; },\n/* harmony export */   \"formatMove\": function() { return /* binding */ formatMove; },\n/* harmony export */   \"getAllSquares\": function() { return /* binding */ getAllSquares; },\n/* harmony export */   \"getHighlightedSquares\": function() { return /* binding */ getHighlightedSquares; },\n/* harmony export */   \"getMoveDirection\": function() { return /* binding */ getMoveDirection; },\n/* harmony export */   \"getPathBetween\": function() { return /* binding */ getPathBetween; },\n/* harmony export */   \"getPieceSymbol\": function() { return /* binding */ getPieceSymbol; },\n/* harmony export */   \"getSquareColor\": function() { return /* binding */ getSquareColor; },\n/* harmony export */   \"getSquareDistance\": function() { return /* binding */ getSquareDistance; },\n/* harmony export */   \"isDiagonalMove\": function() { return /* binding */ isDiagonalMove; },\n/* harmony export */   \"isOrthogonalMove\": function() { return /* binding */ isOrthogonalMove; },\n/* harmony export */   \"isSamePosition\": function() { return /* binding */ isSamePosition; },\n/* harmony export */   \"isValidPosition\": function() { return /* binding */ isValidPosition; }\n/* harmony export */ });\n/* harmony import */ var _constants_game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants/game */ \"./src/shared/constants/game.ts\");\n\n/**\n * Converte coordenadas algbricas (ex: \"e4\") para coordenadas internas (row, col)\n */ function algebraicToCoords(square) {\n    const col = square.charCodeAt(0) - \"a\".charCodeAt(0);\n    const row = _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE - parseInt(square[1]);\n    return {\n        row,\n        col\n    };\n}\n/**\n * Converte coordenadas internas (row, col) para notao algbrica (ex: \"e4\")\n */ function coordsToAlgebraic(position) {\n    const { row , col  } = position;\n    const file = String.fromCharCode(\"a\".charCodeAt(0) + col);\n    const rank = _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE - row;\n    return \"\".concat(file).concat(rank);\n}\n/**\n * Verifica se uma posio est dentro do tabuleiro\n */ function isValidPosition(position) {\n    const { row , col  } = position;\n    return row >= 0 && row < _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE && col >= 0 && col < _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE;\n}\n/**\n * Compara duas posies\n */ function isSamePosition(a, b) {\n    return a.row === b.row && a.col === b.col;\n}\n/**\n * Retorna a cor de uma casa do tabuleiro\n */ function getSquareColor(row, col) {\n    return (row + col) % 2 === 0 ? \"light\" : \"dark\";\n}\n/**\n * Retorna o smbolo Unicode para uma pea\n */ function getPieceSymbol(piece) {\n    const symbol = piece.color === \"white\" ? piece.type.toUpperCase() : piece.type.toLowerCase();\n    return _constants_game__WEBPACK_IMPORTED_MODULE_0__.PIECE_SYMBOLS[symbol] || \"\";\n}\n/**\n * Gera array com todas as posies do tabuleiro\n */ function getAllSquares() {\n    const squares = [];\n    for(let row = 0; row < _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE; row++){\n        for(let col = 0; col < _constants_game__WEBPACK_IMPORTED_MODULE_0__.BOARD_SIZE; col++){\n            squares.push({\n                row,\n                col\n            });\n        }\n    }\n    return squares;\n}\n/**\n * Retorna as coordenadas das casas destacadas para um movimento\n */ function getHighlightedSquares(selectedSquare, lastMove, possibleMoves) {\n    return {\n        selected: selectedSquare,\n        lastMove,\n        possible: possibleMoves\n    };\n}\n/**\n * Retorna a distncia entre duas casas\n */ function getSquareDistance(a, b) {\n    const rowDiff = Math.abs(a.row - b.row);\n    const colDiff = Math.abs(a.col - b.col);\n    return Math.max(rowDiff, colDiff);\n}\n/**\n * Retorna a direo do movimento entre duas casas\n */ function getMoveDirection(from, to) {\n    const rowDir = Math.sign(to.row - from.row);\n    const colDir = Math.sign(to.col - from.col);\n    return {\n        rowDir,\n        colDir\n    };\n}\n/**\n * Verifica se um movimento  diagonal\n */ function isDiagonalMove(from, to) {\n    const rowDiff = Math.abs(to.row - from.row);\n    const colDiff = Math.abs(to.col - from.col);\n    return rowDiff === colDiff && rowDiff > 0;\n}\n/**\n * Verifica se um movimento  ortogonal (horizontal ou vertical)\n */ function isOrthogonalMove(from, to) {\n    return from.row === to.row && from.col !== to.col || from.col === to.col && from.row !== to.row;\n}\n/**\n * Calcula o caminho entre duas casas (para verificar obstrues)\n */ function getPathBetween(from, to) {\n    const path = [];\n    const { rowDir , colDir  } = getMoveDirection(from, to);\n    let { row , col  } = from;\n    while(row !== to.row || col !== to.col){\n        row += rowDir;\n        col += colDir;\n        if (row === to.row && col === to.col) break;\n        path.push({\n            row,\n            col\n        });\n    }\n    return path;\n}\n/**\n * Formata um movimento para notao algbrica\n */ function formatMove(from, to, piece, capture, promotion) {\n    const fromSquare = coordsToAlgebraic(from);\n    const toSquare = coordsToAlgebraic(to);\n    const pieceSymbol = piece.type.toUpperCase();\n    const captureSymbol = capture ? \"x\" : \"\";\n    const promotionSymbol = promotion ? \"=\".concat(promotion.toUpperCase()) : \"\";\n    return \"\".concat(pieceSymbol).concat(fromSquare).concat(captureSymbol).concat(toSquare).concat(promotionSymbol);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDO1lBQUV0QjtZQUFLRjtRQUFJO0lBQ3ZCO0lBRUEsT0FBTzhDO0FBQ1QsQ0FBQztBQUVEOztDQUVDLEdBQ00sU0FBU0MsV0FDZFQsSUFBbUIsRUFDbkJDLEVBQWlCLEVBQ2pCdkIsS0FBaUIsRUFDakJnQyxPQUFpQixFQUNqQkMsU0FBa0IsRUFDVjtJQUNSLE1BQU1DLGFBQWE5QyxrQkFBa0JrQztJQUNyQyxNQUFNYSxXQUFXL0Msa0JBQWtCbUM7SUFDbkMsTUFBTWEsY0FBY3BDLE1BQU1HLElBQUksQ0FBQ0MsV0FBVztJQUMxQyxNQUFNaUMsZ0JBQWdCTCxVQUFVLE1BQU0sRUFBRTtJQUN4QyxNQUFNTSxrQkFBa0JMLFlBQVksSUFBNEIsT0FBeEJBLFVBQVU3QixXQUFXLE1BQU8sRUFBRTtJQUV0RSxPQUFPLEdBQWlCOEIsT0FBZEUsYUFBMkJDLE9BQWJILFlBQTZCQyxPQUFoQkUsZUFBMkJDLE9BQVhILFVBQTJCLE9BQWhCRztBQUNsRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9zaGFyZWQvdXRpbHMvY2hlc3MudHM/N2NmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGVzc1Bvc2l0aW9uLCBDaGVzc1BpZWNlIH0gZnJvbSAnLi4vdHlwZXMvY2hlc3MnO1xuaW1wb3J0IHsgQk9BUkRfU0laRSwgUElFQ0VfU1lNQk9MUyB9IGZyb20gJy4uL2NvbnN0YW50cy9nYW1lJztcblxuLyoqXG4gKiBDb252ZXJ0ZSBjb29yZGVuYWRhcyBhbGfDqWJyaWNhcyAoZXg6IFwiZTRcIikgcGFyYSBjb29yZGVuYWRhcyBpbnRlcm5hcyAocm93LCBjb2wpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGdlYnJhaWNUb0Nvb3JkcyhzcXVhcmU6IHN0cmluZyk6IENoZXNzUG9zaXRpb24ge1xuICBjb25zdCBjb2wgPSBzcXVhcmUuY2hhckNvZGVBdCgwKSAtICdhJy5jaGFyQ29kZUF0KDApO1xuICBjb25zdCByb3cgPSBCT0FSRF9TSVpFIC0gcGFyc2VJbnQoc3F1YXJlWzFdKTtcbiAgcmV0dXJuIHsgcm93LCBjb2wgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0ZSBjb29yZGVuYWRhcyBpbnRlcm5hcyAocm93LCBjb2wpIHBhcmEgbm90YcOnw6NvIGFsZ8OpYnJpY2EgKGV4OiBcImU0XCIpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZHNUb0FsZ2VicmFpYyhwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbik6IHN0cmluZyB7XG4gIGNvbnN0IHsgcm93LCBjb2wgfSA9IHBvc2l0aW9uO1xuICBjb25zdCBmaWxlID0gU3RyaW5nLmZyb21DaGFyQ29kZSgnYScuY2hhckNvZGVBdCgwKSArIGNvbCk7XG4gIGNvbnN0IHJhbmsgPSBCT0FSRF9TSVpFIC0gcm93O1xuICByZXR1cm4gYCR7ZmlsZX0ke3Jhbmt9YDtcbn1cblxuLyoqXG4gKiBWZXJpZmljYSBzZSB1bWEgcG9zacOnw6NvIGVzdMOhIGRlbnRybyBkbyB0YWJ1bGVpcm9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRQb3NpdGlvbihwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICBjb25zdCB7IHJvdywgY29sIH0gPSBwb3NpdGlvbjtcbiAgcmV0dXJuIHJvdyA+PSAwICYmIHJvdyA8IEJPQVJEX1NJWkUgJiYgY29sID49IDAgJiYgY29sIDwgQk9BUkRfU0laRTtcbn1cblxuLyoqXG4gKiBDb21wYXJhIGR1YXMgcG9zacOnw7Vlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lUG9zaXRpb24oYTogQ2hlc3NQb3NpdGlvbiwgYjogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICByZXR1cm4gYS5yb3cgPT09IGIucm93ICYmIGEuY29sID09PSBiLmNvbDtcbn1cblxuLyoqXG4gKiBSZXRvcm5hIGEgY29yIGRlIHVtYSBjYXNhIGRvIHRhYnVsZWlyb1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3F1YXJlQ29sb3Iocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogJ2xpZ2h0JyB8ICdkYXJrJyB7XG4gIHJldHVybiAocm93ICsgY29sKSAlIDIgPT09IDAgPyAnbGlnaHQnIDogJ2RhcmsnO1xufVxuXG4vKipcbiAqIFJldG9ybmEgbyBzw61tYm9sbyBVbmljb2RlIHBhcmEgdW1hIHBlw6dhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQaWVjZVN5bWJvbChwaWVjZTogQ2hlc3NQaWVjZSk6IHN0cmluZyB7XG4gIGNvbnN0IHN5bWJvbCA9IHBpZWNlLmNvbG9yID09PSAnd2hpdGUnIFxuICAgID8gcGllY2UudHlwZS50b1VwcGVyQ2FzZSgpIFxuICAgIDogcGllY2UudHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gUElFQ0VfU1lNQk9MU1tzeW1ib2xdIHx8ICcnO1xufVxuXG4vKipcbiAqIEdlcmEgYXJyYXkgY29tIHRvZGFzIGFzIHBvc2nDp8O1ZXMgZG8gdGFidWxlaXJvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxTcXVhcmVzKCk6IENoZXNzUG9zaXRpb25bXSB7XG4gIGNvbnN0IHNxdWFyZXM6IENoZXNzUG9zaXRpb25bXSA9IFtdO1xuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBCT0FSRF9TSVpFOyByb3crKykge1xuICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IEJPQVJEX1NJWkU7IGNvbCsrKSB7XG4gICAgICBzcXVhcmVzLnB1c2goeyByb3csIGNvbCB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNxdWFyZXM7XG59XG5cbi8qKlxuICogUmV0b3JuYSBhcyBjb29yZGVuYWRhcyBkYXMgY2FzYXMgZGVzdGFjYWRhcyBwYXJhIHVtIG1vdmltZW50b1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0ZWRTcXVhcmVzKFxuICBzZWxlY3RlZFNxdWFyZTogQ2hlc3NQb3NpdGlvbiB8IG51bGwsXG4gIGxhc3RNb3ZlOiB7IGZyb206IENoZXNzUG9zaXRpb247IHRvOiBDaGVzc1Bvc2l0aW9uIH0gfCBudWxsLFxuICBwb3NzaWJsZU1vdmVzOiBDaGVzc1Bvc2l0aW9uW11cbik6IHtcbiAgc2VsZWN0ZWQ6IENoZXNzUG9zaXRpb24gfCBudWxsO1xuICBsYXN0TW92ZTogeyBmcm9tOiBDaGVzc1Bvc2l0aW9uOyB0bzogQ2hlc3NQb3NpdGlvbiB9IHwgbnVsbDtcbiAgcG9zc2libGU6IENoZXNzUG9zaXRpb25bXTtcbn0ge1xuICByZXR1cm4ge1xuICAgIHNlbGVjdGVkOiBzZWxlY3RlZFNxdWFyZSxcbiAgICBsYXN0TW92ZSxcbiAgICBwb3NzaWJsZTogcG9zc2libGVNb3ZlcyxcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXRvcm5hIGEgZGlzdMOibmNpYSBlbnRyZSBkdWFzIGNhc2FzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcXVhcmVEaXN0YW5jZShhOiBDaGVzc1Bvc2l0aW9uLCBiOiBDaGVzc1Bvc2l0aW9uKTogbnVtYmVyIHtcbiAgY29uc3Qgcm93RGlmZiA9IE1hdGguYWJzKGEucm93IC0gYi5yb3cpO1xuICBjb25zdCBjb2xEaWZmID0gTWF0aC5hYnMoYS5jb2wgLSBiLmNvbCk7XG4gIHJldHVybiBNYXRoLm1heChyb3dEaWZmLCBjb2xEaWZmKTtcbn1cblxuLyoqXG4gKiBSZXRvcm5hIGEgZGlyZcOnw6NvIGRvIG1vdmltZW50byBlbnRyZSBkdWFzIGNhc2FzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb3ZlRGlyZWN0aW9uKFxuICBmcm9tOiBDaGVzc1Bvc2l0aW9uLFxuICB0bzogQ2hlc3NQb3NpdGlvblxuKTogeyByb3dEaXI6IG51bWJlcjsgY29sRGlyOiBudW1iZXIgfSB7XG4gIGNvbnN0IHJvd0RpciA9IE1hdGguc2lnbih0by5yb3cgLSBmcm9tLnJvdyk7XG4gIGNvbnN0IGNvbERpciA9IE1hdGguc2lnbih0by5jb2wgLSBmcm9tLmNvbCk7XG4gIHJldHVybiB7IHJvd0RpciwgY29sRGlyIH07XG59XG5cbi8qKlxuICogVmVyaWZpY2Egc2UgdW0gbW92aW1lbnRvIMOpIGRpYWdvbmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RpYWdvbmFsTW92ZShmcm9tOiBDaGVzc1Bvc2l0aW9uLCB0bzogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICBjb25zdCByb3dEaWZmID0gTWF0aC5hYnModG8ucm93IC0gZnJvbS5yb3cpO1xuICBjb25zdCBjb2xEaWZmID0gTWF0aC5hYnModG8uY29sIC0gZnJvbS5jb2wpO1xuICByZXR1cm4gcm93RGlmZiA9PT0gY29sRGlmZiAmJiByb3dEaWZmID4gMDtcbn1cblxuLyoqXG4gKiBWZXJpZmljYSBzZSB1bSBtb3ZpbWVudG8gw6kgb3J0b2dvbmFsIChob3Jpem9udGFsIG91IHZlcnRpY2FsKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcnRob2dvbmFsTW92ZShmcm9tOiBDaGVzc1Bvc2l0aW9uLCB0bzogQ2hlc3NQb3NpdGlvbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKGZyb20ucm93ID09PSB0by5yb3cgJiYgZnJvbS5jb2wgIT09IHRvLmNvbCkgfHxcbiAgICAgICAgIChmcm9tLmNvbCA9PT0gdG8uY29sICYmIGZyb20ucm93ICE9PSB0by5yb3cpO1xufVxuXG4vKipcbiAqIENhbGN1bGEgbyBjYW1pbmhvIGVudHJlIGR1YXMgY2FzYXMgKHBhcmEgdmVyaWZpY2FyIG9ic3RydcOnw7VlcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhCZXR3ZWVuKFxuICBmcm9tOiBDaGVzc1Bvc2l0aW9uLFxuICB0bzogQ2hlc3NQb3NpdGlvblxuKTogQ2hlc3NQb3NpdGlvbltdIHtcbiAgY29uc3QgcGF0aDogQ2hlc3NQb3NpdGlvbltdID0gW107XG4gIGNvbnN0IHsgcm93RGlyLCBjb2xEaXIgfSA9IGdldE1vdmVEaXJlY3Rpb24oZnJvbSwgdG8pO1xuICBsZXQgeyByb3csIGNvbCB9ID0gZnJvbTtcblxuICB3aGlsZSAocm93ICE9PSB0by5yb3cgfHwgY29sICE9PSB0by5jb2wpIHtcbiAgICByb3cgKz0gcm93RGlyO1xuICAgIGNvbCArPSBjb2xEaXI7XG4gICAgaWYgKHJvdyA9PT0gdG8ucm93ICYmIGNvbCA9PT0gdG8uY29sKSBicmVhaztcbiAgICBwYXRoLnB1c2goeyByb3csIGNvbCB9KTtcbiAgfVxuXG4gIHJldHVybiBwYXRoO1xufVxuXG4vKipcbiAqIEZvcm1hdGEgdW0gbW92aW1lbnRvIHBhcmEgbm90YcOnw6NvIGFsZ8OpYnJpY2FcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE1vdmUoXG4gIGZyb206IENoZXNzUG9zaXRpb24sXG4gIHRvOiBDaGVzc1Bvc2l0aW9uLFxuICBwaWVjZTogQ2hlc3NQaWVjZSxcbiAgY2FwdHVyZT86IGJvb2xlYW4sXG4gIHByb21vdGlvbj86IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgY29uc3QgZnJvbVNxdWFyZSA9IGNvb3Jkc1RvQWxnZWJyYWljKGZyb20pO1xuICBjb25zdCB0b1NxdWFyZSA9IGNvb3Jkc1RvQWxnZWJyYWljKHRvKTtcbiAgY29uc3QgcGllY2VTeW1ib2wgPSBwaWVjZS50eXBlLnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IGNhcHR1cmVTeW1ib2wgPSBjYXB0dXJlID8gJ3gnIDogJyc7XG4gIGNvbnN0IHByb21vdGlvblN5bWJvbCA9IHByb21vdGlvbiA/IGA9JHtwcm9tb3Rpb24udG9VcHBlckNhc2UoKX1gIDogJyc7XG5cbiAgcmV0dXJuIGAke3BpZWNlU3ltYm9sfSR7ZnJvbVNxdWFyZX0ke2NhcHR1cmVTeW1ib2x9JHt0b1NxdWFyZX0ke3Byb21vdGlvblN5bWJvbH1gO1xufVxuIl0sIm5hbWVzIjpbIkJPQVJEX1NJWkUiLCJQSUVDRV9TWU1CT0xTIiwiYWxnZWJyYWljVG9Db29yZHMiLCJzcXVhcmUiLCJjb2wiLCJjaGFyQ29kZUF0Iiwicm93IiwicGFyc2VJbnQiLCJjb29yZHNUb0FsZ2VicmFpYyIsInBvc2l0aW9uIiwiZmlsZSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInJhbmsiLCJpc1ZhbGlkUG9zaXRpb24iLCJpc1NhbWVQb3NpdGlvbiIsImEiLCJiIiwiZ2V0U3F1YXJlQ29sb3IiLCJnZXRQaWVjZVN5bWJvbCIsInBpZWNlIiwic3ltYm9sIiwiY29sb3IiLCJ0eXBlIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImdldEFsbFNxdWFyZXMiLCJzcXVhcmVzIiwicHVzaCIsImdldEhpZ2hsaWdodGVkU3F1YXJlcyIsInNlbGVjdGVkU3F1YXJlIiwibGFzdE1vdmUiLCJwb3NzaWJsZU1vdmVzIiwic2VsZWN0ZWQiLCJwb3NzaWJsZSIsImdldFNxdWFyZURpc3RhbmNlIiwicm93RGlmZiIsIk1hdGgiLCJhYnMiLCJjb2xEaWZmIiwibWF4IiwiZ2V0TW92ZURpcmVjdGlvbiIsImZyb20iLCJ0byIsInJvd0RpciIsInNpZ24iLCJjb2xEaXIiLCJpc0RpYWdvbmFsTW92ZSIsImlzT3J0aG9nb25hbE1vdmUiLCJnZXRQYXRoQmV0d2VlbiIsInBhdGgiLCJmb3JtYXRNb3ZlIiwiY2FwdHVyZSIsInByb21vdGlvbiIsImZyb21TcXVhcmUiLCJ0b1NxdWFyZSIsInBpZWNlU3ltYm9sIiwiY2FwdHVyZVN5bWJvbCIsInByb21vdGlvblN5bWJvbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/shared/utils/chess.ts\n"));

/***/ }),

/***/ "./src/web/components/board/ChessBoard.tsx":
/*!*************************************************!*\
  !*** ./src/web/components/board/ChessBoard.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChessBoard\": function() { return /* binding */ ChessBoard; },\n/* harmony export */   \"MemoizedChessBoard\": function() { return /* binding */ MemoizedChessBoard; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _hooks_useGameState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useGameState */ \"./src/web/hooks/useGameState.ts\");\n/* harmony import */ var _Square__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Square */ \"./src/web/components/board/Square.tsx\");\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Piece */ \"./src/web/components/board/Piece.tsx\");\n/* harmony import */ var _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/constants/game */ \"./src/shared/constants/game.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\nconst ChessBoard = (param)=>{\n    let { initialFen , orientation =\"white\" , culturalStyle =\"modern\" , showCoordinates =true , onMove , onGameEnd  } = param;\n    _s();\n    // Estado do jogo\n    const { gameState , selectedSquare , possibleMoves , lastMove , pieceAt , selectSquare , makeMove  } = (0,_hooks_useGameState__WEBPACK_IMPORTED_MODULE_3__.useGameState)({\n        initialFen,\n        culturalStyle\n    });\n    // Estado de arrastar e soltar\n    const [draggedPiece, setDraggedPiece] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    // Container ref para dimensionamento responsivo\n    const containerRef = useRef(null);\n    // Hook de dimensionamento responsivo\n    const { boardSize , squareSize , pieceSize  } = useResponsiveBoard(containerRef);\n    // Manipuladores de eventos de arrastar e soltar\n    const handleDragStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((position, piece, e)=>{\n        if (piece.color !== gameState.currentPlayer) {\n            e.preventDefault();\n            return;\n        }\n        setDraggedPiece({\n            piece,\n            position\n        });\n        selectSquare(position);\n        // Define a imagem de arrasto transparente\n        const dragImage = new Image();\n        dragImage.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n        e.dataTransfer.setDragImage(dragImage, 0, 0);\n    }, [\n        gameState.currentPlayer,\n        selectSquare\n    ]);\n    const handleDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(()=>{\n        setDraggedPiece(null);\n    }, []);\n    const handleDrop = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((toPosition)=>{\n        if (!draggedPiece) return;\n        const success = makeMove(draggedPiece.position, toPosition);\n        if (success && onMove) {\n            onMove(draggedPiece.position, toPosition);\n        }\n        setDraggedPiece(null);\n    }, [\n        draggedPiece,\n        makeMove,\n        onMove\n    ]);\n    // Manipulador de clique na casa\n    const handleSquareClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((position)=>{\n        if (selectedSquare) {\n            if (makeMove(selectedSquare, position) && onMove) {\n                onMove(selectedSquare, position);\n            }\n        } else {\n            selectSquare(position);\n        }\n    }, [\n        selectedSquare,\n        makeMove,\n        onMove,\n        selectSquare\n    ]);\n    // Renderiza o tabuleiro\n    const renderBoard = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(()=>{\n        const board = [];\n        const rangeY = orientation === \"white\" ? Array.from({\n            length: _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE\n        }, (_, i)=>i) : Array.from({\n            length: _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE\n        }, (_, i)=>_shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE - 1 - i);\n        const rangeX = orientation === \"white\" ? Array.from({\n            length: _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE\n        }, (_, i)=>i) : Array.from({\n            length: _shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE\n        }, (_, i)=>_shared_constants_game__WEBPACK_IMPORTED_MODULE_6__.BOARD_SIZE - 1 - i);\n        for (const row of rangeY){\n            for (const col of rangeX){\n                const position = {\n                    row,\n                    col\n                };\n                const piece = pieceAt(position);\n                const isSelected = selectedSquare && selectedSquare.row === row && selectedSquare.col === col;\n                const isPossibleMove = possibleMoves.some((move)=>move.row === row && move.col === col);\n                const isLastMove = lastMove && (lastMove.from.row === row && lastMove.from.col === col || lastMove.to.row === row && lastMove.to.col === col);\n                board.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    \"data-testid\": \"square-\".concat(row, \"-\").concat(col),\n                    style: {\n                        width: squareSize,\n                        height: squareSize\n                    },\n                    onDragOver: (e)=>e.preventDefault(),\n                    onDrop: ()=>handleDrop(position),\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Square__WEBPACK_IMPORTED_MODULE_4__.MemoizedSquare, {\n                        position: position,\n                        piece: piece,\n                        isSelected: isSelected,\n                        isPossibleMove: isPossibleMove,\n                        isLastMove: isLastMove,\n                        showCoordinates: showCoordinates,\n                        culturalStyle: culturalStyle,\n                        onClick: ()=>handleSquareClick(position),\n                        children: piece && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Piece__WEBPACK_IMPORTED_MODULE_5__.MemoizedPiece, {\n                            piece: piece,\n                            isDragging: (draggedPiece === null || draggedPiece === void 0 ? void 0 : draggedPiece.position) === position,\n                            culturalStyle: culturalStyle,\n                            size: squareSize * 0.8,\n                            onDragStart: (e)=>handleDragStart(position, piece, e),\n                            onDragEnd: handleDragEnd\n                        }, void 0, false, {\n                            fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                            lineNumber: 145,\n                            columnNumber: 17\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                        lineNumber: 134,\n                        columnNumber: 13\n                    }, undefined)\n                }, \"\".concat(row, \"-\").concat(col), false, {\n                    fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                    lineNumber: 124,\n                    columnNumber: 11\n                }, undefined));\n            }\n        }\n        return board;\n    }, [\n        orientation,\n        squareSize,\n        pieceAt,\n        selectedSquare,\n        possibleMoves,\n        lastMove,\n        draggedPiece,\n        culturalStyle,\n        showCoordinates,\n        handleDragStart,\n        handleDragEnd,\n        handleDrop,\n        handleSquareClick\n    ]);\n    // Efeito para verificar fim de jogo\n    react__WEBPACK_IMPORTED_MODULE_2___default().useEffect(()=>{\n        if (gameState.isCheckmate || gameState.isDraw) {\n            let result = \"\";\n            if (gameState.isCheckmate) {\n                result = gameState.currentPlayer === \"white\" ? \"black\" : \"white\";\n            } else {\n                result = \"draw\";\n            }\n            onGameEnd === null || onGameEnd === void 0 ? void 0 : onGameEnd(result);\n        }\n    }, [\n        gameState.isCheckmate,\n        gameState.isDraw,\n        gameState.currentPlayer,\n        onGameEnd\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            width: boardSize,\n            height: boardSize\n        },\n        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n            [\n                \"34830f102c4e591c\",\n                [\n                    culturalStyle\n                ]\n            ]\n        ]) + \" \" + \"relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"34830f102c4e591c\",\n                        [\n                            culturalStyle\n                        ]\n                    ]\n                ]) + \" \" + \"p-2 rounded-lg shadow-xl bg-gradient-to-br from-emerald-700 to-emerald-900\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    \"data-testid\": \"chessboard\",\n                    \"data-style\": culturalStyle,\n                    style: {\n                        backgroundImage: \"url('/images/patterns/\".concat(culturalStyle, \".png')\")\n                    },\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"34830f102c4e591c\",\n                            [\n                                culturalStyle\n                            ]\n                        ]\n                    ]) + \" \" + \"grid grid-cols-8 rounded-md overflow-hidden border-4 border-emerald-800\",\n                    children: renderBoard()\n                }, void 0, false, {\n                    fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                    lineNumber: 201,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                lineNumber: 199,\n                columnNumber: 7\n            }, undefined),\n            gameState.isCheck && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    border: \"4px solid #f59e0b\",\n                    animation: \"pulse 2s infinite\"\n                },\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"34830f102c4e591c\",\n                        [\n                            culturalStyle\n                        ]\n                    ]\n                ]) + \" \" + \"absolute inset-0 pointer-events-none\"\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                lineNumber: 215,\n                columnNumber: 9\n            }, undefined),\n            gameState.isCheckmate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    border: \"4px solid #ef4444\",\n                    animation: \"shake 0.5s\"\n                },\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"34830f102c4e591c\",\n                        [\n                            culturalStyle\n                        ]\n                    ]\n                ]) + \" \" + \"absolute inset-0 pointer-events-none\"\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n                lineNumber: 226,\n                columnNumber: 9\n            }, undefined),\n            (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"34830f102c4e591c\",\n                dynamic: [\n                    culturalStyle\n                ],\n                children: '@-webkit-keyframes pulse{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}@-moz-keyframes pulse{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}@-o-keyframes pulse{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}@keyframes pulse{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}@-webkit-keyframes shake{0%,100%{-webkit-transform:translatex(0);transform:translatex(0)}25%{-webkit-transform:translatex(-5px);transform:translatex(-5px)}75%{-webkit-transform:translatex(5px);transform:translatex(5px)}}@-moz-keyframes shake{0%,100%{-moz-transform:translatex(0);transform:translatex(0)}25%{-moz-transform:translatex(-5px);transform:translatex(-5px)}75%{-moz-transform:translatex(5px);transform:translatex(5px)}}@-o-keyframes shake{0%,100%{-o-transform:translatex(0);transform:translatex(0)}25%{-o-transform:translatex(-5px);transform:translatex(-5px)}75%{-o-transform:translatex(5px);transform:translatex(5px)}}@keyframes shake{0%,100%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}25%{-webkit-transform:translatex(-5px);-moz-transform:translatex(-5px);-o-transform:translatex(-5px);transform:translatex(-5px)}75%{-webkit-transform:translatex(5px);-moz-transform:translatex(5px);-o-transform:translatex(5px);transform:translatex(5px)}}.grid.__jsx-style-dynamic-selector{background-image:url(\"/images/patterns/'.concat(culturalStyle, '.png\");-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-blend-mode:overlay}')\n            }, void 0, false, void 0, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/ChessBoard.tsx\",\n        lineNumber: 191,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ChessBoard, \"3hz5A1dk5+eY/pQHB8iSBy7TE18=\", true, function() {\n    return [\n        _hooks_useGameState__WEBPACK_IMPORTED_MODULE_3__.useGameState\n    ];\n});\n_c = ChessBoard;\n// Otimizao de renderizao\nconst MemoizedChessBoard = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2___default().memo(ChessBoard);\n_c1 = MemoizedChessBoard;\nvar _c, _c1;\n$RefreshReg$(_c, \"ChessBoard\");\n$RefreshReg$(_c1, \"MemoizedChessBoard\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2ViL2NvbXBvbmVudHMvYm9hcmQvQ2hlc3NCb2FyZC50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBRU47QUFDZDtBQUNGO0FBQ29CO0FBV3JELE1BQU1PLGFBQXdDLFNBTy9DO1FBUGdELEVBQ3BEQyxXQUFVLEVBQ1ZDLGFBQWMsUUFBTyxFQUNyQkMsZUFBZ0IsU0FBUSxFQUN4QkMsaUJBQWtCLElBQUksR0FDdEJDLE9BQU0sRUFDTkMsVUFBUyxFQUNWOztJQUNDLGlCQUFpQjtJQUNqQixNQUFNLEVBQ0pDLFVBQVMsRUFDVEMsZUFBYyxFQUNkQyxjQUFhLEVBQ2JDLFNBQVEsRUFDUkMsUUFBTyxFQUNQQyxhQUFZLEVBQ1pDLFNBQVEsRUFDVCxHQUFHakIsaUVBQVlBLENBQUM7UUFDZks7UUFDQUU7SUFDRjtJQUVBLDhCQUE4QjtJQUM5QixNQUFNLENBQUNXLGNBQWNDLGdCQUFnQixHQUFHckIsK0NBQVFBLENBR3RDLElBQUk7SUFFZCxnREFBZ0Q7SUFDaEQsTUFBTXNCLGVBQWVDLE9BQXVCLElBQUk7SUFFaEQscUNBQXFDO0lBQ3JDLE1BQU0sRUFBRUMsVUFBUyxFQUFFQyxXQUFVLEVBQUVDLFVBQVMsRUFBRSxHQUFHQyxtQkFBbUJMO0lBRWhFLGdEQUFnRDtJQUNoRCxNQUFNTSxrQkFBa0IzQixrREFBV0EsQ0FBQyxDQUNsQzRCLFVBQ0FDLE9BQ0FDLElBQ0c7UUFDSCxJQUFJRCxNQUFNRSxLQUFLLEtBQUtuQixVQUFVb0IsYUFBYSxFQUFFO1lBQzNDRixFQUFFRyxjQUFjO1lBQ2hCO1FBQ0YsQ0FBQztRQUVEYixnQkFBZ0I7WUFBRVM7WUFBT0Q7UUFBUztRQUNsQ1gsYUFBYVc7UUFFYiwwQ0FBMEM7UUFDMUMsTUFBTU0sWUFBWSxJQUFJQztRQUN0QkQsVUFBVUUsR0FBRyxHQUFHO1FBQ2hCTixFQUFFTyxZQUFZLENBQUNDLFlBQVksQ0FBQ0osV0FBVyxHQUFHO0lBQzVDLEdBQUc7UUFBQ3RCLFVBQVVvQixhQUFh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eUJBQXVDLE9BQWR2RSxlQUFjO29CQUMxRDs7Ozs7Z0NBMkMwQ0E7OzsrQkE5Q2hDOzhCQUtUb0M7Ozs7Ozs7Ozs7O1lBS0poQyxVQUFVb0UsT0FBTyxrQkFDaEIsOERBQUNsQjtnQkFFQ0UsT0FBTztvQkFDTGlCLFFBQVE7b0JBQ1JDLFdBQVc7Z0JBQ2I7Ozs7OzRCQThCMEMxRTs7OzJCQWxDaEM7Ozs7OztZQVNiSSxVQUFVK0QsV0FBVyxrQkFDcEIsOERBQUNiO2dCQUVDRSxPQUFPO29CQUNMaUIsUUFBUTtvQkFDUkMsV0FBVztnQkFDYjs7Ozs7NEJBbUIwQzFFOzs7MkJBdkJoQzs7Ozs7Ozs7O29CQXVCZ0NBOztnM0NBQUFBOzs7Ozs7OztBQU9wRCxFQUFFO0dBaFBXSDs7UUFpQlBKLDZEQUFZQTs7O0tBakJMSTtBQWtQYiw2QkFBNkI7QUFDdEIsTUFBTThFLG1DQUFxQnJGLGlEQUFVLENBQUNPLFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3dlYi9jb21wb25lbnRzL2JvYXJkL0NoZXNzQm9hcmQudHN4PzA4OGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENoZXNzUG9zaXRpb24sIENoZXNzUGllY2UgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdHlwZXMvY2hlc3MnO1xuaW1wb3J0IHsgdXNlR2FtZVN0YXRlIH0gZnJvbSAnLi4vLi4vaG9va3MvdXNlR2FtZVN0YXRlJztcbmltcG9ydCB7IE1lbW9pemVkU3F1YXJlIH0gZnJvbSAnLi9TcXVhcmUnO1xuaW1wb3J0IHsgTWVtb2l6ZWRQaWVjZSB9IGZyb20gJy4vUGllY2UnO1xuaW1wb3J0IHsgQk9BUkRfU0laRSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9jb25zdGFudHMvZ2FtZSc7XG5cbmludGVyZmFjZSBDaGVzc0JvYXJkUHJvcHMge1xuICBpbml0aWFsRmVuPzogc3RyaW5nO1xuICBvcmllbnRhdGlvbj86ICd3aGl0ZScgfCAnYmxhY2snO1xuICBjdWx0dXJhbFN0eWxlPzogc3RyaW5nO1xuICBzaG93Q29vcmRpbmF0ZXM/OiBib29sZWFuO1xuICBvbk1vdmU/OiAoZnJvbTogQ2hlc3NQb3NpdGlvbiwgdG86IENoZXNzUG9zaXRpb24pID0+IHZvaWQ7XG4gIG9uR2FtZUVuZD86IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IENoZXNzQm9hcmQ6IFJlYWN0LkZDPENoZXNzQm9hcmRQcm9wcz4gPSAoe1xuICBpbml0aWFsRmVuLFxuICBvcmllbnRhdGlvbiA9ICd3aGl0ZScsXG4gIGN1bHR1cmFsU3R5bGUgPSAnbW9kZXJuJyxcbiAgc2hvd0Nvb3JkaW5hdGVzID0gdHJ1ZSxcbiAgb25Nb3ZlLFxuICBvbkdhbWVFbmQsXG59KSA9PiB7XG4gIC8vIEVzdGFkbyBkbyBqb2dvXG4gIGNvbnN0IHtcbiAgICBnYW1lU3RhdGUsXG4gICAgc2VsZWN0ZWRTcXVhcmUsXG4gICAgcG9zc2libGVNb3ZlcyxcbiAgICBsYXN0TW92ZSxcbiAgICBwaWVjZUF0LFxuICAgIHNlbGVjdFNxdWFyZSxcbiAgICBtYWtlTW92ZSxcbiAgfSA9IHVzZUdhbWVTdGF0ZSh7XG4gICAgaW5pdGlhbEZlbixcbiAgICBjdWx0dXJhbFN0eWxlLFxuICB9KTtcblxuICAvLyBFc3RhZG8gZGUgYXJyYXN0YXIgZSBzb2x0YXJcbiAgY29uc3QgW2RyYWdnZWRQaWVjZSwgc2V0RHJhZ2dlZFBpZWNlXSA9IHVzZVN0YXRlPHtcbiAgICBwaWVjZTogQ2hlc3NQaWVjZTtcbiAgICBwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbjtcbiAgfSB8IG51bGw+KG51bGwpO1xuXG4gIC8vIENvbnRhaW5lciByZWYgcGFyYSBkaW1lbnNpb25hbWVudG8gcmVzcG9uc2l2b1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIC8vIEhvb2sgZGUgZGltZW5zaW9uYW1lbnRvIHJlc3BvbnNpdm9cbiAgY29uc3QgeyBib2FyZFNpemUsIHNxdWFyZVNpemUsIHBpZWNlU2l6ZSB9ID0gdXNlUmVzcG9uc2l2ZUJvYXJkKGNvbnRhaW5lclJlZik7XG5cbiAgLy8gTWFuaXB1bGFkb3JlcyBkZSBldmVudG9zIGRlIGFycmFzdGFyIGUgc29sdGFyXG4gIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IHVzZUNhbGxiYWNrKChcbiAgICBwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbixcbiAgICBwaWVjZTogQ2hlc3NQaWVjZSxcbiAgICBlOiBSZWFjdC5EcmFnRXZlbnRcbiAgKSA9PiB7XG4gICAgaWYgKHBpZWNlLmNvbG9yICE9PSBnYW1lU3RhdGUuY3VycmVudFBsYXllcikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldERyYWdnZWRQaWVjZSh7IHBpZWNlLCBwb3NpdGlvbiB9KTtcbiAgICBzZWxlY3RTcXVhcmUocG9zaXRpb24pO1xuXG4gICAgLy8gRGVmaW5lIGEgaW1hZ2VtIGRlIGFycmFzdG8gdHJhbnNwYXJlbnRlXG4gICAgY29uc3QgZHJhZ0ltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgZHJhZ0ltYWdlLnNyYyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcnO1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnSW1hZ2UsIDAsIDApO1xuICB9LCBbZ2FtZVN0YXRlLmN1cnJlbnRQbGF5ZXIsIHNlbGVjdFNxdWFyZV0pO1xuXG4gIGNvbnN0IGhhbmRsZURyYWdFbmQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RHJhZ2dlZFBpZWNlKG51bGwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcCA9IHVzZUNhbGxiYWNrKCh0b1Bvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKSA9PiB7XG4gICAgaWYgKCFkcmFnZ2VkUGllY2UpIHJldHVybjtcblxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBtYWtlTW92ZShkcmFnZ2VkUGllY2UucG9zaXRpb24sIHRvUG9zaXRpb24pO1xuICAgIGlmIChzdWNjZXNzICYmIG9uTW92ZSkge1xuICAgICAgb25Nb3ZlKGRyYWdnZWRQaWVjZS5wb3NpdGlvbiwgdG9Qb3NpdGlvbik7XG4gICAgfVxuXG4gICAgc2V0RHJhZ2dlZFBpZWNlKG51bGwpO1xuICB9LCBbZHJhZ2dlZFBpZWNlLCBtYWtlTW92ZSwgb25Nb3ZlXSk7XG5cbiAgLy8gTWFuaXB1bGFkb3IgZGUgY2xpcXVlIG5hIGNhc2FcbiAgY29uc3QgaGFuZGxlU3F1YXJlQ2xpY2sgPSB1c2VDYWxsYmFjaygocG9zaXRpb246IENoZXNzUG9zaXRpb24pID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRTcXVhcmUpIHtcbiAgICAgIGlmIChtYWtlTW92ZShzZWxlY3RlZFNxdWFyZSwgcG9zaXRpb24pICYmIG9uTW92ZSkge1xuICAgICAgICBvbk1vdmUoc2VsZWN0ZWRTcXVhcmUsIHBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0U3F1YXJlKHBvc2l0aW9uKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZFNxdWFyZSwgbWFrZU1vdmUsIG9uTW92ZSwgc2VsZWN0U3F1YXJlXSk7XG5cbiAgLy8gUmVuZGVyaXphIG8gdGFidWxlaXJvXG4gIGNvbnN0IHJlbmRlckJvYXJkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gW107XG4gICAgY29uc3QgcmFuZ2VZID0gb3JpZW50YXRpb24gPT09ICd3aGl0ZScgXG4gICAgICA/IEFycmF5LmZyb20oeyBsZW5ndGg6IEJPQVJEX1NJWkUgfSwgKF8sIGkpID0+IGkpXG4gICAgICA6IEFycmF5LmZyb20oeyBsZW5ndGg6IEJPQVJEX1NJWkUgfSwgKF8sIGkpID0+IEJPQVJEX1NJWkUgLSAxIC0gaSk7XG4gICAgXG4gICAgY29uc3QgcmFuZ2VYID0gb3JpZW50YXRpb24gPT09ICd3aGl0ZSdcbiAgICAgID8gQXJyYXkuZnJvbSh7IGxlbmd0aDogQk9BUkRfU0laRSB9LCAoXywgaSkgPT4gaSlcbiAgICAgIDogQXJyYXkuZnJvbSh7IGxlbmd0aDogQk9BUkRfU0laRSB9LCAoXywgaSkgPT4gQk9BUkRfU0laRSAtIDEgLSBpKTtcblxuICAgIGZvciAoY29uc3Qgcm93IG9mIHJhbmdlWSkge1xuICAgICAgZm9yIChjb25zdCBjb2wgb2YgcmFuZ2VYKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uID0geyByb3csIGNvbCB9O1xuICAgICAgICBjb25zdCBwaWVjZSA9IHBpZWNlQXQocG9zaXRpb24pO1xuICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWRTcXVhcmUgJiYgXG4gICAgICAgICAgc2VsZWN0ZWRTcXVhcmUucm93ID09PSByb3cgJiYgXG4gICAgICAgICAgc2VsZWN0ZWRTcXVhcmUuY29sID09PSBjb2w7XG4gICAgICAgIGNvbnN0IGlzUG9zc2libGVNb3ZlID0gcG9zc2libGVNb3Zlcy5zb21lKFxuICAgICAgICAgIG1vdmUgPT4gbW92ZS5yb3cgPT09IHJvdyAmJiBtb3ZlLmNvbCA9PT0gY29sXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGlzTGFzdE1vdmUgPSBsYXN0TW92ZSAmJiAoXG4gICAgICAgICAgKGxhc3RNb3ZlLmZyb20ucm93ID09PSByb3cgJiYgbGFzdE1vdmUuZnJvbS5jb2wgPT09IGNvbCkgfHxcbiAgICAgICAgICAobGFzdE1vdmUudG8ucm93ID09PSByb3cgJiYgbGFzdE1vdmUudG8uY29sID09PSBjb2wpXG4gICAgICAgICk7XG5cbiAgICAgICAgYm9hcmQucHVzaChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBrZXk9e2Ake3Jvd30tJHtjb2x9YH1cbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3F1YXJlLSR7cm93fS0ke2NvbH1gfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgd2lkdGg6IHNxdWFyZVNpemUsXG4gICAgICAgICAgICAgIGhlaWdodDogc3F1YXJlU2l6ZSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgICAgb25Ecm9wPXsoKSA9PiBoYW5kbGVEcm9wKHBvc2l0aW9uKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TWVtb2l6ZWRTcXVhcmVcbiAgICAgICAgICAgICAgcG9zaXRpb249e3Bvc2l0aW9ufVxuICAgICAgICAgICAgICBwaWVjZT17cGllY2V9XG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e2lzU2VsZWN0ZWR9XG4gICAgICAgICAgICAgIGlzUG9zc2libGVNb3ZlPXtpc1Bvc3NpYmxlTW92ZX1cbiAgICAgICAgICAgICAgaXNMYXN0TW92ZT17aXNMYXN0TW92ZX1cbiAgICAgICAgICAgICAgc2hvd0Nvb3JkaW5hdGVzPXtzaG93Q29vcmRpbmF0ZXN9XG4gICAgICAgICAgICAgIGN1bHR1cmFsU3R5bGU9e2N1bHR1cmFsU3R5bGV9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNxdWFyZUNsaWNrKHBvc2l0aW9uKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3BpZWNlICYmIChcbiAgICAgICAgICAgICAgICA8TWVtb2l6ZWRQaWVjZVxuICAgICAgICAgICAgICAgICAgcGllY2U9e3BpZWNlfVxuICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZz17ZHJhZ2dlZFBpZWNlPy5wb3NpdGlvbiA9PT0gcG9zaXRpb259XG4gICAgICAgICAgICAgICAgICBjdWx0dXJhbFN0eWxlPXtjdWx0dXJhbFN0eWxlfVxuICAgICAgICAgICAgICAgICAgc2l6ZT17c3F1YXJlU2l6ZSAqIDAuOH1cbiAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlRHJhZ1N0YXJ0KHBvc2l0aW9uLCBwaWVjZSwgZSl9XG4gICAgICAgICAgICAgICAgICBvbkRyYWdFbmQ9e2hhbmRsZURyYWdFbmR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvTWVtb2l6ZWRTcXVhcmU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvYXJkO1xuICB9LCBbXG4gICAgb3JpZW50YXRpb24sXG4gICAgc3F1YXJlU2l6ZSxcbiAgICBwaWVjZUF0LFxuICAgIHNlbGVjdGVkU3F1YXJlLFxuICAgIHBvc3NpYmxlTW92ZXMsXG4gICAgbGFzdE1vdmUsXG4gICAgZHJhZ2dlZFBpZWNlLFxuICAgIGN1bHR1cmFsU3R5bGUsXG4gICAgc2hvd0Nvb3JkaW5hdGVzLFxuICAgIGhhbmRsZURyYWdTdGFydCxcbiAgICBoYW5kbGVEcmFnRW5kLFxuICAgIGhhbmRsZURyb3AsXG4gICAgaGFuZGxlU3F1YXJlQ2xpY2ssXG4gIF0pO1xuXG4gIC8vIEVmZWl0byBwYXJhIHZlcmlmaWNhciBmaW0gZGUgam9nb1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChnYW1lU3RhdGUuaXNDaGVja21hdGUgfHwgZ2FtZVN0YXRlLmlzRHJhdykge1xuICAgICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgICAgaWYgKGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSkge1xuICAgICAgICByZXN1bHQgPSBnYW1lU3RhdGUuY3VycmVudFBsYXllciA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gJ2RyYXcnO1xuICAgICAgfVxuICAgICAgb25HYW1lRW5kPy4ocmVzdWx0KTtcbiAgICB9XG4gIH0sIFtnYW1lU3RhdGUuaXNDaGVja21hdGUsIGdhbWVTdGF0ZS5pc0RyYXcsIGdhbWVTdGF0ZS5jdXJyZW50UGxheWVyLCBvbkdhbWVFbmRdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlXCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHdpZHRoOiBib2FyZFNpemUsXG4gICAgICAgIGhlaWdodDogYm9hcmRTaXplLFxuICAgICAgfX1cbiAgICA+XG4gICAgICB7LyogQ29udGFpbmVyIGRvIHRhYnVsZWlybyBjb20gZ3JhZGllbnRlIGRlIGZ1bmRvICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgcm91bmRlZC1sZyBzaGFkb3cteGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1lbWVyYWxkLTcwMCB0by1lbWVyYWxkLTkwMFwiPlxuICAgICAgICB7LyogR3JhZGUgZG8gdGFidWxlaXJvICovfVxuICAgICAgICA8ZGl2XG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJjaGVzc2JvYXJkXCJcbiAgICAgICAgICBkYXRhLXN0eWxlPXtjdWx0dXJhbFN0eWxlfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTggcm91bmRlZC1tZCBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLTQgYm9yZGVyLWVtZXJhbGQtODAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcvaW1hZ2VzL3BhdHRlcm5zLyR7Y3VsdHVyYWxTdHlsZX0ucG5nJylgXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHtyZW5kZXJCb2FyZCgpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogSW5kaWNhZG9yIGRlIHhlcXVlICovfVxuICAgICAge2dhbWVTdGF0ZS5pc0NoZWNrICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgcG9pbnRlci1ldmVudHMtbm9uZVwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJvcmRlcjogJzRweCBzb2xpZCAjZjU5ZTBiJyxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3B1bHNlIDJzIGluZmluaXRlJyxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgKX1cblxuICAgICAgey8qIEluZGljYWRvciBkZSB4ZXF1ZS1tYXRlICovfVxuICAgICAge2dhbWVTdGF0ZS5pc0NoZWNrbWF0ZSAmJiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHBvaW50ZXItZXZlbnRzLW5vbmVcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBib3JkZXI6ICc0cHggc29saWQgI2VmNDQ0NCcsXG4gICAgICAgICAgICBhbmltYXRpb246ICdzaGFrZSAwLjVzJyxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgKX1cblxuICAgICAgey8qIEVzdGlsbyBjdWx0dXJhbCBlc3BlY8OtZmljbyAqL31cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgQGtleWZyYW1lcyBwdWxzZSB7XG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAwLjU7IH1cbiAgICAgICAgICA1MCUgeyBvcGFjaXR5OiAxOyB9XG4gICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDAuNTsgfVxuICAgICAgICB9XG5cbiAgICAgICAgQGtleWZyYW1lcyBzaGFrZSB7XG4gICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH1cbiAgICAgICAgICAyNSUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTVweCk7IH1cbiAgICAgICAgICA3NSUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoNXB4KTsgfVxuICAgICAgICB9XG5cbiAgICAgICAgLmdyaWQge1xuICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2ltYWdlcy9wYXR0ZXJucy8ke2N1bHR1cmFsU3R5bGV9LnBuZycpO1xuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICAgICAgYmFja2dyb3VuZC1ibGVuZC1tb2RlOiBvdmVybGF5O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vLyBPdGltaXphw6fDo28gZGUgcmVuZGVyaXphw6fDo29cbmV4cG9ydCBjb25zdCBNZW1vaXplZENoZXNzQm9hcmQgPSBSZWFjdC5tZW1vKENoZXNzQm9hcmQpO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUdhbWVTdGF0ZSIsIk1lbW9pemVkU3F1YXJlIiwiTWVtb2l6ZWRQaWVjZSIsIkJPQVJEX1NJWkUiLCJDaGVzc0JvYXJkIiwiaW5pdGlhbEZlbiIsIm9yaWVudGF0aW9uIiwiY3VsdHVyYWxTdHlsZSIsInNob3dDb29yZGluYXRlcyIsIm9uTW92ZSIsIm9uR2FtZUVuZCIsImdhbWVTdGF0ZSIsInNlbGVjdGVkU3F1YXJlIiwicG9zc2libGVNb3ZlcyIsImxhc3RNb3ZlIiwicGllY2VBdCIsInNlbGVjdFNxdWFyZSIsIm1ha2VNb3ZlIiwiZHJhZ2dlZFBpZWNlIiwic2V0RHJhZ2dlZFBpZWNlIiwiY29udGFpbmVyUmVmIiwidXNlUmVmIiwiYm9hcmRTaXplIiwic3F1YXJlU2l6ZSIsInBpZWNlU2l6ZSIsInVzZVJlc3BvbnNpdmVCb2FyZCIsImhhbmRsZURyYWdTdGFydCIsInBvc2l0aW9uIiwicGllY2UiLCJlIiwiY29sb3IiLCJjdXJyZW50UGxheWVyIiwicHJldmVudERlZmF1bHQiLCJkcmFnSW1hZ2UiLCJJbWFnZSIsInNyYyIsImRhdGFUcmFuc2ZlciIsInNldERyYWdJbWFnZSIsImhhbmRsZURyYWdFbmQiLCJoYW5kbGVEcm9wIiwidG9Qb3NpdGlvbiIsInN1Y2Nlc3MiLCJoYW5kbGVTcXVhcmVDbGljayIsInJlbmRlckJvYXJkIiwiYm9hcmQiLCJyYW5nZVkiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsInJhbmdlWCIsInJvdyIsImNvbCIsImlzU2VsZWN0ZWQiLCJpc1Bvc3NpYmxlTW92ZSIsInNvbWUiLCJtb3ZlIiwiaXNMYXN0TW92ZSIsInRvIiwicHVzaCIsImRpdiIsImRhdGEtdGVzdGlkIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsIm9uRHJhZ092ZXIiLCJvbkRyb3AiLCJvbkNsaWNrIiwiaXNEcmFnZ2luZyIsInNpemUiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ0VuZCIsInVzZUVmZmVjdCIsImlzQ2hlY2ttYXRlIiwiaXNEcmF3IiwicmVzdWx0IiwiZGF0YS1zdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImlzQ2hlY2siLCJib3JkZXIiLCJhbmltYXRpb24iLCJNZW1vaXplZENoZXNzQm9hcmQiLCJtZW1vIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/web/components/board/ChessBoard.tsx\n"));

/***/ }),

/***/ "./src/web/components/board/Piece.tsx":
/*!********************************************!*\
  !*** ./src/web/components/board/Piece.tsx ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MemoizedPiece\": function() { return /* binding */ MemoizedPiece; },\n/* harmony export */   \"Piece\": function() { return /* binding */ Piece; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/utils/chess */ \"./src/shared/utils/chess.ts\");\n\n\n\nconst Piece = (param)=>{\n    let { piece , isDragging , culturalStyle =\"modern\" , size , onDragStart , onDragEnd  } = param;\n    // Define o estilo da pea baseado no estilo cultural\n    const pieceStyles = {\n        modern: \"traditional\",\n        ancient: \"hieroglyphic\",\n        medieval: \"artistic\"\n    };\n    const pieceStyle = pieceStyles[culturalStyle] || \"traditional\";\n    // Calcula a escala baseada no estado de dragging\n    const scale = isDragging ? 1.2 : 1;\n    // Determina o smbolo da pea\n    const symbol = (0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.getPieceSymbol)(piece);\n    // Estilo base da pea\n    const baseStyle = {\n        fontSize: \"\".concat(size, \"px\"),\n        lineHeight: \"\".concat(size, \"px\"),\n        transform: \"scale(\".concat(scale, \")\"),\n        transition: \"transform 150ms ease\",\n        color: piece.color === \"white\" ? \"#fff\" : \"#000\",\n        textShadow: piece.color === \"white\" ? \"2px 2px 2px rgba(0,0,0,0.4)\" : \"2px 2px 2px rgba(255,255,255,0.4)\",\n        cursor: \"grab\",\n        userSelect: \"none\"\n    };\n    // Modifica o estilo baseado no tema cultural\n    const culturalModifiers = {\n        traditional: {},\n        artistic: {\n            filter: \"drop-shadow(2px 2px 3px rgba(0,0,0,0.3))\"\n        },\n        minimalist: {\n            textShadow: \"none\",\n            fontWeight: \"normal\"\n        },\n        hieroglyphic: {\n            fontFamily: \"'Noto Sans', sans-serif\",\n            fontWeight: \"normal\"\n        }\n    };\n    const styleModifiers = culturalModifiers[pieceStyle] || {};\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"\\n        select-none\\n        flex\\n        items-center\\n        justify-center\\n        transform\\n        transition-transform\\n        \".concat(isDragging ? \"cursor-grabbing z-50\" : \"cursor-grab\", \"\\n      \"),\n        style: {\n            width: size,\n            height: size,\n            transform: \"scale(\".concat(scale, \")\"),\n            transition: \"transform 150ms ease\"\n        },\n        draggable: true,\n        onDragStart: onDragStart,\n        onDragEnd: onDragEnd,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-5xl select-none relative\",\n            style: {\n                color: piece.color === \"white\" ? \"#fff\" : \"#000\",\n                textShadow: piece.color === \"white\" ? \"2px 2px 2px rgba(0,0,0,0.4)\" : \"2px 2px 2px rgba(255,255,255,0.4)\",\n                lineHeight: \"1\",\n                ...styleModifiers\n            },\n            children: symbol\n        }, void 0, false, {\n            fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Piece.tsx\",\n            lineNumber: 89,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Piece.tsx\",\n        lineNumber: 69,\n        columnNumber: 5\n    }, undefined);\n};\n_c = Piece;\n// Otimizao de renderizao\nconst MemoizedPiece = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(Piece);\n_c1 = MemoizedPiece;\nvar _c, _c1;\n$RefreshReg$(_c, \"Piece\");\n$RefreshReg$(_c1, \"MemoizedPiece\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2ViL2NvbXBvbmVudHMvYm9hcmQvUGllY2UudHN4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBCO0FBRW1DO0FBV3RELE1BQU1FLFFBQThCLFNBT3JDO1FBUHNDLEVBQzFDQyxNQUFLLEVBQ0xDLFdBQVUsRUFDVkMsZUFBZ0IsU0FBUSxFQUN4QkMsS0FBSSxFQUNKQyxZQUFXLEVBQ1hDLFVBQVMsRUFDVjtJQUNDLHFEQUFxRDtJQUNyRCxNQUFNQyxjQUFjO1FBQ2xCQyxRQUFRO1FBQ1JDLFNBQVM7UUFDVEMsVUFBVTtJQUNaO0lBQ0EsTUFBTUMsYUFBYUosV0FBVyxDQUFDSixjQUEwQyxJQUFJO0lBRTdFLGlEQUFpRDtJQUNqRCxNQUFNUyxRQUFRVixhQUFhLE1BQU0sQ0FBQztJQUVsQyw4QkFBOEI7SUFDOUIsTUFBTVcsU0FBU2QsbUVBQWNBLENBQUNFO0lBRTlCLHNCQUFzQjtJQUN0QixNQUFNYSxZQUFZO1FBQ2hCQyxVQUFVLEdBQVEsT0FBTFgsTUFBSztRQUNsQlksWUFBWSxHQUFRLE9BQUxaLE1BQUs7UUFDcEJhLFdBQVcsU0FBZSxPQUFOTCxPQUFNO1FBQzFCTSxZQUFZO1FBQ1pDLE9BQU9sQixNQUFNa0IsS0FBSyxLQUFLLFVBQVUsU0FBUyxNQUFNO1FBQ2hEQyxZQUFZbkIsTUFBTWtCLEtBQUssS0FBSyxVQUN4QixnQ0FDQSxtQ0FBbUM7UUFDdkNFLFFBQVE7UUFDUkMsWUFBWTtJQUNkO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU1DLG9CQUFvQjtRQUN4QkMsYUFBYSxDQUFDO1FBQ2RDLFVBQVU7WUFDUkMsUUFBUTtRQUNWO1FBQ0FDLFlBQVk7WUFDVlAsWUFBWTtZQUNaUSxZQUFZO1FBQ2Q7UUFDQUMsY0FBYztZQUNaQyxZQUFZO1lBQ1pGLFlBQVk7UUFDZDtJQUNGO0lBRUEsTUFBTUcsaUJBQWlCUixpQkFBaUIsQ0FBQ1osV0FBNkMsSUFBSSxDQUFDO0lBRTNGLHFCQUNFLDhEQUFDcUI7UUFDQ0MsV0FBVywrSUFPNkMsT0FBcEQvQixhQUFhLHlCQUF5QixhQUFhLEVBQUM7UUFFeERnQyxPQUFPO1lBQ0xDLE9BQU8vQjtZQUNQZ0MsUUFBUWhDO1lBQ1JhLFdBQVcsU0FBZSxPQUFOTCxPQUFNO1lBQzFCTSxZQUFZO1FBQ2Q7UUFDQW1CLFdBQVcsSUFBSTtRQUNmaEMsYUFBYUE7UUFDYkMsV0FBV0E7a0JBRVgsNEVBQUMwQjtZQUNDQyxXQUFVO1lBQ1ZDLE9BQU87Z0JBQ0xmLE9BQU9sQixNQUFNa0IsS0FBSyxLQUFLLFVBQVUsU0FBUyxNQUFNO2dCQUNoREMsWUFBWW5CLE1BQU1rQixLQUFLLEtBQUssVUFDeEIsZ0NBQ0EsbUNBQW1DO2dCQUN2Q0gsWUFBWTtnQkFDWixHQUFHZSxjQUFjO1lBQ25CO3NCQUVDbEI7Ozs7Ozs7Ozs7O0FBSVQsRUFBRTtLQTFGV2I7QUE0RmIsNkJBQTZCO0FBQ3RCLE1BQU1zQyw4QkFBZ0J4QyxpREFBVSxDQUFDRSxPQUFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy93ZWIvY29tcG9uZW50cy9ib2FyZC9QaWVjZS50c3g/YzYzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ2hlc3NQaWVjZSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC90eXBlcy9jaGVzcyc7XG5pbXBvcnQgeyBnZXRQaWVjZVN5bWJvbCB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC91dGlscy9jaGVzcyc7XG5cbmludGVyZmFjZSBQaWVjZVByb3BzIHtcbiAgcGllY2U6IENoZXNzUGllY2U7XG4gIGlzRHJhZ2dpbmc/OiBib29sZWFuO1xuICBjdWx0dXJhbFN0eWxlPzogc3RyaW5nO1xuICBzaXplPzogbnVtYmVyO1xuICBvbkRyYWdTdGFydD86IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHZvaWQ7XG4gIG9uRHJhZ0VuZD86IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBQaWVjZTogUmVhY3QuRkM8UGllY2VQcm9wcz4gPSAoe1xuICBwaWVjZSxcbiAgaXNEcmFnZ2luZyxcbiAgY3VsdHVyYWxTdHlsZSA9ICdtb2Rlcm4nLFxuICBzaXplLFxuICBvbkRyYWdTdGFydCxcbiAgb25EcmFnRW5kLFxufSkgPT4ge1xuICAvLyBEZWZpbmUgbyBlc3RpbG8gZGEgcGXDp2EgYmFzZWFkbyBubyBlc3RpbG8gY3VsdHVyYWxcbiAgY29uc3QgcGllY2VTdHlsZXMgPSB7XG4gICAgbW9kZXJuOiAndHJhZGl0aW9uYWwnLFxuICAgIGFuY2llbnQ6ICdoaWVyb2dseXBoaWMnLFxuICAgIG1lZGlldmFsOiAnYXJ0aXN0aWMnXG4gIH07XG4gIGNvbnN0IHBpZWNlU3R5bGUgPSBwaWVjZVN0eWxlc1tjdWx0dXJhbFN0eWxlIGFzIGtleW9mIHR5cGVvZiBwaWVjZVN0eWxlc10gfHwgJ3RyYWRpdGlvbmFsJztcblxuICAvLyBDYWxjdWxhIGEgZXNjYWxhIGJhc2VhZGEgbm8gZXN0YWRvIGRlIGRyYWdnaW5nXG4gIGNvbnN0IHNjYWxlID0gaXNEcmFnZ2luZyA/IDEuMiA6IDE7XG5cbiAgLy8gRGV0ZXJtaW5hIG8gc8OtbWJvbG8gZGEgcGXDp2FcbiAgY29uc3Qgc3ltYm9sID0gZ2V0UGllY2VTeW1ib2wocGllY2UpO1xuXG4gIC8vIEVzdGlsbyBiYXNlIGRhIHBlw6dhXG4gIGNvbnN0IGJhc2VTdHlsZSA9IHtcbiAgICBmb250U2l6ZTogYCR7c2l6ZX1weGAsXG4gICAgbGluZUhlaWdodDogYCR7c2l6ZX1weGAsXG4gICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzY2FsZX0pYCxcbiAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDE1MG1zIGVhc2UnLFxuICAgIGNvbG9yOiBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/ICcjZmZmJyA6ICcjMDAwJyxcbiAgICB0ZXh0U2hhZG93OiBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJ1xuICAgICAgPyAnMnB4IDJweCAycHggcmdiYSgwLDAsMCwwLjQpJ1xuICAgICAgOiAnMnB4IDJweCAycHggcmdiYSgyNTUsMjU1LDI1NSwwLjQpJyxcbiAgICBjdXJzb3I6ICdncmFiJyxcbiAgICB1c2VyU2VsZWN0OiAnbm9uZScgYXMgY29uc3QsXG4gIH07XG5cbiAgLy8gTW9kaWZpY2EgbyBlc3RpbG8gYmFzZWFkbyBubyB0ZW1hIGN1bHR1cmFsXG4gIGNvbnN0IGN1bHR1cmFsTW9kaWZpZXJzID0ge1xuICAgIHRyYWRpdGlvbmFsOiB7fSxcbiAgICBhcnRpc3RpYzoge1xuICAgICAgZmlsdGVyOiAnZHJvcC1zaGFkb3coMnB4IDJweCAzcHggcmdiYSgwLDAsMCwwLjMpKScsXG4gICAgfSxcbiAgICBtaW5pbWFsaXN0OiB7XG4gICAgICB0ZXh0U2hhZG93OiAnbm9uZScsXG4gICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgICB9LFxuICAgIGhpZXJvZ2x5cGhpYzoge1xuICAgICAgZm9udEZhbWlseTogXCInTm90byBTYW5zJywgc2Fucy1zZXJpZlwiLFxuICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBzdHlsZU1vZGlmaWVycyA9IGN1bHR1cmFsTW9kaWZpZXJzW3BpZWNlU3R5bGUgYXMga2V5b2YgdHlwZW9mIGN1bHR1cmFsTW9kaWZpZXJzXSB8fCB7fTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICBzZWxlY3Qtbm9uZVxuICAgICAgICBmbGV4XG4gICAgICAgIGl0ZW1zLWNlbnRlclxuICAgICAgICBqdXN0aWZ5LWNlbnRlclxuICAgICAgICB0cmFuc2Zvcm1cbiAgICAgICAgdHJhbnNpdGlvbi10cmFuc2Zvcm1cbiAgICAgICAgJHtpc0RyYWdnaW5nID8gJ2N1cnNvci1ncmFiYmluZyB6LTUwJyA6ICdjdXJzb3ItZ3JhYid9XG4gICAgICBgfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgd2lkdGg6IHNpemUsXG4gICAgICAgIGhlaWdodDogc2l6ZSxcbiAgICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzY2FsZX0pYCxcbiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAxNTBtcyBlYXNlJyxcbiAgICAgIH19XG4gICAgICBkcmFnZ2FibGU9e3RydWV9XG4gICAgICBvbkRyYWdTdGFydD17b25EcmFnU3RhcnR9XG4gICAgICBvbkRyYWdFbmQ9e29uRHJhZ0VuZH1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInRleHQtNXhsIHNlbGVjdC1ub25lIHJlbGF0aXZlXCJcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBjb2xvcjogcGllY2UuY29sb3IgPT09ICd3aGl0ZScgPyAnI2ZmZicgOiAnIzAwMCcsXG4gICAgICAgICAgdGV4dFNoYWRvdzogcGllY2UuY29sb3IgPT09ICd3aGl0ZSdcbiAgICAgICAgICAgID8gJzJweCAycHggMnB4IHJnYmEoMCwwLDAsMC40KSdcbiAgICAgICAgICAgIDogJzJweCAycHggMnB4IHJnYmEoMjU1LDI1NSwyNTUsMC40KScsXG4gICAgICAgICAgbGluZUhlaWdodDogJzEnLFxuICAgICAgICAgIC4uLnN0eWxlTW9kaWZpZXJzLFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICB7c3ltYm9sfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vLyBPdGltaXphw6fDo28gZGUgcmVuZGVyaXphw6fDo29cbmV4cG9ydCBjb25zdCBNZW1vaXplZFBpZWNlID0gUmVhY3QubWVtbyhQaWVjZSk7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJnZXRQaWVjZVN5bWJvbCIsIlBpZWNlIiwicGllY2UiLCJpc0RyYWdnaW5nIiwiY3VsdHVyYWxTdHlsZSIsInNpemUiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ0VuZCIsInBpZWNlU3R5bGVzIiwibW9kZXJuIiwiYW5jaWVudCIsIm1lZGlldmFsIiwicGllY2VTdHlsZSIsInNjYWxlIiwic3ltYm9sIiwiYmFzZVN0eWxlIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbiIsImNvbG9yIiwidGV4dFNoYWRvdyIsImN1cnNvciIsInVzZXJTZWxlY3QiLCJjdWx0dXJhbE1vZGlmaWVycyIsInRyYWRpdGlvbmFsIiwiYXJ0aXN0aWMiLCJmaWx0ZXIiLCJtaW5pbWFsaXN0IiwiZm9udFdlaWdodCIsImhpZXJvZ2x5cGhpYyIsImZvbnRGYW1pbHkiLCJzdHlsZU1vZGlmaWVycyIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJkcmFnZ2FibGUiLCJNZW1vaXplZFBpZWNlIiwibWVtbyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/web/components/board/Piece.tsx\n"));

/***/ }),

/***/ "./src/web/components/board/Square.tsx":
/*!*********************************************!*\
  !*** ./src/web/components/board/Square.tsx ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MemoizedSquare\": function() { return /* binding */ MemoizedSquare; },\n/* harmony export */   \"Square\": function() { return /* binding */ Square; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/utils/chess */ \"./src/shared/utils/chess.ts\");\n\n\n\nconst Square = (param)=>{\n    let { position , piece , isSelected , isPossibleMove , isLastMove , showCoordinates , culturalStyle =\"modern\" , onClick , children  } = param;\n    const { row , col  } = position;\n    const squareColor = (0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.getSquareColor)(row, col);\n    // Determina a cor final da casa com base nos estados e estilo cultural\n    let backgroundColor;\n    // Cores base do tabuleiro para cada estilo cultural\n    const boardColors = {\n        modern: {\n            light: \"#f0d9b5\",\n            dark: \"#b58863\"\n        },\n        ancient: {\n            light: \"#e6d5ac\",\n            dark: \"#7c6c54\"\n        },\n        medieval: {\n            light: \"#eed2a4\",\n            dark: \"#8b4513\"\n        }\n    };\n    // Seleciona as cores base do estilo cultural atual\n    const styleColors = boardColors[culturalStyle] || boardColors.modern;\n    // Aplica as cores de acordo com o estado do quadrado\n    if (isSelected) {\n        backgroundColor = \"#fcd34d\";\n    } else if (isLastMove) {\n        backgroundColor = \"#34d399\";\n    } else if (isPossibleMove) {\n        backgroundColor = \"#fbbf24\";\n    } else {\n        backgroundColor = styleColors[squareColor];\n    }\n    // Gera coordenadas algbricas para exibio\n    const file = String.fromCharCode(\"a\".charCodeAt(0) + col);\n    const rank = 8 - row;\n    // Manipulador de clique\n    const handleClick = ()=>{\n        onClick === null || onClick === void 0 ? void 0 : onClick(position);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"\\n        relative\\n        w-full\\n        h-full\\n        flex\\n        items-center\\n        justify-center\\n        transition-all\\n        duration-200\\n        \".concat(isPossibleMove ? \"cursor-pointer\" : \"\", \"\\n        \").concat(isSelected ? \"ring-2 ring-yellow-400\" : \"\", \"\\n        \").concat(isLastMove ? \"ring-2 ring-green-400\" : \"\", \"\\n      \"),\n        style: {\n            backgroundColor: backgroundColor\n        },\n        onClick: handleClick,\n        children: [\n            isPossibleMove && !piece && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-3 h-3 rounded-full bg-yellow-400 opacity-50\"\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                lineNumber: 95,\n                columnNumber: 9\n            }, undefined),\n            isPossibleMove && piece && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 border-2 border-yellow-400 opacity-50\"\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                lineNumber: 102,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative z-10\",\n                children: children\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                lineNumber: 108,\n                columnNumber: 7\n            }, undefined),\n            showCoordinates && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    col === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"absolute top-0.5 left-1 text-xs font-bold opacity-75\",\n                        style: {\n                            color: squareColor === \"light\" ? \"#666\" : \"#fff\"\n                        },\n                        children: rank\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                        lineNumber: 116,\n                        columnNumber: 13\n                    }, undefined),\n                    row === 7 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"absolute bottom-0.5 right-1 text-xs font-bold opacity-75\",\n                        style: {\n                            color: squareColor === \"light\" ? \"#666\" : \"#fff\"\n                        },\n                        children: file\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                        lineNumber: 124,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 opacity-0 hover:opacity-20 transition-opacity duration-200 bg-white\"\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n                lineNumber: 135,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/board/Square.tsx\",\n        lineNumber: 74,\n        columnNumber: 5\n    }, undefined);\n};\n_c = Square;\n// Otimizao de renderizao\nconst MemoizedSquare = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(Square);\n_c1 = MemoizedSquare;\nvar _c, _c1;\n$RefreshReg$(_c, \"Square\");\n$RefreshReg$(_c1, \"MemoizedSquare\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2ViL2NvbXBvbmVudHMvYm9hcmQvU3F1YXJlLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEwQjtBQUVtQztBQWN0RCxNQUFNRSxTQUFnQyxTQVV2QztRQVZ3QyxFQUM1Q0MsU0FBUSxFQUNSQyxNQUFLLEVBQ0xDLFdBQVUsRUFDVkMsZUFBYyxFQUNkQyxXQUFVLEVBQ1ZDLGdCQUFlLEVBQ2ZDLGVBQWdCLFNBQVEsRUFDeEJDLFFBQU8sRUFDUEMsU0FBUSxFQUNUO0lBQ0MsTUFBTSxFQUFFQyxJQUFHLEVBQUVDLElBQUcsRUFBRSxHQUFHVjtJQUNyQixNQUFNVyxjQUFjYixtRUFBY0EsQ0FBQ1csS0FBS0M7SUFFeEMsdUVBQXVFO0lBQ3ZFLElBQUlFO0lBRUosb0RBQW9EO0lBQ3BELE1BQU1DLGNBQWM7UUFDbEJDLFFBQVE7WUFDTkMsT0FBTztZQUNQQyxNQUFNO1FBQ1I7UUFDQUMsU0FBUztZQUNQRixPQUFPO1lBQ1BDLE1BQU07UUFDUjtRQUNBRSxVQUFVO1lBQ1JILE9BQU87WUFDUEMsTUFBTTtRQUNSO0lBQ0Y7SUFFQSxtREFBbUQ7SUFDbkQsTUFBTUcsY0FBY04sV0FBVyxDQUFDUCxjQUEwQyxJQUFJTyxZQUFZQyxNQUFNO0lBRWhHLHFEQUFxRDtJQUNyRCxJQUFJWixZQUFZO1FBQ2RVLGtCQUFrQjtJQUNwQixPQUFPLElBQUlSLFlBQVk7UUFDckJRLGtCQUFrQjtJQUNwQixPQUFPLElBQUlULGdCQUFnQjtRQUN6QlMsa0JBQWtCO0lBQ3BCLE9BQU87UUFDTEEsa0JBQWtCTyxXQUFXLENBQUNSLFlBQVk7SUFDNUMsQ0FBQztJQUVELDRDQUE0QztJQUM1QyxNQUFNUyxPQUFPQyxPQUFPQyxZQUFZLENBQUMsSUFBSUMsVUFBVSxDQUFDLEtBQUtiO0lBQ3JELE1BQU1jLE9BQU8sSUFBSWY7SUFFakIsd0JBQXdCO0lBQ3hCLE1BQU1nQixjQUFjLElBQU07UUFDeEJsQixvQkFBQUEscUJBQUFBLEtBQUFBLElBQUFBLFFBQVVQO0lBQ1o7SUFFQSxxQkFDRSw4REFBQzBCO1FBQ0NDLFdBQVcseUtBVVB6QixPQURBQyxpQkFBaUIsbUJBQW1CLEVBQUUsRUFBQyxjQUV2Q0MsT0FEQUYsYUFBYSwyQkFBMkIsRUFBRSxFQUFDLGNBQ0QsT0FBMUNFLGFBQWEsMEJBQTBCLEVBQUUsRUFBQztRQUU5Q3dCLE9BQU87WUFDTGhCLGlCQUFpQkE7UUFDbkI7UUFDQUwsU0FBU2tCOztZQUdSdEIsa0JBQWtCLENBQUNGLHVCQUNsQiw4REFBQ3lCO2dCQUNDQyxXQUFVOzs7Ozs7WUFLYnhCLGtCQUFrQkYsdUJBQ2pCLDhEQUFDeUI7Z0JBQ0NDLFdBQVU7Ozs7OzswQkFLZCw4REFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ1puQjs7Ozs7O1lBSUZILGlDQUNDOztvQkFDR0ssUUFBUSxtQkFDUCw4REFBQ21CO3dCQUNDRixXQUFVO3dCQUNWQyxPQUFPOzRCQUFFRSxPQUFPbkIsZ0JBQWdCLFVBQVUsU0FBUyxNQUFNO3dCQUFDO2tDQUV6RGE7Ozs7OztvQkFHSmYsUUFBUSxtQkFDUCw4REFBQ29CO3dCQUNDRixXQUFVO3dCQUNWQyxPQUFPOzRCQUFFRSxPQUFPbkIsZ0JBQWdCLFVBQVUsU0FBUyxNQUFNO3dCQUFDO2tDQUV6RFM7Ozs7Ozs7OzBCQU9ULDhEQUFDTTtnQkFDQ0MsV0FBVTs7Ozs7Ozs7Ozs7O0FBSWxCLEVBQUU7S0EzSFc1QjtBQTZIYiw2QkFBNkI7QUFDdEIsTUFBTWdDLCtCQUFpQmxDLGlEQUFVLENBQUNFLFFBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3dlYi9jb21wb25lbnRzL2JvYXJkL1NxdWFyZS50c3g/M2Q3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ2hlc3NQb3NpdGlvbiwgQ2hlc3NQaWVjZSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC90eXBlcy9jaGVzcyc7XG5pbXBvcnQgeyBnZXRTcXVhcmVDb2xvciB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC91dGlscy9jaGVzcyc7XG5cbmludGVyZmFjZSBTcXVhcmVQcm9wcyB7XG4gIHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uO1xuICBwaWVjZT86IENoZXNzUGllY2U7XG4gIGlzU2VsZWN0ZWQ/OiBib29sZWFuO1xuICBpc1Bvc3NpYmxlTW92ZT86IGJvb2xlYW47XG4gIGlzTGFzdE1vdmU/OiBib29sZWFuO1xuICBzaG93Q29vcmRpbmF0ZXM/OiBib29sZWFuO1xuICBjdWx0dXJhbFN0eWxlPzogc3RyaW5nO1xuICBvbkNsaWNrPzogKHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKSA9PiB2b2lkO1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGNvbnN0IFNxdWFyZTogUmVhY3QuRkM8U3F1YXJlUHJvcHM+ID0gKHtcbiAgcG9zaXRpb24sXG4gIHBpZWNlLFxuICBpc1NlbGVjdGVkLFxuICBpc1Bvc3NpYmxlTW92ZSxcbiAgaXNMYXN0TW92ZSxcbiAgc2hvd0Nvb3JkaW5hdGVzLFxuICBjdWx0dXJhbFN0eWxlID0gJ21vZGVybicsXG4gIG9uQ2xpY2ssXG4gIGNoaWxkcmVuLFxufSkgPT4ge1xuICBjb25zdCB7IHJvdywgY29sIH0gPSBwb3NpdGlvbjtcbiAgY29uc3Qgc3F1YXJlQ29sb3IgPSBnZXRTcXVhcmVDb2xvcihyb3csIGNvbCk7XG4gIFxuICAvLyBEZXRlcm1pbmEgYSBjb3IgZmluYWwgZGEgY2FzYSBjb20gYmFzZSBub3MgZXN0YWRvcyBlIGVzdGlsbyBjdWx0dXJhbFxuICBsZXQgYmFja2dyb3VuZENvbG9yO1xuICBcbiAgLy8gQ29yZXMgYmFzZSBkbyB0YWJ1bGVpcm8gcGFyYSBjYWRhIGVzdGlsbyBjdWx0dXJhbFxuICBjb25zdCBib2FyZENvbG9ycyA9IHtcbiAgICBtb2Rlcm46IHtcbiAgICAgIGxpZ2h0OiAnI2YwZDliNScsXG4gICAgICBkYXJrOiAnI2I1ODg2MydcbiAgICB9LFxuICAgIGFuY2llbnQ6IHtcbiAgICAgIGxpZ2h0OiAnI2U2ZDVhYycsXG4gICAgICBkYXJrOiAnIzdjNmM1NCdcbiAgICB9LFxuICAgIG1lZGlldmFsOiB7XG4gICAgICBsaWdodDogJyNlZWQyYTQnLFxuICAgICAgZGFyazogJyM4YjQ1MTMnXG4gICAgfVxuICB9O1xuICBcbiAgLy8gU2VsZWNpb25hIGFzIGNvcmVzIGJhc2UgZG8gZXN0aWxvIGN1bHR1cmFsIGF0dWFsXG4gIGNvbnN0IHN0eWxlQ29sb3JzID0gYm9hcmRDb2xvcnNbY3VsdHVyYWxTdHlsZSBhcyBrZXlvZiB0eXBlb2YgYm9hcmRDb2xvcnNdIHx8IGJvYXJkQ29sb3JzLm1vZGVybjtcbiAgXG4gIC8vIEFwbGljYSBhcyBjb3JlcyBkZSBhY29yZG8gY29tIG8gZXN0YWRvIGRvIHF1YWRyYWRvXG4gIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgYmFja2dyb3VuZENvbG9yID0gJyNmY2QzNGQnO1xuICB9IGVsc2UgaWYgKGlzTGFzdE1vdmUpIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnIzM0ZDM5OSc7XG4gIH0gZWxzZSBpZiAoaXNQb3NzaWJsZU1vdmUpIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZiYmYyNCc7XG4gIH0gZWxzZSB7XG4gICAgYmFja2dyb3VuZENvbG9yID0gc3R5bGVDb2xvcnNbc3F1YXJlQ29sb3JdO1xuICB9XG5cbiAgLy8gR2VyYSBjb29yZGVuYWRhcyBhbGfDqWJyaWNhcyBwYXJhIGV4aWJpw6fDo29cbiAgY29uc3QgZmlsZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJ2EnLmNoYXJDb2RlQXQoMCkgKyBjb2wpO1xuICBjb25zdCByYW5rID0gOCAtIHJvdztcblxuICAvLyBNYW5pcHVsYWRvciBkZSBjbGlxdWVcbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgb25DbGljaz8uKHBvc2l0aW9uKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICByZWxhdGl2ZVxuICAgICAgICB3LWZ1bGxcbiAgICAgICAgaC1mdWxsXG4gICAgICAgIGZsZXhcbiAgICAgICAgaXRlbXMtY2VudGVyXG4gICAgICAgIGp1c3RpZnktY2VudGVyXG4gICAgICAgIHRyYW5zaXRpb24tYWxsXG4gICAgICAgIGR1cmF0aW9uLTIwMFxuICAgICAgICAke2lzUG9zc2libGVNb3ZlID8gJ2N1cnNvci1wb2ludGVyJyA6ICcnfVxuICAgICAgICAke2lzU2VsZWN0ZWQgPyAncmluZy0yIHJpbmcteWVsbG93LTQwMCcgOiAnJ31cbiAgICAgICAgJHtpc0xhc3RNb3ZlID8gJ3JpbmctMiByaW5nLWdyZWVuLTQwMCcgOiAnJ31cbiAgICAgIGB9XG4gICAgICBzdHlsZT17e1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgICAgIH19XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICA+XG4gICAgICB7LyogSW5kaWNhZG9yIGRlIG1vdmltZW50byBwb3Nzw612ZWwgKi99XG4gICAgICB7aXNQb3NzaWJsZU1vdmUgJiYgIXBpZWNlICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLXllbGxvdy00MDAgb3BhY2l0eS01MFwiXG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogSW5kaWNhZG9yIGRlIGNhcHR1cmEgcG9zc8OtdmVsICovfVxuICAgICAge2lzUG9zc2libGVNb3ZlICYmIHBpZWNlICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYm9yZGVyLTIgYm9yZGVyLXllbGxvdy00MDAgb3BhY2l0eS01MFwiXG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogQ29udGXDumRvIGRhIGNhc2EgKHBlw6dhIG91IG91dHJvIGVsZW1lbnRvKSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgei0xMFwiPlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIENvb3JkZW5hZGFzICovfVxuICAgICAge3Nob3dDb29yZGluYXRlcyAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAge2NvbCA9PT0gMCAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMC41IGxlZnQtMSB0ZXh0LXhzIGZvbnQtYm9sZCBvcGFjaXR5LTc1XCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHNxdWFyZUNvbG9yID09PSAnbGlnaHQnID8gJyM2NjYnIDogJyNmZmYnIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtyYW5rfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3JvdyA9PT0gNyAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMC41IHJpZ2h0LTEgdGV4dC14cyBmb250LWJvbGQgb3BhY2l0eS03NVwiXG4gICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBzcXVhcmVDb2xvciA9PT0gJ2xpZ2h0JyA/ICcjNjY2JyA6ICcjZmZmJyB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7ZmlsZX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICA8Lz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFZmVpdG8gZGUgaG92ZXIgKi99XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgb3BhY2l0eS0wIGhvdmVyOm9wYWNpdHktMjAgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTIwMCBiZy13aGl0ZVwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gT3RpbWl6YcOnw6NvIGRlIHJlbmRlcml6YcOnw6NvXG5leHBvcnQgY29uc3QgTWVtb2l6ZWRTcXVhcmUgPSBSZWFjdC5tZW1vKFNxdWFyZSk7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJnZXRTcXVhcmVDb2xvciIsIlNxdWFyZSIsInBvc2l0aW9uIiwicGllY2UiLCJpc1NlbGVjdGVkIiwiaXNQb3NzaWJsZU1vdmUiLCJpc0xhc3RNb3ZlIiwic2hvd0Nvb3JkaW5hdGVzIiwiY3VsdHVyYWxTdHlsZSIsIm9uQ2xpY2siLCJjaGlsZHJlbiIsInJvdyIsImNvbCIsInNxdWFyZUNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiYm9hcmRDb2xvcnMiLCJtb2Rlcm4iLCJsaWdodCIsImRhcmsiLCJhbmNpZW50IiwibWVkaWV2YWwiLCJzdHlsZUNvbG9ycyIsImZpbGUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwicmFuayIsImhhbmRsZUNsaWNrIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJzcGFuIiwiY29sb3IiLCJNZW1vaXplZFNxdWFyZSIsIm1lbW8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/web/components/board/Square.tsx\n"));

/***/ }),

/***/ "./src/web/components/controls/GameControls.tsx":
/*!******************************************************!*\
  !*** ./src/web/components/controls/GameControls.tsx ***!
  \******************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameControls\": function() { return /* binding */ GameControls; },\n/* harmony export */   \"MemoizedGameControls\": function() { return /* binding */ MemoizedGameControls; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shared_constants_game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/constants/game */ \"./src/shared/constants/game.ts\");\n\n\n\nconst GameControls = (param)=>{\n    let { culturalStyle , onStyleChange , onFlipBoard , onNewGame , onUndo , canUndo , isPlayerTurn  } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col gap-4 p-6 bg-emerald-800/30 backdrop-blur-sm rounded-xl border border-emerald-600/50 shadow-xl\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                className: \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/20\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 27,\n                        columnNumber: 9\n                    }, undefined),\n                    \"Controles\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                lineNumber: 26,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-emerald-100 text-sm\",\n                        children: \"Estilo Cultural\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 33,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        \"data-testid\": \"style-select\",\n                        value: culturalStyle,\n                        onChange: (e)=>onStyleChange(e.target.value),\n                        className: \" w-full bg-emerald-700/50 text-white  border border-emerald-600/50 rounded-lg  px-4 py-3  focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-colors hover:bg-emerald-700/70 \",\n                        children: Object.entries(_shared_constants_game__WEBPACK_IMPORTED_MODULE_2__.CULTURAL_STYLES).map((param)=>/*#__PURE__*/ {\n                            let [key, value] = param;\n                            return (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: value,\n                                \"data-testid\": \"style-\".concat(value),\n                                children: value.charAt(0).toUpperCase() + value.slice(1)\n                            }, key, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                                lineNumber: 48,\n                                columnNumber: 13\n                            }, undefined);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 34,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                lineNumber: 32,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid grid-cols-2 gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        \"data-testid\": \"new-game-btn\",\n                        onClick: onNewGame,\n                        className: \" bg-emerald-600/70 hover:bg-emerald-500  text-white font-medium rounded-lg px-4 py-3  transition-all duration-200 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] \",\n                        style: {\n                            backgroundImage: \"url('/images/buttons/\".concat(culturalStyle, \".png')\")\n                        },\n                        children: \"Nova Partida\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 57,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        \"data-testid\": \"flip-board-btn\",\n                        onClick: onFlipBoard,\n                        className: \" bg-emerald-600/70 hover:bg-emerald-500  text-white font-medium rounded-lg px-4 py-3  transition-all duration-200 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] \",\n                        style: {\n                            backgroundImage: \"url('/images/buttons/\".concat(culturalStyle, \".png')\")\n                        },\n                        children: \"Inverter Tabuleiro\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 75,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        \"data-testid\": \"undo-btn\",\n                        onClick: onUndo,\n                        disabled: !canUndo,\n                        className: \"\\n            col-span-2 \\n            \".concat(canUndo ? \"bg-emerald-600/70 hover:bg-emerald-500 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]\" : \"bg-emerald-800/50 cursor-not-allowed opacity-50\", \"\\n            text-white font-medium\\n            rounded-lg px-4 py-3\\n            transition-all duration-200\\n          \"),\n                        style: canUndo ? {\n                            backgroundImage: \"url('/images/buttons/\".concat(culturalStyle, \".png')\")\n                        } : undefined,\n                        children: \"Desfazer Jogada\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                        lineNumber: 93,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                lineNumber: 56,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 text-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    \"data-testid\": \"game-status\",\n                    \"data-state\": isPlayerTurn ? \"playing\" : \"waiting\",\n                    className: \"text-emerald-100\",\n                    children: isPlayerTurn ? \"Sua vez de jogar\" : \"Aguardando oponente...\"\n                }, void 0, false, {\n                    fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                    lineNumber: 122,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n                lineNumber: 121,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/controls/GameControls.tsx\",\n        lineNumber: 25,\n        columnNumber: 5\n    }, undefined);\n};\n_c = GameControls;\nconst MemoizedGameControls = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(GameControls);\n_c1 = MemoizedGameControls;\nvar _c, _c1;\n$RefreshReg$(_c, \"GameControls\");\n$RefreshReg$(_c1, \"MemoizedGameControls\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2ViL2NvbXBvbmVudHMvY29udHJvbHMvR2FtZUNvbnRyb2xzLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEwQjtBQUN1QztBQWExRCxNQUFNRSxlQUE0QyxTQVFuRDtRQVJvRCxFQUN4REMsY0FBYSxFQUNiQyxjQUFhLEVBQ2JDLFlBQVcsRUFDWEMsVUFBUyxFQUNUQyxPQUFNLEVBQ05DLFFBQU8sRUFDUEMsYUFBWSxFQUNiO0lBQ0MscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDQztnQkFBR0QsV0FBVTs7a0NBQ1osOERBQUNFO3dCQUFLRixXQUFVO2tDQUF3RTs7Ozs7O29CQUFTOzs7Ozs7OzBCQUtuRyw4REFBQ0Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRzt3QkFBTUgsV0FBVTtrQ0FBMkI7Ozs7OztrQ0FDNUMsOERBQUNJO3dCQUNDQyxlQUFZO3dCQUNaQyxPQUFPZDt3QkFDUGUsVUFBVSxDQUFDQyxJQUFNZixjQUFjZSxFQUFFQyxNQUFNLENBQUNILEtBQUs7d0JBQzdDTixXQUFVO2tDQVNUVSxPQUFPQyxPQUFPLENBQUNyQixtRUFBZUEsRUFBRXNCLEdBQUcsQ0FBQyx1QkFDbkM7Z0NBRG9DLENBQUNDLEtBQUtQLE1BQU07bUNBQ2hELDhEQUFDUTtnQ0FBaUJSLE9BQU9BO2dDQUFPRCxlQUFhLFNBQWUsT0FBTkM7MENBQ25EQSxNQUFNUyxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUFLVixNQUFNVyxLQUFLLENBQUM7K0JBRGxDSjs7Ozs7d0JBRUw7Ozs7Ozs7Ozs7OzswQkFNZCw4REFBQ2Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDa0I7d0JBQ0NiLGVBQVk7d0JBQ1pjLFNBQVN4Qjt3QkFDVEssV0FBVTt3QkFRVm9CLE9BQU87NEJBQ0xDLGlCQUFpQix3QkFBc0MsT0FBZDdCLGVBQWM7d0JBQ3pEO2tDQUNEOzs7Ozs7a0NBSUQsOERBQUMwQjt3QkFDQ2IsZUFBWTt3QkFDWmMsU0FBU3pCO3dCQUNUTSxXQUFVO3dCQVFWb0IsT0FBTzs0QkFDTEMsaUJBQWlCLHdCQUFzQyxPQUFkN0IsZUFBYzt3QkFDekQ7a0NBQ0Q7Ozs7OztrQ0FJRCw4REFBQzBCO3dCQUNDYixlQUFZO3dCQUNaYyxTQUFTdkI7d0JBQ1QwQixVQUFVLENBQUN6Qjt3QkFDWEcsV0FBVywwQ0FNUixPQUhESCxVQUNJLGtHQUNBLGlEQUFpRCxFQUNwRDt3QkFLSHVCLE9BQ0V2QixVQUNJOzRCQUNFd0IsaUJBQWlCLHdCQUFzQyxPQUFkN0IsZUFBYzt3QkFDekQsSUFDQStCLFNBQVM7a0NBRWhCOzs7Ozs7Ozs7Ozs7MEJBTUgsOERBQUN4QjtnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ3dCO29CQUNDbkIsZUFBWTtvQkFDWm9CLGNBQVkzQixlQUFlLFlBQVksU0FBUztvQkFDaERFLFdBQVU7OEJBQ1RGLGVBQWUscUJBQXFCLHdCQUF3Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdkUsRUFBRTtLQXBIV1A7QUFzSE4sTUFBTW1DLHFDQUF1QnJDLGlEQUFVLENBQUNFLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3dlYi9jb21wb25lbnRzL2NvbnRyb2xzL0dhbWVDb250cm9scy50c3g/Mzg4MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ1VMVFVSQUxfU1RZTEVTIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2NvbnN0YW50cy9nYW1lJztcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL3N0eWxlcy90aGVtZSc7XG5cbmludGVyZmFjZSBHYW1lQ29udHJvbHNQcm9wcyB7XG4gIGN1bHR1cmFsU3R5bGU6IHN0cmluZztcbiAgb25TdHlsZUNoYW5nZTogKHN0eWxlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uRmxpcEJvYXJkOiAoKSA9PiB2b2lkO1xuICBvbk5ld0dhbWU6ICgpID0+IHZvaWQ7XG4gIG9uVW5kbzogKCkgPT4gdm9pZDtcbiAgY2FuVW5kbzogYm9vbGVhbjtcbiAgaXNQbGF5ZXJUdXJuOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgR2FtZUNvbnRyb2xzOiBSZWFjdC5GQzxHYW1lQ29udHJvbHNQcm9wcz4gPSAoe1xuICBjdWx0dXJhbFN0eWxlLFxuICBvblN0eWxlQ2hhbmdlLFxuICBvbkZsaXBCb2FyZCxcbiAgb25OZXdHYW1lLFxuICBvblVuZG8sXG4gIGNhblVuZG8sXG4gIGlzUGxheWVyVHVybixcbn0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTQgcC02IGJnLWVtZXJhbGQtODAwLzMwIGJhY2tkcm9wLWJsdXItc20gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWVtZXJhbGQtNjAwLzUwIHNoYWRvdy14bFwiPlxuICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy04IGgtOCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWxnIGJnLWVtZXJhbGQtNTAwLzIwXCI+4pqZ77iPPC9zcGFuPlxuICAgICAgICBDb250cm9sZXNcbiAgICAgIDwvaDI+XG4gICAgICBcbiAgICAgIHsvKiBFc3RpbG8gQ3VsdHVyYWwgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTJcIj5cbiAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC0xMDAgdGV4dC1zbVwiPkVzdGlsbyBDdWx0dXJhbDwvbGFiZWw+XG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICBkYXRhLXRlc3RpZD1cInN0eWxlLXNlbGVjdFwiXG4gICAgICAgICAgdmFsdWU9e2N1bHR1cmFsU3R5bGV9XG4gICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvblN0eWxlQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJcbiAgICAgICAgICAgIHctZnVsbCBiZy1lbWVyYWxkLTcwMC81MCB0ZXh0LXdoaXRlIFxuICAgICAgICAgICAgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTYwMC81MCByb3VuZGVkLWxnIFxuICAgICAgICAgICAgcHgtNCBweS0zIFxuICAgICAgICAgICAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWVtZXJhbGQtNTAwXG4gICAgICAgICAgICB0cmFuc2l0aW9uLWNvbG9yc1xuICAgICAgICAgICAgaG92ZXI6YmctZW1lcmFsZC03MDAvNzBcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKENVTFRVUkFMX1NUWUxFUykubWFwKChba2V5LCB2YWx1ZV0pID0+IChcbiAgICAgICAgICAgIDxvcHRpb24ga2V5PXtrZXl9IHZhbHVlPXt2YWx1ZX0gZGF0YS10ZXN0aWQ9e2BzdHlsZS0ke3ZhbHVlfWB9PlxuICAgICAgICAgICAgICB7dmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKX1cbiAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogQm90w7VlcyBkZSBBw6fDo28gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGRhdGEtdGVzdGlkPVwibmV3LWdhbWUtYnRuXCJcbiAgICAgICAgICBvbkNsaWNrPXtvbk5ld0dhbWV9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiXG4gICAgICAgICAgICBiZy1lbWVyYWxkLTYwMC83MCBob3ZlcjpiZy1lbWVyYWxkLTUwMCBcbiAgICAgICAgICAgIHRleHQtd2hpdGUgZm9udC1tZWRpdW1cbiAgICAgICAgICAgIHJvdW5kZWQtbGcgcHgtNCBweS0zIFxuICAgICAgICAgICAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwXG4gICAgICAgICAgICBob3ZlcjpzaGFkb3ctbGcgaG92ZXI6c2NhbGUtWzEuMDJdXG4gICAgICAgICAgICBhY3RpdmU6c2NhbGUtWzAuOThdXG4gICAgICAgICAgXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcvaW1hZ2VzL2J1dHRvbnMvJHtjdWx0dXJhbFN0eWxlfS5wbmcnKWBcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgTm92YSBQYXJ0aWRhXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZmxpcC1ib2FyZC1idG5cIlxuICAgICAgICAgIG9uQ2xpY2s9e29uRmxpcEJvYXJkfVxuICAgICAgICAgIGNsYXNzTmFtZT1cIlxuICAgICAgICAgICAgYmctZW1lcmFsZC02MDAvNzAgaG92ZXI6YmctZW1lcmFsZC01MDAgXG4gICAgICAgICAgICB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtXG4gICAgICAgICAgICByb3VuZGVkLWxnIHB4LTQgcHktMyBcbiAgICAgICAgICAgIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMFxuICAgICAgICAgICAgaG92ZXI6c2hhZG93LWxnIGhvdmVyOnNjYWxlLVsxLjAyXVxuICAgICAgICAgICAgYWN0aXZlOnNjYWxlLVswLjk4XVxuICAgICAgICAgIFwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgnL2ltYWdlcy9idXR0b25zLyR7Y3VsdHVyYWxTdHlsZX0ucG5nJylgXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIEludmVydGVyIFRhYnVsZWlyb1xuICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJ1bmRvLWJ0blwiXG4gICAgICAgICAgb25DbGljaz17b25VbmRvfVxuICAgICAgICAgIGRpc2FibGVkPXshY2FuVW5kb31cbiAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgIGNvbC1zcGFuLTIgXG4gICAgICAgICAgICAke1xuICAgICAgICAgICAgY2FuVW5kbyBcbiAgICAgICAgICAgICAgPyAnYmctZW1lcmFsZC02MDAvNzAgaG92ZXI6YmctZW1lcmFsZC01MDAgaG92ZXI6c2hhZG93LWxnIGhvdmVyOnNjYWxlLVsxLjAyXSBhY3RpdmU6c2NhbGUtWzAuOThdJyBcbiAgICAgICAgICAgICAgOiAnYmctZW1lcmFsZC04MDAvNTAgY3Vyc29yLW5vdC1hbGxvd2VkIG9wYWNpdHktNTAnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtXG4gICAgICAgICAgICByb3VuZGVkLWxnIHB4LTQgcHktM1xuICAgICAgICAgICAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwXG4gICAgICAgICAgYH1cbiAgICAgICAgICBzdHlsZT17XG4gICAgICAgICAgICBjYW5VbmRvXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcvaW1hZ2VzL2J1dHRvbnMvJHtjdWx0dXJhbFN0eWxlfS5wbmcnKWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgRGVzZmF6ZXIgSm9nYWRhXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBTdGF0dXMgZG8gSm9nbyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8cCBcbiAgICAgICAgICBkYXRhLXRlc3RpZD1cImdhbWUtc3RhdHVzXCJcbiAgICAgICAgICBkYXRhLXN0YXRlPXtpc1BsYXllclR1cm4gPyBcInBsYXlpbmdcIiA6IFwid2FpdGluZ1wifVxuICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC0xMDBcIj5cbiAgICAgICAgICB7aXNQbGF5ZXJUdXJuID8gJ1N1YSB2ZXogZGUgam9nYXInIDogJ0FndWFyZGFuZG8gb3BvbmVudGUuLi4nfVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBNZW1vaXplZEdhbWVDb250cm9scyA9IFJlYWN0Lm1lbW8oR2FtZUNvbnRyb2xzKTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkNVTFRVUkFMX1NUWUxFUyIsIkdhbWVDb250cm9scyIsImN1bHR1cmFsU3R5bGUiLCJvblN0eWxlQ2hhbmdlIiwib25GbGlwQm9hcmQiLCJvbk5ld0dhbWUiLCJvblVuZG8iLCJjYW5VbmRvIiwiaXNQbGF5ZXJUdXJuIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDIiLCJzcGFuIiwibGFiZWwiLCJzZWxlY3QiLCJkYXRhLXRlc3RpZCIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwidGFyZ2V0IiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImtleSIsIm9wdGlvbiIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJidXR0b24iLCJvbkNsaWNrIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJkaXNhYmxlZCIsInVuZGVmaW5lZCIsInAiLCJkYXRhLXN0YXRlIiwiTWVtb2l6ZWRHYW1lQ29udHJvbHMiLCJtZW1vIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/web/components/controls/GameControls.tsx\n"));

/***/ }),

/***/ "./src/web/components/info/GameInfo.tsx":
/*!**********************************************!*\
  !*** ./src/web/components/info/GameInfo.tsx ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameInfo\": function() { return /* binding */ GameInfo; },\n/* harmony export */   \"MemoizedGameInfo\": function() { return /* binding */ MemoizedGameInfo; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst GameInfo = (param)=>{\n    let { culturalStyle , moves , evaluation , narratives , events  } = param;\n    // Formata a avaliao como string com sinal\n    const formatEvaluation = (value)=>{\n        const absEval = Math.abs(value);\n        const sign = value > 0 ? \"+\" : value < 0 ? \"-\" : \"\";\n        return \"\".concat(sign).concat(absEval.toFixed(1));\n    };\n    // Formata o movimento para exibio\n    const formatMove = (move)=>{\n        const pieceSymbols = {\n            p: \"\",\n            n: \"N\",\n            b: \"B\",\n            r: \"R\",\n            q: \"Q\",\n            k: \"K\"\n        };\n        const piece = pieceSymbols[move.piece.type] || \"\";\n        const capture = move.captured ? \"x\" : \"\";\n        const promotion = move.promotion ? \"=\".concat(pieceSymbols[move.promotion]) : \"\";\n        const to = \"\".concat(String.fromCharCode(97 + move.to.col)).concat(8 - move.to.row);\n        return \"\".concat(piece).concat(capture).concat(to).concat(promotion);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"flex flex-col gap-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"evaluation-panel\",\n                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"bg-emerald-800/30 backdrop-blur-sm rounded-xl border border-emerald-600/50 shadow-xl p-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/20\",\n                                children: \"\\uD83D\\uDCCA\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 57,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Avalia\\xe7\\xe3o\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 56,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"flex items-center justify-between\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-100\",\n                                children: \"Posi\\xe7\\xe3o atual:\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 61,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                \"data-testid\": \"evaluation-value\",\n                                \"data-value\": evaluation,\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-lg font-bold \".concat(evaluation > 0 ? \"text-emerald-400\" : evaluation < 0 ? \"text-red-400\" : \"text-gray-400\"),\n                                children: formatEvaluation(evaluation)\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 62,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 60,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                lineNumber: 52,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"narratives-panel\",\n                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"bg-emerald-800/30 backdrop-blur-sm rounded-xl border border-emerald-600/50 shadow-xl p-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/20\",\n                                children: \"\\uD83D\\uDCD6\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 84,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Narrativas\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 83,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"space-y-2\",\n                        children: narratives.map((narrative, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                \"data-testid\": \"narrative-\".concat(index),\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-100 text-sm\",\n                                children: narrative\n                            }, index, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 89,\n                                columnNumber: 13\n                            }, undefined))\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 87,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                lineNumber: 79,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"move-history\",\n                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"bg-emerald-800/30 backdrop-blur-sm rounded-xl border border-emerald-600/50 shadow-xl p-6 max-h-48 overflow-y-auto scrollbar-custom\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/20\",\n                                children: \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 106,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Movimentos\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 105,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"grid grid-cols-2 gap-2\",\n                        children: moves.map((move, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                \"data-testid\": \"move-history-item-\".concat(index),\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-sm \".concat(index % 2 === 0 ? \"text-right\" : \"text-left\"),\n                                children: [\n                                    index % 2 === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-400 mr-2\",\n                                        children: [\n                                            Math.floor(index / 2) + 1,\n                                            \".\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                        lineNumber: 117,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-100\",\n                                        children: formatMove(move)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                        lineNumber: 121,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, index, true, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 111,\n                                columnNumber: 13\n                            }, undefined))\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 109,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                lineNumber: 101,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                \"data-testid\": \"events-panel\",\n                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"bg-emerald-800/30 backdrop-blur-sm rounded-xl border border-emerald-600/50 shadow-xl p-6 max-h-48 overflow-y-auto scrollbar-custom\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"w-8 h-8 flex items-center justify-center rounded-lg bg-emerald-500/20\",\n                                children: \"\\uD83C\\uDFAD\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 133,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Eventos\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 132,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"space-y-2\",\n                        children: events.map((event, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                \"data-testid\": \"event-\".concat(index),\n                                className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-400 text-xs\",\n                                        children: new Date(event.timestamp).toLocaleTimeString()\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                        lineNumber: 143,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-69ab07c9acd91bbc\" + \" \" + \"text-emerald-100 text-sm\",\n                                        children: event.description\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                        lineNumber: 146,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, index, true, {\n                                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                                lineNumber: 138,\n                                columnNumber: 13\n                            }, undefined))\n                    }, void 0, false, {\n                        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                        lineNumber: 136,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n                lineNumber: 128,\n                columnNumber: 7\n            }, undefined),\n            (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"69ab07c9acd91bbc\",\n                children: \".scrollbar-custom{scrollbar-width:thin;scrollbar-color:#059669#065f46}.scrollbar-custom::-webkit-scrollbar{width:8px}.scrollbar-custom::-webkit-scrollbar-track{background:#065f46;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.scrollbar-custom::-webkit-scrollbar-thumb{background:#059669;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.scrollbar-custom::-webkit-scrollbar-thumb:hover{background:#10b981}\"\n            }, void 0, false, void 0, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jx/WORKSPACE/PROJECTS/CHESS/src/web/components/info/GameInfo.tsx\",\n        lineNumber: 50,\n        columnNumber: 5\n    }, undefined);\n};\n_c = GameInfo;\nconst MemoizedGameInfo = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2___default().memo(GameInfo);\n_c1 = MemoizedGameInfo;\nvar _c, _c1;\n$RefreshReg$(_c, \"GameInfo\");\n$RefreshReg$(_c1, \"MemoizedGameInfo\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmIsOERBQUNQO2dCQUNDQyxlQUFZOzBEQUNGOztrQ0FFViw4REFBQ0M7a0VBQWE7OzBDQUNaLDhEQUFDQzswRUFBZTswQ0FBd0U7Ozs7Ozs0QkFBUzs7Ozs7OztrQ0FHbkcsOERBQUNIO2tFQUFjO2tDQUNaM0IsT0FBT2dDLEdBQUcsQ0FBQyxDQUFDSSxPQUFPRixzQkFDbEIsOERBQUNQO2dDQUVDQyxlQUFhLFNBQWUsT0FBTk07MEVBQ1o7O2tEQUVWLDhEQUFDSjtrRkFBZTtrREFDYixJQUFJTyxLQUFLRCxNQUFNRSxTQUFTLEVBQUVDLGtCQUFrQjs7Ozs7O2tEQUUvQyw4REFBQ1Q7a0ZBQWU7a0RBQ2JNLE1BQU1JLFdBQVc7Ozs7Ozs7K0JBUmZOOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNDbkIsRUFBRTtLQWpLV3ZDO0FBbUtOLE1BQU04QyxpQ0FBbUIvQyxpREFBVSxDQUFDQyxVQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy93ZWIvY29tcG9uZW50cy9pbmZvL0dhbWVJbmZvLnRzeD9jM2JhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGVzc01vdmUgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdHlwZXMvY2hlc3MnO1xuXG5pbnRlcmZhY2UgR2FtZUluZm9Qcm9wcyB7XG4gIGN1bHR1cmFsU3R5bGU6IHN0cmluZztcbiAgbW92ZXM6IENoZXNzTW92ZVtdO1xuICBldmFsdWF0aW9uOiBudW1iZXI7XG4gIG5hcnJhdGl2ZXM6IHN0cmluZ1tdO1xuICBldmVudHM6IEFycmF5PHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgfT47XG59XG5cbmV4cG9ydCBjb25zdCBHYW1lSW5mbzogUmVhY3QuRkM8R2FtZUluZm9Qcm9wcz4gPSAoe1xuICBjdWx0dXJhbFN0eWxlLFxuICBtb3ZlcyxcbiAgZXZhbHVhdGlvbixcbiAgbmFycmF0aXZlcyxcbiAgZXZlbnRzLFxufSkgPT4ge1xuICAvLyBGb3JtYXRhIGEgYXZhbGlhw6fDo28gY29tbyBzdHJpbmcgY29tIHNpbmFsXG4gIGNvbnN0IGZvcm1hdEV2YWx1YXRpb24gPSAodmFsdWU6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgYWJzRXZhbCA9IE1hdGguYWJzKHZhbHVlKTtcbiAgICBjb25zdCBzaWduID0gdmFsdWUgPiAwID8gJysnIDogdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIGAke3NpZ259JHthYnNFdmFsLnRvRml4ZWQoMSl9YDtcbiAgfTtcblxuICAvLyBGb3JtYXRhIG8gbW92aW1lbnRvIHBhcmEgZXhpYmnDp8Ojb1xuICBjb25zdCBmb3JtYXRNb3ZlID0gKG1vdmU6IENoZXNzTW92ZSk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgcGllY2VTeW1ib2xzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgcDogJycsXG4gICAgICBuOiAnTicsXG4gICAgICBiOiAnQicsXG4gICAgICByOiAnUicsXG4gICAgICBxOiAnUScsXG4gICAgICBrOiAnSycsXG4gICAgfTtcblxuICAgIGNvbnN0IHBpZWNlID0gcGllY2VTeW1ib2xzW21vdmUucGllY2UudHlwZV0gfHwgJyc7XG4gICAgY29uc3QgY2FwdHVyZSA9IG1vdmUuY2FwdHVyZWQgPyAneCcgOiAnJztcbiAgICBjb25zdCBwcm9tb3Rpb24gPSBtb3ZlLnByb21vdGlvbiA/IGA9JHtwaWVjZVN5bWJvbHNbbW92ZS5wcm9tb3Rpb25dfWAgOiAnJztcbiAgICBjb25zdCB0byA9IGAke1N0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBtb3ZlLnRvLmNvbCl9JHs4IC0gbW92ZS50by5yb3d9YDtcblxuICAgIHJldHVybiBgJHtwaWVjZX0ke2NhcHR1cmV9JHt0b30ke3Byb21vdGlvbn1gO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC00XCI+XG4gICAgICB7LyogQXZhbGlhw6fDo28gKi99XG4gICAgICA8ZGl2IFxuICAgICAgICBkYXRhLXRlc3RpZD1cImV2YWx1YXRpb24tcGFuZWxcIlxuICAgICAgICBjbGFzc05hbWU9XCJiZy1lbWVyYWxkLTgwMC8zMCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTYwMC81MCBzaGFkb3cteGwgcC02XCJcbiAgICAgID5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTggaC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbGcgYmctZW1lcmFsZC01MDAvMjBcIj7wn5OKPC9zcGFuPlxuICAgICAgICAgIEF2YWxpYcOnw6NvXG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1lbWVyYWxkLTEwMFwiPlBvc2nDp8OjbyBhdHVhbDo8L3NwYW4+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZXZhbHVhdGlvbi12YWx1ZVwiXG4gICAgICAgICAgICBkYXRhLXZhbHVlPXtldmFsdWF0aW9ufVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdGV4dC1sZyBmb250LWJvbGQgJHtcbiAgICAgICAgICAgICAgZXZhbHVhdGlvbiA+IDBcbiAgICAgICAgICAgICAgICA/ICd0ZXh0LWVtZXJhbGQtNDAwJ1xuICAgICAgICAgICAgICAgIDogZXZhbHVhdGlvbiA8IDBcbiAgICAgICAgICAgICAgICA/ICd0ZXh0LXJlZC00MDAnXG4gICAgICAgICAgICAgICAgOiAndGV4dC1ncmF5LTQwMCdcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtmb3JtYXRFdmFsdWF0aW9uKGV2YWx1YXRpb24pfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE5hcnJhdGl2YXMgQ3VsdHVyYWlzICovfVxuICAgICAgPGRpdiBcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJuYXJyYXRpdmVzLXBhbmVsXCJcbiAgICAgICAgY2xhc3NOYW1lPVwiYmctZW1lcmFsZC04MDAvMzAgYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZW1lcmFsZC02MDAvNTAgc2hhZG93LXhsIHAtNlwiXG4gICAgICA+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBtYi00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy04IGgtOCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWxnIGJnLWVtZXJhbGQtNTAwLzIwXCI+8J+Tljwvc3Bhbj5cbiAgICAgICAgICBOYXJyYXRpdmFzXG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAge25hcnJhdGl2ZXMubWFwKChuYXJyYXRpdmUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICA8cCBcbiAgICAgICAgICAgICAga2V5PXtpbmRleH0gXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbmFycmF0aXZlLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1lbWVyYWxkLTEwMCB0ZXh0LXNtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge25hcnJhdGl2ZX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEhpc3TDs3JpY28gZGUgTW92aW1lbnRvcyAqL31cbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJtb3ZlLWhpc3RvcnlcIlxuICAgICAgICBjbGFzc05hbWU9XCJiZy1lbWVyYWxkLTgwMC8zMCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTYwMC81MCBzaGFkb3cteGwgcC02IG1heC1oLTQ4IG92ZXJmbG93LXktYXV0byBzY3JvbGxiYXItY3VzdG9tXCJcbiAgICAgID5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTggaC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbGcgYmctZW1lcmFsZC01MDAvMjBcIj7imZ/vuI88L3NwYW4+XG4gICAgICAgICAgTW92aW1lbnRvc1xuICAgICAgICA8L2gyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICB7bW92ZXMubWFwKChtb3ZlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YG1vdmUtaGlzdG9yeS1pdGVtLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdGV4dC1zbSAke2luZGV4ICUgMiA9PT0gMCA/ICd0ZXh0LXJpZ2h0JyA6ICd0ZXh0LWxlZnQnfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpbmRleCAlIDIgPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC00MDAgbXItMlwiPlxuICAgICAgICAgICAgICAgICAge01hdGguZmxvb3IoaW5kZXggLyAyKSArIDF9LlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1lbWVyYWxkLTEwMFwiPntmb3JtYXRNb3ZlKG1vdmUpfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogRXZlbnRvcyBDdWx0dXJhaXMgKi99XG4gICAgICA8ZGl2XG4gICAgICAgIGRhdGEtdGVzdGlkPVwiZXZlbnRzLXBhbmVsXCJcbiAgICAgICAgY2xhc3NOYW1lPVwiYmctZW1lcmFsZC04MDAvMzAgYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZW1lcmFsZC02MDAvNTAgc2hhZG93LXhsIHAtNiBtYXgtaC00OCBvdmVyZmxvdy15LWF1dG8gc2Nyb2xsYmFyLWN1c3RvbVwiXG4gICAgICA+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBtYi00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy04IGgtOCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWxnIGJnLWVtZXJhbGQtNTAwLzIwXCI+8J+OrTwvc3Bhbj5cbiAgICAgICAgICBFdmVudG9zXG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAge2V2ZW50cy5tYXAoKGV2ZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAga2V5PXtpbmRleH0gXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZXZlbnQtJHtpbmRleH1gfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC00MDAgdGV4dC14c1wiPlxuICAgICAgICAgICAgICAgIHtuZXcgRGF0ZShldmVudC50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZW1lcmFsZC0xMDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHtldmVudC5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBFc3RpbG8gcGFyYSBzY3JvbGxiYXJzICovfVxuICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgICAgICAgLnNjcm9sbGJhci1jdXN0b20ge1xuICAgICAgICAgIHNjcm9sbGJhci13aWR0aDogdGhpbjtcbiAgICAgICAgICBzY3JvbGxiYXItY29sb3I6ICMwNTk2NjkgIzA2NWY0NjtcbiAgICAgICAgfVxuICAgICAgICAuc2Nyb2xsYmFyLWN1c3RvbTo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnNjcm9sbGJhci1jdXN0b206Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDY1ZjQ2O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgICAuc2Nyb2xsYmFyLWN1c3RvbTo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICMwNTk2Njk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIC5zY3JvbGxiYXItY3VzdG9tOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzEwYjk4MTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IE1lbW9pemVkR2FtZUluZm8gPSBSZWFjdC5tZW1vKEdhbWVJbmZvKTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkdhbWVJbmZvIiwiY3VsdHVyYWxTdHlsZSIsIm1vdmVzIiwiZXZhbHVhdGlvbiIsIm5hcnJhdGl2ZXMiLCJldmVudHMiLCJmb3JtYXRFdmFsdWF0aW9uIiwidmFsdWUiLCJhYnNFdmFsIiwiTWF0aCIsImFicyIsInNpZ24iLCJ0b0ZpeGVkIiwiZm9ybWF0TW92ZSIsIm1vdmUiLCJwaWVjZVN5bWJvbHMiLCJwIiwibiIsImIiLCJyIiwicSIsImsiLCJwaWVjZSIsInR5cGUiLCJjYXB0dXJlIiwiY2FwdHVyZWQiLCJwcm9tb3Rpb24iLCJ0byIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNvbCIsInJvdyIsImRpdiIsImRhdGEtdGVzdGlkIiwiaDIiLCJzcGFuIiwiZGF0YS12YWx1ZSIsIm1hcCIsIm5hcnJhdGl2ZSIsImluZGV4IiwiZmxvb3IiLCJldmVudCIsIkRhdGUiLCJ0aW1lc3RhbXAiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJkZXNjcmlwdGlvbiIsIk1lbW9pemVkR2FtZUluZm8iLCJtZW1vIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/web/components/info/GameInfo.tsx\n"));

/***/ }),

/***/ "./src/web/hooks/useGameState.ts":
/*!***************************************!*\
  !*** ./src/web/hooks/useGameState.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"useGameState\": function() { return /* binding */ useGameState; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _shared_constants_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/constants/game */ \"./src/shared/constants/game.ts\");\n/* harmony import */ var _shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/utils/chess */ \"./src/shared/utils/chess.ts\");\n\n\n\nfunction useGameState() {\n    let { initialFen =_shared_constants_game__WEBPACK_IMPORTED_MODULE_1__.INITIAL_FEN , culturalStyle =\"modern\" , timeControl  } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    // Estado do jogo\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        id: crypto.randomUUID(),\n        fen: initialFen,\n        moveHistory: [],\n        currentPlayer: \"white\",\n        isCheck: false,\n        isCheckmate: false,\n        isDraw: false,\n        status: _shared_constants_game__WEBPACK_IMPORTED_MODULE_1__.GAME_STATUS.ACTIVE,\n        timeControl\n    });\n    // Estado da interface\n    const [selectedSquare, setSelectedSquare] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [possibleMoves, setPossibleMoves] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [lastMove, setLastMove] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Reseta o jogo para o estado inicial\n    const resetGame = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setGameState({\n            id: crypto.randomUUID(),\n            fen: initialFen,\n            moveHistory: [],\n            currentPlayer: \"white\",\n            isCheck: false,\n            isCheckmate: false,\n            isDraw: false,\n            status: _shared_constants_game__WEBPACK_IMPORTED_MODULE_1__.GAME_STATUS.ACTIVE,\n            timeControl\n        });\n        setSelectedSquare(null);\n        setPossibleMoves([]);\n        setLastMove(null);\n    }, [\n        initialFen,\n        timeControl\n    ]);\n    // Retorna a pea em uma posio especfica\n    const pieceAt = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((position)=>{\n        const { row , col  } = position;\n        const fenParts = gameState.fen.split(\" \");\n        const boardFen = fenParts[0];\n        const ranks = boardFen.split(\"/\");\n        // Converte a posio do tabuleiro para o ndice no FEN\n        let currentRank = ranks[row];\n        let currentCol = 0;\n        for(let i = 0; i < currentRank.length; i++){\n            const char = currentRank[i];\n            if (isNaN(parseInt(char))) {\n                if (currentCol === col) {\n                    const isWhite = char === char.toUpperCase();\n                    const pieceType = char.toLowerCase();\n                    return {\n                        type: pieceType,\n                        color: isWhite ? \"white\" : \"black\"\n                    };\n                }\n                currentCol++;\n            } else {\n                currentCol += parseInt(char);\n                if (currentCol > col) {\n                    return undefined;\n                }\n            }\n        }\n        return undefined;\n    }, [\n        gameState.fen\n    ]);\n    // Calcula movimentos possveis para uma pea\n    const calculatePossibleMoves = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((position, piece)=>{\n        const moves = [];\n        const { row , col  } = position;\n        // Direes de movimento por tipo de pea\n        const directions = [];\n        switch(piece.type){\n            case \"p\":\n                const direction = piece.color === \"white\" ? -1 : 1;\n                const startRow = piece.color === \"white\" ? 6 : 1;\n                // Movimento para frente\n                if ((0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)({\n                    row: row + direction,\n                    col\n                }) && !pieceAt({\n                    row: row + direction,\n                    col\n                })) {\n                    moves.push({\n                        row: row + direction,\n                        col\n                    });\n                    // Movimento duplo inicial\n                    if (row === startRow && !pieceAt({\n                        row: row + 2 * direction,\n                        col\n                    })) {\n                        moves.push({\n                            row: row + 2 * direction,\n                            col\n                        });\n                    }\n                }\n                // Capturas diagonais\n                for (const dx of [\n                    -1,\n                    1\n                ]){\n                    const newPos = {\n                        row: row + direction,\n                        col: col + dx\n                    };\n                    if ((0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)(newPos)) {\n                        const targetPiece = pieceAt(newPos);\n                        if (targetPiece && targetPiece.color !== piece.color) {\n                            moves.push(newPos);\n                        }\n                    }\n                }\n                break;\n            case \"n\":\n                const knightMoves = [\n                    {\n                        row: -2,\n                        col: -1\n                    },\n                    {\n                        row: -2,\n                        col: 1\n                    },\n                    {\n                        row: -1,\n                        col: -2\n                    },\n                    {\n                        row: -1,\n                        col: 2\n                    },\n                    {\n                        row: 1,\n                        col: -2\n                    },\n                    {\n                        row: 1,\n                        col: 2\n                    },\n                    {\n                        row: 2,\n                        col: -1\n                    },\n                    {\n                        row: 2,\n                        col: 1\n                    }\n                ];\n                for (const move of knightMoves){\n                    const newPos = {\n                        row: row + move.row,\n                        col: col + move.col\n                    };\n                    if ((0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)(newPos)) {\n                        const targetPiece = pieceAt(newPos);\n                        if (!targetPiece || targetPiece.color !== piece.color) {\n                            moves.push(newPos);\n                        }\n                    }\n                }\n                break;\n            case \"b\":\n                directions.push({\n                    row: -1,\n                    col: -1\n                }, {\n                    row: -1,\n                    col: 1\n                }, {\n                    row: 1,\n                    col: -1\n                }, {\n                    row: 1,\n                    col: 1\n                });\n                break;\n            case \"r\":\n                directions.push({\n                    row: -1,\n                    col: 0\n                }, {\n                    row: 1,\n                    col: 0\n                }, {\n                    row: 0,\n                    col: -1\n                }, {\n                    row: 0,\n                    col: 1\n                });\n                break;\n            case \"q\":\n                directions.push({\n                    row: -1,\n                    col: -1\n                }, {\n                    row: -1,\n                    col: 0\n                }, {\n                    row: -1,\n                    col: 1\n                }, {\n                    row: 0,\n                    col: -1\n                }, {\n                    row: 0,\n                    col: 1\n                }, {\n                    row: 1,\n                    col: -1\n                }, {\n                    row: 1,\n                    col: 0\n                }, {\n                    row: 1,\n                    col: 1\n                });\n                break;\n            case \"k\":\n                directions.push({\n                    row: -1,\n                    col: -1\n                }, {\n                    row: -1,\n                    col: 0\n                }, {\n                    row: -1,\n                    col: 1\n                }, {\n                    row: 0,\n                    col: -1\n                }, {\n                    row: 0,\n                    col: 1\n                }, {\n                    row: 1,\n                    col: -1\n                }, {\n                    row: 1,\n                    col: 0\n                }, {\n                    row: 1,\n                    col: 1\n                });\n                break;\n        }\n        // Processa movimentos nas direes permitidas\n        for (const dir of directions){\n            let distance = piece.type === \"k\" ? 1 : 7;\n            for(let i = 1; i <= distance; i++){\n                const newPos = {\n                    row: row + dir.row * i,\n                    col: col + dir.col * i\n                };\n                if (!(0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)(newPos)) break;\n                const targetPiece = pieceAt(newPos);\n                if (!targetPiece) {\n                    moves.push(newPos);\n                } else {\n                    if (targetPiece.color !== piece.color) {\n                        moves.push(newPos);\n                    }\n                    break;\n                }\n            }\n        }\n        return moves;\n    }, [\n        pieceAt\n    ]);\n    // Seleciona uma casa e calcula movimentos possveis\n    const selectSquare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((position)=>{\n        if (!position) {\n            setSelectedSquare(null);\n            setPossibleMoves([]);\n            return;\n        }\n        const piece = pieceAt(position);\n        if (!piece || piece.color !== gameState.currentPlayer) {\n            setSelectedSquare(null);\n            setPossibleMoves([]);\n            return;\n        }\n        setSelectedSquare(position);\n        setPossibleMoves(calculatePossibleMoves(position, piece));\n    }, [\n        gameState.currentPlayer,\n        pieceAt,\n        calculatePossibleMoves\n    ]);\n    // Executa um movimento\n    const makeMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((from, to)=>{\n        if (!(0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)(from) || !(0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isValidPosition)(to)) {\n            return false;\n        }\n        const piece = pieceAt(from);\n        if (!piece || piece.color !== gameState.currentPlayer) {\n            return false;\n        }\n        const isValidMove = possibleMoves.some((move)=>(0,_shared_utils_chess__WEBPACK_IMPORTED_MODULE_2__.isSamePosition)(move, to));\n        if (!isValidMove) {\n            return false;\n        }\n        // TODO: Implementar lgica de movimento e atualizao do estado do jogo\n        const capturedPiece = pieceAt(to);\n        const move = {\n            from,\n            to,\n            piece,\n            captured: capturedPiece\n        };\n        setGameState((prev)=>({\n                ...prev,\n                currentPlayer: prev.currentPlayer === \"white\" ? \"black\" : \"white\",\n                moveHistory: [\n                    ...prev.moveHistory,\n                    move\n                ]\n            }));\n        setLastMove(move);\n        setSelectedSquare(null);\n        setPossibleMoves([]);\n        return true;\n    }, [\n        gameState.currentPlayer,\n        pieceAt,\n        possibleMoves\n    ]);\n    // Desfaz o ltimo movimento\n    const undoLastMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (gameState.moveHistory.length === 0) {\n            return;\n        }\n        // TODO: Implementar lgica para desfazer o ltimo movimento\n        setGameState((prev)=>({\n                ...prev,\n                moveHistory: prev.moveHistory.slice(0, -1),\n                currentPlayer: prev.currentPlayer === \"white\" ? \"black\" : \"white\"\n            }));\n        setLastMove(null);\n        setSelectedSquare(null);\n        setPossibleMoves([]);\n    }, [\n        gameState.moveHistory\n    ]);\n    // Atualiza o estado quando o FEN inicial muda\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        resetGame();\n    }, [\n        initialFen,\n        resetGame\n    ]);\n    return {\n        gameState,\n        selectedSquare,\n        possibleMoves,\n        lastMove,\n        pieceAt,\n        selectSquare,\n        makeMove,\n        resetGame,\n        undoLastMove,\n        isCheck: gameState.isCheck,\n        isCheckmate: gameState.isCheckmate,\n        isDraw: gameState.isDraw,\n        currentPlayer: gameState.currentPlayer\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVNLFdBQVc7S0FBQztJQUUxQiw4Q0FBOEM7SUFDOUNmLGdEQUFTQSxDQUFDLElBQU07UUFDZDRCO0lBQ0YsR0FBRztRQUFDdEI7UUFBWXNCO0tBQVU7SUFFMUIsT0FBTztRQUNMbkI7UUFDQWE7UUFDQUU7UUFDQUU7UUFDQUc7UUFDQW9DO1FBQ0FDO1FBQ0F0QztRQUNBOEM7UUFDQXpELFNBQVNSLFVBQVVRLE9BQU87UUFDMUJDLGFBQWFULFVBQVVTLFdBQVc7UUFDbENDLFFBQVFWLFVBQVVVLE1BQU07UUFDeEJILGVBQWVQLFVBQVVPLGFBQWE7SUFDeEM7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy93ZWIvaG9va3MvdXNlR2FtZVN0YXRlLnRzPzgyZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGVzc1Bvc2l0aW9uLCBDaGVzc1BpZWNlLCBHYW1lU3RhdGUsIENoZXNzTW92ZSB9IGZyb20gJy4uLy4uL3NoYXJlZC90eXBlcy9jaGVzcyc7XG5pbXBvcnQgeyBJTklUSUFMX0ZFTiwgR0FNRV9TVEFUVVMgfSBmcm9tICcuLi8uLi9zaGFyZWQvY29uc3RhbnRzL2dhbWUnO1xuaW1wb3J0IHsgXG4gIGFsZ2VicmFpY1RvQ29vcmRzLFxuICBjb29yZHNUb0FsZ2VicmFpYyxcbiAgaXNWYWxpZFBvc2l0aW9uLFxuICBpc1NhbWVQb3NpdGlvbixcbn0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzL2NoZXNzJztcblxuaW50ZXJmYWNlIFVzZUdhbWVTdGF0ZVByb3BzIHtcbiAgaW5pdGlhbEZlbj86IHN0cmluZztcbiAgY3VsdHVyYWxTdHlsZT86IHN0cmluZztcbiAgdGltZUNvbnRyb2w/OiB7XG4gICAgaW5pdGlhbDogbnVtYmVyO1xuICAgIGluY3JlbWVudDogbnVtYmVyO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVXNlR2FtZVN0YXRlUmV0dXJuIHtcbiAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XG4gIHNlbGVjdGVkU3F1YXJlOiBDaGVzc1Bvc2l0aW9uIHwgbnVsbDtcbiAgcG9zc2libGVNb3ZlczogQ2hlc3NQb3NpdGlvbltdO1xuICBsYXN0TW92ZTogQ2hlc3NNb3ZlIHwgbnVsbDtcbiAgcGllY2VBdDogKHBvc2l0aW9uOiBDaGVzc1Bvc2l0aW9uKSA9PiBDaGVzc1BpZWNlIHwgdW5kZWZpbmVkO1xuICBzZWxlY3RTcXVhcmU6IChwb3NpdGlvbjogQ2hlc3NQb3NpdGlvbiB8IG51bGwpID0+IHZvaWQ7XG4gIG1ha2VNb3ZlOiAoZnJvbTogQ2hlc3NQb3NpdGlvbiwgdG86IENoZXNzUG9zaXRpb24pID0+IGJvb2xlYW47XG4gIHJlc2V0R2FtZTogKCkgPT4gdm9pZDtcbiAgdW5kb0xhc3RNb3ZlOiAoKSA9PiB2b2lkO1xuICBpc0NoZWNrOiBib29sZWFuO1xuICBpc0NoZWNrbWF0ZTogYm9vbGVhbjtcbiAgaXNEcmF3OiBib29sZWFuO1xuICBjdXJyZW50UGxheWVyOiAnd2hpdGUnIHwgJ2JsYWNrJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUdhbWVTdGF0ZSh7XG4gIGluaXRpYWxGZW4gPSBJTklUSUFMX0ZFTixcbiAgY3VsdHVyYWxTdHlsZSA9ICdtb2Rlcm4nLFxuICB0aW1lQ29udHJvbCxcbn06IFVzZUdhbWVTdGF0ZVByb3BzID0ge30pOiBVc2VHYW1lU3RhdGVSZXR1cm4ge1xuICAvLyBFc3RhZG8gZG8gam9nb1xuICBjb25zdCBbZ2FtZVN0YXRlLCBzZXRHYW1lU3RhdGVdID0gdXNlU3RhdGU8R2FtZVN0YXRlPih7XG4gICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgZmVuOiBpbml0aWFsRmVuLFxuICAgIG1vdmVIaXN0b3J5OiBbXSxcbiAgICBjdXJyZW50UGxheWVyOiAnd2hpdGUnLFxuICAgIGlzQ2hlY2s6IGZhbHNlLFxuICAgIGlzQ2hlY2ttYXRlOiBmYWxzZSxcbiAgICBpc0RyYXc6IGZhbHNlLFxuICAgIHN0YXR1czogR0FNRV9TVEFUVVMuQUNUSVZFLFxuICAgIHRpbWVDb250cm9sLFxuICB9KTtcblxuICAvLyBFc3RhZG8gZGEgaW50ZXJmYWNlXG4gIGNvbnN0IFtzZWxlY3RlZFNxdWFyZSwgc2V0U2VsZWN0ZWRTcXVhcmVdID0gdXNlU3RhdGU8Q2hlc3NQb3NpdGlvbiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcG9zc2libGVNb3Zlcywgc2V0UG9zc2libGVNb3Zlc10gPSB1c2VTdGF0ZTxDaGVzc1Bvc2l0aW9uW10+KFtdKTtcbiAgY29uc3QgW2xhc3RNb3ZlLCBzZXRMYXN0TW92ZV0gPSB1c2VTdGF0ZTxDaGVzc01vdmUgfCBudWxsPihudWxsKTtcblxuICAvLyBSZXNldGEgbyBqb2dvIHBhcmEgbyBlc3RhZG8gaW5pY2lhbFxuICBjb25zdCByZXNldEdhbWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0R2FtZVN0YXRlKHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgZmVuOiBpbml0aWFsRmVuLFxuICAgICAgbW92ZUhpc3Rvcnk6IFtdLFxuICAgICAgY3VycmVudFBsYXllcjogJ3doaXRlJyxcbiAgICAgIGlzQ2hlY2s6IGZhbHNlLFxuICAgICAgaXNDaGVja21hdGU6IGZhbHNlLFxuICAgICAgaXNEcmF3OiBmYWxzZSxcbiAgICAgIHN0YXR1czogR0FNRV9TVEFUVVMuQUNUSVZFLFxuICAgICAgdGltZUNvbnRyb2wsXG4gICAgfSk7XG4gICAgc2V0U2VsZWN0ZWRTcXVhcmUobnVsbCk7XG4gICAgc2V0UG9zc2libGVNb3ZlcyhbXSk7XG4gICAgc2V0TGFzdE1vdmUobnVsbCk7XG4gIH0sIFtpbml0aWFsRmVuLCB0aW1lQ29udHJvbF0pO1xuXG4gIC8vIFJldG9ybmEgYSBwZcOnYSBlbSB1bWEgcG9zacOnw6NvIGVzcGVjw61maWNhXG4gIGNvbnN0IHBpZWNlQXQgPSB1c2VDYWxsYmFjaygocG9zaXRpb246IENoZXNzUG9zaXRpb24pOiBDaGVzc1BpZWNlIHwgdW5kZWZpbmVkID0+IHtcbiAgICBjb25zdCB7IHJvdywgY29sIH0gPSBwb3NpdGlvbjtcbiAgICBjb25zdCBmZW5QYXJ0cyA9IGdhbWVTdGF0ZS5mZW4uc3BsaXQoJyAnKTtcbiAgICBjb25zdCBib2FyZEZlbiA9IGZlblBhcnRzWzBdO1xuICAgIGNvbnN0IHJhbmtzID0gYm9hcmRGZW4uc3BsaXQoJy8nKTtcblxuICAgIC8vIENvbnZlcnRlIGEgcG9zacOnw6NvIGRvIHRhYnVsZWlybyBwYXJhIG8gw61uZGljZSBubyBGRU5cbiAgICBsZXQgY3VycmVudFJhbmsgPSByYW5rc1tyb3ddO1xuICAgIGxldCBjdXJyZW50Q29sID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFJhbmsubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBjdXJyZW50UmFua1tpXTtcbiAgICAgIGlmIChpc05hTihwYXJzZUludChjaGFyKSkpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDb2wgPT09IGNvbCkge1xuICAgICAgICAgIGNvbnN0IGlzV2hpdGUgPSBjaGFyID09PSBjaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgcGllY2VUeXBlID0gY2hhci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwaWVjZVR5cGUsXG4gICAgICAgICAgICBjb2xvcjogaXNXaGl0ZSA/ICd3aGl0ZScgOiAnYmxhY2snXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50Q29sKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50Q29sICs9IHBhcnNlSW50KGNoYXIpO1xuICAgICAgICBpZiAoY3VycmVudENvbCA+IGNvbCkge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9LCBbZ2FtZVN0YXRlLmZlbl0pO1xuXG4gIC8vIENhbGN1bGEgbW92aW1lbnRvcyBwb3Nzw612ZWlzIHBhcmEgdW1hIHBlw6dhXG4gIGNvbnN0IGNhbGN1bGF0ZVBvc3NpYmxlTW92ZXMgPSB1c2VDYWxsYmFjaygocG9zaXRpb246IENoZXNzUG9zaXRpb24sIHBpZWNlOiBDaGVzc1BpZWNlKTogQ2hlc3NQb3NpdGlvbltdID0+IHtcbiAgICBjb25zdCBtb3ZlczogQ2hlc3NQb3NpdGlvbltdID0gW107XG4gICAgY29uc3QgeyByb3csIGNvbCB9ID0gcG9zaXRpb247XG5cbiAgICAvLyBEaXJlw6fDtWVzIGRlIG1vdmltZW50byBwb3IgdGlwbyBkZSBwZcOnYVxuICAgIGNvbnN0IGRpcmVjdGlvbnM6IHsgcm93OiBudW1iZXI7IGNvbDogbnVtYmVyIH1bXSA9IFtdO1xuICAgIFxuICAgIHN3aXRjaCAocGllY2UudHlwZSkge1xuICAgICAgY2FzZSAncCc6IC8vIFBlw6NvXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHBpZWNlLmNvbG9yID09PSAnd2hpdGUnID8gLTEgOiAxO1xuICAgICAgICBjb25zdCBzdGFydFJvdyA9IHBpZWNlLmNvbG9yID09PSAnd2hpdGUnID8gNiA6IDE7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3ZpbWVudG8gcGFyYSBmcmVudGVcbiAgICAgICAgaWYgKGlzVmFsaWRQb3NpdGlvbih7IHJvdzogcm93ICsgZGlyZWN0aW9uLCBjb2wgfSkgJiYgIXBpZWNlQXQoeyByb3c6IHJvdyArIGRpcmVjdGlvbiwgY29sIH0pKSB7XG4gICAgICAgICAgbW92ZXMucHVzaCh7IHJvdzogcm93ICsgZGlyZWN0aW9uLCBjb2wgfSk7XG4gICAgICAgICAgLy8gTW92aW1lbnRvIGR1cGxvIGluaWNpYWxcbiAgICAgICAgICBpZiAocm93ID09PSBzdGFydFJvdyAmJiAhcGllY2VBdCh7IHJvdzogcm93ICsgMiAqIGRpcmVjdGlvbiwgY29sIH0pKSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKHsgcm93OiByb3cgKyAyICogZGlyZWN0aW9uLCBjb2wgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDYXB0dXJhcyBkaWFnb25haXNcbiAgICAgICAgZm9yIChjb25zdCBkeCBvZiBbLTEsIDFdKSB7XG4gICAgICAgICAgY29uc3QgbmV3UG9zID0geyByb3c6IHJvdyArIGRpcmVjdGlvbiwgY29sOiBjb2wgKyBkeCB9O1xuICAgICAgICAgIGlmIChpc1ZhbGlkUG9zaXRpb24obmV3UG9zKSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGllY2UgPSBwaWVjZUF0KG5ld1Bvcyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0UGllY2UgJiYgdGFyZ2V0UGllY2UuY29sb3IgIT09IHBpZWNlLmNvbG9yKSB7XG4gICAgICAgICAgICAgIG1vdmVzLnB1c2gobmV3UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ24nOiAvLyBDYXZhbG9cbiAgICAgICAgY29uc3Qga25pZ2h0TW92ZXMgPSBbXG4gICAgICAgICAgeyByb3c6IC0yLCBjb2w6IC0xIH0sIHsgcm93OiAtMiwgY29sOiAxIH0sXG4gICAgICAgICAgeyByb3c6IC0xLCBjb2w6IC0yIH0sIHsgcm93OiAtMSwgY29sOiAyIH0sXG4gICAgICAgICAgeyByb3c6IDEsIGNvbDogLTIgfSwgeyByb3c6IDEsIGNvbDogMiB9LFxuICAgICAgICAgIHsgcm93OiAyLCBjb2w6IC0xIH0sIHsgcm93OiAyLCBjb2w6IDEgfSxcbiAgICAgICAgXTtcbiAgICAgICAgZm9yIChjb25zdCBtb3ZlIG9mIGtuaWdodE1vdmVzKSB7XG4gICAgICAgICAgY29uc3QgbmV3UG9zID0geyByb3c6IHJvdyArIG1vdmUucm93LCBjb2w6IGNvbCArIG1vdmUuY29sIH07XG4gICAgICAgICAgaWYgKGlzVmFsaWRQb3NpdGlvbihuZXdQb3MpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRQaWVjZSA9IHBpZWNlQXQobmV3UG9zKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0UGllY2UgfHwgdGFyZ2V0UGllY2UuY29sb3IgIT09IHBpZWNlLmNvbG9yKSB7XG4gICAgICAgICAgICAgIG1vdmVzLnB1c2gobmV3UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2InOiAvLyBCaXNwb1xuICAgICAgICBkaXJlY3Rpb25zLnB1c2goXG4gICAgICAgICAgeyByb3c6IC0xLCBjb2w6IC0xIH0sIHsgcm93OiAtMSwgY29sOiAxIH0sXG4gICAgICAgICAgeyByb3c6IDEsIGNvbDogLTEgfSwgeyByb3c6IDEsIGNvbDogMSB9XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdyJzogLy8gVG9ycmVcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKFxuICAgICAgICAgIHsgcm93OiAtMSwgY29sOiAwIH0sIHsgcm93OiAxLCBjb2w6IDAgfSxcbiAgICAgICAgICB7IHJvdzogMCwgY29sOiAtMSB9LCB7IHJvdzogMCwgY29sOiAxIH1cbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3EnOiAvLyBSYWluaGFcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKFxuICAgICAgICAgIHsgcm93OiAtMSwgY29sOiAtMSB9LCB7IHJvdzogLTEsIGNvbDogMCB9LCB7IHJvdzogLTEsIGNvbDogMSB9LFxuICAgICAgICAgIHsgcm93OiAwLCBjb2w6IC0xIH0sIHsgcm93OiAwLCBjb2w6IDEgfSxcbiAgICAgICAgICB7IHJvdzogMSwgY29sOiAtMSB9LCB7IHJvdzogMSwgY29sOiAwIH0sIHsgcm93OiAxLCBjb2w6IDEgfVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnayc6IC8vIFJlaVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2goXG4gICAgICAgICAgeyByb3c6IC0xLCBjb2w6IC0xIH0sIHsgcm93OiAtMSwgY29sOiAwIH0sIHsgcm93OiAtMSwgY29sOiAxIH0sXG4gICAgICAgICAgeyByb3c6IDAsIGNvbDogLTEgfSwgeyByb3c6IDAsIGNvbDogMSB9LFxuICAgICAgICAgIHsgcm93OiAxLCBjb2w6IC0xIH0sIHsgcm93OiAxLCBjb2w6IDAgfSwgeyByb3c6IDEsIGNvbDogMSB9XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3NhIG1vdmltZW50b3MgbmFzIGRpcmXDp8O1ZXMgcGVybWl0aWRhc1xuICAgIGZvciAoY29uc3QgZGlyIG9mIGRpcmVjdGlvbnMpIHtcbiAgICAgIGxldCBkaXN0YW5jZSA9IHBpZWNlLnR5cGUgPT09ICdrJyA/IDEgOiA3O1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZGlzdGFuY2U7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdQb3MgPSB7XG4gICAgICAgICAgcm93OiByb3cgKyBkaXIucm93ICogaSxcbiAgICAgICAgICBjb2w6IGNvbCArIGRpci5jb2wgKiBpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24obmV3UG9zKSkgYnJlYWs7XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0UGllY2UgPSBwaWVjZUF0KG5ld1Bvcyk7XG4gICAgICAgIGlmICghdGFyZ2V0UGllY2UpIHtcbiAgICAgICAgICBtb3Zlcy5wdXNoKG5ld1Bvcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRhcmdldFBpZWNlLmNvbG9yICE9PSBwaWVjZS5jb2xvcikge1xuICAgICAgICAgICAgbW92ZXMucHVzaChuZXdQb3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtb3ZlcztcbiAgfSwgW3BpZWNlQXRdKTtcblxuICAvLyBTZWxlY2lvbmEgdW1hIGNhc2EgZSBjYWxjdWxhIG1vdmltZW50b3MgcG9zc8OtdmVpc1xuICBjb25zdCBzZWxlY3RTcXVhcmUgPSB1c2VDYWxsYmFjaygocG9zaXRpb246IENoZXNzUG9zaXRpb24gfCBudWxsKSA9PiB7XG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgc2V0U2VsZWN0ZWRTcXVhcmUobnVsbCk7XG4gICAgICBzZXRQb3NzaWJsZU1vdmVzKFtdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwaWVjZSA9IHBpZWNlQXQocG9zaXRpb24pO1xuICAgIGlmICghcGllY2UgfHwgcGllY2UuY29sb3IgIT09IGdhbWVTdGF0ZS5jdXJyZW50UGxheWVyKSB7XG4gICAgICBzZXRTZWxlY3RlZFNxdWFyZShudWxsKTtcbiAgICAgIHNldFBvc3NpYmxlTW92ZXMoW10pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldFNlbGVjdGVkU3F1YXJlKHBvc2l0aW9uKTtcbiAgICBzZXRQb3NzaWJsZU1vdmVzKGNhbGN1bGF0ZVBvc3NpYmxlTW92ZXMocG9zaXRpb24sIHBpZWNlKSk7XG4gIH0sIFtnYW1lU3RhdGUuY3VycmVudFBsYXllciwgcGllY2VBdCwgY2FsY3VsYXRlUG9zc2libGVNb3Zlc10pO1xuXG4gIC8vIEV4ZWN1dGEgdW0gbW92aW1lbnRvXG4gIGNvbnN0IG1ha2VNb3ZlID0gdXNlQ2FsbGJhY2soKGZyb206IENoZXNzUG9zaXRpb24sIHRvOiBDaGVzc1Bvc2l0aW9uKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24oZnJvbSkgfHwgIWlzVmFsaWRQb3NpdGlvbih0bykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwaWVjZSA9IHBpZWNlQXQoZnJvbSk7XG4gICAgaWYgKCFwaWVjZSB8fCBwaWVjZS5jb2xvciAhPT0gZ2FtZVN0YXRlLmN1cnJlbnRQbGF5ZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1ZhbGlkTW92ZSA9IHBvc3NpYmxlTW92ZXMuc29tZShtb3ZlID0+IGlzU2FtZVBvc2l0aW9uKG1vdmUsIHRvKSk7XG4gICAgaWYgKCFpc1ZhbGlkTW92ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGzDs2dpY2EgZGUgbW92aW1lbnRvIGUgYXR1YWxpemHDp8OjbyBkbyBlc3RhZG8gZG8gam9nb1xuICAgIGNvbnN0IGNhcHR1cmVkUGllY2UgPSBwaWVjZUF0KHRvKTtcbiAgICBjb25zdCBtb3ZlOiBDaGVzc01vdmUgPSB7XG4gICAgICBmcm9tLFxuICAgICAgdG8sXG4gICAgICBwaWVjZSxcbiAgICAgIGNhcHR1cmVkOiBjYXB0dXJlZFBpZWNlLFxuICAgIH07XG5cbiAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGN1cnJlbnRQbGF5ZXI6IHByZXYuY3VycmVudFBsYXllciA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnLFxuICAgICAgbW92ZUhpc3Rvcnk6IFsuLi5wcmV2Lm1vdmVIaXN0b3J5LCBtb3ZlXSxcbiAgICB9KSk7XG5cbiAgICBzZXRMYXN0TW92ZShtb3ZlKTtcbiAgICBzZXRTZWxlY3RlZFNxdWFyZShudWxsKTtcbiAgICBzZXRQb3NzaWJsZU1vdmVzKFtdKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9LCBbZ2FtZVN0YXRlLmN1cnJlbnRQbGF5ZXIsIHBpZWNlQXQsIHBvc3NpYmxlTW92ZXNdKTtcblxuICAvLyBEZXNmYXogbyDDumx0aW1vIG1vdmltZW50b1xuICBjb25zdCB1bmRvTGFzdE1vdmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGdhbWVTdGF0ZS5tb3ZlSGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnRhciBsw7NnaWNhIHBhcmEgZGVzZmF6ZXIgbyDDumx0aW1vIG1vdmltZW50b1xuICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgbW92ZUhpc3Rvcnk6IHByZXYubW92ZUhpc3Rvcnkuc2xpY2UoMCwgLTEpLFxuICAgICAgY3VycmVudFBsYXllcjogcHJldi5jdXJyZW50UGxheWVyID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZScsXG4gICAgfSkpO1xuXG4gICAgc2V0TGFzdE1vdmUobnVsbCk7XG4gICAgc2V0U2VsZWN0ZWRTcXVhcmUobnVsbCk7XG4gICAgc2V0UG9zc2libGVNb3ZlcyhbXSk7XG4gIH0sIFtnYW1lU3RhdGUubW92ZUhpc3RvcnldKTtcblxuICAvLyBBdHVhbGl6YSBvIGVzdGFkbyBxdWFuZG8gbyBGRU4gaW5pY2lhbCBtdWRhXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVzZXRHYW1lKCk7XG4gIH0sIFtpbml0aWFsRmVuLCByZXNldEdhbWVdKTtcblxuICByZXR1cm4ge1xuICAgIGdhbWVTdGF0ZSxcbiAgICBzZWxlY3RlZFNxdWFyZSxcbiAgICBwb3NzaWJsZU1vdmVzLFxuICAgIGxhc3RNb3ZlLFxuICAgIHBpZWNlQXQsXG4gICAgc2VsZWN0U3F1YXJlLFxuICAgIG1ha2VNb3ZlLFxuICAgIHJlc2V0R2FtZSxcbiAgICB1bmRvTGFzdE1vdmUsXG4gICAgaXNDaGVjazogZ2FtZVN0YXRlLmlzQ2hlY2ssXG4gICAgaXNDaGVja21hdGU6IGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSxcbiAgICBpc0RyYXc6IGdhbWVTdGF0ZS5pc0RyYXcsXG4gICAgY3VycmVudFBsYXllcjogZ2FtZVN0YXRlLmN1cnJlbnRQbGF5ZXIsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsIklOSVRJQUxfRkVOIiwiR0FNRV9TVEFUVVMiLCJpc1ZhbGlkUG9zaXRpb24iLCJpc1NhbWVQb3NpdGlvbiIsInVzZUdhbWVTdGF0ZSIsImluaXRpYWxGZW4iLCJjdWx0dXJhbFN0eWxlIiwidGltZUNvbnRyb2wiLCJnYW1lU3RhdGUiLCJzZXRHYW1lU3RhdGUiLCJpZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJmZW4iLCJtb3ZlSGlzdG9yeSIsImN1cnJlbnRQbGF5ZXIiLCJpc0NoZWNrIiwiaXNDaGVja21hdGUiLCJpc0RyYXciLCJzdGF0dXMiLCJBQ1RJVkUiLCJzZWxlY3RlZFNxdWFyZSIsInNldFNlbGVjdGVkU3F1YXJlIiwicG9zc2libGVNb3ZlcyIsInNldFBvc3NpYmxlTW92ZXMiLCJsYXN0TW92ZSIsInNldExhc3RNb3ZlIiwicmVzZXRHYW1lIiwicGllY2VBdCIsInBvc2l0aW9uIiwicm93IiwiY29sIiwiZmVuUGFydHMiLCJzcGxpdCIsImJvYXJkRmVuIiwicmFua3MiLCJjdXJyZW50UmFuayIsImN1cnJlbnRDb2wiLCJpIiwibGVuZ3RoIiwiY2hhciIsImlzTmFOIiwicGFyc2VJbnQiLCJpc1doaXRlIiwidG9VcHBlckNhc2UiLCJwaWVjZVR5cGUiLCJ0b0xvd2VyQ2FzZSIsInR5cGUiLCJjb2xvciIsInVuZGVmaW5lZCIsImNhbGN1bGF0ZVBvc3NpYmxlTW92ZXMiLCJwaWVjZSIsIm1vdmVzIiwiZGlyZWN0aW9ucyIsImRpcmVjdGlvbiIsInN0YXJ0Um93IiwicHVzaCIsImR4IiwibmV3UG9zIiwidGFyZ2V0UGllY2UiLCJrbmlnaHRNb3ZlcyIsIm1vdmUiLCJkaXIiLCJkaXN0YW5jZSIsInNlbGVjdFNxdWFyZSIsIm1ha2VNb3ZlIiwiZnJvbSIsInRvIiwiaXNWYWxpZE1vdmUiLCJzb21lIiwiY2FwdHVyZWRQaWVjZSIsImNhcHR1cmVkIiwicHJldiIsInVuZG9MYXN0TW92ZSIsInNsaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/web/hooks/useGameState.ts\n"));

/***/ }),

/***/ "./node_modules/next/dist/compiled/events/events.js":
/*!**********************************************************!*\
  !*** ./node_modules/next/dist/compiled/events/events.js ***!
  \**********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){\"use strict\";var e={864:function(e){var t=typeof Reflect===\"object\"?Reflect:null;var n=t&&typeof t.apply===\"function\"?t.apply:function ReflectApply(e,t,n){return Function.prototype.apply.call(e,t,n)};var r;if(t&&typeof t.ownKeys===\"function\"){r=t.ownKeys}else if(Object.getOwnPropertySymbols){r=function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}}else{r=function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e)}}function ProcessEmitWarning(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function NumberIsNaN(e){return e!==e};function EventEmitter(){EventEmitter.init.call(this)}e.exports=EventEmitter;e.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var s=10;function checkListener(e){if(typeof e!==\"function\"){throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(EventEmitter,\"defaultMaxListeners\",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!==\"number\"||e<0||i(e)){throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\")}s=e}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(e){if(typeof e!==\"number\"||e<0||i(e)){throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\")}this._maxListeners=e;return this};function _getMaxListeners(e){if(e._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return e._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(e){var t=[];for(var r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e===\"error\";var s=this._events;if(s!==undefined)i=i&&s.error===undefined;else if(!i)return false;if(i){var o;if(t.length>0)o=t[0];if(o instanceof Error){throw o}var f=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));f.context=o;throw f}var u=s[e];if(u===undefined)return false;if(typeof u===\"function\"){n(u,this,t)}else{var a=u.length;var c=arrayClone(u,a);for(var r=0;r<a;++r)n(c[r],this,t)}return true};function _addListener(e,t,n,r){var i;var s;var o;checkListener(n);s=e._events;if(s===undefined){s=e._events=Object.create(null);e._eventsCount=0}else{if(s.newListener!==undefined){e.emit(\"newListener\",t,n.listener?n.listener:n);s=e._events}o=s[t]}if(o===undefined){o=s[t]=n;++e._eventsCount}else{if(typeof o===\"function\"){o=s[t]=r?[n,o]:[o,n]}else if(r){o.unshift(n)}else{o.push(n)}i=_getMaxListeners(e);if(i>0&&o.length>i&&!o.warned){o.warned=true;var f=new Error(\"Possible EventEmitter memory leak detected. \"+o.length+\" \"+String(t)+\" listeners \"+\"added. Use emitter.setMaxListeners() to \"+\"increase limit\");f.name=\"MaxListenersExceededWarning\";f.emitter=e;f.type=t;f.count=o.length;ProcessEmitWarning(f)}}return e}EventEmitter.prototype.addListener=function addListener(e,t){return _addListener(this,e,t,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(e,t){return _addListener(this,e,t,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(e,t,n){var r={fired:false,wrapFn:undefined,target:e,type:t,listener:n};var i=onceWrapper.bind(r);i.listener=n;r.wrapFn=i;return i}EventEmitter.prototype.once=function once(e,t){checkListener(t);this.on(e,_onceWrap(this,e,t));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(e,t){checkListener(t);this.prependListener(e,_onceWrap(this,e,t));return this};EventEmitter.prototype.removeListener=function removeListener(e,t){var n,r,i,s,o;checkListener(t);r=this._events;if(r===undefined)return this;n=r[e];if(n===undefined)return this;if(n===t||n.listener===t){if(--this._eventsCount===0)this._events=Object.create(null);else{delete r[e];if(r.removeListener)this.emit(\"removeListener\",e,n.listener||t)}}else if(typeof n!==\"function\"){i=-1;for(s=n.length-1;s>=0;s--){if(n[s]===t||n[s].listener===t){o=n[s].listener;i=s;break}}if(i<0)return this;if(i===0)n.shift();else{spliceOne(n,i)}if(n.length===1)r[e]=n[0];if(r.removeListener!==undefined)this.emit(\"removeListener\",e,o||t)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t,n,r;n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[e]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[e]}return this}if(arguments.length===0){var i=Object.keys(n);var s;for(r=0;r<i.length;++r){s=i[r];if(s===\"removeListener\")continue;this.removeAllListeners(s)}this.removeAllListeners(\"removeListener\");this._events=Object.create(null);this._eventsCount=0;return this}t=n[e];if(typeof t===\"function\"){this.removeListener(e,t)}else if(t!==undefined){for(r=t.length-1;r>=0;r--){this.removeListener(e,t[r])}}return this};function _listeners(e,t,n){var r=e._events;if(r===undefined)return[];var i=r[t];if(i===undefined)return[];if(typeof i===\"function\")return n?[i.listener||i]:[i];return n?unwrapListeners(i):arrayClone(i,i.length)}EventEmitter.prototype.listeners=function listeners(e){return _listeners(this,e,true)};EventEmitter.prototype.rawListeners=function rawListeners(e){return _listeners(this,e,false)};EventEmitter.listenerCount=function(e,t){if(typeof e.listenerCount===\"function\"){return e.listenerCount(t)}else{return listenerCount.call(e,t)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var t=this._events;if(t!==undefined){var n=t[e];if(typeof n===\"function\"){return 1}else if(n!==undefined){return n.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?r(this._events):[]};function arrayClone(e,t){var n=new Array(t);for(var r=0;r<t;++r)n[r]=e[r];return n}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){var t=new Array(e.length);for(var n=0;n<t.length;++n){t[n]=e[n].listener||e[n]}return t}function once(e,t){return new Promise((function(n,r){function errorListener(n){e.removeListener(t,resolver);r(n)}function resolver(){if(typeof e.removeListener===\"function\"){e.removeListener(\"error\",errorListener)}n([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,resolver,{once:true});if(t!==\"error\"){addErrorHandlerIfEventEmitter(e,errorListener,{once:true})}}))}function addErrorHandlerIfEventEmitter(e,t,n){if(typeof e.on===\"function\"){eventTargetAgnosticAddListener(e,\"error\",t,n)}}function eventTargetAgnosticAddListener(e,t,n,r){if(typeof e.on===\"function\"){if(r.once){e.once(t,n)}else{e.on(t,n)}}else if(typeof e.addEventListener===\"function\"){e.addEventListener(t,(function wrapListener(i){if(r.once){e.removeEventListener(t,wrapListener)}n(i)}))}else{throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof e)}}}};var t={};function __nccwpck_require__(n){var r=t[n];if(r!==undefined){return r.exports}var i=t[n]={exports:{}};var s=true;try{e[n](i,i.exports,__nccwpck_require__);s=false}finally{if(s)delete t[n]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var n=__nccwpck_require__(864);module.exports=n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL2V2ZW50cy9ldmVudHMuanMuanMiLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksYUFBYSxPQUFPLGdCQUFnQiw2Q0FBNkMsMEVBQTBFLDZDQUE2QyxNQUFNLHFDQUFxQyxZQUFZLHNDQUFzQyw2QkFBNkIsOEVBQThFLEtBQUssNkJBQTZCLHNDQUFzQywrQkFBK0IseUNBQXlDLDRDQUE0QyxjQUFjLHdCQUF3Qiw2QkFBNkIsdUJBQXVCLG9CQUFvQix1Q0FBdUMseUNBQXlDLHNDQUFzQywrQ0FBK0MsU0FBUywwQkFBMEIsMEJBQTBCLGtHQUFrRywwREFBMEQsK0JBQStCLFNBQVMsaUJBQWlCLG1DQUFtQyw4SEFBOEgsS0FBSyxFQUFFLDZCQUE2QixpRkFBaUYsaUNBQWlDLG9CQUFvQixrREFBa0QsbUVBQW1FLG1DQUFtQyw0R0FBNEcscUJBQXFCLGFBQWEsNkJBQTZCLHVFQUF1RSx1QkFBdUIsa0VBQWtFLCtCQUErQiw2Q0FBNkMsU0FBUyxZQUFZLG1CQUFtQix5QkFBeUIsa0JBQWtCLG1CQUFtQiwwQ0FBMEMsd0JBQXdCLE1BQU0sTUFBTSxxQkFBcUIsdUJBQXVCLFFBQVEsOERBQThELFlBQVksUUFBUSxXQUFXLDhCQUE4QiwwQkFBMEIsWUFBWSxLQUFLLGVBQWUsc0JBQXNCLFlBQVksSUFBSSxtQkFBbUIsYUFBYSwrQkFBK0IsTUFBTSxNQUFNLE1BQU0saUJBQWlCLFlBQVksa0JBQWtCLGdDQUFnQyxpQkFBaUIsS0FBSyw4QkFBOEIsZ0RBQWdELFlBQVksT0FBTyxrQkFBa0IsU0FBUyxpQkFBaUIsS0FBSywwQkFBMEIscUJBQXFCLFdBQVcsYUFBYSxLQUFLLFVBQVUsc0JBQXNCLCtCQUErQixjQUFjLGlLQUFpSyxxQ0FBcUMsWUFBWSxTQUFTLGlCQUFpQix1QkFBdUIsU0FBUyw2REFBNkQscUNBQXFDLDZEQUE2RCxxRUFBcUUsb0NBQW9DLHVCQUF1QixnQkFBZ0Isa0RBQWtELGdCQUFnQiwrREFBK0QsbURBQW1ELDBCQUEwQixPQUFPLHlEQUF5RCwwQkFBMEIsYUFBYSxXQUFXLFNBQVMsK0NBQStDLGlCQUFpQiwrQkFBK0IsYUFBYSw2RUFBNkUsaUJBQWlCLDRDQUE0QyxhQUFhLG1FQUFtRSxjQUFjLGlCQUFpQixlQUFlLDZCQUE2QixPQUFPLDZCQUE2QiwwQkFBMEIsNERBQTRELEtBQUssWUFBWSxpRUFBaUUsK0JBQStCLEtBQUssaUJBQWlCLEtBQUssS0FBSyxnQ0FBZ0MsZ0JBQWdCLElBQUksT0FBTyxtQkFBbUIsbUJBQW1CLEtBQUssZUFBZSwwQkFBMEIsbUVBQW1FLGFBQWEsaUVBQWlFLHlFQUF5RSxVQUFVLGVBQWUsNkJBQTZCLGlDQUFpQyx5QkFBeUIsaUNBQWlDLG9CQUFvQiwwQkFBMEIsNERBQTRELGlCQUFpQixZQUFZLHlCQUF5QixxQkFBcUIsTUFBTSxRQUFRLFdBQVcsS0FBSyxPQUFPLGlDQUFpQywyQkFBMkIsMENBQTBDLGlDQUFpQyxvQkFBb0IsWUFBWSxPQUFPLDBCQUEwQix5QkFBeUIsdUJBQXVCLGlCQUFpQixLQUFLLEtBQUssNkJBQTZCLGFBQWEsMkJBQTJCLGdCQUFnQiwwQkFBMEIsV0FBVywwQkFBMEIsc0RBQXNELG1EQUFtRCx1REFBdUQsZ0NBQWdDLDZEQUE2RCxpQ0FBaUMseUNBQXlDLHdDQUF3QywwQkFBMEIsS0FBSyxpQ0FBaUMsbURBQW1ELDBCQUEwQixtQkFBbUIsa0JBQWtCLFdBQVcsMEJBQTBCLFNBQVMsdUJBQXVCLGlCQUFpQixTQUFTLHdEQUF3RCwrQ0FBK0MseUJBQXlCLG1CQUFtQixZQUFZLElBQUksY0FBYyxTQUFTLHdCQUF3QixLQUFLLGFBQWEsZ0JBQWdCLFFBQVEsNEJBQTRCLDBCQUEwQixZQUFZLFdBQVcsS0FBSyx5QkFBeUIsU0FBUyxtQkFBbUIsa0NBQWtDLDBCQUEwQiw2QkFBNkIsS0FBSyxvQkFBb0IseUNBQXlDLHdDQUF3Qyw0QkFBNEIsNkNBQTZDLFVBQVUsRUFBRSxnQkFBZ0IsK0NBQStDLFVBQVUsR0FBRyxHQUFHLDhDQUE4Qyw2QkFBNkIsK0NBQStDLGlEQUFpRCw2QkFBNkIsV0FBVyxZQUFZLEtBQUssV0FBVyxnREFBZ0QsK0NBQStDLFdBQVcsc0NBQXNDLEtBQUssR0FBRyxLQUFLLHdHQUF3RyxTQUFTLGdDQUFnQyxXQUFXLGtCQUFrQixpQkFBaUIsWUFBWSxZQUFZLFdBQVcsSUFBSSxzQ0FBc0MsUUFBUSxRQUFRLGlCQUFpQixpQkFBaUIsbUVBQW1FLFNBQVMsS0FBSywrQkFBK0IsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvZXZlbnRzL2V2ZW50cy5qcz83NjUyIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBlPXs4NjQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dHlwZW9mIFJlZmxlY3Q9PT1cIm9iamVjdFwiP1JlZmxlY3Q6bnVsbDt2YXIgbj10JiZ0eXBlb2YgdC5hcHBseT09PVwiZnVuY3Rpb25cIj90LmFwcGx5OmZ1bmN0aW9uIFJlZmxlY3RBcHBseShlLHQsbil7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGUsdCxuKX07dmFyIHI7aWYodCYmdHlwZW9mIHQub3duS2V5cz09PVwiZnVuY3Rpb25cIil7cj10Lm93bktleXN9ZWxzZSBpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXtyPWZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9fWVsc2V7cj1mdW5jdGlvbiBSZWZsZWN0T3duS2V5cyhlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSl9fWZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyhlKXtpZihjb25zb2xlJiZjb25zb2xlLndhcm4pY29uc29sZS53YXJuKGUpfXZhciBpPU51bWJlci5pc05hTnx8ZnVuY3Rpb24gTnVtYmVySXNOYU4oZSl7cmV0dXJuIGUhPT1lfTtmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKXtFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpfWUuZXhwb3J0cz1FdmVudEVtaXR0ZXI7ZS5leHBvcnRzLm9uY2U9b25jZTtFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyPUV2ZW50RW1pdHRlcjtFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHM9dW5kZWZpbmVkO0V2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50PTA7RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXVuZGVmaW5lZDt2YXIgcz0xMDtmdW5jdGlvbiBjaGVja0xpc3RlbmVyKGUpe2lmKHR5cGVvZiBlIT09XCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlcixcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBzfSxzZXQ6ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGUhPT1cIm51bWJlclwifHxlPDB8fGkoZSkpe3Rocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKX1zPWV9fSk7RXZlbnRFbWl0dGVyLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9ldmVudHM9PT11bmRlZmluZWR8fHRoaXMuX2V2ZW50cz09PU9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKXt0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLl9ldmVudHNDb3VudD0wfXRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHVuZGVmaW5lZH07RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKGUpe2lmKHR5cGVvZiBlIT09XCJudW1iZXJcInx8ZTwwfHxpKGUpKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiblwiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcrZStcIi5cIil9dGhpcy5fbWF4TGlzdGVuZXJzPWU7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnMoZSl7aWYoZS5fbWF4TGlzdGVuZXJzPT09dW5kZWZpbmVkKXJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztyZXR1cm4gZS5fbWF4TGlzdGVuZXJzfUV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpe3JldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpfTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24gZW1pdChlKXt2YXIgdD1bXTtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXQucHVzaChhcmd1bWVudHNbcl0pO3ZhciBpPWU9PT1cImVycm9yXCI7dmFyIHM9dGhpcy5fZXZlbnRzO2lmKHMhPT11bmRlZmluZWQpaT1pJiZzLmVycm9yPT09dW5kZWZpbmVkO2Vsc2UgaWYoIWkpcmV0dXJuIGZhbHNlO2lmKGkpe3ZhciBvO2lmKHQubGVuZ3RoPjApbz10WzBdO2lmKG8gaW5zdGFuY2VvZiBFcnJvcil7dGhyb3cgb312YXIgZj1uZXcgRXJyb3IoXCJVbmhhbmRsZWQgZXJyb3IuXCIrKG8/XCIgKFwiK28ubWVzc2FnZStcIilcIjpcIlwiKSk7Zi5jb250ZXh0PW87dGhyb3cgZn12YXIgdT1zW2VdO2lmKHU9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO2lmKHR5cGVvZiB1PT09XCJmdW5jdGlvblwiKXtuKHUsdGhpcyx0KX1lbHNle3ZhciBhPXUubGVuZ3RoO3ZhciBjPWFycmF5Q2xvbmUodSxhKTtmb3IodmFyIHI9MDtyPGE7KytyKW4oY1tyXSx0aGlzLHQpfXJldHVybiB0cnVlfTtmdW5jdGlvbiBfYWRkTGlzdGVuZXIoZSx0LG4scil7dmFyIGk7dmFyIHM7dmFyIG87Y2hlY2tMaXN0ZW5lcihuKTtzPWUuX2V2ZW50cztpZihzPT09dW5kZWZpbmVkKXtzPWUuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpO2UuX2V2ZW50c0NvdW50PTB9ZWxzZXtpZihzLm5ld0xpc3RlbmVyIT09dW5kZWZpbmVkKXtlLmVtaXQoXCJuZXdMaXN0ZW5lclwiLHQsbi5saXN0ZW5lcj9uLmxpc3RlbmVyOm4pO3M9ZS5fZXZlbnRzfW89c1t0XX1pZihvPT09dW5kZWZpbmVkKXtvPXNbdF09bjsrK2UuX2V2ZW50c0NvdW50fWVsc2V7aWYodHlwZW9mIG89PT1cImZ1bmN0aW9uXCIpe289c1t0XT1yP1tuLG9dOltvLG5dfWVsc2UgaWYocil7by51bnNoaWZ0KG4pfWVsc2V7by5wdXNoKG4pfWk9X2dldE1heExpc3RlbmVycyhlKTtpZihpPjAmJm8ubGVuZ3RoPmkmJiFvLndhcm5lZCl7by53YXJuZWQ9dHJ1ZTt2YXIgZj1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK28ubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgXCIrXCJhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gXCIrXCJpbmNyZWFzZSBsaW1pdFwiKTtmLm5hbWU9XCJNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmdcIjtmLmVtaXR0ZXI9ZTtmLnR5cGU9dDtmLmNvdW50PW8ubGVuZ3RoO1Byb2Nlc3NFbWl0V2FybmluZyhmKX19cmV0dXJuIGV9RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbiBhZGRMaXN0ZW5lcihlLHQpe3JldHVybiBfYWRkTGlzdGVuZXIodGhpcyxlLHQsZmFsc2UpfTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uPUV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXI9ZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKGUsdCl7cmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLGUsdCx0cnVlKX07ZnVuY3Rpb24gb25jZVdyYXBwZXIoKXtpZighdGhpcy5maXJlZCl7dGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKTt0aGlzLmZpcmVkPXRydWU7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk7cmV0dXJuIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsYXJndW1lbnRzKX19ZnVuY3Rpb24gX29uY2VXcmFwKGUsdCxuKXt2YXIgcj17ZmlyZWQ6ZmFsc2Usd3JhcEZuOnVuZGVmaW5lZCx0YXJnZXQ6ZSx0eXBlOnQsbGlzdGVuZXI6bn07dmFyIGk9b25jZVdyYXBwZXIuYmluZChyKTtpLmxpc3RlbmVyPW47ci53cmFwRm49aTtyZXR1cm4gaX1FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24gb25jZShlLHQpe2NoZWNrTGlzdGVuZXIodCk7dGhpcy5vbihlLF9vbmNlV3JhcCh0aGlzLGUsdCkpO3JldHVybiB0aGlzfTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcihlLHQpe2NoZWNrTGlzdGVuZXIodCk7dGhpcy5wcmVwZW5kTGlzdGVuZXIoZSxfb25jZVdyYXAodGhpcyxlLHQpKTtyZXR1cm4gdGhpc307RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihlLHQpe3ZhciBuLHIsaSxzLG87Y2hlY2tMaXN0ZW5lcih0KTtyPXRoaXMuX2V2ZW50cztpZihyPT09dW5kZWZpbmVkKXJldHVybiB0aGlzO249cltlXTtpZihuPT09dW5kZWZpbmVkKXJldHVybiB0aGlzO2lmKG49PT10fHxuLmxpc3RlbmVyPT09dCl7aWYoLS10aGlzLl9ldmVudHNDb3VudD09PTApdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7ZWxzZXtkZWxldGUgcltlXTtpZihyLnJlbW92ZUxpc3RlbmVyKXRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSxuLmxpc3RlbmVyfHx0KX19ZWxzZSBpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7aT0tMTtmb3Iocz1uLmxlbmd0aC0xO3M+PTA7cy0tKXtpZihuW3NdPT09dHx8bltzXS5saXN0ZW5lcj09PXQpe289bltzXS5saXN0ZW5lcjtpPXM7YnJlYWt9fWlmKGk8MClyZXR1cm4gdGhpcztpZihpPT09MCluLnNoaWZ0KCk7ZWxzZXtzcGxpY2VPbmUobixpKX1pZihuLmxlbmd0aD09PTEpcltlXT1uWzBdO2lmKHIucmVtb3ZlTGlzdGVuZXIhPT11bmRlZmluZWQpdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLG98fHQpfXJldHVybiB0aGlzfTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZj1FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO0V2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhlKXt2YXIgdCxuLHI7bj10aGlzLl9ldmVudHM7aWYobj09PXVuZGVmaW5lZClyZXR1cm4gdGhpcztpZihuLnJlbW92ZUxpc3RlbmVyPT09dW5kZWZpbmVkKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fZXZlbnRzQ291bnQ9MH1lbHNlIGlmKG5bZV0hPT11bmRlZmluZWQpe2lmKC0tdGhpcy5fZXZlbnRzQ291bnQ9PT0wKXRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpO2Vsc2UgZGVsZXRlIG5bZV19cmV0dXJuIHRoaXN9aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3ZhciBpPU9iamVjdC5rZXlzKG4pO3ZhciBzO2ZvcihyPTA7cjxpLmxlbmd0aDsrK3Ipe3M9aVtyXTtpZihzPT09XCJyZW1vdmVMaXN0ZW5lclwiKWNvbnRpbnVlO3RoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHMpfXRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwicmVtb3ZlTGlzdGVuZXJcIik7dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fZXZlbnRzQ291bnQ9MDtyZXR1cm4gdGhpc310PW5bZV07aWYodHlwZW9mIHQ9PT1cImZ1bmN0aW9uXCIpe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSx0KX1lbHNlIGlmKHQhPT11bmRlZmluZWQpe2ZvcihyPXQubGVuZ3RoLTE7cj49MDtyLS0pe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSx0W3JdKX19cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIF9saXN0ZW5lcnMoZSx0LG4pe3ZhciByPWUuX2V2ZW50cztpZihyPT09dW5kZWZpbmVkKXJldHVybltdO3ZhciBpPXJbdF07aWYoaT09PXVuZGVmaW5lZClyZXR1cm5bXTtpZih0eXBlb2YgaT09PVwiZnVuY3Rpb25cIilyZXR1cm4gbj9baS5saXN0ZW5lcnx8aV06W2ldO3JldHVybiBuP3Vud3JhcExpc3RlbmVycyhpKTphcnJheUNsb25lKGksaS5sZW5ndGgpfUV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uIGxpc3RlbmVycyhlKXtyZXR1cm4gX2xpc3RlbmVycyh0aGlzLGUsdHJ1ZSl9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uIHJhd0xpc3RlbmVycyhlKXtyZXR1cm4gX2xpc3RlbmVycyh0aGlzLGUsZmFsc2UpfTtFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiBlLmxpc3RlbmVyQ291bnQ9PT1cImZ1bmN0aW9uXCIpe3JldHVybiBlLmxpc3RlbmVyQ291bnQodCl9ZWxzZXtyZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGUsdCl9fTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9bGlzdGVuZXJDb3VudDtmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih0IT09dW5kZWZpbmVkKXt2YXIgbj10W2VdO2lmKHR5cGVvZiBuPT09XCJmdW5jdGlvblwiKXtyZXR1cm4gMX1lbHNlIGlmKG4hPT11bmRlZmluZWQpe3JldHVybiBuLmxlbmd0aH19cmV0dXJuIDB9RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uIGV2ZW50TmFtZXMoKXtyZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQ+MD9yKHRoaXMuX2V2ZW50cyk6W119O2Z1bmN0aW9uIGFycmF5Q2xvbmUoZSx0KXt2YXIgbj1uZXcgQXJyYXkodCk7Zm9yKHZhciByPTA7cjx0OysrciluW3JdPWVbcl07cmV0dXJuIG59ZnVuY3Rpb24gc3BsaWNlT25lKGUsdCl7Zm9yKDt0KzE8ZS5sZW5ndGg7dCsrKWVbdF09ZVt0KzFdO2UucG9wKCl9ZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGUpe3ZhciB0PW5ldyBBcnJheShlLmxlbmd0aCk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24pe3Rbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXX1yZXR1cm4gdH1mdW5jdGlvbiBvbmNlKGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe2Z1bmN0aW9uIGVycm9yTGlzdGVuZXIobil7ZS5yZW1vdmVMaXN0ZW5lcih0LHJlc29sdmVyKTtyKG4pfWZ1bmN0aW9uIHJlc29sdmVyKCl7aWYodHlwZW9mIGUucmVtb3ZlTGlzdGVuZXI9PT1cImZ1bmN0aW9uXCIpe2UucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGVycm9yTGlzdGVuZXIpfW4oW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKX1ldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZSx0LHJlc29sdmVyLHtvbmNlOnRydWV9KTtpZih0IT09XCJlcnJvclwiKXthZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlLGVycm9yTGlzdGVuZXIse29uY2U6dHJ1ZX0pfX0pKX1mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlLHQsbil7aWYodHlwZW9mIGUub249PT1cImZ1bmN0aW9uXCIpe2V2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlLFwiZXJyb3JcIix0LG4pfX1mdW5jdGlvbiBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZSx0LG4scil7aWYodHlwZW9mIGUub249PT1cImZ1bmN0aW9uXCIpe2lmKHIub25jZSl7ZS5vbmNlKHQsbil9ZWxzZXtlLm9uKHQsbil9fWVsc2UgaWYodHlwZW9mIGUuYWRkRXZlbnRMaXN0ZW5lcj09PVwiZnVuY3Rpb25cIil7ZS5hZGRFdmVudExpc3RlbmVyKHQsKGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihpKXtpZihyLm9uY2Upe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHdyYXBMaXN0ZW5lcil9bihpKX0pKX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpfX19fTt2YXIgdD17fTtmdW5jdGlvbiBfX25jY3dwY2tfcmVxdWlyZV9fKG4pe3ZhciByPXRbbl07aWYociE9PXVuZGVmaW5lZCl7cmV0dXJuIHIuZXhwb3J0c312YXIgaT10W25dPXtleHBvcnRzOnt9fTt2YXIgcz10cnVlO3RyeXtlW25dKGksaS5leHBvcnRzLF9fbmNjd3Bja19yZXF1aXJlX18pO3M9ZmFsc2V9ZmluYWxseXtpZihzKWRlbGV0ZSB0W25dfXJldHVybiBpLmV4cG9ydHN9aWYodHlwZW9mIF9fbmNjd3Bja19yZXF1aXJlX18hPT1cInVuZGVmaW5lZFwiKV9fbmNjd3Bja19yZXF1aXJlX18uYWI9X19kaXJuYW1lK1wiL1wiO3ZhciBuPV9fbmNjd3Bja19yZXF1aXJlX18oODY0KTttb2R1bGUuZXhwb3J0cz1ufSkoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/compiled/events/events.js\n"));

/***/ }),

/***/ "./node_modules/next/dist/compiled/process/browser.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/compiled/process/browser.js ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){var e={229:function(e){var t=e.exports={};var r;var n;function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}(function(){try{if(typeof setTimeout===\"function\"){r=setTimeout}else{r=defaultSetTimout}}catch(e){r=defaultSetTimout}try{if(typeof clearTimeout===\"function\"){n=clearTimeout}else{n=defaultClearTimeout}}catch(e){n=defaultClearTimeout}})();function runTimeout(e){if(r===setTimeout){return setTimeout(e,0)}if((r===defaultSetTimout||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout){return clearTimeout(e)}if((n===defaultClearTimeout||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var i=[];var o=false;var u;var a=-1;function cleanUpNextTick(){if(!o||!u){return}o=false;if(u.length){i=u.concat(i)}else{a=-1}if(i.length){drainQueue()}}function drainQueue(){if(o){return}var e=runTimeout(cleanUpNextTick);o=true;var t=i.length;while(t){u=i;i=[];while(++a<t){if(u){u[a].run()}}a=-1;t=i.length}u=null;o=false;runClearTimeout(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new Item(e,t));if(i.length===1&&!o){runTimeout(drainQueue)}};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};t.title=\"browser\";t.browser=true;t.env={};t.argv=[];t.version=\"\";t.versions={};function noop(){}t.on=noop;t.addListener=noop;t.once=noop;t.off=noop;t.removeListener=noop;t.removeAllListeners=noop;t.emit=noop;t.prependListener=noop;t.prependOnceListener=noop;t.listeners=function(e){return[]};t.binding=function(e){throw new Error(\"process.binding is not supported\")};t.cwd=function(){return\"/\"};t.chdir=function(e){throw new Error(\"process.chdir is not supported\")};t.umask=function(){return 0}}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var r=__nccwpck_require__(229);module.exports=r})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3Byb2Nlc3MvYnJvd3Nlci5qcy5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsWUFBWSxPQUFPLGdCQUFnQixtQkFBbUIsTUFBTSxNQUFNLDRCQUE0QixtREFBbUQsK0JBQStCLHFEQUFxRCxZQUFZLElBQUksbUNBQW1DLGFBQWEsS0FBSyxvQkFBb0IsU0FBUyxtQkFBbUIsSUFBSSxxQ0FBcUMsZUFBZSxLQUFLLHVCQUF1QixTQUFTLHVCQUF1QixJQUFJLHVCQUF1QixtQkFBbUIsdUJBQXVCLDJDQUEyQyxhQUFhLHVCQUF1QixJQUFJLGNBQWMsU0FBUyxJQUFJLHdCQUF3QixTQUFTLDBCQUEwQiw0QkFBNEIscUJBQXFCLHVCQUF1QixnREFBZ0QsZUFBZSx1QkFBdUIsSUFBSSxZQUFZLFNBQVMsSUFBSSxzQkFBc0IsU0FBUyx3QkFBd0IsU0FBUyxZQUFZLE1BQU0sU0FBUywyQkFBMkIsV0FBVyxPQUFPLFFBQVEsYUFBYSxjQUFjLEtBQUssS0FBSyxhQUFhLGNBQWMsc0JBQXNCLE1BQU0sT0FBTyxrQ0FBa0MsT0FBTyxlQUFlLFNBQVMsSUFBSSxLQUFLLGFBQWEsTUFBTSxZQUFZLEtBQUssV0FBVyxPQUFPLFFBQVEsbUJBQW1CLHVCQUF1QixvQ0FBb0MsdUJBQXVCLFlBQVksbUJBQW1CLEtBQUsscUJBQXFCLHNCQUFzQixxQkFBcUIseUJBQXlCLG1CQUFtQixXQUFXLGFBQWEsOEJBQThCLGlDQUFpQyxrQkFBa0IsZUFBZSxTQUFTLFVBQVUsYUFBYSxjQUFjLGlCQUFpQixVQUFVLG1CQUFtQixZQUFZLFdBQVcsc0JBQXNCLDBCQUEwQixZQUFZLHVCQUF1QiwyQkFBMkIsd0JBQXdCLFVBQVUsc0JBQXNCLHFEQUFxRCxpQkFBaUIsV0FBVyxvQkFBb0IsbURBQW1ELG1CQUFtQixZQUFZLFNBQVMsZ0NBQWdDLFdBQVcsa0JBQWtCLGlCQUFpQixZQUFZLFlBQVksV0FBVyxJQUFJLHNDQUFzQyxRQUFRLFFBQVEsaUJBQWlCLGlCQUFpQixtRUFBbUUsU0FBUyxLQUFLLCtCQUErQixpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9wcm9jZXNzL2Jyb3dzZXIuanM/MWIxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXt2YXIgZT17MjI5OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZXhwb3J0cz17fTt2YXIgcjt2YXIgbjtmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfShmdW5jdGlvbigpe3RyeXtpZih0eXBlb2Ygc2V0VGltZW91dD09PVwiZnVuY3Rpb25cIil7cj1zZXRUaW1lb3V0fWVsc2V7cj1kZWZhdWx0U2V0VGltb3V0fX1jYXRjaChlKXtyPWRlZmF1bHRTZXRUaW1vdXR9dHJ5e2lmKHR5cGVvZiBjbGVhclRpbWVvdXQ9PT1cImZ1bmN0aW9uXCIpe249Y2xlYXJUaW1lb3V0fWVsc2V7bj1kZWZhdWx0Q2xlYXJUaW1lb3V0fX1jYXRjaChlKXtuPWRlZmF1bHRDbGVhclRpbWVvdXR9fSkoKTtmdW5jdGlvbiBydW5UaW1lb3V0KGUpe2lmKHI9PT1zZXRUaW1lb3V0KXtyZXR1cm4gc2V0VGltZW91dChlLDApfWlmKChyPT09ZGVmYXVsdFNldFRpbW91dHx8IXIpJiZzZXRUaW1lb3V0KXtyPXNldFRpbWVvdXQ7cmV0dXJuIHNldFRpbWVvdXQoZSwwKX10cnl7cmV0dXJuIHIoZSwwKX1jYXRjaCh0KXt0cnl7cmV0dXJuIHIuY2FsbChudWxsLGUsMCl9Y2F0Y2godCl7cmV0dXJuIHIuY2FsbCh0aGlzLGUsMCl9fX1mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQoZSl7aWYobj09PWNsZWFyVGltZW91dCl7cmV0dXJuIGNsZWFyVGltZW91dChlKX1pZigobj09PWRlZmF1bHRDbGVhclRpbWVvdXR8fCFuKSYmY2xlYXJUaW1lb3V0KXtuPWNsZWFyVGltZW91dDtyZXR1cm4gY2xlYXJUaW1lb3V0KGUpfXRyeXtyZXR1cm4gbihlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIG4uY2FsbChudWxsLGUpfWNhdGNoKHQpe3JldHVybiBuLmNhbGwodGhpcyxlKX19fXZhciBpPVtdO3ZhciBvPWZhbHNlO3ZhciB1O3ZhciBhPS0xO2Z1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpe2lmKCFvfHwhdSl7cmV0dXJufW89ZmFsc2U7aWYodS5sZW5ndGgpe2k9dS5jb25jYXQoaSl9ZWxzZXthPS0xfWlmKGkubGVuZ3RoKXtkcmFpblF1ZXVlKCl9fWZ1bmN0aW9uIGRyYWluUXVldWUoKXtpZihvKXtyZXR1cm59dmFyIGU9cnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO289dHJ1ZTt2YXIgdD1pLmxlbmd0aDt3aGlsZSh0KXt1PWk7aT1bXTt3aGlsZSgrK2E8dCl7aWYodSl7dVthXS5ydW4oKX19YT0tMTt0PWkubGVuZ3RofXU9bnVsbDtvPWZhbHNlO3J1bkNsZWFyVGltZW91dChlKX10Lm5leHRUaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dFtyLTFdPWFyZ3VtZW50c1tyXX19aS5wdXNoKG5ldyBJdGVtKGUsdCkpO2lmKGkubGVuZ3RoPT09MSYmIW8pe3J1blRpbWVvdXQoZHJhaW5RdWV1ZSl9fTtmdW5jdGlvbiBJdGVtKGUsdCl7dGhpcy5mdW49ZTt0aGlzLmFycmF5PXR9SXRlbS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX07dC50aXRsZT1cImJyb3dzZXJcIjt0LmJyb3dzZXI9dHJ1ZTt0LmVudj17fTt0LmFyZ3Y9W107dC52ZXJzaW9uPVwiXCI7dC52ZXJzaW9ucz17fTtmdW5jdGlvbiBub29wKCl7fXQub249bm9vcDt0LmFkZExpc3RlbmVyPW5vb3A7dC5vbmNlPW5vb3A7dC5vZmY9bm9vcDt0LnJlbW92ZUxpc3RlbmVyPW5vb3A7dC5yZW1vdmVBbGxMaXN0ZW5lcnM9bm9vcDt0LmVtaXQ9bm9vcDt0LnByZXBlbmRMaXN0ZW5lcj1ub29wO3QucHJlcGVuZE9uY2VMaXN0ZW5lcj1ub29wO3QubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybltdfTt0LmJpbmRpbmc9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9O3QuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9O3QuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfTt0LnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fX07dmFyIHQ9e307ZnVuY3Rpb24gX19uY2N3cGNrX3JlcXVpcmVfXyhyKXt2YXIgbj10W3JdO2lmKG4hPT11bmRlZmluZWQpe3JldHVybiBuLmV4cG9ydHN9dmFyIGk9dFtyXT17ZXhwb3J0czp7fX07dmFyIG89dHJ1ZTt0cnl7ZVtyXShpLGkuZXhwb3J0cyxfX25jY3dwY2tfcmVxdWlyZV9fKTtvPWZhbHNlfWZpbmFsbHl7aWYobylkZWxldGUgdFtyXX1yZXR1cm4gaS5leHBvcnRzfWlmKHR5cGVvZiBfX25jY3dwY2tfcmVxdWlyZV9fIT09XCJ1bmRlZmluZWRcIilfX25jY3dwY2tfcmVxdWlyZV9fLmFiPV9fZGlybmFtZStcIi9cIjt2YXIgcj1fX25jY3dwY2tfcmVxdWlyZV9fKDIyOSk7bW9kdWxlLmV4cG9ydHM9cn0pKCk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/next/dist/compiled/process/browser.js\n"));

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages/_app","main"], function() { return __webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fjx%2FWORKSPACE%2FPROJECTS%2FCHESS%2Fsrc%2Fpages%2Findex.tsx&page=%2F!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);