<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEON CHESS - Demonstra√ß√£o das Melhorias</title>
    
    <!-- CSS Consolidado -->
    <link rel="stylesheet" href="/web/styles/consolidated-theme.css">
    
    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        .demo-section {
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .demo-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #0f3460, #e94560);
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .notification-demo {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }
        
        .chess-demo {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .chess-square-demo {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .chess-square-demo:hover {
            transform: scale(1.1);
        }
        
        .chess-square-demo.white {
            background: #f0d9b5;
            color: #b58863;
        }
        
        .chess-square-demo.black {
            background: #b58863;
            color: #f0d9b5;
        }
        
        .chess-square-demo.selected {
            background: #e94560 !important;
            color: white !important;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        .feature-badge {
            display: inline-block;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
            margin: 0.25rem;
        }
        
        .loading-demo {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #e94560;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .progress-demo {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center mt-5 mb-5">
            <h1 class="fade-in">üöÄ AEON CHESS - Demonstra√ß√£o das Melhorias</h1>
            <p class="text-secondary slide-up">Fase 3: Otimiza√ß√µes de Performance e UX/UI</p>
        </header>

        <!-- Se√ß√£o de Performance -->
        <section class="demo-section">
            <h2>‚ö° Otimiza√ß√µes de Performance</h2>
            <p>Implementamos um sistema avan√ßado de otimiza√ß√£o com cache inteligente, lazy loading e compress√£o de dados.</p>
            
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>üîÑ Sistema de Cache</h3>
                    <p>Cache inteligente com TTL configur√°vel e estat√≠sticas de performance.</p>
                    <div class="code-block">
// Exemplo de uso
const optimizer = new PerformanceOptimizer();
optimizer.setCache('chess-data', data, 300000); // 5 min
const cached = optimizer.getCache('chess-data');
                    </div>
                    <button class="btn btn-primary" onclick="testCache()">Testar Cache</button>
                </div>
                
                <div class="demo-card">
                    <h3>üì± Lazy Loading</h3>
                    <p>Carregamento sob demanda para componentes e imagens.</p>
                    <div class="code-block">
// Lazy load autom√°tico
&lt;div data-lazy-load="chess-board"&gt;
    Carregando...
&lt;/div&gt;
                    </div>
                    <button class="btn btn-secondary" onclick="testLazyLoading()">Testar Lazy Loading</button>
                </div>
                
                <div class="demo-card">
                    <h3>üóúÔ∏è Compress√£o de Dados</h3>
                    <p>Compress√£o inteligente para dados JSON grandes.</p>
                    <div class="code-block">
// Compress√£o autom√°tica
const compressed = optimizer.compressData(largeData);
const original = optimizer.decompressData(compressed);
                    </div>
                    <button class="btn btn-secondary" onclick="testCompression()">Testar Compress√£o</button>
                </div>
            </div>
            
            <div class="performance-metrics" id="performance-metrics">
                <div class="metric-card">
                    <div class="metric-value" id="cache-hits">0</div>
                    <div class="metric-label">Cache Hits</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="cache-misses">0</div>
                    <div class="metric-label">Cache Misses</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="hit-rate">0%</div>
                    <div class="metric-label">Taxa de Acerto</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="avg-load-time">0ms</div>
                    <div class="metric-label">Tempo M√©dio</div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Notifica√ß√µes -->
        <section class="demo-section">
            <h2>üîî Sistema de Notifica√ß√µes Avan√ßado</h2>
            <p>Sistema completo de notifica√ß√µes com diferentes tipos, a√ß√µes e persist√™ncia.</p>
            
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>üì¢ Tipos de Notifica√ß√£o</h3>
                    <div class="notification-demo">
                        <button class="btn btn-primary" onclick="showNotification('success')">‚úÖ Sucesso</button>
                        <button class="btn btn-secondary" onclick="showNotification('warning')">‚ö†Ô∏è Aviso</button>
                        <button class="btn btn-secondary" onclick="showNotification('error')">‚ùå Erro</button>
                        <button class="btn btn-secondary" onclick="showNotification('info')">‚ÑπÔ∏è Info</button>
                    </div>
                </div>
                
                <div class="demo-card">
                    <h3>üéØ Notifica√ß√µes com A√ß√µes</h3>
                    <p>Notifica√ß√µes interativas com bot√µes de a√ß√£o.</p>
                    <button class="btn btn-primary" onclick="showNotificationWithActions()">Mostrar com A√ß√µes</button>
                </div>
                
                <div class="demo-card">
                    <h3>üìä Notifica√ß√£o de Progresso</h3>
                    <p>Barra de progresso em tempo real.</p>
                    <button class="btn btn-primary" onclick="showProgressNotification()">Simular Progresso</button>
                </div>
            </div>
            
            <div class="demo-card">
                <h3>üé® Toast Notifications</h3>
                <p>Notifica√ß√µes tempor√°rias estilo toast.</p>
                <div class="notification-demo">
                    <button class="btn btn-secondary" onclick="showToast('Mensagem r√°pida!', 'success')">Toast Sucesso</button>
                    <button class="btn btn-secondary" onclick="showToast('Aviso r√°pido!', 'warning')">Toast Aviso</button>
                    <button class="btn btn-secondary" onclick="showToast('Erro r√°pido!', 'error')">Toast Erro</button>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de UI/UX -->
        <section class="demo-section">
            <h2>üé® Melhorias de UI/UX</h2>
            <p>Interface moderna com anima√ß√µes suaves e componentes responsivos.</p>
            
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>üé≠ Anima√ß√µes CSS</h3>
                    <p>Transi√ß√µes suaves e anima√ß√µes de entrada.</p>
                    <div class="demo-content">
                        <div class="fade-in">Fade In</div>
                        <div class="slide-up">Slide Up</div>
                        <div class="scale-in">Scale In</div>
                    </div>
                </div>
                
                <div class="demo-card">
                    <h3>‚ôüÔ∏è Tabuleiro de Xadrez</h3>
                    <p>Demonstra√ß√£o do tabuleiro otimizado.</p>
                    <div class="chess-demo">
                        <div class="chess-board" id="demo-board">
                            <!-- Tabuleiro ser√° gerado via JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="demo-card">
                    <h3>üéØ Estados de Carregamento</h3>
                    <p>Indicadores visuais de carregamento.</p>
                    <div class="loading-demo"></div>
                    <div class="progress-demo">
                        <div class="progress-bar" id="demo-progress"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Funcionalidades -->
        <section class="demo-section">
            <h2>‚öôÔ∏è Funcionalidades Avan√ßadas</h2>
            <p>Recursos implementados para melhorar a experi√™ncia do usu√°rio.</p>
            
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>üîß Configura√ß√µes</h3>
                    <p>Personaliza√ß√£o do sistema de notifica√ß√µes.</p>
                    <div class="demo-content">
                        <label class="form-label">Posi√ß√£o das Notifica√ß√µes</label>
                        <select class="form-input" onchange="changeNotificationPosition(this.value)">
                            <option value="top-right">Top Right</option>
                            <option value="top-left">Top Left</option>
                            <option value="bottom-right">Bottom Right</option>
                            <option value="bottom-left">Bottom Left</option>
                        </select>
                    </div>
                </div>
                
                <div class="demo-card">
                    <h3>üìä Estat√≠sticas</h3>
                    <p>Monitoramento em tempo real.</p>
                    <button class="btn btn-secondary" onclick="showStats()">Ver Estat√≠sticas</button>
                </div>
                
                <div class="demo-card">
                    <h3>üéµ Controles de √Åudio</h3>
                    <p>Configura√ß√£o de sons e feedback.</p>
                    <div class="demo-content">
                        <label class="form-label">
                            <input type="checkbox" checked onchange="toggleSound(this.checked)"> 
                            Sons Habilitados
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Testes -->
        <section class="demo-section">
            <h2>üß™ Testes e Valida√ß√£o</h2>
            <p>Testes automatizados das funcionalidades implementadas.</p>
            
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>üîç Teste de Performance</h3>
                    <p>Valida√ß√£o das otimiza√ß√µes implementadas.</p>
                    <button class="btn btn-primary" onclick="runPerformanceTest()">Executar Teste</button>
                    <div id="performance-results"></div>
                </div>
                
                <div class="demo-card">
                    <h3>üì± Teste de Responsividade</h3>
                    <p>Verifica√ß√£o da adapta√ß√£o mobile.</p>
                    <button class="btn btn-secondary" onclick="testResponsiveness()">Testar Mobile</button>
                </div>
                
                <div class="demo-card">
                    <h3>üé® Teste de Tema</h3>
                    <p>Valida√ß√£o do sistema de cores.</p>
                    <button class="btn btn-secondary" onclick="testTheme()">Testar Tema</button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center mt-5 mb-5">
            <div class="feature-badge">Performance</div>
            <div class="feature-badge">UX/UI</div>
            <div class="feature-badge">Notifica√ß√µes</div>
            <div class="feature-badge">Responsivo</div>
            <div class="feature-badge">Acess√≠vel</div>
            <div class="feature-badge">Moderno</div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="/web/utils/performance-optimizer.js"></script>
    <script src="/web/utils/notification-system.js"></script>
    <script src="/web/utils/error-handler.js"></script>
    <script src="/web/utils/compatibility-layer.js"></script>
    
    <script>
        // Inicializa√ß√£o
        let performanceOptimizer;
        let demoBoard;
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeDemo();
        });
        
        function initializeDemo() {
            // Inicializar otimizador de performance
            performanceOptimizer = new PerformanceOptimizer();
            
            // Criar tabuleiro de demonstra√ß√£o
            createDemoBoard();
            
            // Atualizar m√©tricas
            updatePerformanceMetrics();
            
            // Mostrar notifica√ß√£o de boas-vindas
            notificationSystem.success('Demonstra√ß√£o das Melhorias carregada com sucesso!', {
                details: 'Todas as funcionalidades est√£o funcionando perfeitamente.'
            });
        }
        
        function createDemoBoard() {
            const board = document.getElementById('demo-board');
            if (!board) return;
            
            const pieces = ['‚ôî', '‚ôï', '‚ôñ', '‚ôó', '‚ôò', '‚ôô', '‚ôö', '‚ôõ', '‚ôú', '‚ôù', '‚ôû', '‚ôü'];
            
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    const square = document.createElement('div');
                    square.className = `chess-square-demo ${(i + j) % 2 === 0 ? 'white' : 'black'}`;
                    square.textContent = pieces[Math.floor(Math.random() * pieces.length)];
                    
                    square.addEventListener('click', function() {
                        // Remover sele√ß√£o anterior
                        document.querySelectorAll('.chess-square-demo.selected').forEach(s => s.classList.remove('selected'));
                        // Selecionar atual
                        this.classList.add('selected');
                    });
                    
                    board.appendChild(square);
                }
            }
        }
        
        // ===== FUN√á√ïES DE TESTE =====
        
        function testCache() {
            const testData = { test: 'dados de teste', timestamp: Date.now() };
            performanceOptimizer.setCache('test-data', testData);
            
            const cached = performanceOptimizer.getCache('test-data');
            if (cached) {
                notificationSystem.success('Cache funcionando!', {
                    details: 'Dados armazenados e recuperados com sucesso.'
                });
            }
            
            updatePerformanceMetrics();
        }
        
        function testLazyLoading() {
            notificationSystem.info('Lazy Loading testado!', {
                details: 'Componentes carregados sob demanda.'
            });
        }
        
        function testCompression() {
            const largeData = {
                moves: Array(1000).fill().map((_, i) => ({
                    position: `pos_${i}`,
                    move: `move_${i}`,
                    color: i % 2 === 0 ? 'white' : 'black',
                    piece: `piece_${i}`,
                    timestamp: Date.now() + i
                }))
            };
            
            const compressed = performanceOptimizer.compressData(largeData);
            const decompressed = performanceOptimizer.decompressData(compressed);
            
            if (decompressed) {
                const compressionRatio = ((1 - compressed.data.length / compressed.originalSize) * 100).toFixed(1);
                notificationSystem.success('Compress√£o funcionando!', {
                    details: `Taxa de compress√£o: ${compressionRatio}%`
                });
            }
        }
        
        function showNotification(type) {
            const messages = {
                success: 'Opera√ß√£o realizada com sucesso!',
                warning: 'Aten√ß√£o! Esta a√ß√£o pode ter consequ√™ncias.',
                error: 'Ocorreu um erro inesperado.',
                info: 'Informa√ß√£o importante para voc√™.'
            };
            
            notificationSystem[type](messages[type]);
        }
        
        function showNotificationWithActions() {
            notificationSystem.show('Deseja continuar com esta a√ß√£o?', 'warning', {
                actions: [
                    {
                        key: 'continue',
                        label: 'Continuar',
                        callback: () => {
                            notificationSystem.success('A√ß√£o confirmada!');
                        }
                    },
                    {
                        key: 'cancel',
                        label: 'Cancelar',
                        callback: () => {
                            notificationSystem.info('A√ß√£o cancelada.');
                        }
                    }
                ],
                persistent: true
            });
        }
        
        function showProgressNotification() {
            let progress = 0;
            const notification = notificationSystem.showProgress('Processando dados...', (updateProgress) => {
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                    }
                    updateProgress(progress);
                }, 200);
            });
        }
        
        function showToast(message, type) {
            notificationSystem.showToast(message, type, 3000);
        }
        
        function changeNotificationPosition(position) {
            notificationSystem.updateSettings({ position });
            notificationSystem.info(`Posi√ß√£o das notifica√ß√µes alterada para: ${position}`);
        }
        
        function toggleSound(enabled) {
            notificationSystem.updateSettings({ soundEnabled: enabled });
            notificationSystem.info(`Sons ${enabled ? 'habilitados' : 'desabilitados'}`);
        }
        
        function showStats() {
            const stats = notificationSystem.getStats();
            const perfStats = performanceOptimizer.getPerformanceReport();
            
            const message = `
                Notifica√ß√µes: ${stats.total}
                Cache Hits: ${perfStats.cacheStats.hits}
                Cache Misses: ${perfStats.cacheStats.misses}
                Taxa de Acerto: ${perfStats.cacheStats.hitRate}
            `;
            
            notificationSystem.info('Estat√≠sticas do Sistema', {
                details: message,
                persistent: true
            });
        }
        
        function runPerformanceTest() {
            const results = document.getElementById('performance-results');
            results.innerHTML = '<div class="loading-demo"></div> Testando...';
            
            setTimeout(() => {
                const perfStats = performanceOptimizer.getPerformanceReport();
                results.innerHTML = `
                    <div class="card">
                        <h4>Resultados do Teste</h4>
                        <p><strong>Cache Hit Rate:</strong> ${perfStats.cacheStats.hitRate}</p>
                        <p><strong>Tempo M√©dio:</strong> ${perfStats.performance.averageLoadTime}</p>
                        <p><strong>Total de Medi√ß√µes:</strong> ${perfStats.performance.totalMeasurements}</p>
                    </div>
                `;
                
                notificationSystem.success('Teste de performance conclu√≠do!');
            }, 2000);
        }
        
        function testResponsiveness() {
            // Simular teste de responsividade
            const width = window.innerWidth;
            let message = '';
            
            if (width < 768) {
                message = 'Layout mobile detectado - Responsivo!';
            } else if (width < 1024) {
                message = 'Layout tablet detectado - Responsivo!';
            } else {
                message = 'Layout desktop detectado - Responsivo!';
            }
            
            notificationSystem.info(message);
        }
        
        function testTheme() {
            // Testar sistema de cores
            const root = document.documentElement;
            const currentTheme = getComputedStyle(root).getPropertyValue('--primary-color');
            
            notificationSystem.info('Tema funcionando!', {
                details: `Cor prim√°ria: ${currentTheme}`
            });
        }
        
        function updatePerformanceMetrics() {
            if (!performanceOptimizer) return;
            
            const stats = performanceOptimizer.getPerformanceReport();
            
            document.getElementById('cache-hits').textContent = stats.cacheStats.hits;
            document.getElementById('cache-misses').textContent = stats.cacheStats.misses;
            document.getElementById('hit-rate').textContent = stats.cacheStats.hitRate;
            document.getElementById('avg-load-time').textContent = stats.performance.averageLoadTime;
        }
        
        // Atualizar m√©tricas periodicamente
        setInterval(updatePerformanceMetrics, 5000);
    </script>
</body>
</html>
