<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Ativa√ß√£o ARKITECT</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 20px;
        }

        .control-panel {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .button:hover {
            background: #00ffff;
        }

        .button:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .status {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff00;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-size: 12px;
        }

        .log {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 4px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-size: 11px;
            font-family: 'Courier New', monospace;
        }

        .log-line {
            margin: 2px 0;
            padding: 2px 0;
        }

        .error {
            color: #ff0000;
        }

        .success {
            color: #00ff00;
        }

        .warning {
            color: #ffff00;
        }

        .info {
            color: #00ffff;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è ARKITECT - Teste de Ativa√ß√£o</h1>
            <p>Sistema de Esquadrinhamento de Tabuleiro de Xadrez</p>
        </div>

        <div class="control-panel">
            <h3>üéÆ Painel de Controle</h3>
            <button class="button" onclick="startSystem()">‚ñ∂Ô∏è INICIAR SISTEMA</button>
            <button class="button" onclick="stopSystem()">‚èπÔ∏è PARAR SISTEMA</button>
            <button class="button" onclick="testSystem()">üß™ TESTAR AN√ÅLISE</button>
            <button class="button" onclick="checkStatus()">üìä VER STATUS</button>
            <button class="button" onclick="forceActivation()">‚ö° FOR√áAR ATIVA√á√ÉO</button>
            <button class="button" onclick="forceStart()">üöÄ FOR√áAR IN√çCIO</button>
            <button class="button" onclick="debugSystem()">üîç DEBUG SISTEMA</button>
            <button class="button" onclick="clearLog()">üóëÔ∏è LIMPAR LOG</button>
        </div>

        <div class="status" id="status">
            <h3>üìä Status do Sistema</h3>
            <div id="statusContent">Aguardando inicializa√ß√£o...</div>
        </div>

        <div class="log" id="log">
            <div class="log-line info">üöÄ Sistema de teste ARKITECT carregado</div>
            <div class="log-line info">‚è≥ Aguardando comandos...</div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para adicionar logs
        function addLog(message, type = 'info') {
            const log = document.getElementById('log');
            const logLine = document.createElement('div');
            logLine.className = `log-line ${type}`;
            logLine.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(logLine);
            log.scrollTop = log.scrollHeight;
        }

        // Fun√ß√£o para atualizar status
        function updateStatus(status) {
            const statusContent = document.getElementById('statusContent');
            statusContent.innerHTML = `
                <div><strong>Nome:</strong> ${status.name || 'N/A'}</div>
                <div><strong>Vers√£o:</strong> ${status.version || 'N/A'}</div>
                <div><strong>Status:</strong> ${status.isActive ? 'üü¢ ATIVO' : 'üî¥ INATIVO'}</div>
                <div><strong>Tabuleiro:</strong> ${status.board || 'N/A'}</div>
                <div><strong>Base Pro:</strong> ${status.proDatabase || 'N/A'}</div>
                <div><strong>Timestamp:</strong> ${status.timestamp || 'N/A'}</div>
            `;
        }

        // Fun√ß√£o para iniciar sistema
        function startSystem() {
            addLog('‚ñ∂Ô∏è Tentando iniciar sistema ARKITECT...', 'info');

            if (window.startArkitect) {
                window.startArkitect();
                addLog('‚úÖ Fun√ß√£o startArkitect() chamada', 'success');

                setTimeout(() => {
                    checkStatus();
                }, 1000);
            } else {
                addLog('‚ùå Fun√ß√£o startArkitect() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para parar sistema
        function stopSystem() {
            addLog('‚èπÔ∏è Tentando parar sistema ARKITECT...', 'info');

            if (window.stopArkitect) {
                window.stopArkitect();
                addLog('‚úÖ Fun√ß√£o stopArkitect() chamada', 'success');

                setTimeout(() => {
                    checkStatus();
                }, 1000);
            } else {
                addLog('‚ùå Fun√ß√£o stopArkitect() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para testar sistema
        function testSystem() {
            addLog('üß™ Tentando testar sistema ARKITECT...', 'info');

            if (window.testArkitect) {
                window.testArkitect();
                addLog('‚úÖ Fun√ß√£o testArkitect() chamada', 'success');
            } else {
                addLog('‚ùå Fun√ß√£o testArkitect() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para verificar status
        function checkStatus() {
            addLog('üìä Verificando status do sistema...', 'info');

            if (window.getArkitectStatus) {
                const status = window.getArkitectStatus();
                updateStatus(status);
                addLog('‚úÖ Status obtido com sucesso', 'success');
                addLog(`üìã Status: ${JSON.stringify(status, null, 2)}`, 'info');
            } else {
                addLog('‚ùå Fun√ß√£o getArkitectStatus() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para for√ßar ativa√ß√£o
        function forceActivation() {
            addLog('‚ö° For√ßando ativa√ß√£o do sistema...', 'warning');

            // Verificar se o objeto existe
            if (window.arkitectSolution) {
                addLog('‚úÖ Objeto arkitectSolution encontrado', 'success');

                // For√ßar inicializa√ß√£o
                if (window.arkitectSolution.initialize) {
                    window.arkitectSolution.initialize();
                    addLog('‚úÖ M√©todo initialize() chamado', 'success');
                }

                // For√ßar ativa√ß√£o
                if (window.arkitectSolution.start) {
                    window.arkitectSolution.start();
                    addLog('‚úÖ M√©todo start() chamado', 'success');
                }

                setTimeout(() => {
                    checkStatus();
                }, 2000);
            } else {
                addLog('‚ùå Objeto arkitectSolution n√£o encontrado', 'error');
                addLog('üîç Tentando criar nova inst√¢ncia...', 'warning');

                // Tentar criar nova inst√¢ncia
                if (typeof ArkitectSimpleSolution !== 'undefined') {
                    window.arkitectSolution = new ArkitectSimpleSolution();
                    addLog('‚úÖ Nova inst√¢ncia criada', 'success');

                    setTimeout(() => {
                        if (window.arkitectSolution.start) {
                            window.arkitectSolution.start();
                            addLog('‚úÖ Sistema ativado manualmente', 'success');
                        }
                    }, 1000);
                } else {
                    addLog('‚ùå Classe ArkitectSimpleSolution n√£o encontrada', 'error');
                }
            }
        }

        // Fun√ß√£o para for√ßar in√≠cio
        function forceStart() {
            addLog('üöÄ For√ßando in√≠cio do sistema...', 'warning');

            if (window.forceArkitectStart) {
                window.forceArkitectStart();
                addLog('‚úÖ Fun√ß√£o forceArkitectStart() chamada', 'success');

                setTimeout(() => {
                    checkStatus();
                }, 3000);
            } else {
                addLog('‚ùå Fun√ß√£o forceArkitectStart() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para debug do sistema
        function debugSystem() {
            addLog('üîç Executando debug do sistema...', 'warning');

            if (window.debugArkitect) {
                window.debugArkitect();
                addLog('‚úÖ Fun√ß√£o debugArkitect() chamada - verifique o console', 'success');
            } else {
                addLog('‚ùå Fun√ß√£o debugArkitect() n√£o encontrada', 'error');
            }
        }

        // Fun√ß√£o para limpar log
        function clearLog() {
            const log = document.getElementById('log');
            log.innerHTML = '<div class="log-line info">üóëÔ∏è Log limpo</div>';
        }

        // Verificar status inicial
        setTimeout(() => {
            addLog('üîç Verificando status inicial...', 'info');
            checkStatus();
        }, 2000);

        // Verificar status periodicamente
        setInterval(() => {
            if (window.arkitectSolution && window.arkitectSolution.isActive) {
                addLog('üîÑ Sistema ativo - verificando status...', 'info');
                checkStatus();
            }
        }, 10000);
    </script>

    <!-- Carregar scripts necess√°rios -->
    <script src="/web/utils/chess-pro-database.js"></script>
    <script src="/web/utils/chess-pro-integration.js"></script>
    <script src="/web/utils/arkitect-simple-solution.js"></script>
</body>

</html>